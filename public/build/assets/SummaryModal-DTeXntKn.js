import{r as v,q as w,c as d,o as m,d as t,t as a,F as _,m as k,z as M,A as C,a as S,n as c,J as j}from"./vendor-D9AtPSqO.js";const D={class:"fixed inset-0 z-50 overflow-y-auto"},P={class:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},T={class:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-4xl sm:w-full"},A={class:"bg-white px-4 pt-5 pb-4 sm:p-6"},B={class:"sm:flex sm:items-start"},I={class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left w-full"},z={class:"mt-4"},V={class:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6"},$={class:"bg-gray-50 rounded-lg p-4"},E={class:"mt-1 text-2xl font-semibold text-gray-900"},F={class:"bg-green-50 rounded-lg p-4"},N={class:"mt-1 text-2xl font-semibold text-green-900"},U={class:"bg-yellow-50 rounded-lg p-4"},q={class:"mt-1 text-2xl font-semibold text-yellow-900"},G={class:"bg-blue-50 rounded-lg p-4"},H={class:"mt-1 text-2xl font-semibold text-blue-900"},J={class:"border rounded-lg overflow-hidden"},L={class:"min-w-full divide-y divide-gray-200"},O={class:"bg-white divide-y divide-gray-200"},R={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"},W={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},K={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},Q={class:"px-6 py-4 whitespace-nowrap"},X={class:"w-full bg-gray-200 rounded-full h-2"},Y={class:"mt-6"},Z={class:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse"},et={__name:"SummaryModal",props:{inspection:Object,allMenus:Array},emits:["close"],setup(u,{emit:g}){const n=u,p=g,r=v(""),i=w(()=>{const s=n.allMenus.length,e=n.allMenus.filter(l=>l.type==="menu"||l.type==="damage"&&l.has_data).length,o=n.allMenus.filter(l=>l.type==="damage"&&l.has_data).length;return{totalMenus:s,completed:e,inProgress:s-e,damageCount:o}}),x=s=>s.type==="damage"?s.has_data?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800":"bg-blue-100 text-blue-800",f=s=>s.type==="damage"?s.has_data?"Ada Data":"Belum Ada":"Menu Utama",y=s=>s.type==="damage"?s.has_data?"bg-green-600":"bg-gray-300":"bg-blue-600",b=s=>s.type==="damage"?s.has_data?100:0:100,h=async()=>{try{(await S.post(`/api/inspections/${n.inspection.id}/complete`,{notes:r.value})).data.success&&(p("close"),alert("Inspeksi berhasil diselesaikan!"))}catch(s){console.error("Error completing inspection:",s),alert("Gagal menyelesaikan inspeksi")}};return(s,e)=>(m(),d("div",D,[t("div",P,[e[10]||(e[10]=t("div",{class:"fixed inset-0 transition-opacity","aria-hidden":"true"},[t("div",{class:"absolute inset-0 bg-gray-500 opacity-75"})],-1)),t("div",T,[t("div",A,[t("div",B,[e[9]||(e[9]=t("div",{class:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-blue-100 sm:mx-0 sm:h-10 sm:w-10"},[t("svg",{class:"h-6 w-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})])],-1)),t("div",I,[e[8]||(e[8]=t("h3",{class:"text-lg leading-6 font-medium text-gray-900"}," Ringkasan Inspeksi ",-1)),t("div",z,[t("div",V,[t("div",$,[e[2]||(e[2]=t("div",{class:"text-sm font-medium text-gray-500"},"Total Menu",-1)),t("div",E,a(i.value.totalMenus),1)]),t("div",F,[e[3]||(e[3]=t("div",{class:"text-sm font-medium text-green-500"},"Selesai",-1)),t("div",N,a(i.value.completed),1)]),t("div",U,[e[4]||(e[4]=t("div",{class:"text-sm font-medium text-yellow-500"},"Dalam Proses",-1)),t("div",q,a(i.value.inProgress),1)]),t("div",G,[e[5]||(e[5]=t("div",{class:"text-sm font-medium text-blue-500"},"Damage",-1)),t("div",H,a(i.value.damageCount),1)])]),t("div",J,[t("table",L,[e[6]||(e[6]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Menu "),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Tipe "),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Status "),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Progress ")])],-1)),t("tbody",O,[(m(!0),d(_,null,k(u.allMenus,o=>(m(),d("tr",{key:o.id},[t("td",R,a(o.name),1),t("td",W,[t("span",{class:c(["inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",o.type==="menu"?"bg-blue-100 text-blue-800":"bg-yellow-100 text-yellow-800"])},a(o.type==="menu"?"Menu":"Damage"),3)]),t("td",K,[t("span",{class:c(["inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",x(o)])},a(f(o)),3)]),t("td",Q,[t("div",X,[t("div",{class:c(["h-2 rounded-full",y(o)]),style:j({width:b(o)+"%"})},null,6)])])]))),128))])])]),t("div",Y,[e[7]||(e[7]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Catatan Akhir Inspeksi ",-1)),M(t("textarea",{"onUpdate:modelValue":e[0]||(e[0]=o=>r.value=o),rows:"3",placeholder:"Tambahkan catatan keseluruhan inspeksi...",class:"shadow-sm focus:ring-blue-500 focus:border-blue-500 block w-full sm:text-sm border-gray-300 rounded-md"},null,512),[[C,r.value]])])])])])]),t("div",Z,[t("button",{onClick:h,type:"button",class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-green-600 text-base font-medium text-white hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 sm:ml-3 sm:w-auto sm:text-sm"}," Selesaikan Inspeksi "),t("button",{onClick:e[1]||(e[1]=o=>s.$emit("close")),type:"button",class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm"}," Tutup ")])])])]))}};export{et as default};
