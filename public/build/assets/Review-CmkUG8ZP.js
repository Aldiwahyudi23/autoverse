import{q as k,c as d,o as i,d as e,f as S,b as _,n as M,t as b,r as C,g as F,E as U,J as ne,z as j,A,u as v,F as O,m as oe,G,e as W,x as ae,y as ie,k as D,p as le,j as L,w as V,v as re,S as B,W as J}from"./vendor-BJzInWMf.js";import{A as de}from"./AppLayout-BugnxmCo.js";import{_ as ue}from"./CardCustomer-DWwUAmCj.js";import{d as me}from"./debounce-BJFGEz3o.js";import{_ as ce}from"./app-BeoLapnA.js";import{r as pe,C as xe}from"./car-Dii5PdOG.js";import{r as ge}from"./ClipboardDocumentListIcon-Dxd2S-d9.js";import"./UserIcon-vx4KdVK0.js";const ve={key:0,class:"space-y-2"},fe={class:"flex justify-between items-center"},ye={class:"flex justify-between items-center"},be={key:0,class:"flex justify-between items-center"},he={key:1,class:"flex justify-between items-center"},we={class:"text-xs text-gray-700 font-mono"},_e={key:2,class:"flex justify-between items-center"},ke={class:"text-xs text-gray-700"},Ce={key:3,class:"flex justify-between items-center"},$e={class:"text-xs text-gray-700"},Ie={key:1},Se={__name:"CardTransaction",props:{transaction:{type:Object,default:null},showEditButton:{type:Boolean,default:!0}},emits:["edit"],setup(s){const h=s,f={pending:"Menunggu Pembayaran",paid:"Sudah Dibayar",failed:"Gagal",refunded:"Dikembalikan",expired:"Kadaluarsa"},c={cash:"Cash",transfer:"Transfer",debit_card:"Kartu Debit",credit_card:"Kartu Kredit",qris:"QRIS"},u=k(()=>{var o;return((o=h.transaction)==null?void 0:o.status)==="paid"}),g=k(()=>{var o;return((o=h.transaction)==null?void 0:o.status)==="pending"}),w=k(()=>{var o;return((o=h.transaction)==null?void 0:o.status)==="failed"}),n=k(()=>!u.value&&!g.value&&!w.value),m=o=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(o);return(o,a)=>(i(),d("div",{class:M(["p-3 rounded border",{"bg-green-50 border-green-200":u.value,"bg-red-50 border-red-200":w.value,"bg-yellow-50 border-yellow-200":g.value}])},[a[7]||(a[7]=e("div",{class:"flex justify-between items-center mb-2"},[e("h4",{class:"text-sm font-medium text-gray-700 flex items-center"},[e("svg",{class:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z"})]),S(" Pembayaran ")])],-1)),s.transaction?(i(),d("div",ve,[e("div",fe,[a[0]||(a[0]=e("span",{class:"text-xs font-medium text-gray-600"},"Status:",-1)),e("span",{class:M([{"text-green-600 font-semibold":u.value,"text-yellow-600 font-semibold":g.value,"text-red-600 font-semibold":w.value,"text-gray-600 font-semibold":n.value},"text-xs"])},b(f[s.transaction.status]),3)]),e("div",ye,[a[1]||(a[1]=e("span",{class:"text-xs font-medium text-gray-600"},"Nominal:",-1)),e("span",{class:M([{"text-green-700 font-semibold":u.value,"text-yellow-700 font-semibold":g.value,"text-red-700 font-semibold":w.value},"text-xs"])},b(m(s.transaction.amount)),3)]),s.transaction.payment_method?(i(),d("div",be,[a[2]||(a[2]=e("span",{class:"text-xs font-medium text-gray-600"},"Metode:",-1)),e("span",{class:M([{"text-green-700":u.value,"text-yellow-700":g.value,"text-red-700":w.value},"text-xs"])},b(c[s.transaction.payment_method]||s.transaction.payment_method),3)])):_("",!0),s.transaction.invoice_number?(i(),d("div",he,[a[3]||(a[3]=e("span",{class:"text-xs font-medium text-gray-600"},"Invoice:",-1)),e("span",we,b(s.transaction.invoice_number),1)])):_("",!0),s.transaction.payment_date?(i(),d("div",_e,[a[4]||(a[4]=e("span",{class:"text-xs font-medium text-gray-600"},"Tanggal:",-1)),e("span",ke,b(new Date(s.transaction.payment_date).toLocaleDateString("id-ID")),1)])):_("",!0),s.transaction.payer&&s.transaction.payer.name?(i(),d("div",Ce,[a[5]||(a[5]=e("span",{class:"text-xs font-medium text-gray-600"},"Dibayar oleh:",-1)),e("span",$e,b(s.transaction.payer.name),1)])):_("",!0)])):(i(),d("div",Ie,a[6]||(a[6]=[e("p",{class:"text-xs text-yellow-700"},"Data transaksi belum tersedia",-1)])))],2))}},je={class:"space-y-4"},De={class:"relative"},Me={key:0,class:"absolute z-10 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg max-h-60 overflow-y-auto"},Ae=["onClick"],Te={class:"font-medium text-sm"},Ve={class:"text-xs text-gray-500"},Pe={key:0},Be={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Le={class:"relative"},Oe={key:1,class:"p-3 bg-blue-50 border border-blue-200 rounded-md"},Fe={class:"flex justify-between items-start"},ze={class:"text-sm text-gray-700"},Ue={class:"text-xs text-gray-600"},qe={class:"text-xs text-gray-600"},He={__name:"CustomerForm",props:{formData:{type:Object,required:!0},existingCustomer:{type:Object,default:null},existingSeller:{type:Object,default:null}},emits:["update:form","customer-selected"],setup(s,{emit:h}){const f=h,c=s,u=C(""),g=C([]),w=C(!1),n=C(null),m=C({customer_id:"",customer_name:"",customer_phone:"",customer_email:"",customer_address:""});F(()=>{var y;c.existingCustomer?(m.value={customer_id:c.existingCustomer.id,customer_name:c.existingCustomer.name,customer_phone:((y=c.existingCustomer.phone)==null?void 0:y.replace("62",""))||"",customer_email:c.existingCustomer.email||"",customer_address:c.existingCustomer.address||""},n.value=c.existingCustomer):m.value={...c.formData}}),U(m,y=>{f("update:form",y)},{deep:!0});const o=me(async()=>{if(!u.value.trim()){g.value=[];return}try{const y=await fetch(`/customers/search?search=${encodeURIComponent(u.value)}`);y.ok&&(g.value=await y.json())}catch(y){console.error("Error searching customers:",y),g.value=[]}},300),a=y=>{var l;n.value=y,m.value={customer_id:y.id,customer_name:y.name,customer_phone:((l=y.phone)==null?void 0:l.replace("62",""))||"",customer_email:y.email||"",customer_address:y.address||""},y.sellers&&y.sellers.length>0&&f("customer-selected",{customer:y,sellers:y.sellers}),w.value=!1,u.value=""},x=()=>{n.value=null,m.value={customer_id:"",customer_name:"",customer_phone:"",customer_email:"",customer_address:""}},I=y=>{y.target.closest(".relative")||(w.value=!1)};return F(()=>{document.addEventListener("click",I)}),ne(()=>{document.removeEventListener("click",I)}),(y,l)=>(i(),d("div",je,[e("div",null,[l[6]||(l[6]=e("label",{class:"block text-xs font-medium text-gray-600 mb-1"}," Pilih Customer yang sudah ada (opsional) ",-1)),e("div",De,[j(e("input",{"onUpdate:modelValue":l[0]||(l[0]=p=>u.value=p),onInput:l[1]||(l[1]=(...p)=>v(o)&&v(o)(...p)),onFocus:l[2]||(l[2]=p=>w.value=!0),type:"text",placeholder:"Cari customer...",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm"},null,544),[[A,u.value]]),w.value&&g.value.length>0?(i(),d("div",Me,[(i(!0),d(O,null,oe(g.value,p=>(i(),d("div",{key:p.id,onClick:T=>a(p),class:"px-3 py-2 hover:bg-blue-50 cursor-pointer border-b border-gray-100 last:border-b-0"},[e("div",Te,b(p.name),1),e("div",Ve,b(p.phone)+" • "+b(p.email),1)],8,Ae))),128))])):_("",!0)]),l[7]||(l[7]=e("p",{class:"text-xs text-gray-500 mt-1"}," Kosongkan jika ingin membuat customer baru ",-1))]),n.value?_("",!0):(i(),d("div",Pe,[l[12]||(l[12]=e("h4",{class:"text-sm font-medium text-gray-700 mb-3 border-b pb-2"}," Data Customer Baru ",-1)),e("div",Be,[e("div",null,[l[8]||(l[8]=e("label",{class:"block text-xs font-medium text-gray-600 mb-1"}," Nama Customer * ",-1)),j(e("input",{"onUpdate:modelValue":l[3]||(l[3]=p=>m.value.customer_name=p),type:"text",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm",placeholder:"Nama lengkap customer"},null,512),[[A,m.value.customer_name]])]),e("div",null,[l[10]||(l[10]=e("label",{class:"block text-xs font-medium text-gray-600 mb-1"}," Nomor WhatsApp * ",-1)),e("div",Le,[l[9]||(l[9]=e("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[e("span",{class:"text-gray-500 text-sm"},"+62")],-1)),j(e("input",{"onUpdate:modelValue":l[4]||(l[4]=p=>m.value.customer_phone=p),type:"tel",required:"",class:"w-full pl-10 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm",placeholder:"8123456789"},null,512),[[A,m.value.customer_phone]])])]),e("div",null,[l[11]||(l[11]=e("label",{class:"block text-xs font-medium text-gray-600 mb-1"}," Email ",-1)),j(e("input",{"onUpdate:modelValue":l[5]||(l[5]=p=>m.value.customer_email=p),type:"email",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm",placeholder:"customer@email.com"},null,512),[[A,m.value.customer_email]])])])])),n.value?(i(),d("div",Oe,[e("div",Fe,[e("div",null,[l[13]||(l[13]=e("h5",{class:"text-sm font-semibold text-blue-800"},"Customer terpilih:",-1)),e("p",ze,b(n.value.name),1),e("p",Ue,b(n.value.phone),1),e("p",qe,b(n.value.email),1)]),e("button",{onClick:x,type:"button",class:"text-xs text-red-600 hover:text-red-800"}," Ubah ")])])):_("",!0)]))}},Ne={key:0,class:"space-y-4"},Ee={class:"space-y-4"},Re={class:"flex"},Ke=["disabled"],Ge={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},We={class:"relative"},Je={__name:"SellerForm",props:{formData:{type:Object,required:!0},showForm:{type:Boolean,default:!1},existingSeller:{type:Object,default:null}},emits:["update:form"],setup(s,{emit:h}){const f=h,c=s,u=C({seller_inspection_area:"",seller_inspection_address:"",seller_link_maps:"",seller_unit_holder_name:"",seller_unit_holder_phone:"",seller_settings:{}});F(()=>{var m;c.existingSeller?u.value={seller_inspection_area:c.existingSeller.inspection_area||"",seller_inspection_address:c.existingSeller.inspection_address||"",seller_link_maps:c.existingSeller.link_maps||"",seller_unit_holder_name:c.existingSeller.unit_holder_name||"",seller_unit_holder_phone:((m=c.existingSeller.unit_holder_phone)==null?void 0:m.replace("62",""))||"",seller_settings:c.existingSeller.settings||{}}:u.value={...c.formData}}),U(u,m=>{f("update:form",m)},{deep:!0});const g=()=>{navigator.geolocation?navigator.geolocation.getCurrentPosition(m=>{const{latitude:o,longitude:a}=m.coords,x=`https://www.google.com/maps?q=${o},${a}`;u.value.seller_link_maps=x,w(o,a)},m=>{alert("Gagal mendapatkan lokasi: "+m.message)}):alert("Browser tidak mendukung geolocation")},w=async(m,o)=>{try{const x=await(await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${m}&lon=${o}`)).json();if(x.address&&(u.value.seller_inspection_area||(u.value.seller_inspection_area=x.address.city||x.address.town||x.address.village||""),!u.value.seller_inspection_address)){const I=[];x.address.road&&I.push(x.address.road),x.address.suburb&&I.push(x.address.suburb),x.address.city_district&&I.push(x.address.city_district),x.address.city&&I.push(x.address.city),x.address.state&&I.push(x.address.state),u.value.seller_inspection_address=I.join(", ")}}catch(a){console.error("Error reverse geocoding:",a)}},n=()=>{if(u.value.seller_link_maps&&u.value.seller_link_maps.includes("google.com/maps"))window.open(u.value.seller_link_maps,"_blank","noopener,noreferrer");else if(u.value.seller_inspection_address){const m=encodeURIComponent(u.value.seller_inspection_address);window.open(`https://www.google.com/maps/search/?api=1&query=${m}`,"_blank","noopener,noreferrer")}};return(m,o)=>s.showForm?(i(),d("div",Ne,[o[13]||(o[13]=e("h4",{class:"text-sm font-medium text-gray-700 mb-3 border-b pb-2"}," Data Lokasi Inspeksi & Penanggung Jawab ",-1)),e("div",Ee,[e("div",null,[o[5]||(o[5]=e("label",{class:"block text-xs font-medium text-gray-600 mb-1"}," Area Inspeksi * ",-1)),j(e("input",{"onUpdate:modelValue":o[0]||(o[0]=a=>u.value.seller_inspection_area=a),type:"text",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm",placeholder:"Contoh: Jakarta Selatan, Surabaya Barat"},null,512),[[A,u.value.seller_inspection_area]])]),e("div",null,[o[6]||(o[6]=e("label",{class:"block text-xs font-medium text-gray-600 mb-1"}," Alamat Lengkap Inspeksi * ",-1)),j(e("textarea",{"onUpdate:modelValue":o[1]||(o[1]=a=>u.value.seller_inspection_address=a),rows:"3",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm",placeholder:"Alamat lengkap lokasi inspeksi"},null,512),[[A,u.value.seller_inspection_address]])]),e("div",null,[e("div",{class:"flex justify-between items-center mb-1"},[o[8]||(o[8]=e("label",{class:"block text-xs font-medium text-gray-600"}," Link Google Maps ",-1)),e("button",{type:"button",onClick:g,class:"text-xs text-blue-600 hover:text-blue-800 flex items-center",title:"Ambil lokasi saat ini"},o[7]||(o[7]=[e("svg",{class:"h-3 w-3 mr-1",fill:"currentColor",viewBox:"0 0 24 24"},[e("path",{d:"M12 8c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4zm8.94 3A8.994 8.994 0 0013 3.06V1h-2v2.06A8.994 8.994 0 003.06 11H1v2h2.06A8.994 8.994 0 0011 20.94V23h2v-2.06A8.994 8.994 0 0020.94 13H23v-2h-2.06zM12 19c-3.87 0-7-3.13-7-7s3.13-7 7-7 7 3.13 7 7-3.13 7-7 7z"})],-1),S(" Lokasi Saat Ini ")]))]),e("div",Re,[j(e("input",{"onUpdate:modelValue":o[2]||(o[2]=a=>u.value.seller_link_maps=a),type:"text",placeholder:"https://maps.google.com/?q=...",class:"flex-1 px-3 py-2 border border-gray-300 rounded-l-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm"},null,512),[[A,u.value.seller_link_maps]]),e("button",{type:"button",onClick:n,class:"px-3 py-2 bg-blue-500 text-white rounded-r-md hover:bg-blue-600 text-sm",disabled:!u.value.seller_link_maps,title:"Cari di Maps"},o[9]||(o[9]=[e("svg",{class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})],-1)]),8,Ke)])]),e("div",Ge,[e("div",null,[o[10]||(o[10]=e("label",{class:"block text-xs font-medium text-gray-600 mb-1"}," Nama Penanggung Jawab * ",-1)),j(e("input",{"onUpdate:modelValue":o[3]||(o[3]=a=>u.value.seller_unit_holder_name=a),type:"text",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm",placeholder:"Nama orang yang memegang unit"},null,512),[[A,u.value.seller_unit_holder_name]])]),e("div",null,[o[12]||(o[12]=e("label",{class:"block text-xs font-medium text-gray-600 mb-1"}," Nomor WhatsApp Penanggung Jawab * ",-1)),e("div",We,[o[11]||(o[11]=e("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[e("span",{class:"text-gray-500 text-sm"},"+62")],-1)),j(e("input",{"onUpdate:modelValue":o[4]||(o[4]=a=>u.value.seller_unit_holder_phone=a),type:"tel",required:"",class:"w-full pl-10 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm",placeholder:"8123456789"},null,512),[[A,u.value.seller_unit_holder_phone]])])])])])])):_("",!0)}},Qe={class:"space-y-4"},Ye={class:"space-y-4"},Xe={key:0},Ze={__name:"TransactionForm",props:{formData:{type:Object,required:!0},existingTransaction:{type:Object,default:null}},emits:["update:form"],setup(s,{emit:h}){const f=h,c=s,u=C(""),g=C({transaction_amount:"",transaction_payment_method:"",transaction_status:"pending",transaction_payment_date:new Date().toISOString().split("T")[0],transaction_notes:""});F(()=>{if(c.existingTransaction){const m=c.existingTransaction.amount||0;g.value={transaction_amount:m,transaction_payment_method:c.existingTransaction.payment_method||"",transaction_status:c.existingTransaction.status||"pending",transaction_payment_date:c.existingTransaction.payment_date?new Date(c.existingTransaction.payment_date).toISOString().split("T")[0]:new Date().toISOString().split("T")[0],transaction_notes:c.existingTransaction.notes||""},u.value=w(m)}else g.value={...c.formData}});const w=m=>{if(!m)return"";const o=String(m).replace(/\D/g,""),a=parseInt(o,10);return isNaN(a)?"":new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(a)},n=m=>{const o=m.target.value.replace(/\D/g,"");g.value.transaction_amount=o,u.value=w(o)};return U(g,m=>{f("update:form",m)},{deep:!0}),(m,o)=>(i(),d("div",Qe,[o[12]||(o[12]=e("h4",{class:"text-sm font-medium text-gray-700 mb-3 border-b pb-2"}," Data Pembayaran ",-1)),e("div",Ye,[e("div",null,[o[5]||(o[5]=e("label",{class:"block text-xs font-medium text-gray-600 mb-1"}," Nominal Pembayaran * ",-1)),j(e("input",{"onUpdate:modelValue":o[0]||(o[0]=a=>u.value=a),onInput:n,type:"text",required:"",placeholder:"Contoh: 250000",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm"},null,544),[[A,u.value]])]),e("div",null,[o[7]||(o[7]=e("label",{class:"block text-xs font-medium text-gray-600 mb-1"}," Metode Pembayaran * ",-1)),j(e("select",{"onUpdate:modelValue":o[1]||(o[1]=a=>g.value.transaction_payment_method=a),required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm"},o[6]||(o[6]=[W('<option value="">Pilih Metode</option><option value="cash">Cash</option><option value="transfer">Transfer</option><option value="debit_card">Kartu Debit</option><option value="credit_card">Kartu Kredit</option><option value="qris">QRIS</option>',6)]),512),[[G,g.value.transaction_payment_method]])]),e("div",null,[o[9]||(o[9]=e("label",{class:"block text-xs font-medium text-gray-600 mb-1"}," Status * ",-1)),j(e("select",{"onUpdate:modelValue":o[2]||(o[2]=a=>g.value.transaction_status=a),required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm"},o[8]||(o[8]=[W('<option value="pending">Menunggu Pembayaran</option><option value="paid">Sudah Dibayar</option><option value="failed">Gagal</option><option value="refunded">Dikembalikan</option><option value="expired">Kadaluarsa</option>',5)]),512),[[G,g.value.transaction_status]])]),g.value.transaction_status==="paid"?(i(),d("div",Xe,[o[10]||(o[10]=e("label",{class:"block text-xs font-medium text-gray-600 mb-1"}," Tanggal Pembayaran ",-1)),j(e("input",{"onUpdate:modelValue":o[3]||(o[3]=a=>g.value.transaction_payment_date=a),type:"date",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm"},null,512),[[A,g.value.transaction_payment_date]])])):_("",!0),e("div",null,[o[11]||(o[11]=e("label",{class:"block text-xs font-medium text-gray-600 mb-1"}," Catatan ",-1)),j(e("textarea",{"onUpdate:modelValue":o[4]||(o[4]=a=>g.value.transaction_notes=a),rows:"2",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm",placeholder:"Catatan tambahan..."},null,512),[[A,g.value.transaction_notes]])])])]))}},et={key:0,class:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50 p-4"},tt={class:"bg-white p-6 rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] overflow-y-auto"},st={class:"flex justify-between items-center mb-6 pb-4 border-b"},nt={class:"text-lg font-bold"},ot={class:"flex items-center mb-4"},at={key:0},it={class:"flex items-center mb-4"},lt={class:"flex items-center mb-4"},rt={key:1,class:"p-3 bg-red-50 border border-red-200 rounded-md"},dt={key:0,class:"text-sm text-red-600"},ut={key:1,class:"text-sm text-red-600"},mt={class:"flex justify-end space-x-3 pt-6 border-t"},ct=["disabled"],pt=["disabled"],xt={__name:"AllDataModal",props:{show:{type:Boolean,required:!0},inspectionId:{type:String,required:!0},existingCustomer:{type:Object,default:null},existingSeller:{type:Object,default:null},existingTransaction:{type:Object,default:null}},emits:["close","saved"],setup(s,{emit:h}){const f=s,c=h;C(!1);const u=C(""),g=C(1),w=C(!1),n=ae({customer_id:"",customer_name:"",customer_phone:"",customer_email:"",customer_address:"",seller_inspection_area:"",seller_inspection_address:"",seller_link_maps:"",seller_unit_holder_name:"",seller_unit_holder_phone:"",seller_settings:{},transaction_amount:"",transaction_payment_method:"",transaction_status:"pending",transaction_payment_date:new Date().toISOString().split("T")[0],transaction_notes:""}),m=k(()=>!(!n.customer_name||!n.customer_phone||w.value&&(!n.seller_inspection_area||!n.seller_inspection_address||!n.seller_unit_holder_name||!n.seller_unit_holder_phone)||!n.transaction_amount||!n.transaction_payment_method||!n.transaction_status));F(()=>{var l,p;f.existingCustomer&&(n.customer_id=f.existingCustomer.id,n.customer_name=f.existingCustomer.name,n.customer_phone=((l=f.existingCustomer.phone)==null?void 0:l.replace("62",""))||"",n.customer_email=f.existingCustomer.email||"",n.customer_address=f.existingCustomer.address||"",w.value=!0,g.value=3),f.existingSeller&&(n.seller_inspection_area=f.existingSeller.inspection_area||"",n.seller_inspection_address=f.existingSeller.inspection_address||"",n.seller_link_maps=f.existingSeller.link_maps||"",n.seller_unit_holder_name=f.existingSeller.unit_holder_name||"",n.seller_unit_holder_phone=((p=f.existingSeller.unit_holder_phone)==null?void 0:p.replace("62",""))||"",n.seller_settings=f.existingSeller.settings||{}),f.existingTransaction&&(n.transaction_amount=f.existingTransaction.amount||"",n.transaction_payment_method=f.existingTransaction.payment_method||"",n.transaction_status=f.existingTransaction.status||"pending",n.transaction_payment_date=f.existingTransaction.payment_date?new Date(f.existingTransaction.payment_date).toISOString().split("T")[0]:new Date().toISOString().split("T")[0],n.transaction_notes=f.existingTransaction.notes||"")}),U(()=>n.customer_name,l=>{l&&n.customer_phone&&(w.value=!0,g.value=2)});const o=l=>{var p;if(l.sellers&&l.sellers.length>0){const T=l.sellers[0];n.seller_inspection_area=T.inspection_area||"",n.seller_inspection_address=T.inspection_address||"",n.seller_link_maps=T.link_maps||"",n.seller_unit_holder_name=T.unit_holder_name||"",n.seller_unit_holder_phone=((p=T.unit_holder_phone)==null?void 0:p.replace("62",""))||"",n.seller_settings=T.settings||{}}w.value=!0,g.value=2},a=l=>{Object.assign(n,l)},x=l=>{Object.assign(n,l)},I=l=>{Object.assign(n,l)},y=()=>{if(!m.value){u.value="Harap lengkapi semua field yang wajib diisi";return}const l={...n.data(),customer_phone:n.customer_phone.startsWith("62")?n.customer_phone:"62"+n.customer_phone.replace(/^0/,""),seller_unit_holder_phone:n.seller_unit_holder_phone.startsWith("62")?n.seller_unit_holder_phone:"62"+n.seller_unit_holder_phone.replace(/^0/,""),transaction_amount:parseInt(n.transaction_amount,10)};n.post(`/inspections-data/${f.inspectionId}/store-all-data`,l,{preserveScroll:!0,onSuccess:()=>{c("close"),c("saved")},onError:p=>{u.value=Object.values(p)[0]||"Gagal menyimpan data"}})};return(l,p)=>s.show?(i(),d("div",et,[e("div",tt,[e("div",st,[e("h3",nt,b(s.existingCustomer?"Edit Data Inspeksi":"Tambah Data Inspeksi"),1),e("button",{onClick:p[0]||(p[0]=T=>l.$emit("close")),class:"text-gray-500 hover:text-gray-700"},p[2]||(p[2]=[e("svg",{class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),e("form",{onSubmit:ie(y,["prevent"]),class:"space-y-8"},[e("div",null,[e("div",ot,[e("div",{class:M(["w-6 h-6 rounded-full flex items-center justify-center text-xs font-medium",g.value>=1?"bg-blue-600 text-white":"bg-gray-200 text-gray-600"])}," 1 ",2),p[3]||(p[3]=e("h4",{class:"ml-3 text-sm font-medium text-gray-700"},"Data Customer",-1))]),D(He,{"form-data":{customer_id:v(n).customer_id,customer_name:v(n).customer_name,customer_phone:v(n).customer_phone,customer_email:v(n).customer_email,customer_address:v(n).customer_address},"existing-customer":s.existingCustomer,"existing-seller":s.existingSeller,"onUpdate:form":a,onCustomerSelected:o},null,8,["form-data","existing-customer","existing-seller"])]),w.value?(i(),d("div",at,[e("div",it,[e("div",{class:M(["w-6 h-6 rounded-full flex items-center justify-center text-xs font-medium",g.value>=2?"bg-blue-600 text-white":"bg-gray-200 text-gray-600"])}," 2 ",2),p[4]||(p[4]=e("h4",{class:"ml-3 text-sm font-medium text-gray-700"},"Lokasi & Penanggung Jawab",-1))]),D(Je,{"form-data":{seller_inspection_area:v(n).seller_inspection_area,seller_inspection_address:v(n).seller_inspection_address,seller_link_maps:v(n).seller_link_maps,seller_unit_holder_name:v(n).seller_unit_holder_name,seller_unit_holder_phone:v(n).seller_unit_holder_phone,seller_settings:v(n).seller_settings},"show-form":w.value,"existing-seller":s.existingSeller,"onUpdate:form":x},null,8,["form-data","show-form","existing-seller"])])):_("",!0),e("div",null,[e("div",lt,[e("div",{class:M(["w-6 h-6 rounded-full flex items-center justify-center text-xs font-medium",g.value>=3?"bg-blue-600 text-white":"bg-gray-200 text-gray-600"])}," 3 ",2),p[5]||(p[5]=e("h4",{class:"ml-3 text-sm font-medium text-gray-700"},"Pembayaran",-1))]),D(Ze,{"form-data":{transaction_amount:v(n).transaction_amount,transaction_payment_method:v(n).transaction_payment_method,transaction_status:v(n).transaction_status,transaction_payment_date:v(n).transaction_payment_date,transaction_notes:v(n).transaction_notes},"existing-transaction":s.existingTransaction,"onUpdate:form":I},null,8,["form-data","existing-transaction"])]),v(n).hasErrors||u.value?(i(),d("div",rt,[u.value?(i(),d("p",dt,b(u.value),1)):v(n).errors?(i(),d("p",ut,b(Object.values(v(n).errors)[0]),1)):_("",!0)])):_("",!0),e("div",mt,[e("button",{type:"button",onClick:p[1]||(p[1]=T=>l.$emit("close")),disabled:v(n).processing,class:"px-4 py-2 bg-gray-300 text-gray-700 rounded-md text-sm hover:bg-gray-400 disabled:opacity-50"}," Batal ",8,ct),e("button",{type:"submit",disabled:v(n).processing||!m.value,class:"px-4 py-2 bg-blue-600 text-white rounded-md text-sm hover:bg-blue-700 disabled:opacity-50"},b(v(n).processing?"Menyimpan...":"Simpan Semua Data"),9,pt)])],32)])])):_("",!0)}},gt={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6"},vt={class:"bg-white rounded-xl shadow-md overflow-hidden border border-gray-200"},ft={class:"p-4 flex justify-between items-start"},yt={class:"flex items-center mb-1"},bt={class:"text-sm font-semibold text-blue-700 ml-7 -mt-1"},ht={class:"px-4 py-3 bg-gray-50 border-t border-gray-100"},wt={class:"flex items-center"},_t={class:"text-sm font-medium text-gray-800"},kt={key:0},Ct={class:"text-gray-600"},$t={key:1},It={class:"flex items-center justify-between mt-2"},St={class:"flex items-center"},jt={class:"text-sm font-bold text-gray-900"},Dt={class:"px-4 py-3 bg-white border-t border-gray-100"},Mt={class:"flex justify-between items-center mb-3"},At={class:"px-4 py-3 bg-white border-t border-gray-100"},Tt={key:0,class:"p-2 bg-blue-50 border border-blue-200 rounded"},Vt={class:"flex items-center justify-between"},Pt={class:"text-sm font-semibold text-blue-800"},Bt={key:0,class:"text-xs text-blue-700"},Lt=["href"],Ot={key:1,class:"p-2 bg-yellow-50 border border-yellow-200 rounded"},Ft={key:0,class:"px-4 py-2 bg-white border-t border-gray-100"},zt={class:"text-sm text-gray-800"},Ut={class:"px-4 py-3 bg-gray-50 border-t border-gray-100"},qt={class:"flex items-center mb-1"},Ht={class:"text-sm font-semibold text-gray-800 ml-7 -mt-1"},Nt={key:0,class:"mt-3 mb-3"},Et={class:"text-sm font-semibold text-gray-800 ml-7 -mt-1 flex items-center"},Rt={class:"bg-blue-100 text-blue-800 px-2 py-1 rounded-md font-mono"},Kt={class:"mt-3"},Gt={class:"text-sm text-gray-800"},Wt=["innerHTML"],Jt={class:"p-4 flex gap-2"},Qt={key:0},Yt={key:1},Xt=["disabled"],Zt={key:0},es={key:1},ts=["href","disabled"],ss={key:0},ns={key:1},os={key:1,class:"flex-1 flex items-center justify-center px-3 py-2 bg-gray-200 text-gray-600 font-medium rounded-md text-sm"},as=["disabled"],is=["href","disabled"],ls={key:0},rs={key:1},ds={key:0},us={key:1},ms={key:1,class:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50"},cs={class:"bg-white p-6 rounded-lg shadow-xl w-96"},ps={class:"flex justify-end space-x-4"},xs=["disabled"],gs={key:0,class:"flex items-center"},vs={key:1},fs={key:2,class:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50"},ys={class:"bg-white p-6 rounded-lg shadow-xl w-96"},bs={class:"flex justify-end space-x-4 mt-6"},hs=["disabled"],ws={__name:"Review",props:{inspection:{type:Object,required:!0},encryptedIds:Object,transaction:Object},setup(s){var K;const h=s,c=((K=le().props.global)==null?void 0:K.roles)||[],u=k(()=>c.includes("Admin")||c.includes("coordinator"));k(()=>c.includes("coordinator")),k(()=>c.includes("Admin"));const g=k(()=>c.includes("admin_plann")?"Admin AutoInspeksi":c.includes("coordinator")?"Koordinator AutoInspeksi":c.includes("inspector")?"Inspektor AutoInspeksi":c.includes("quality_control")?"QC AutoInspeksi":"Staff AutoInspeksi"),w=C(!1),n=C(!1),m=C(!1),o=C(""),a=C(!1),x=C(null),I=k(()=>h.inspection.customer_id!==null),y=k(()=>h.transaction!==null),l=k(()=>{var r;return((r=h.transaction)==null?void 0:r.status)==="paid"});k(()=>{var r;return((r=h.transaction)==null?void 0:r.status)==="pending"});const p=k(()=>{var r;return((r=h.inspection)==null?void 0:r.status)==="rejected"});k(()=>{var r;return((r=h.inspection)==null?void 0:r.status)==="completed"});const T=k(()=>{var r;return((r=h.inspection)==null?void 0:r.status)==="cancelled"}),Q=k(()=>{var r;return((r=h.inspection)==null?void 0:r.status)==="pending"}),q=k(()=>p.value||T.value||Q.value),P=k(()=>{var r;return y.value&&l.value&&((r=h.transaction)==null?void 0:r.amount)>0}),H=k(()=>I.value&&y.value&&l.value),Y=k(()=>!I.value&&!y.value?"Tambah Data":I.value&&!y.value?"Tambah Pembayaran":!I.value&&y.value?"Tambahkan Data Customer":"Perbaharui Data"),X=r=>{switch(r){case"draft":return"Dibuat";case"in_progress":return"Dalam Proses";case"pending":return"Menunggu";case"pending_review":return"Menunggu Review";case"approved":return"Disetujui";case"rejected":return"Ditolak";case"revision":return"Revisi";case"completed":return"Selesai";case"cancelled":return"Dibatalkan";default:return r}},N=()=>{m.value=!0},z=(r,t)=>{a.value=!0,x.value=t,J.visit(r,{onFinish:()=>{a.value=!1,x.value=null}})},E=r=>{a.value=!0,x.value="download",setTimeout(()=>{a.value=!1,x.value=null},1500)},Z=async r=>{try{await navigator.clipboard.writeText(r),alert(`ID Inspeksi "${r}" berhasil disalin!`)}catch(t){console.error("Gagal menyalin teks: ",t),ee(r)}},ee=r=>{const t=document.createElement("textarea");t.value=r,t.style.position="fixed",t.style.left="-999999px",t.style.top="-999999px",document.body.appendChild(t),t.focus(),t.select();try{const $=document.execCommand("copy");alert($?`ID Inspeksi "${r}" berhasil disalin!`:"Gagal menyalin ID Inspeksi.")}catch($){console.error("Fallback pun gagal: ",$),alert("Browser tidak mendukung aksi salin.")}finally{document.body.removeChild(t)}},te=()=>{J.reload()},se=()=>{alert("Fitur pengiriman email masih dalam pengembangan"),n.value=!1},R=k(()=>h.inspection.customer&&h.inspection.customer.sellers&&(h.inspection.customer.sellers.find(r=>r.inspection_id===h.inspection.id)||h.inspection.customer.sellers[0])||null);return(r,t)=>(i(),L(de,null,{default:V(()=>[D(v(re),{title:"Review Inspeksi"}),e("div",gt,[t[37]||(t[37]=e("h3",{class:"text-xl md:text-3xl font-bold text-gray-900 mb-6 text-center"}," Inspeksi yang Harus Diselesaikan ",-1)),e("div",vt,[e("div",ft,[e("div",null,[e("div",yt,[D(v(pe),{class:"h-5 w-5 text-blue-500 mr-2"}),t[13]||(t[13]=e("span",{class:"text-sm font-medium text-gray-600"},"Jadwal",-1))]),e("p",bt,b(new Date(s.inspection.inspection_date).toLocaleDateString("id-ID",{weekday:"short",year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})),1)]),D(v(B),{href:r.route("inspection.log",s.encryptedIds),class:"text-xs font-semibold text-indigo-600 hover:underline"},{default:V(()=>t[14]||(t[14]=[S(" Lihat Log ")])),_:1,__:[14]},8,["href"])]),e("div",ht,[e("div",wt,[D(v(xe),{class:"h-5 w-5 text-gray-500 mr-2"}),e("div",_t,[s.inspection.car?(i(),d("div",kt,[S(b(`${s.inspection.car.brand.name} ${s.inspection.car.model.name} ${s.inspection.car.type.name} ${(s.inspection.car.cc/1e3).toFixed(1)} ${s.inspection.car.transmission} ${s.inspection.car.year}`)+" ",1),e("span",Ct,"("+b(s.inspection.car.fuel_type)+")",1)])):(i(),d("div",$t,b(s.inspection.car_name),1))])]),e("div",It,[e("div",St,[t[15]||(t[15]=e("span",{class:"text-xs font-semibold uppercase tracking-wide text-gray-500 mr-2"},"NO POLISI:",-1)),e("span",jt,b(s.inspection.plate_number),1)]),s.inspection.status==="draft"&&u.value?(i(),L(v(B),{key:0,href:r.route("coordinator.inspections.show",s.encryptedIds),class:"text-xs font-semibold text-indigo-600 hover:underline"},{default:V(()=>t[16]||(t[16]=[S(" Alihkan Tugas ")])),_:1,__:[16]},8,["href"])):_("",!0)])]),e("div",Dt,[e("div",Mt,[t[17]||(t[17]=e("h4",{class:"text-sm font-medium text-gray-700"},"Informasi Customer & Pembayaran ",-1)),!H.value&&!q.value?(i(),d("button",{key:0,onClick:N,class:"text-xs bg-blue-100 text-blue-700 px-2 py-1 rounded hover:bg-blue-200"},b(Y.value),1)):_("",!0)]),D(ue,{customer:s.inspection.customer,seller:R.value,"show-edit-button":!q.value&&!H.value,inspection:s.inspection,"user-role":g.value,onEdit:N},null,8,["customer","seller","show-edit-button","inspection","user-role"]),D(Se,{transaction:s.transaction,"show-edit-button":!q.value&&!H.value,onEdit:N},null,8,["transaction","show-edit-button"])]),e("div",At,[t[20]||(t[20]=e("div",{class:"flex justify-between items-center mb-3"},[e("h4",{class:"text-sm font-medium text-gray-700"},"Informasi Inspektor")],-1)),s.inspection.user?(i(),d("div",Tt,[e("div",Vt,[e("div",null,[e("p",Pt,b(s.inspection.user.name),1),s.inspection.user.numberPhone?(i(),d("p",Bt,b(s.inspection.user.numberPhone),1)):_("",!0)]),s.inspection.user.numberPhone?(i(),d("a",{key:0,href:`https://wa.me/62${s.inspection.user.numberPhone.replace(/^0/,"")}`,target:"_blank",class:"text-blue-600 hover:text-blue-800 ml-2",title:"Hubungi via WhatsApp"},t[18]||(t[18]=[e("svg",{class:"w-6 h-6",fill:"currentColor",viewBox:"0 0 24 24"},[e("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c 0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893A11.821 11.821 0 0020.864 3.488"})],-1)]),8,Lt)):_("",!0)])])):(i(),d("div",Ot,t[19]||(t[19]=[e("p",{class:"text-xs text-yellow-700"},"Inspektor belum ditugaskan",-1)])))]),s.inspection.category?(i(),d("div",Ft,[t[21]||(t[21]=e("p",{class:"text-xs font-medium text-gray-500 tracking-wide"}," Kategori Inspeksi ",-1)),e("p",zt,b(s.inspection.category.name),1)])):_("",!0),e("div",Ut,[e("div",qt,[D(v(ge),{class:"h-5 w-5 text-green-500 mr-2"}),t[22]||(t[22]=e("span",{class:"text-sm font-medium text-gray-600"},"Status",-1))]),e("p",Ht,b(X(s.inspection.status)),1),(s.inspection.status==="approved"||s.inspection.status==="completed")&&s.inspection.file&&P.value?(i(),d("div",Nt,[t[24]||(t[24]=e("div",{class:"flex items-center mb-1"},[e("svg",{class:"h-5 w-5 text-blue-500 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})]),e("span",{class:"text-sm font-medium text-gray-600"},"ID Inspeksi (Untuk Buka File)")],-1)),e("p",Et,[e("span",Rt,b(s.inspection.code),1),e("button",{onClick:t[0]||(t[0]=$=>Z(s.inspection.code)),class:"ml-2 text-blue-500 hover:text-blue-700",title:"Salin ID"},t[23]||(t[23]=[e("svg",{class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3"})],-1)]))])])):_("",!0),e("div",Kt,[t[25]||(t[25]=e("p",{class:"text-xs font-medium text-gray-500 uppercase tracking-wide"}," Catatan ",-1)),e("p",Gt,[e("div",{innerHTML:s.inspection.notes||"-"},null,8,Wt)])])]),e("div",Jt,[s.inspection.status==="in_progress"?(i(),L(v(B),{key:0,href:r.route("inspections.review.pdf",s.encryptedIds),disabled:a.value,onClick:t[1]||(t[1]=$=>z(r.route("inspections.review.pdf",s.encryptedIds),"lihat_laporan")),class:M(["flex-1 inline-flex items-center justify-center px-3 py-2 bg-gradient-to-r from-indigo-700 to-sky-600 shadow-lg text-white font-medium rounded-md text-sm transition-colors hover:from-indigo-800 hover:to-sky-700",{"opacity-50 cursor-not-allowed":a.value&&x.value==="lihat_laporan"}])},{default:V(()=>[a.value&&x.value==="lihat_laporan"?(i(),d("span",Qt,t[26]||(t[26]=[e("svg",{class:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),S(" Memuat Halaman... ")]))):(i(),d("span",Yt,"Lihat Proses Inspeksi"))]),_:1},8,["href","disabled","class"])):_("",!0),s.inspection.status==="pending_review"?(i(),d(O,{key:1},[e("button",{onClick:t[2]||(t[2]=$=>w.value=!0),class:"flex-2 px-3 py-2 bg-yellow-500 text-white font-medium rounded-md text-sm transition-colors hover:bg-yellow-600",disabled:a.value}," Revisi ",8,Xt),D(v(B),{href:r.route("inspections.review.pdf",s.encryptedIds),disabled:a.value,onClick:t[3]||(t[3]=$=>z(r.route("inspections.review.pdf",s.encryptedIds),"lihat_laporan")),class:M(["flex-1 inline-flex items-center justify-center px-3 py-2 bg-gradient-to-r from-indigo-700 to-sky-600 shadow-lg text-white font-medium rounded-md text-sm transition-colors hover:from-indigo-800 hover:to-sky-700",{"opacity-50 cursor-not-allowed":a.value&&x.value==="lihat_laporan"}])},{default:V(()=>[a.value&&x.value==="lihat_laporan"?(i(),d("span",Zt,t[27]||(t[27]=[e("svg",{class:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),S(" Memuat Laporan... ")]))):(i(),d("span",es,"Lihat Laporan PDF"))]),_:1},8,["href","disabled","class"])],64)):s.inspection.status==="approved"&&s.inspection.file?(i(),d(O,{key:2},[P.value?(i(),d("a",{key:0,href:r.route("inspections.download.approved.pdf",s.encryptedIds),onClick:t[4]||(t[4]=$=>E(r.route("inspections.download.approved.pdf",s.encryptedIds))),class:M(["flex-1 inline-flex items-center justify-center px-3 py-2 bg-blue-600 text-white font-medium rounded-md text-sm transition-colors hover:bg-blue-700",{"opacity-50 cursor-not-allowed":a.value&&x.value==="download"}]),disabled:a.value,download:""},[a.value&&x.value==="download"?(i(),d("span",ss,t[28]||(t[28]=[e("svg",{class:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),S(" Sedang di download... ")]))):(i(),d("span",ns,t[29]||(t[29]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 inline-block mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),S(" PDF ")])))],10,ts)):(i(),d("div",os,t[30]||(t[30]=[e("span",{class:"text-xs"},"Transaksi belum selesai",-1)]))),D(v(B),{href:r.route("inspections.whatsapp",s.encryptedIds),class:"flex-1 inline-flex items-center justify-center px-3 py-2 bg-green-600 text-white font-medium rounded-md text-sm transition-colors hover:bg-green-700"},{default:V(()=>t[31]||(t[31]=[e("svg",{class:"w-5 h-5 mr-2",fill:"currentColor",viewBox:"0 0 24 24"},[e("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893A11.821 11.821 0 0020.864 3.488"})],-1),S(" WhatsApp ")])),_:1,__:[31]},8,["href"]),e("button",{onClick:t[5]||(t[5]=$=>n.value=!0),class:"flex-1 inline-flex items-center justify-center px-3 py-2 bg-teal-500 text-white font-medium rounded-md text-sm transition-colors hover:bg-teal-600",disabled:a.value},t[32]||(t[32]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-4 h-4 mr-2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M21.75 6.75v10.5a2.25 2.25 0 0 1-2.25 2.25h-15a2.25 2.25 0 0 1-2.25 2.25V6.75m19.5 0A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25m19.5 0v.243a2.25 2.25 0 0 1-1.07 1.916l-7.5 4.615a2.25 2.25 0 0 1-2.36 0L3.32 8.91a2.25 2.25 0 0 1-1.07-1.916V6.75"})],-1),S(" Email ")]),8,as)],64)):_("",!0),s.inspection.status==="completed"&&s.inspection.file&&u.value?(i(),d("a",{key:3,href:P.value?r.route("inspections.download.approved.pdf",s.encryptedIds):null,onClick:t[6]||(t[6]=$=>P.value&&E(r.route("inspections.download.approved.pdf",s.encryptedIds))),class:M(["flex-1 inline-flex items-center justify-center px-3 py-2 font-medium rounded-md text-sm transition-colors",[P.value?"bg-blue-600 text-white hover:bg-blue-700":"bg-gray-300 text-gray-500 cursor-not-allowed"]]),disabled:!P.value||a.value&&x.value==="download"},[a.value&&x.value==="download"?(i(),d("span",ls,t[33]||(t[33]=[e("svg",{class:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),S(" Sedang diunduh... ")]))):(i(),d("span",rs,[P.value?(i(),d(O,{key:0},[t[34]||(t[34]=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 inline-block mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)),t[35]||(t[35]=S(" Download PDF "))],64)):(i(),d(O,{key:1},[S(" PDF tersedia — selesaikan transaksi untuk mengunduh ")],64))]))],10,is)):_("",!0)]),s.inspection.status==="approved"&&s.inspection.file?(i(),L(v(B),{key:1,href:r.route("inspections.review.pdf",s.encryptedIds),disabled:a.value,onClick:t[7]||(t[7]=$=>z(r.route("inspections.review.pdf",s.encryptedIds),"lihat_laporan")),class:M(["inline-flex items-center justify-center w-full px-3 py-2 bg-gradient-to-r from-indigo-700 to-sky-600 shadow-lg text-white font-medium rounded-md text-sm transition-colors hover:from-indigo-800 hover:to-sky-700",{"opacity-50 cursor-not-allowed":a.value&&x.value==="lihat_laporan"}])},{default:V(()=>[a.value&&x.value==="lihat_laporan"?(i(),d("span",ds,t[36]||(t[36]=[e("svg",{class:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),S(" Memuat Laporan... ")]))):(i(),d("span",us,"Lihat Laporan"))]),_:1},8,["href","disabled","class"])):_("",!0)])]),m.value?(i(),L(xt,{key:0,show:m.value,"inspection-id":s.encryptedIds,"existing-customer":s.inspection.customer,"existing-seller":R.value,"existing-transaction":s.transaction,onClose:t[8]||(t[8]=$=>m.value=!1),onSaved:te},null,8,["show","inspection-id","existing-customer","existing-seller","existing-transaction"])):_("",!0),w.value?(i(),d("div",ms,[e("div",cs,[t[39]||(t[39]=e("h3",{class:"text-lg font-bold mb-4"},"Konfirmasi Revisi",-1)),t[40]||(t[40]=e("p",{class:"text-gray-700 mb-2"}," Apakah Anda yakin ingin revisi pada laporan ini? ",-1)),t[41]||(t[41]=e("p",{class:"text-gray-700 mb-4"},"Setelah ini akan masuk ke halaman Inspeksi.",-1)),e("div",ps,[e("button",{onClick:t[9]||(t[9]=$=>w.value=!1),disabled:a.value,class:"bg-gray-300 text-gray-800 px-4 py-2 rounded-md hover:bg-gray-400"}," Batal ",8,xs),D(v(B),{href:r.route("inspections.revisi",s.encryptedIds),disabled:a.value,onClick:t[10]||(t[10]=$=>z(r.route("inspections.revisi",s.encryptedIds),"revisi")),class:M(["bg-yellow-500 text-white px-4 py-2 rounded-md hover:bg-yellow-600",{"opacity-50 cursor-not-allowed":a.value&&x.value==="revisi"}])},{default:V(()=>[a.value&&x.value==="revisi"?(i(),d("span",gs,t[38]||(t[38]=[e("svg",{class:"animate-spin h-5 w-5 text-white mr-2",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),S(" Memproses... ")]))):(i(),d("span",vs,"Ya, Revisi"))]),_:1},8,["href","disabled","class"])])])])):_("",!0),n.value?(i(),d("div",fs,[e("div",ys,[t[42]||(t[42]=e("h3",{class:"text-lg font-bold mb-4"},"Kirim Laporan Via Email",-1)),t[43]||(t[43]=e("p",{class:"text-gray-700 mb-2"}," Masukkan alamat email tujuan: ",-1)),j(e("input",{type:"email","onUpdate:modelValue":t[11]||(t[11]=$=>o.value=$),class:"w-full px-3 py-2 border rounded-md focus:ring-indigo-500 focus:border-indigo-500",placeholder:"contoh@email.com"},null,512),[[A,o.value]]),e("div",bs,[e("button",{onClick:t[12]||(t[12]=$=>n.value=!1),disabled:a.value,class:"bg-gray-300 text-gray-800 px-4 py-2 rounded-md hover:bg-gray-400"}," Batal ",8,hs),e("button",{onClick:se,disabled:!0,class:"bg-teal-500 text-white px-4 py-2 rounded-md hover:bg-teal-600 opacity-50 cursor-not-allowed"}," Masih dalam pengembangan ")])])])):_("",!0)]),_:1}))}},Ms=ce(ws,[["__scopeId","data-v-63fb787c"]]);export{Ms as default};
