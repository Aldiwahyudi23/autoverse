import{r as s,g as f}from"./vendor-g77w9U1W.js";function m(u,i){const o=s({x:i.x,y:i.y}),l=s(!1),n=s(null),t=s(!1),r=s({x:0,y:0});f(()=>{const e=localStorage.getItem(u);if(e)try{o.value=JSON.parse(e)}catch(a){console.error("Error parsing saved position:",a)}});const v=e=>{e.type.includes("touch")?(r.value.x=e.touches[0].clientX,r.value.y=e.touches[0].clientY):(r.value.x=e.clientX,r.value.y=e.clientY),n.value=setTimeout(()=>{t.value=!0,l.value=!0,console.log("Long press activated - drag mode ON")},900)},g=()=>{n.value&&(clearTimeout(n.value),n.value=null),t.value=!1};return{pos:o,dragging:l,startLongPress:v,cancelLongPress:g,onDrag:e=>{if(!l.value||!t.value)return;e.preventDefault();let a,c;e.type.includes("touch")?(a=e.touches[0].clientX,c=e.touches[0].clientY):(a=e.clientX,c=e.clientY),o.value.x=a-24,o.value.y=c-24},stopDrag:()=>{if(l.value&&t.value){console.log("Drag stopped - saving position"),l.value=!1,t.value=!1;try{localStorage.setItem(u,JSON.stringify(o.value))}catch(e){console.error("Error saving position:",e)}}g()},handleClick:e=>!l.value&&!t.value?(console.log("Regular click detected"),!0):(console.log("Click ignored - part of drag operation"),!1)}}export{m as u};
