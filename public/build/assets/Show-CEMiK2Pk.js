import{p as X,q as Z,r as p,j as tt,o as n,w as st,k as et,d as t,c as o,b,u as J,v as at,n as c,t as a,F as g,m as nt,f as ot,W as it}from"./vendor-CUNG9NG6.js";import{A as lt}from"./AppLayout-eoOJrqCt.js";import{_ as rt}from"./app-d-p9LS84.js";const dt={class:"w-full px-4 sm:px-6 lg:px-6 py-6 animate-fade-in"},ct={class:"bg-white shadow-lg rounded-xl p-4 sm:p-6 space-y-2 border-t-4 border-indigo-500 transition-all duration-300 hover:shadow-xl"},xt={class:"flex items-center justify-between"},gt={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},mt={class:"space-y-2"},ut={class:"flex flex-col p-1 bg-gray-50 rounded-lg"},pt={class:"text-gray-800 font-semibold"},bt={class:"flex flex-col p-1 bg-gray-50 rounded-lg"},yt={class:"text-gray-800 font-semibold"},ft={class:"flex flex-col p-1 bg-gray-50 rounded-lg"},ht={class:"text-gray-800 font-semibold"},vt={class:"flex flex-col p-1 bg-gray-50 rounded-lg"},wt={class:"text-gray-800 font-semibold"},kt={class:"space-y-2"},_t={class:"flex flex-col p-1 bg-gray-50 rounded-lg"},Dt={class:"text-gray-800 font-semibold"},Ct={class:"flex flex-col p-1 bg-gray-50 rounded-lg"},Pt={class:"text-gray-800 font-semibold"},It={class:"flex flex-col p-1 bg-gray-50 rounded-lg"},At={class:"text-gray-800 font-semibold"},Tt={class:"bg-white shadow-lg rounded-xl p-4 sm:p-6 border-t-4 border-blue-500 transition-all duration-300 hover:shadow-xl"},jt={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Mt={class:"space-y-2"},St={class:"flex flex-col p-1 bg-gray-50 rounded-lg"},Nt={class:"text-gray-800 font-semibold"},Bt={class:"flex flex-col p-1 bg-gray-50 rounded-lg"},zt={class:"text-gray-800 font-semibold"},Ot={class:"text-xs text-gray-500"},Rt={class:"text-xs text-gray-500"},Vt={class:"flex flex-col p-1 bg-gray-50 rounded-lg"},Wt={class:"text-gray-800 font-semibold"},Ft={class:"text-xs text-gray-500"},Ht={class:"text-xs text-gray-500"},Kt={class:"space-y-2"},Lt={class:"flex flex-col p-1 bg-gray-50 rounded-lg"},Et={class:"text-gray-800 font-semibold"},$t={class:"flex flex-col p-1 bg-gray-50 rounded-lg"},qt={class:"flex flex-col p-1 bg-gray-50 rounded-lg"},Jt={class:"mt-1 self-start"},Yt=["href"],Gt={class:"bg-white shadow-lg rounded-xl p-4 sm:p-6 border-t-4 border-green-500 transition-all duration-300 hover:shadow-xl"},Qt={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Ut={class:"space-y-2"},Xt={class:"flex flex-col p-1 bg-gray-50 rounded-lg"},Zt={class:"text-gray-800 font-semibold"},ts={class:"flex flex-col p-1 bg-gray-50 rounded-lg"},ss={class:"text-gray-800 font-semibold"},es={class:"flex flex-col p-1 bg-gray-50 rounded-lg"},as={class:"text-gray-800 font-semibold"},ns={class:"flex flex-col p-1 bg-gray-50 rounded-lg"},os={class:"text-gray-800 font-semibold"},is={class:"space-y-2"},ls={class:"flex flex-col p-1 bg-gray-50 rounded-lg"},rs={class:"text-gray-800 font-semibold"},ds={class:"flex flex-col p-1 bg-gray-50 rounded-lg"},cs={class:"text-gray-800 font-semibold"},xs={class:"flex flex-col p-1 bg-gray-50 rounded-lg"},gs={class:"flex flex-col p-1 bg-gray-50 rounded-lg"},ms={class:"text-gray-800 font-semibold"},us={key:0,class:"bg-white shadow-lg rounded-xl p-4 sm:p-6 border-t-4 border-yellow-500 overflow-x-auto transition-all duration-300 hover:shadow-xl"},ps={class:"flex justify-between items-center mb-4"},bs={class:"text-sm text-gray-500"},ys={class:"relative overflow-x-auto rounded-lg"},fs={class:"w-full text-sm text-left text-gray-500"},hs={class:"px-4 py-4 font-medium text-gray-900 whitespace-nowrap"},vs={class:"px-4 py-4 whitespace-nowrap"},ws={class:"px-4 py-4 whitespace-nowrap"},ks={class:"px-4 py-4 whitespace-nowrap text-right font-medium"},_s={class:"px-4 py-4 whitespace-nowrap text-center"},Ds={class:"px-4 py-4 whitespace-nowrap text-center"},Cs={class:"px-4 py-4 whitespace-nowrap"},Ps={class:"px-4 py-4 whitespace-nowrap"},Is={key:0,class:"px-4 py-4 whitespace-nowrap"},As=["onClick","disabled"],Ts={key:0,class:"animate-spin -ml-1 mr-1 h-3 w-3 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},js={key:1},Ms={key:1,class:"text-green-600 text-xs sm:text-sm"},Ss={key:1,class:"flex items-center text-red-600 text-xs sm:text-sm"},Ns=["onClick","disabled"],Bs={key:0,class:"animate-spin -ml-1 mr-1 h-3 w-3 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},zs={key:1},Os={key:1,class:"text-green-600 text-xs sm:text-sm"},Rs={key:0,class:"fixed inset-0 z-50 overflow-y-auto bg-gray-900 bg-opacity-50 flex items-center justify-center"},Vs={class:"bg-white rounded-lg shadow-xl p-6 sm:p-8 max-w-sm w-full mx-4 transform transition-all scale-100 ease-out duration-300"},Ws={class:"mt-6 flex justify-center space-x-4"},Fs=["disabled"],Hs={key:0,class:"flex items-center"},Ks={key:1},Ls={__name:"Show",props:{distribution:Object,transaction:Object,distributionAll:Array,inspection:Object,inspectionId:Object,role:Object},setup(e){const Y=X().props.auth.user,d=l=>l?new Date(l).toLocaleDateString("id-ID",{day:"2-digit",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"}):"-",m=l=>new Intl.NumberFormat("id-ID").format(l||0),y=Z(()=>l=>{switch(l){case"completed":return"Selesai";case"in_progress":return"Dalam Proses";case"draft":return"Draf";case"Released":case"released":return"Diberikan";case"Pending":case"pending":return"Menunggu";case"paid":return"Dibayar";case"unpaid":return"Belum Dibayar";case"cancelled":return"Dibatalkan";default:return l}}),f=l=>{switch(l){case"completed":case"released":case"paid":return"bg-green-100 text-green-800";case"in_progress":return"bg-blue-100 text-blue-800";case"draft":return"bg-gray-100 text-gray-800";case"pending":case"Pending":return"bg-yellow-100 text-yellow-800";case"unpaid":return"bg-orange-100 text-orange-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},h=l=>l?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800",u=p(!1),x=p(null),r=p(!1),v=l=>{x.value=l,u.value=!0},w=()=>{u.value=!1,x.value=null},G=()=>{x.value&&(r.value=!0,it.put(route("distributions.release",x.value),{},{onFinish:()=>{r.value=!1,w()}}))};return(l,s)=>(n(),tt(lt,{title:"Detail Distribusi"},{default:st(()=>{var k,_,D,C,P,I,A,T,j,M,S,N,B,z,O,R,V,W,F,H,K,L;return[et(J(at),{title:"Detail Distribusi"}),t("div",dt,[s[30]||(s[30]=t("div",{class:"flex flex-col text-center mb-4"},[t("h1",{class:"text-xl sm:text-xl font-bold text-gray-800"},"Detail Distribusi"),t("p",{class:"text-sm text-gray-500 mt-1"},"Informasi lengkap mengenai distribusi dana")],-1)),t("div",ct,[t("div",xt,[s[0]||(s[0]=t("h2",{class:"text-lg sm:text-xl font-semibold text-indigo-700"},"Ringkasan Pembagian",-1)),t("div",{class:c(["px-3 py-1 rounded-full text-xs font-semibold",h(e.distribution.is_released)])},a(e.distribution.is_released?"Diberikan":"Menunggu"),3)]),t("div",gt,[t("div",mt,[t("div",ut,[s[1]||(s[1]=t("span",{class:"text-sm font-medium text-gray-500"},"Tanggal Distribusi",-1)),t("span",pt,a(d(e.distribution.created_at)),1)]),t("div",bt,[s[2]||(s[2]=t("span",{class:"text-sm font-medium text-gray-500"},"ID Transaksi",-1)),t("span",yt,a(((k=e.distribution.transaction)==null?void 0:k.invoice_number)??"-"),1)]),t("div",ft,[s[3]||(s[3]=t("span",{class:"text-sm font-medium text-gray-500"},"Nominal",-1)),t("span",ht,"Rp "+a(m(e.distribution.amount)),1)]),t("div",vt,[s[4]||(s[4]=t("span",{class:"text-sm font-medium text-gray-500"},"Persentase",-1)),t("span",wt,a(e.distribution.percentage)+"%",1)])]),t("div",kt,[t("div",_t,[s[5]||(s[5]=t("span",{class:"text-sm font-medium text-gray-500"},"Diberikan Oleh",-1)),t("span",Dt,a(((_=e.distribution.released)==null?void 0:_.name)??"-"),1)]),t("div",Ct,[s[6]||(s[6]=t("span",{class:"text-sm font-medium text-gray-500"},"Waktu Pemberian",-1)),t("span",Pt,a(e.distribution.released_at?d(e.distribution.released_at):"-"),1)]),t("div",It,[s[7]||(s[7]=t("span",{class:"text-sm font-medium text-gray-500"},"Catatan",-1)),t("span",At,a(e.distribution.calculation_note?e.distribution.calculation_note:"Tidak ada catatan"),1)])])])]),t("div",Tt,[s[14]||(s[14]=t("h2",{class:"text-lg sm:text-xl font-semibold text-gray-800 mb-4"},"Informasi Inspeksi & Pengguna",-1)),t("div",jt,[t("div",Mt,[t("div",St,[s[8]||(s[8]=t("span",{class:"text-sm font-medium text-gray-500"},"Mobil",-1)),t("span",Nt,a((C=(D=e.inspection.car)==null?void 0:D.brand)==null?void 0:C.name)+" "+a((I=(P=e.inspection.car)==null?void 0:P.model)==null?void 0:I.name)+" "+a((T=(A=e.inspection.car)==null?void 0:A.type)==null?void 0:T.name)+" ("+a((j=e.inspection.car)==null?void 0:j.year)+") ",1)]),t("div",Bt,[s[9]||(s[9]=t("span",{class:"text-sm font-medium text-gray-500"},"Nama Inspektor",-1)),t("span",zt,a(((M=e.inspection.user)==null?void 0:M.name)??"-"),1),t("div",Ot,a(((S=e.inspection.user)==null?void 0:S.numberPhone)??"-"),1),t("div",Rt,a(((B=(N=e.inspection.user)==null?void 0:N.roles[0])==null?void 0:B.name)??"-"),1)]),t("div",Vt,[s[10]||(s[10]=t("span",{class:"text-sm font-medium text-gray-500"},"Dibuat Oleh",-1)),t("span",Wt,a(((z=e.inspection.submitted)==null?void 0:z.name)??"-"),1),t("div",Ft,a(((O=e.inspection.user)==null?void 0:O.numberPhone)??"-"),1),t("div",Ht,a(((V=(R=e.inspection.user)==null?void 0:R.roles[0])==null?void 0:V.name)??"-"),1)])]),t("div",Kt,[t("div",Lt,[s[11]||(s[11]=t("span",{class:"text-sm font-medium text-gray-500"},"Tanggal Inspeksi",-1)),t("span",Et,a(d(e.inspection.inspection_date)),1)]),t("div",$t,[s[12]||(s[12]=t("span",{class:"text-sm font-medium text-gray-500"},"Status Inspeksi",-1)),t("span",{class:c(["px-3 py-1 mt-1 rounded-full text-xs font-semibold self-start",f(e.inspection.status)])},a(y.value(e.inspection.status)),3)]),t("div",qt,[s[13]||(s[13]=t("span",{class:"text-sm font-medium text-gray-500"},"Status Inspeksi",-1)),t("span",Jt,[t("a",{href:l.route("inspections.review",e.inspectionId),class:"inline-flex items-center px-4 py-2 rounded-lg text-xs font-semibold text-white bg-blue-600 hover:bg-blue-700 transition"}," ðŸ“„ Report ",8,Yt)])])])])]),t("div",Gt,[s[25]||(s[25]=t("h2",{class:"text-lg sm:text-xl font-semibold text-gray-800 mb-4"},"Data Pelanggan & Transaksi",-1)),t("div",Qt,[t("div",Ut,[s[19]||(s[19]=t("h3",{class:"text-md font-medium text-gray-700 border-b pb-2"},"Informasi Pelanggan",-1)),t("div",Xt,[s[15]||(s[15]=t("span",{class:"text-sm font-medium text-gray-500"},"Nama Pelanggan",-1)),t("span",Zt,a(((W=e.inspection.customer)==null?void 0:W.name)??"-"),1)]),t("div",ts,[s[16]||(s[16]=t("span",{class:"text-sm font-medium text-gray-500"},"Telepon",-1)),t("span",ss,a(((F=e.inspection.customer)==null?void 0:F.phone)??"-"),1)]),t("div",es,[s[17]||(s[17]=t("span",{class:"text-sm font-medium text-gray-500"},"Email",-1)),t("span",as,a(((H=e.inspection.customer)==null?void 0:H.email)??"-"),1)]),t("div",ns,[s[18]||(s[18]=t("span",{class:"text-sm font-medium text-gray-500"},"Alamat",-1)),t("span",os,a(((K=e.inspection.customer)==null?void 0:K.address)??"-"),1)])]),t("div",is,[s[24]||(s[24]=t("h3",{class:"text-md font-medium text-gray-700 border-b pb-2"},"Informasi Transaksi",-1)),t("div",ls,[s[20]||(s[20]=t("span",{class:"text-sm font-medium text-gray-500"},"Nominal Transaksi",-1)),t("span",rs,"Rp "+a(m(e.transaction.amount)),1)]),t("div",ds,[s[21]||(s[21]=t("span",{class:"text-sm font-medium text-gray-500"},"Tanggal Transaksi",-1)),t("span",cs,a(d(e.transaction.created_at)),1)]),t("div",xs,[s[22]||(s[22]=t("span",{class:"text-sm font-medium text-gray-500"},"Status Transaksi",-1)),t("span",{class:c(["px-3 py-1 mt-1 rounded-full text-xs font-semibold self-start",f(e.transaction.status)])},a(y.value(e.transaction.status)),3)]),t("div",gs,[s[23]||(s[23]=t("span",{class:"text-sm font-medium text-gray-500"},"Pembayaran dilakukan oleh",-1)),t("span",ms,a(((L=e.transaction.payer)==null?void 0:L.name)??"-"),1)])])])]),e.role=="Admin"||e.role=="coordinator"?(n(),o("div",us,[t("div",ps,[s[26]||(s[26]=t("h2",{class:"text-lg sm:text-xl font-semibold text-gray-800"},"Detail Pembagian Transaksi",-1)),t("span",bs,a(e.distributionAll.length)+" Penerima",1)]),t("div",ys,[t("table",fs,[s[29]||(s[29]=t("thead",{class:"text-xs text-gray-700 uppercase bg-gray-100"},[t("tr",null,[t("th",{scope:"col",class:"px-4 py-3"},"Penerima"),t("th",{scope:"col",class:"px-4 py-3"},"Wilayah"),t("th",{scope:"col",class:"px-4 py-3"},"Jenis"),t("th",{scope:"col",class:"px-4 py-3 text-right"},"Nominal"),t("th",{scope:"col",class:"px-4 py-3 text-center"},"Persentase"),t("th",{scope:"col",class:"px-4 py-3 text-center"},"Status"),t("th",{scope:"col",class:"px-4 py-3"},"Diberikan Oleh"),t("th",{scope:"col",class:"px-4 py-3"},"Waktu Diberikan")])],-1)),t("tbody",null,[(n(!0),o(g,null,nt(e.distributionAll,(i,Q)=>{var E,$,q;return n(),o("tr",{key:i.id,class:c(["bg-white border-b hover:bg-gray-50 transition-colors duration-200",Q%2===0?"":"bg-gray-50"])},[t("td",hs,a(((E=i.user)==null?void 0:E.name)??"-"),1),t("td",vs,a((($=i.region)==null?void 0:$.name)??"-"),1),t("td",ws,a(i.role_type),1),t("td",ks," Rp "+a(m(i.amount)),1),t("td",_s,a(i.percentage)+"% ",1),t("td",Ds,[t("span",{class:c(["px-3 py-1 rounded-full text-xs font-semibold",h(i.is_released)])},a(i.is_released?"Diberikan":"Menunggu"),3)]),t("td",Cs,a(((q=i.released)==null?void 0:q.name)??"-"),1),t("td",Ps,a(i.released_at?d(i.released_at):"-"),1),i.transaction.paid_by==J(Y).id||e.role=="Admin"?(n(),o("td",Is,[i.role_type==="Pendapatan"?(n(),o(g,{key:0},[e.role=="Admin"?(n(),o(g,{key:0},[i.is_released?(n(),o("span",Ms," âœ” Diberikan ")):(n(),o("button",{key:0,onClick:U=>v(i.encrypted_id),disabled:r.value,class:"flex items-center justify-center px-2 py-1 bg-indigo-600 text-white text-xs sm:text-sm rounded hover:bg-indigo-700 transition-colors disabled:bg-indigo-400 disabled:cursor-not-allowed"},[r.value?(n(),o("svg",Ts,s[27]||(s[27]=[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):(n(),o("span",js,"Kirim"))],8,As))],64)):(n(),o("span",Ss," âœ– Hanya Owner yang bisa konfirmasi "))],64)):(n(),o(g,{key:1},[i.is_released?(n(),o("span",Os," âœ” Diberikan ")):(n(),o("button",{key:0,onClick:U=>v(i.encrypted_id),disabled:r.value,class:"flex items-center justify-center px-2 py-1 bg-indigo-600 text-white text-xs sm:text-sm rounded hover:bg-indigo-700 transition-colors disabled:bg-indigo-400 disabled:cursor-not-allowed"},[r.value?(n(),o("svg",Bs,s[28]||(s[28]=[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):(n(),o("span",zs,"Kirim"))],8,Ns))],64))])):b("",!0)],2)}),128))])])])])):b("",!0)]),u.value?(n(),o("div",Rs,[t("div",Vs,[s[32]||(s[32]=t("div",{class:"flex flex-col items-center text-center"},[t("div",{class:"bg-indigo-100 p-1 rounded-full mb-4"},[t("svg",{class:"h-8 w-8 text-indigo-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})])]),t("h3",{class:"text-lg font-bold text-gray-900"},"Konfirmas"),t("p",{class:"text-sm text-gray-600 mt-2"}," Anda yakin ingin mengirim distribusi ini? ini tidak dapat dibatalkan. ")],-1)),t("div",Ws,[t("button",{type:"button",onClick:w,class:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300 transition-colors"}," Batal "),t("button",{type:"button",onClick:G,disabled:r.value,class:"px-4 py-2 text-sm font-medium text-white bg-indigo-600 rounded-md hover:bg-indigo-700 transition-colors disabled:bg-indigo-400 disabled:cursor-not-allowed flex items-center"},[r.value?(n(),o("span",Hs,s[31]||(s[31]=[t("svg",{class:"animate-spin h-4 w-4 mr-2",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),ot(" Memproses... ")]))):(n(),o("span",Ks,"Ya, Setor"))],8,Fs)])])])):b("",!0)]}),_:1}))}},Ys=rt(Ls,[["__scopeId","data-v-6d9caa3b"]]);export{Ys as default};
