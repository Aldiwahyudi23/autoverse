import{x as oa,r as y,g as st,q as te,H as wt,G as ye,c as i,o as n,d as e,b as d,k as Ve,z as Le,A as dt,n as re,t as z,F as Ue,m as Pe,f as Ne,u as ee,e as ia,y as ct,w as Fe,L as Ke,D as Pt,M as Lt,j as De,a as jt,l as aa,T as gt,N as Dt,p as xa,O as sa,J as at,B as wa,S as ka,I as Bt,W as Nt}from"./vendor-CUNG9NG6.js";import{l as la}from"./lodash-CeUj5J-L.js";import{_ as Ia}from"./PrimaryButton-h2qnLbgr.js";import{_ as _a}from"./ActionMessage-C19FCsLq.js";import{F as Sa}from"./fuse-Ch1WBRTM.js";import{_ as He}from"./app-C4hI74Dr.js";import{_ as ra}from"./InputNumber-BM446ncS.js";const Ca={class:"bg-gray-50 shadow-lg rounded-xl overflow-hidden border border-gray-100"},$a={key:0,class:"p-4 space-y-2"},Aa={class:"space-y-2 pb-2 border-b border-gray-100 last:border-0 last:pb-0"},Va={class:"flex items-center space-x-2"},Ta={key:0,class:"text-xs text-red-500 font-normal ml-2"},Ma={key:1,class:"text-xs text-red-500 font-normal ml-2"},Ea={key:2,class:"text-xs text-green-500 font-normal ml-2"},Ua={class:"space-y-2 pb-2 border-b border-gray-100 last:border-0 last:pb-0"},Na={class:"grid grid-cols-1 sm:grid-cols-3 gap-3"},Da={class:"col-span-2 flex space-x-3"},Pa={class:"mt-3 p-3 bg-blue-50 border border-blue-200 rounded-lg"},La={class:"flex items-start"},Ra={class:"text-sm text-blue-700"},ja={class:"mt-1"},Ba={key:0,class:"inline-flex items-center px-2 py-1 rounded bg-blue-100 text-blue-800 text-xs font-medium mr-2"},Fa={key:1,class:"inline-flex items-center px-2 py-1 rounded bg-green-100 text-green-800 text-xs font-medium mr-2"},Oa={key:2,class:"inline-flex items-center px-2 py-1 rounded bg-green-100 text-green-800 text-xs font-medium"},za={key:3,class:"text-blue-600"},qa={class:"space-y-2 pb-2 border-b border-gray-100 last:border-0 last:pb-0"},Ka={class:"relative"},Ha={key:0,class:"absolute right-3 top-3"},Ga={key:1,class:"mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-60 overflow-y-auto"},Wa={key:0},Ya=["onMousedown"],Za={class:"font-medium text-gray-900"},Ja={class:"text-sm text-gray-500"},Xa={key:1,class:"p-4 text-sm text-gray-500 text-center"},Qa={key:0,class:"text-xs text-red-500 font-normal ml-2"},es={key:0,class:"mt-3 p-3 bg-yellow-50 border border-yellow-200 rounded-md"},ts={key:1,class:"mb-6 p-4 bg-gray-50 rounded-lg border border-gray-200"},as={key:0,class:"mb-4"},ss=["innerHTML"],ns={key:1},os={class:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3"},is=["onClick"],ls=["src","alt"],rs={key:0,class:"absolute inset-0 bg-black bg-opacity-50 opacity-0 group-hover:opacity-100 transition-opacity rounded-lg flex items-center justify-center p-2"},us={class:"text-white text-xs text-center"},ds={key:2,class:"text-center py-4 text-gray-500 text-sm"},cs={class:"relative max-w-4xl max-h-full w-full h-full flex items-center justify-center"},gs=["src","alt"],ps={key:2,class:"absolute bottom-4 left-1/2 transform -translate-x-1/2 text-white bg-black bg-opacity-50 px-3 py-1 rounded-full text-sm"},ms={key:3,class:"absolute bottom-4 left-4 text-white bg-black bg-opacity-50 px-3 py-1 rounded text-sm max-w-md"},vs={key:0,class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},fs={__name:"VehicleDetails",props:{inspection:{type:Object,default:null},CarDetail:Array,allInspections:{type:Array,default:()=>[]}},emits:["update-vehicle","update:validation","update:hasUnsavedChanges","update:vehicle-type"],setup(a,{emit:ae}){var u,m,C,Z,ue,ve;const t=a,A=ae,c=oa({plate_number:((u=t.inspection)==null?void 0:u.plate_number)||"",car_id:((m=t.inspection)==null?void 0:m.car_id)||null,car_name:((C=t.inspection)==null?void 0:C.car_name)||""}),V=y(((Z=t.inspection)==null?void 0:Z.plate_number)||""),b=y(((ue=t.inspection)==null?void 0:ue.car_id)||null),S=y(((ve=t.inspection)==null?void 0:ve.car_name)||""),I=y(""),R=y(""),x=y(""),D=y(null),E=y({rear_door:!1}),Q=y(!1),v=y(""),p=y(""),M=y(c.car_name),K=y(!1),U=y(!1),H=y([]),Y=y(null),F=y([]),k=y(!1),L=y(0);st(()=>{var f,g,se,$,ne;if(O((f=t.inspection)==null?void 0:f.plate_number),(g=t.inspection)!=null&&g.car_id&&((se=t.CarDetail)==null?void 0:se.length)>0){const ke=t.CarDetail.find(Ae=>Ae.id===t.inspection.car_id);ke&&ge(ke)}else!(($=t.inspection)!=null&&$.car_id)&&((ne=t.inspection)!=null&&ne.car_name)&&(M.value=t.inspection.car_name,c.car_id=null);window.addEventListener("keydown",Me),ce(),A("update:hasUnsavedChanges",N.value),A("update:validation",P.value)}),wt(()=>{window.removeEventListener("keydown",Me)});const ce=()=>{try{const f=localStorage.getItem("vehicle_features");if(f){const g=JSON.parse(f);E.value.rear_door=g.rear_door||!1,g.pick_up?D.value="pick_up":g.box?D.value="box":D.value=null}else E.value.rear_door=!1,D.value=null;w()}catch(f){console.error("Error loading vehicle type from localStorage:",f),E.value.rear_door=!1,D.value=null,w()}},_=()=>{E.value.rear_door=!E.value.rear_door,s()},h=f=>{D.value===f?D.value=null:D.value=f,s()},s=()=>{try{const f={rear_door:E.value.rear_door,pick_up:D.value==="pick_up",box:D.value==="box"};localStorage.setItem("vehicle_features",JSON.stringify(f)),w(),console.log("Vehicle features saved to localStorage:",f)}catch(f){console.error("Error saving vehicle type to localStorage:",f)}},w=()=>{const f={rear_door:E.value.rear_door,pick_up:D.value==="pick_up",box:D.value==="box"};A("update:vehicle-type",f)},O=f=>{if(!f){I.value="",R.value="",x.value="";return}const g=f.toUpperCase().trim(),se=g.match(/^([A-Z]{1,2})?([0-9]{1,4})?([A-Z]{1,3})?$/);if(se)I.value=se[1]||"",R.value=se[2]||"",x.value=se[3]||"";else{let $="area",ne="",ke="",Ae="";for(const Ie of g)$==="area"&&/[A-Z]/.test(Ie)?ne+=Ie:$==="area"&&/[0-9]/.test(Ie)?($="number",ke+=Ie):$==="number"&&/[0-9]/.test(Ie)?ke+=Ie:$==="number"&&/[A-Z]/.test(Ie)?($="suffix",Ae+=Ie):$==="suffix"&&/[A-Z]/.test(Ie)&&(Ae+=Ie);I.value=ne,R.value=ke,x.value=Ae}de()},de=()=>{const f=`${I.value}${R.value}${x.value}`;c.plate_number=f,Ee()},W=f=>{f==="area"?I.value=I.value.toUpperCase().replace(/[^A-Z]/g,""):f==="number"?R.value=R.value.replace(/[^0-9]/g,""):f==="suffix"&&(x.value=x.value.toUpperCase().replace(/[^A-Z]/g,"")),de()},G=te(()=>{const f=c.plate_number;return/^[A-Z]{1,2}\d{1,4}[A-Z]{0,3}$/.test(f)}),ie=te(()=>!M.value||M.value.trim()===""),me=te(()=>c.plate_number.length>0&&!G.value?"Format plat nomor tidak valid.":null),P=te(()=>{const f=!c.plate_number||c.plate_number.trim()==="",g=!M.value||M.value.trim()==="";return f||g||!G.value||Q.value}),N=te(()=>{const f=c.plate_number!==V.value,g=c.car_id!==b.value||M.value!==S.value;return f||g}),j=te(()=>N.value&&!P.value),q=f=>{var se,$,ne;if(!f)return"";const g=[];return(se=f.brand)!=null&&se.name&&g.push(f.brand.name),($=f.model)!=null&&$.name&&g.push(f.model.name),(ne=f.type)!=null&&ne.name&&g.push(f.type.name),f.cc&&g.push((f.cc/1e3).toFixed(1)),f.transmission&&g.push(f.transmission),f.year&&g.push(f.year.toString()),f.fuel_type&&g.push(f.fuel_type),f.production_period&&g.push(`(${f.production_period})`),g.join(" ")},X=la.debounce(()=>{if(!M.value.trim()){H.value=[],K.value=!1;return}U.value=!0;try{const f=M.value.trim();if(t.CarDetail&&t.CarDetail.length>0){const g=t.CarDetail.map(ne=>({...ne,formattedName:q(ne)})),$=new Sa(g,{keys:["formattedName","brand.name","model.name","type.name"],threshold:.6,findAllMatches:!0,includeScore:!0,shouldSort:!0}).search(f).slice(0,10);H.value=$.map(ne=>ne.item)}else H.value=[];K.value=!0}finally{U.value=!1}},300),oe=()=>{if(c.car_id&&(c.car_id=null,Y.value=null,F.value=[]),!M.value.trim()){H.value=[],K.value=!1;return}X()},fe=()=>{setTimeout(()=>{K.value=!1,!c.car_id&&M.value&&(c.car_name=M.value,Ee())},200)},ge=async f=>{Y.value=f,M.value=q(f),c.car_id=f.id,c.car_name=q(f),K.value=!1,X.cancel(),await _e(f.id),Ee(),A("update:hasUnsavedChanges",N.value),A("update:validation",P.value)},Te=f=>!f||!f.file_path?"":`/storage/${f.file_path}`,_e=async f=>{try{const g=await fetch(`/api/cars/${f}/images`);if(g.ok){const se=await g.json();F.value=Array.isArray(se)?se:[]}else F.value=[]}catch(g){console.error("Error loading car images:",g),F.value=[]}},he=f=>{L.value=f,k.value=!0,document.body.style.overflow="hidden"},Ce=()=>{k.value=!1,document.body.style.overflow=""},$e=()=>{L.value=(L.value+1)%F.value.length},we=()=>{L.value=(L.value-1+F.value.length)%F.value.length},Me=f=>{if(k.value)switch(f.key){case"Escape":Ce();break;case"ArrowRight":$e();break;case"ArrowLeft":we();break}},Ee=()=>{const f={plate_number:c.plate_number,car_id:c.car_id,car_name:c.car_name};A("update-vehicle",f)},r=()=>{t.inspection&&c.post(route("inspections.updateVehicleDetails",{inspection:t.inspection.id}),{preserveScroll:!0,onSuccess:()=>{V.value=c.plate_number,b.value=c.car_id,S.value=c.car_name,A("update:hasUnsavedChanges",!1),console.log("Data berhasil disimpan!")},onError:f=>{console.error("Gagal menyimpan data:",f)}})};return ye([()=>c.plate_number,()=>c.car_name],f=>{v.value="",Q.value=!1,p.value="";const g=f[0];if(g&&g.length>=6){const se=t.allInspections.filter($=>{var ne;return $.plate_number===g&&$.id!==((ne=t.inspection)==null?void 0:ne.id)});if(se.length>0){const $=["draft","in_progress","pending","pending_review","revision"],ne=se.find(ke=>$.includes(ke.status));if(ne)Q.value=!0,v.value=`Nomor plat ini sedang dalam proses inspeksi dengan status: ${ne.status.replace(/_/g," ").toUpperCase()}.`;else{const ke=se.filter(Ae=>["approved","rejected","completed","cancelled"].includes(Ae.status));if(ke.length>0){ke.sort((Ie,Oe)=>new Date(Oe.created_at)-new Date(Ie.created_at));const Ae=ke[0];if(Ae.car_id){const Ie=t.CarDetail.find(Oe=>Oe.id===Ae.car_id);Ie&&ge(Ie)}else Ae.car_name&&(M.value=Ae.car_name,c.car_name=Ae.car_name,c.car_id=null);p.value=`Nomor plat ini sudah pernah diperiksa ${ke.length} kali sebelumnya.`}}}}A("update:hasUnsavedChanges",N.value),A("update:validation",P.value)},{deep:!0}),ye([()=>E.value.rear_door,()=>D.value],()=>{s()}),ye(()=>{var f;return(f=t.inspection)==null?void 0:f.car_id},f=>{var g,se;if(f!==c.car_id)if(c.car_id=f,f&&((g=t.CarDetail)==null?void 0:g.length)>0){const $=t.CarDetail.find(ne=>ne.id===f);$&&ge($)}else!f&&((se=t.inspection)!=null&&se.car_name)&&(M.value=t.inspection.car_name,c.car_name=t.inspection.car_name,c.car_id=null)}),ye(()=>{var f;return(f=t.inspection)==null?void 0:f.car_name},f=>{f&&f!==M.value&&(M.value=f)}),(f,g)=>{var se;return n(),i("div",Ca,[g[27]||(g[27]=e("div",{class:"bg-indigo-200 px-6 py-2 border-b flex items-center justify-between"},[e("h4",{class:"text-base font-semibold text-indigo-700"}," Detail Kendaraan ")],-1)),a.inspection?(n(),i("div",$a,[e("div",Aa,[g[11]||(g[11]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"}," Nomor Plat Kendaraan ",-1)),e("div",Va,[Le(e("input",{"onUpdate:modelValue":g[0]||(g[0]=$=>I.value=$),type:"text",placeholder:"Contoh: B",class:re(["w-1/4 rounded-lg border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm text-center transition duration-150",{"border-red-500 focus:border-red-500":!G.value||Q.value}]),onInput:g[1]||(g[1]=$=>W("area")),maxlength:"2"},null,34),[[dt,I.value]]),Le(e("input",{"onUpdate:modelValue":g[2]||(g[2]=$=>R.value=$),type:"tel",pattern:"[0-9]*",placeholder:"1234",class:re(["w-2/4 rounded-lg border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm text-center transition duration-150",{"border-red-500 focus:border-red-500":!G.value||Q.value}]),onInput:g[3]||(g[3]=$=>W("number")),maxlength:"4"},null,34),[[dt,R.value]]),Le(e("input",{"onUpdate:modelValue":g[4]||(g[4]=$=>x.value=$),type:"text",placeholder:"ABC",class:re(["w-1/4 rounded-lg border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm text-center transition duration-150",{"border-red-500 focus:border-red-500":!G.value||Q.value}]),onInput:g[5]||(g[5]=$=>W("suffix")),maxlength:"3"},null,34),[[dt,x.value]])]),me.value?(n(),i("span",Ta,z(me.value),1)):d("",!0),v.value?(n(),i("span",Ma,z(v.value),1)):d("",!0),p.value?(n(),i("span",Ea,z(p.value),1)):d("",!0)]),e("div",Ua,[g[15]||(g[15]=e("label",{class:"block text-sm font-medium text-gray-700 mb-3"}," Jenis Kendaraan ",-1)),e("div",Na,[e("div",{class:re(["w-full px-4 py-3 border-2 rounded-lg text-center transition-all duration-200 whitespace-nowrap text-sm font-medium cursor-pointer",{"border-indigo-500 bg-indigo-50 text-indigo-700 shadow-sm":E.value.rear_door,"border-gray-300 text-gray-700 hover:bg-gray-50 hover:border-gray-400":!E.value.rear_door}]),onClick:_},g[12]||(g[12]=[e("span",null,"Pintu Belakang",-1)]),2),e("div",Da,[e("div",{class:re(["flex-1 px-4 py-3 border-2 rounded-lg text-center transition-all duration-200 whitespace-nowrap text-sm font-medium cursor-pointer",{"border-indigo-500 bg-indigo-50 text-indigo-700 shadow-sm":D.value==="pick_up","border-gray-300 text-gray-700 hover:bg-gray-50 hover:border-gray-400":D.value!=="pick_up"}]),onClick:g[6]||(g[6]=$=>h("pick_up"))}," Pick Up ",2),e("div",{class:re(["flex-1 px-4 py-3 border-2 rounded-lg text-center transition-all duration-200 whitespace-nowrap text-sm font-medium cursor-pointer",{"border-indigo-500 bg-indigo-50 text-indigo-700 shadow-sm":D.value==="box","border-gray-300 text-gray-700 hover:bg-gray-50 hover:border-gray-400":D.value!=="box"}]),onClick:g[7]||(g[7]=$=>h("box"))}," Box ",2)])]),e("div",Pa,[e("div",La,[g[14]||(g[14]=e("svg",{class:"w-4 h-4 text-blue-600 mt-0.5 mr-2 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z","clip-rule":"evenodd"})],-1)),e("div",Ra,[g[13]||(g[13]=e("p",{class:"font-medium"},"Status Kendaraan:",-1)),e("p",ja,[E.value.rear_door?(n(),i("span",Ba," ✓ Mobil Pada Umum nya yang memiliki Pintu Belakang ")):d("",!0),D.value==="pick_up"?(n(),i("span",Fa," ✓ Pick Up ")):d("",!0),D.value==="box"?(n(),i("span",Oa," ✓ Box ")):d("",!0),!E.value.rear_door&&!D.value?(n(),i("span",za," Pilih jenis kendaraan agar point bisa menyesuaikan dengan tipe kendaraan anda ")):d("",!0)])])])])]),e("div",qa,[g[18]||(g[18]=e("label",{class:"block text-sm font-medium text-gray-700"}," Nama Mobil ",-1)),e("div",Ka,[Le(e("input",{"onUpdate:modelValue":g[8]||(g[8]=$=>M.value=$),type:"text",placeholder:"Cari atau ketik nama mobil...",class:re(["block w-full rounded-lg border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm transition duration-150",{"border-red-500 focus:border-red-500":ie.value}]),onInput:oe,onFocus:g[9]||(g[9]=$=>K.value=!0),onBlur:fe},null,34),[[dt,M.value]]),U.value?(n(),i("div",Ha,g[16]||(g[16]=[e("svg",{class:"animate-spin h-5 w-5 text-gray-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)]))):d("",!0),K.value?(n(),i("div",Ga,[H.value.length>0?(n(),i("div",Wa,[(n(!0),i(Ue,null,Pe(H.value,$=>(n(),i("div",{key:$.id,class:"px-4 py-3 hover:bg-gray-50 cursor-pointer border-b border-gray-100 last:border-b-0",onMousedown:ne=>ge($)},[e("div",Za,z(q($)),1),e("div",Ja,z($.year)+" • "+z($.cc)+"cc • "+z($.transmission)+" • "+z($.fuel_type),1)],40,Ya))),128))])):(n(),i("div",Xa,g[17]||(g[17]=[Ne(" Tidak ada data mobil yang cocok. "),e("br",null,null,-1),Ne(" Silakan input manual dengan format: "),e("br",null,null,-1),e("span",{class:"font-medium text-gray-800"},"Toyota Avanza 1.5 G AT Bensin 2019",-1)])))])):d("",!0)]),ie.value?(n(),i("span",Qa,"Nama mobil tidak boleh kosong.")):d("",!0)]),!ee(c).car_id&&M.value&&!K.value?(n(),i("div",es,g[19]||(g[19]=[ia('<div class="flex items-start" data-v-f5fe3b58><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-yellow-600 mt-0.5 mr-2 flex-shrink-0" fill="none" viewBox="0 0 24 24" stroke="currentColor" data-v-f5fe3b58><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" data-v-f5fe3b58></path></svg><div data-v-f5fe3b58><p class="text-yellow-800 font-medium mb-1" data-v-f5fe3b58>Informasi Penting</p><p class="text-yellow-700 text-sm mb-2" data-v-f5fe3b58> Anda memasukkan nama mobil secara manual. Data detail mobil (spesifikasi, gambar, deskripsi) <span class="font-semibold" data-v-f5fe3b58>tidak akan tersedia</span> dalam laporan inspeksi. </p><p class="text-yellow-700 text-sm mb-2" data-v-f5fe3b58> Untuk laporan yang lengkap dengan semua detail mobil, silakan pilih mobil dari hasil pencarian. </p><p class="text-yellow-700 text-sm" data-v-f5fe3b58> Jika tidak ingin mengubah data mobil dan anda tidak sengaja sudah menghapus atau edit, <span class="font-semibold" data-v-f5fe3b58>jangan klik tombol &quot;Perbarui Detail Kendaraan&quot;</span>. Sebagai gantinya, <span class="font-semibold" data-v-f5fe3b58>refresh halaman</span> untuk kembali ke data awal. </p></div></div>',1)]))):d("",!0),ee(c).car_id&&Y.value?(n(),i("div",ts,[Y.value.description?(n(),i("div",as,[g[20]||(g[20]=e("h3",{class:"text-sm font-medium text-gray-700 mb-2"},"Deskripsi:",-1)),e("div",{class:"prose prose-sm max-w-none text-gray-600",innerHTML:Y.value.description},null,8,ss)])):d("",!0),F.value.length>0?(n(),i("div",ns,[g[21]||(g[21]=e("h3",{class:"text-sm font-medium text-gray-700 mb-3"},"Gambar Mobil:",-1)),e("div",os,[(n(!0),i(Ue,null,Pe(F.value,($,ne)=>(n(),i("div",{key:$.id||ne,class:"relative group cursor-pointer",onClick:ke=>he(ne)},[e("img",{src:Te($),alt:$.name||"Car Image",class:"w-full h-24 object-cover rounded-lg border border-gray-200 transition-transform duration-200 group-hover:scale-105"},null,8,ls),$.note?(n(),i("div",rs,[e("p",us,z($.note),1)])):d("",!0)],8,is))),128))])])):(n(),i("div",ds," Tidak ada gambar tersedia untuk mobil ini "))])):d("",!0),k.value?(n(),i("div",{key:2,class:"fixed inset-0 bg-black bg-opacity-90 z-50 flex items-center justify-center p-4",onClick:Ce},[e("div",cs,[e("button",{onClick:Ce,class:"absolute top-4 right-4 z-10 text-white bg-black bg-opacity-50 rounded-full p-2 hover:bg-opacity-70 transition-colors"},g[22]||(g[22]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])),F.value.length>1?(n(),i("button",{key:0,onClick:ct(we,["stop"]),class:"absolute left-4 z-10 text-white bg-black bg-opacity-50 rounded-full p-3 hover:bg-opacity-70 transition-colors"},g[23]||(g[23]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)]))):d("",!0),F.value.length>1?(n(),i("button",{key:1,onClick:ct($e,["stop"]),class:"absolute right-4 z-10 text-white bg-black bg-opacity-50 rounded-full p-3 hover:bg-opacity-70 transition-colors"},g[24]||(g[24]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)]))):d("",!0),e("img",{src:Te(F.value[L.value]),alt:"Car Image "+(L.value+1),class:"max-w-full max-h-full object-contain",onClick:g[10]||(g[10]=ct(()=>{},["stop"]))},null,8,gs),F.value.length>1?(n(),i("div",ps,z(L.value+1)+" / "+z(F.value.length),1)):d("",!0),(se=F.value[L.value])!=null&&se.note?(n(),i("div",ms,z(F.value[L.value].note),1)):d("",!0)])])):d("",!0),Ve(Ia,{type:"button",onClick:r,class:"w-full inline-flex items-center justify-center px-6 py-3 border border-transparent text-base font-medium rounded-md shadow-sm bg-gradient-to-r from-indigo-700 to-sky-600 shadow-lg text-white focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition duration-150 ease-in-out disabled:opacity-50 disabled:cursor-not-allowed",disabled:!j.value},{default:Fe(()=>[ee(c).processing?(n(),i("svg",vs,g[25]||(g[25]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):d("",!0),e("span",null,z(ee(c).processing?"Mengirim...":"Perbarui Detail Kendaraan"),1),Ve(_a,{on:ee(c).recentlySuccessful,class:"me-3 text-sm text-green-600 font-medium"},{default:Fe(()=>g[26]||(g[26]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 inline-block mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1),Ne(" Tersimpan. ")])),_:1,__:[26]},8,["on"])]),_:1},8,["disabled"])])):d("",!0)])}}},hs=He(fs,[["__scopeId","data-v-f5fe3b58"]]),bs={class:"mt-1"},ys=["value","required","minlength","maxlength","allowSpace","placeholder"],xs={key:0,class:"mt-2 text-sm text-red-600"},ua={__name:"InputText",props:{modelValue:String,required:Boolean,minLength:[String,Number],maxLength:[String,Number],pattern:String,placeholder:String,error:String,pointId:[String,Number],textTransform:{type:String,default:"none"},allowSpace:{type:Boolean,default:!0}},emits:["update:modelValue","save"],setup(a,{emit:ae}){const t=a,A=ae,c=te(()=>{if(!t.modelValue)return"";let b=t.modelValue;switch(t.allowSpace||(b=b.replace(/\s+/g,"")),t.textTransform){case"uppercase":return b.toUpperCase();case"lowercase":return b.toLowerCase();case"capitalize":return b.replace(/\b\w/g,S=>S.toUpperCase());default:return b}}),V=b=>{let S=b.target.value;switch(t.allowSpace||(S=S.replace(/\s+/g,"")),t.textTransform){case"uppercase":S=S.toUpperCase();break;case"lowercase":S=S.toLowerCase();break;case"capitalize":S=S.replace(/\b\w/g,I=>I.toUpperCase());break}A("update:modelValue",S),A("save",t.pointId)};return(b,S)=>(n(),i("div",bs,[e("input",{value:c.value,onInput:V,type:"text",required:a.required,minlength:a.minLength,maxlength:a.maxLength,allowSpace:a.allowSpace,placeholder:a.placeholder,class:re(["block w-full rounded-lg border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm transition duration-150",{uppercase:a.textTransform==="uppercase",lowercase:a.textTransform==="lowercase",capitalize:a.textTransform==="capitalize"}])},null,42,ys),a.error?(n(),i("p",xs,z(a.error),1)):d("",!0)]))}},ws={class:"mt-1"},ks=["value","required","min","max"],Is={key:0,class:"mt-2 text-sm text-red-600"},da={__name:"InputDate",props:{modelValue:String,required:Boolean,minDate:String,maxDate:String,error:String,pointId:[String,Number]},emits:["update:modelValue","save"],setup(a,{emit:ae}){const t=a,A=ae,c=V=>{A("update:modelValue",V.target.value),A("save",t.pointId)};return(V,b)=>(n(),i("div",ws,[e("input",{value:a.modelValue,onChange:c,type:"date",required:a.required,min:a.minDate,max:a.maxDate,class:"block w-full rounded-lg border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm transition duration-150"},null,40,ks),a.error?(n(),i("p",Is,z(a.error),1)):d("",!0)]))}},_s={class:"mt-1"},Ss=["value","required","placeholder"],Cs={key:0,class:"mt-2 text-sm text-red-600"},ca={__name:"InputAccount",props:{modelValue:[String,Number],required:Boolean,placeholder:String,error:String,pointId:[String,Number],settings:{type:Object,default:()=>({currency_symbol:"Rp",thousands_separator:",",min_value:0,max_value:1e9})}},emits:["update:modelValue","save"],setup(a,{emit:ae}){const t=a,A=ae,c=y(""),V=te(()=>{var x,D,E,Q;return{currency_symbol:((x=t.settings)==null?void 0:x.currency_symbol)||"Rp",thousands_separator:((D=t.settings)==null?void 0:D.thousands_separator)||",",min_value:((E=t.settings)==null?void 0:E.min_value)!==void 0?Number(t.settings.min_value):0,max_value:((Q=t.settings)==null?void 0:Q.max_value)!==void 0?Number(t.settings.max_value):1e9}}),b=x=>{if(x==null||x==="")return"";const D=Number(x);if(isNaN(D))return"";let E=D.toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:0});return V.value.thousands_separator!==","&&(E=E.replace(/,/g,V.value.thousands_separator)),E},S=x=>x?x.replace(/[^\d]/g,""):"",I=te(()=>c.value?`${V.value.currency_symbol} ${b(c.value)}`:""),R=x=>{let D=S(x.target.value),E=Number(D);V.value.min_value!==void 0&&E<V.value.min_value&&(D=V.value.min_value.toString()),V.value.max_value!==void 0&&E>V.value.max_value&&(D=V.value.max_value.toString()),c.value=D,A("update:modelValue",D),A("save",t.pointId)};return ye(()=>t.modelValue,x=>{x!=null&&(c.value=x.toString())},{immediate:!0}),(x,D)=>(n(),i("div",_s,[e("input",{value:I.value,onInput:R,type:"text",required:a.required,placeholder:a.placeholder,class:re(["block w-full rounded-lg border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm transition duration-150",a.error?"border-red-300":"border-gray-300"])},null,42,Ss),a.error?(n(),i("p",Cs,z(a.error),1)):d("",!0)]))}},$s={class:"mt-1 space-y-3"},As={key:0,class:"space-y-2"},Vs={class:"flex flex-wrap gap-2"},Ts=["onClick"],Ms=["value","required","minlength","maxlength","placeholder"],Es={class:"flex justify-between items-center mt-1"},Us={class:"text-xs text-gray-500"},Ns={key:0,class:"text-xs text-red-600"},ga={__name:"InputTextarea",props:{modelValue:String,required:Boolean,minLength:[String,Number],maxLength:[String,Number],placeholder:String,error:String,pointId:[String,Number],inspectionId:[String,Number],settings:Object},emits:["update:modelValue","save"],setup(a,{emit:ae}){const t=a,A=ae,c=y([]),V=y(""),b=x=>c.value.some(D=>D.value===x),S=x=>{b(x.value)?c.value=c.value.filter(v=>v.value!==x.value):c.value.push(x);const E=[...c.value.map(v=>v.value)];V.value.trim()&&E.push(V.value.trim());const Q=E.join(", ");A("update:modelValue",Q),A("save",{pointId:t.pointId,inspectionId:t.inspectionId,notes:Q})},I=x=>{const D=x.target.value;A("update:modelValue",D),A("save",{pointId:t.pointId,inspectionId:t.inspectionId,notes:D}),R(D)},R=x=>{var v,p,M,K;if(!x){c.value=[],V.value="";return}const D=x.split(",").map(U=>U.trim()).filter(U=>U),E=((p=(v=t.settings)==null?void 0:v.damage_options)==null?void 0:p.map(U=>U.value))||[];c.value=((K=(M=t.settings)==null?void 0:M.damage_options)==null?void 0:K.filter(U=>D.includes(U.value)))||[];const Q=D.filter(U=>!E.includes(U));V.value=Q.join(", ")};return ye(()=>t.modelValue,x=>{x!=null&&R(x)},{immediate:!0}),ye(()=>{var x;return(x=t.settings)==null?void 0:x.damage_options},(x,D)=>{if(x!==D){const E=x?x.map(M=>M.value):[];c.value=c.value.filter(M=>E.includes(M.value));const v=[...c.value.map(M=>M.value)];V.value.trim()&&v.push(V.value.trim());const p=v.filter(M=>M).join(", ");A("update:modelValue",p),A("save",{pointId:t.pointId,inspectionId:t.inspectionId,notes:p})}},{deep:!0,immediate:!1}),(x,D)=>{var E,Q,v;return n(),i("div",$s,[(E=a.settings)!=null&&E.enable_damage&&((Q=a.settings)!=null&&Q.damage_options)?(n(),i("div",As,[D[0]||(D[0]=e("h4",{class:"text-sm font-medium text-gray-700"},"Pilih Kerusakan:",-1)),e("div",Vs,[(n(!0),i(Ue,null,Pe(a.settings.damage_options,(p,M)=>(n(),i("button",{key:M,type:"button",onClick:K=>S(p),class:re(["px-3 py-1.5 rounded-md text-sm font-medium transition-colors border",{"border-indigo-500 bg-indigo-100 text-indigo-700":b(p.value),"border-gray-300 bg-white text-gray-700 hover:bg-gray-50":!b(p.value)}])},z(p.label),11,Ts))),128))])])):d("",!0),e("div",null,[e("textarea",{value:a.modelValue,onInput:I,required:a.required,minlength:a.minLength,maxlength:a.maxLength,placeholder:a.placeholder,class:"block w-full rounded-lg border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm transition duration-150",rows:"4"},null,40,Ms),e("div",Es,[e("span",Us,z(((v=a.modelValue)==null?void 0:v.length)||0)+"/"+z(a.maxLength||400),1),a.error?(n(),i("p",Ns,z(a.error),1)):d("",!0)])])])}}},Ds={class:"mt-1"},Ps=["value","required"],Ls={key:0,class:"mt-2 text-sm text-red-600"},Rs={__name:"InputSelect",props:{modelValue:String,required:Boolean,error:String,pointId:[String,Number]},emits:["update:modelValue","save"],setup(a,{emit:ae}){const t=a,A=ae,c=V=>{A("update:modelValue",V.target.value),A("save",t.pointId)};return(V,b)=>(n(),i("div",Ds,[e("select",{value:a.modelValue,onChange:c,required:a.required,class:"block w-full rounded-lg border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm transition duration-150"},b[0]||(b[0]=[e("option",{value:"",disabled:""},"Select status",-1),e("option",{value:"good"},"Good",-1),e("option",{value:"bad"},"Bad",-1),e("option",{value:"na"},"N/A",-1)]),40,Ps),a.error?(n(),i("p",Ls,z(a.error),1)):d("",!0)]))}},js=He(Rs,[["__scopeId","data-v-1b6c0201"]]),Bs={key:0,class:"fixed inset-0 z-[60] flex items-center justify-center bg-black bg-opacity-50 backdrop-blur-sm"},Fs={class:"bg-white rounded-xl p-8 w-full max-w-sm mx-auto shadow-2xl transform transition-all duration-300 scale-100 opacity-100"},Os={class:"text-xs text-gray-500 mt-2 text-center"},zs={class:"flex flex-row space-x-4 mb-6"},qs={class:"mt-4 text-right"},Ks={__name:"ImageSourceOptionsModal",props:{show:{type:Boolean,default:!1},settings:{type:Object,default:()=>({max_files:1,allowed_types:["jpg","png","jpeg"],camera_aspect_ratio:"3:4",enable_flash:!0,enable_camera_switch:!0,max_size:2048})}},emits:["close","open-webcam","trigger-gallery"],setup(a){return(ae,t)=>a.show?(n(),i("div",Bs,[e("div",Fs,[t[7]||(t[7]=e("h3",{class:"text-xl font-bold text-gray-800 mb-2 text-center"},"Pilih Sumber Gambar",-1)),e("p",Os,[t[3]||(t[3]=Ne("Ambil Foto Maksimal: ")),e("b",null,z(a.settings.max_files),1),t[4]||(t[4]=Ne(" Dengan Rasio & Ukuran: ")),e("b",null,z(a.settings.camera_aspect_ratio),1)]),e("div",zs,[e("button",{onClick:t[0]||(t[0]=A=>ae.$emit("open-webcam")),class:"flex-1 flex flex-col items-center justify-center p-4 border border-gray-200 rounded-lg text-gray-700 hover:bg-blue-50 hover:border-blue-400 hover:text-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-all duration-200 ease-in-out transform hover:scale-105"},t[5]||(t[5]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-8 w-8 mb-2 text-gray-500 hover:text-blue-600 transition-colors",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})],-1),e("span",{class:"text-sm font-medium"},"Ambil Foto",-1)])),e("button",{onClick:t[1]||(t[1]=A=>ae.$emit("trigger-gallery")),class:"flex-1 flex flex-col items-center justify-center p-4 border border-gray-200 rounded-lg text-gray-700 hover:bg-indigo-50 hover:border-indigo-400 hover:text-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 transition-all duration-200 ease-in-out transform hover:scale-105"},t[6]||(t[6]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-8 w-8 mb-2 text-gray-500 hover:text-indigo-600 transition-colors",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1),e("span",{class:"text-sm font-medium"},"Galeri",-1)]))]),e("div",qs,[e("button",{onClick:t[2]||(t[2]=A=>ae.$emit("close")),class:"px-5 py-2 text-sm font-medium text-gray-600 bg-gray-100 rounded-lg hover:bg-gray-200 hover:text-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-300 focus:ring-offset-2 transition-colors duration-200 ease-in-out"}," Batal ")])])])):d("",!0)}},Hs={key:0,class:"fixed inset-0 bg-black bg-opacity-95 z-50 flex flex-col items-center justify-center"},Gs={class:"w-full h-full flex flex-col"},Ws={class:"flex justify-between items-center p-4 bg-black bg-opacity-70 text-white shadow-md"},Ys=["disabled"],Zs={class:"text-lg font-semibold"},Js={class:"flex items-center gap-2"},Xs=["disabled"],Qs={key:0,class:"px-4 py-2 bg-indigo-900 text-white"},en={class:"flex justify-between items-center text-sm"},tn={class:"w-full bg-gray-700 rounded-full h-2 mt-1"},an={class:"flex-1 flex items-center justify-center overflow-hidden relative"},sn=["src"],nn={key:1,class:"absolute bottom-4 left-1/2 transform -translate-x-1/2 flex gap-3"},on=["disabled"],ln=["disabled"],rn={key:2,class:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center"},un={key:3,class:"absolute inset-0 bg-red-500 bg-opacity-80 flex flex-col items-center justify-center text-white"},dn=["disabled"],cn=["disabled"],gn=["disabled"],pn={class:"flex flex-col gap-3 p-4 bg-black bg-opacity-70 shadow-inner"},mn={class:"flex justify-between items-center w-full"},vn=["disabled"],fn={key:1,class:"flex-1"},hn=["disabled"],bn={class:"flex gap-3 w-full"},yn={key:1,class:"flex-1 px-4 py-3 bg-gradient-to-r from-indigo-700 to-sky-600 rounded-lg cursor-not-allowed flex items-center justify-center font-medium opacity-75",disabled:""},xn={class:"flex items-center gap-2"},wn={key:0,class:"text-center"},kn={__name:"PreviewModal",props:{show:Boolean,images:{type:Array,default:()=>[]},initialIndex:{type:Number,default:0},allowMultiple:Boolean,maxFiles:Number,isUploading:Boolean,aspectRatio:Number,point:Object,uploadProgress:{type:Number,default:0},currentUpload:{type:Number,default:0},totalUpload:{type:Number,default:0}},emits:["close","saveImages","removePreviewImage","triggerAddMorePhotos","update:images","retryImage"],setup(a,{emit:ae}){const t=a,A=ae,c=y(0),V=y([]),b=te(()=>V.value.length>0?V.value[c.value]:null);ye(()=>t.images,K=>{V.value=K.map(U=>({...U,rotation:U.isNew&&U.rotation||0})),K.length===0&&t.show&&E()},{deep:!0,immediate:!0}),ye(()=>t.show,K=>{K&&t.images.length>0&&(c.value=t.initialIndex)}),ye(()=>t.uploadProgress,K=>{K===100&&console.log("Upload completed")});const S=K=>K.preview||(K.image_path?`/${K.image_path}`:""),I=K=>{if(b.value&&b.value.isNew&&!t.isUploading){const U=b.value.rotation||0;let H;K==="left"?H=U-90:H=U+90,H=(H%360+360)%360,V.value[c.value].rotation=H,A("update:images",V.value)}},R=()=>{t.isUploading||(c.value=c.value<V.value.length-1?c.value+1:0)},x=()=>{t.isUploading||(c.value=c.value>0?c.value-1:V.value.length-1)},D=()=>{t.isUploading||A("saveImages",V.value)},E=()=>{t.isUploading||A("close")},Q=()=>{if(b.value&&!t.isUploading){const K=b.value,U=V.value.findIndex(H=>H.isNew&&K.isNew&&H.preview===K.preview||!H.isNew&&!K.isNew&&H.id===K.id);U!==-1&&(A("removePreviewImage",K),V.value.splice(U,1),A("update:images",V.value)),c.value>=V.value.length&&(c.value=Math.max(0,V.value.length-1)),V.value.length===0&&A("close")}},v=()=>{t.isUploading||A("triggerAddMorePhotos")},p=()=>{b.value&&!t.isUploading&&A("retryImage",b.value)},M=K=>{K.key==="Escape"&&!t.isUploading&&E()};return st(()=>{document.addEventListener("keydown",M)}),wt(()=>{document.removeEventListener("keydown",M)}),(K,U)=>{var H;return a.show?(n(),i("div",Hs,[e("div",Gs,[e("div",Ws,[e("button",{onClick:E,class:"p-2 rounded-full hover:bg-white hover:bg-opacity-20 transition-colors",disabled:a.isUploading},U[2]||(U[2]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]),8,Ys),e("div",Zs,z(((H=a.point)==null?void 0:H.name)||"Preview")+" ("+z(c.value+1)+"/"+z(V.value.length)+") ",1),e("div",Js,[b.value&&b.value.isNew?(n(),i("button",{key:0,onClick:Q,class:"p-2 rounded-full hover:bg-white hover:bg-opacity-20 transition-colors","aria-label":"Remove new image",disabled:a.isUploading},U[3]||(U[3]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)]),8,Xs)):d("",!0)])]),a.isUploading?(n(),i("div",Qs,[e("div",en,[e("span",null,"Mengupload: "+z(a.currentUpload)+"/"+z(a.totalUpload),1),e("span",null,z(a.uploadProgress)+"%",1)]),e("div",tn,[e("div",{class:"bg-gradient-to-r from-indigo-500 to-sky-400 h-2 rounded-full progress-bar",style:Ke({width:a.uploadProgress+"%"})},null,4)])])):d("",!0),e("div",an,[e("div",{class:"relative w-full max-w-full",style:Ke({paddingTop:a.aspectRatio?100/a.aspectRatio+"%":"75%"})},[b.value?(n(),i("img",{key:0,src:S(b.value),class:"absolute inset-0 w-full h-full object-contain transition-transform duration-300 ease-in-out bg-black",style:Ke({transform:`rotate(${b.value.rotation}deg)`})},null,12,sn)):d("",!0),b.value&&b.value.isNew&&!b.value.isUploading&&!b.value.isFailed?(n(),i("div",nn,[e("button",{onClick:U[0]||(U[0]=Y=>I("left")),class:"p-3 bg-black bg-opacity-60 text-white rounded-full hover:bg-opacity-80 transition-colors",disabled:a.isUploading,title:"Putar ke kiri"},U[4]||(U[4]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 12a9 9 0 1018 0 9 9 0 00-18 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l3-3m0 0l3 3m-3-3v9",transform:"rotate(180 12 12)"})],-1)]),8,on),e("button",{onClick:U[1]||(U[1]=Y=>I("right")),class:"p-3 bg-black bg-opacity-60 text-white rounded-full hover:bg-opacity-80 transition-colors",disabled:a.isUploading,title:"Putar ke kanan"},U[5]||(U[5]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 12a9 9 0 1018 0 9 9 0 00-18 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l3-3m0 0l3 3m-3-3v9"})],-1)]),8,ln)])):d("",!0),b.value&&b.value.isUploading?(n(),i("div",rn,U[6]||(U[6]=[e("div",{class:"text-center text-white"},[e("div",{class:"w-12 h-12 border-4 border-white border-t-transparent rounded-full animate-spin mx-auto mb-2"}),e("p",{class:"text-sm"},"Mengupload...")],-1)]))):d("",!0),b.value&&b.value.isFailed?(n(),i("div",un,[U[7]||(U[7]=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-12 w-12 mb-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1)),U[8]||(U[8]=e("p",{class:"text-lg font-medium mb-2"},"Upload Gagal",-1)),e("button",{onClick:p,class:"px-4 py-2 bg-white text-red-600 rounded-lg font-medium hover:bg-gray-100 transition-colors",disabled:a.isUploading}," Coba Lagi ",8,dn)])):d("",!0)],4),V.value.length>1&&!a.isUploading?(n(),i("button",{key:0,onClick:x,class:"absolute left-4 p-3 bg-black bg-opacity-50 text-white rounded-full hover:bg-opacity-70 transition-colors",disabled:a.isUploading},U[9]||(U[9]=[e("svg",{xmlns:"http://www.w3.org2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)]),8,cn)):d("",!0),V.value.length>1&&!a.isUploading?(n(),i("button",{key:1,onClick:R,class:"absolute right-4 p-3 bg-black bg-opacity-50 text-white rounded-full hover:bg-opacity-70 transition-colors",disabled:a.isUploading},U[10]||(U[10]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)]),8,gn)):d("",!0)]),e("div",pn,[e("div",mn,[b.value&&!b.value.isNew?(n(),i("button",{key:0,onClick:Q,class:"px-3 py-2 rounded-lg text-white font-medium flex items-center gap-1 transition-colors hover:text-red-400",disabled:a.isUploading},U[11]||(U[11]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.095 21H7.905a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1),Ne(" Hapus Foto ")]),8,vn)):(n(),i("div",fn)),a.allowMultiple&&V.value.length<a.maxFiles&&!a.isUploading?(n(),i("button",{key:2,onClick:v,class:"px-3 py-2 rounded-lg text-white font-medium flex items-center gap-1 transition-colors hover:text-indigo-400",disabled:a.isUploading},U[12]||(U[12]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),Ne(" Tambah Foto ")]),8,hn)):d("",!0)]),e("div",bn,[a.isUploading?(n(),i("button",yn,[e("div",xn,[U[13]||(U[13]=e("div",{class:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"},null,-1)),e("span",null,"Mengupload... "+z(a.uploadProgress)+"%",1)])])):(n(),i("button",{key:0,onClick:D,class:"flex-1 px-4 py-3 rounded-lg bg-gradient-to-r from-indigo-700 to-sky-600 shadow-lg text-white transition-colors font-medium hover:from-indigo-600 hover:to-sky-500"}," Simpan & Upload "))]),a.isUploading?(n(),i("div",wn,U[14]||(U[14]=[e("p",{class:"text-xs text-blue-300"}," Modal akan tertutup otomatis. Upload terus berjalan di background. ",-1)]))):d("",!0)])])])):d("",!0)}}},In=He(kn,[["__scopeId","data-v-0e4bb6d9"]]),_n={key:0,class:"fixed inset-0 z-40 p-0 webcam-modal-container"},Sn={class:"webcam-content-box"},Cn={class:"webcam-header"},$n={class:"inspection-point-name"},An={class:"camera-quality-indicator"},Vn={class:"quality-badge"},Tn={key:1,class:"auto-focus-indicator"},Mn={key:2,class:"error-overlay"},En={class:"error-content"},Un={class:"error-message"},Nn={class:"webcam-footer"},Dn={class:"camera-controls"},Pn=["disabled"],Ln={class:"camera-icon-container"},Rn={key:0,class:"camera-spinner"},jn={key:1,class:"camera-shutter"},Bn=["disabled"],Fn={__name:"WebCamRTC",props:{show:Boolean,aspectRatio:{type:Number,default:4/3},settings:{type:Object,default:()=>({enable_flash:!0,enable_camera_switch:!0,max_size:2048})},point:Object,cameraQuality:{type:String}},emits:["close","photoCaptured"],setup(a,{emit:ae}){const t=a,A=ae,c=y(null),V=y(null);let b=null,S=null;const I=y("environment"),R=y(null),x=y([]),D=y(!1),E=y(!1),Q=y(!1),v=y(!1),p=y(!1),M=y(null),K=y(null),U=y(!1),H=y(!0),Y=y({}),F=te(()=>({aspectRatio:`${t.aspectRatio} / 1`,maxWidth:"100%",maxHeight:"70vh",margin:"0 auto"})),k=async()=>{b&&b.getTracks().forEach(P=>P.stop()),M.value=null,p.value=!0;try{const P=L();console.log("Mencoba inisialisasi kamera dengan:",P),b=await navigator.mediaDevices.getUserMedia({video:P,audio:!1}),S=b.getVideoTracks()[0],c.value.srcObject=b,await new Promise((N,j)=>{c.value.onloadedmetadata=N,c.value.onerror=j,setTimeout(N,1e3)}),await c.value.play(),await s(),ce(),setTimeout(async()=>{try{await _()}catch(N){console.warn("Gagal mendapatkan daftar perangkat:",N)}},500),p.value=!1,console.log("Kamera berhasil diinisialisasi")}catch(P){if(console.error("Error mengakses kamera: ",P),!b)try{console.log("Mencoba fallback berdasarkan kualitas kamera...");let N,j,q,X;switch(t.cameraQuality){case"SD":N=1280,j=720,q=640,X=480;break;case"HD":N=1920,j=1080,q=1280,X=720;break;case"4K":N=3840,j=2160,q=1920,X=1080;break;default:N=1920,j=1080,q=1280,X=720}const oe={video:{facingMode:I.value,width:{min:q,ideal:N},height:{min:X,ideal:j}}};b=await navigator.mediaDevices.getUserMedia(oe),S=b.getVideoTracks()[0],c.value.srcObject=b,await c.value.play(),p.value=!1,console.log("Fallback berhasil dengan kualitas:",t.cameraQuality)}catch(N){console.error("Fallback juga gagal:",N),M.value=h(N),p.value=!1}}},L=()=>{let P,N,j,q,X,oe;switch(t.cameraQuality){case"SD":P=1280,N=720,j=1280,q=720,X=640,oe=480;break;case"HD":P=1920,N=1080,j=1920,q=1080,X=1280,oe=720;break;case"4K":P=3840,N=2160,j=3840,q=2160,X=1920,oe=1080;break;default:P=1920,N=1080,j=1920,q=1080,X=1280,oe=720}return{facingMode:{ideal:"environment"},width:{ideal:P,max:j,min:X},height:{ideal:N,max:q,min:oe},focusMode:{ideal:["continuous","single-shot","manual"]},exposureMode:{ideal:["continuous","manual"]},whiteBalanceMode:{ideal:["continuous","manual"]}}},ce=async()=>{if(S)try{const P=S.getCapabilities();K.value=P;const N=P.focusMode&&(P.focusMode.includes("continuous")||P.focusMode.includes("single-shot")),j=P.exposureMode&&P.exposureMode.includes("continuous");if(N||j){const q={};N&&(q.focusMode="continuous"),j&&(q.exposureMode="continuous",q.exposureCompensation={ideal:0}),Object.keys(q).length>0&&(await S.applyConstraints({advanced:[q]}),console.log("Auto-focus/exposure diaktifkan"))}E.value=!!P.torch||!!P.fillLightMode}catch(P){console.warn("Tidak bisa mengatur auto-focus/exposure:",P)}},_=async()=>{try{(await navigator.mediaDevices.getUserMedia({video:!0})).getTracks().forEach(j=>j.stop());const N=await navigator.mediaDevices.enumerateDevices();if(x.value=N.filter(j=>j.kind==="videoinput"),D.value=x.value.length>1,!R.value&&x.value.length>0){const j=x.value.find(q=>q.label.toLowerCase().includes("back")||q.label.toLowerCase().includes("rear")||q.label.toLowerCase().includes("environment"));R.value=j?j.deviceId:x.value[0].deviceId}}catch(P){console.warn("Error getting camera devices:",P)}},h=P=>{switch(P.name){case"NotAllowedError":return"Izin akses kamera ditolak. Silakan izinkan akses kamera di pengaturan browser.";case"NotFoundError":return"Tidak ada kamera yang ditemukan.";case"NotSupportedError":return"Browser tidak mendukung akses kamera.";case"NotReadableError":return"Kamera sedang digunakan oleh aplikasi lain.";case"OverconstrainedError":return"Perangkat tidak mendukung pengaturan kamera yang diminta.";default:return`Tidak dapat mengakses kamera: ${P.message}`}},s=()=>{var P,N;if(S)try{const j=S.getCapabilities();K.value=j,E.value=!!j.torch||!!j.fillLightMode,console.log("Kamera mendukung:",{maxRes:`${((P=j.width)==null?void 0:P.max)||"N/A"}x${((N=j.height)==null?void 0:N.max)||"N/A"}`,torch:j.torch,focusModes:j.focusMode,exposureModes:j.exposureMode})}catch(j){console.warn("Tidak bisa mendapatkan kemampuan kamera:",j)}},w=async()=>{if(!(!S||!E.value))try{I.value==="environment"?(await S.applyConstraints({advanced:[{torch:!Q.value}]}),Q.value=!Q.value):(console.log("Flash tidak didukung untuk kamera depan"),Q.value=!1)}catch(P){console.error("Gagal mengontrol flash:",P),Q.value=!1}},O=async()=>{if(!D.value||p.value)return;p.value=!0,b&&b.getTracks().forEach(q=>q.stop());const N=(x.value.findIndex(q=>q.deviceId===R.value)+1)%x.value.length;R.value=x.value[N].deviceId;const j=x.value[N];I.value=j.label.toLowerCase().includes("front")?"user":"environment",await k()},de=async P=>{if(!c.value||!S)return;const N=P.currentTarget.getBoundingClientRect(),j=P.type.includes("mouse")?P.clientX-N.left:P.touches[0].clientX-N.left,q=P.type.includes("mouse")?P.clientY-N.top:P.touches[0].clientY-N.top;U.value=!0,Y.value={left:`${j-40}px`,top:`${q-40}px`},setTimeout(()=>{U.value=!1},1e3);try{const X=S.getCapabilities();if(X.focusMode&&X.focusMode.includes("manual")){const oe=j/N.width,fe=q/N.height;X.focusDistance&&X.pan&&X.tilt&&await S.applyConstraints({advanced:[{focusMode:"manual",focusDistance:.3,pointsOfInterest:[{x:oe,y:fe}]}]})}else X.focusMode&&X.focusMode.includes("single-shot")&&await S.applyConstraints({advanced:[{focusMode:"single-shot"}]})}catch(X){console.warn("Penyesuaian fokus tidak didukung:",X)}},W=async()=>{var P,N;if(!(v.value||!c.value||!V.value)){v.value=!0;try{const j=c.value,q=V.value;await new Promise(we=>setTimeout(we,100));const X=j.videoWidth,oe=j.videoHeight;let fe,ge,Te,_e;X/oe>t.aspectRatio?(ge=oe,fe=oe*t.aspectRatio,Te=(X-fe)/2,_e=0):(fe=X,ge=X/t.aspectRatio,Te=0,_e=(oe-ge)/2),q.width=fe,q.height=ge,q.getContext("2d").drawImage(j,Te,_e,fe,ge,0,0,fe,ge);const Ce=Math.min(.95,.7+X*oe/(3840*2160)*.25),$e=await new Promise(we=>{q.toBlob(we,"image/jpeg",Ce)});if($e)if($e.size/1024>t.settings.max_size){const we=await G($e,t.settings.max_size),Me=`inspeksi_${((P=t.point)==null?void 0:P.name)||"foto"}_${Date.now()}.jpg`,Ee=new File([we],Me,{type:"image/jpeg",lastModified:Date.now()});A("photoCaptured",Ee)}else{const we=`inspeksi_${((N=t.point)==null?void 0:N.name)||"foto"}_${Date.now()}.jpg`,Me=new File([$e],we,{type:"image/jpeg",lastModified:Date.now()});A("photoCaptured",Me)}}catch(j){console.error("Error mengambil foto:",j)}finally{v.value=!1}}},G=async(P,N)=>new Promise(j=>{const q=new Image;q.onload=()=>{const X=document.createElement("canvas");let oe=q.width,fe=q.height;const ge=1920;(oe>ge||fe>ge)&&(oe>fe?(fe=fe*ge/oe,oe=ge):(oe=oe*ge/fe,fe=ge)),X.width=oe,X.height=fe,X.getContext("2d").drawImage(q,0,0,oe,fe);let _e=.9;const he=()=>{X.toBlob(Ce=>{Ce.size/1024<=N||_e<=.3?j(Ce):(_e-=.1,he())},"image/jpeg",_e)};he()},q.src=URL.createObjectURL(P)}),ie=()=>{b&&b.getTracks().forEach(P=>P.stop()),A("close")},me=async()=>{M.value=null,await k()};return ye(()=>t.show,async P=>{P?(await Pt(),await k()):b&&b.getTracks().forEach(N=>N.stop())}),wt(()=>{b&&b.getTracks().forEach(P=>P.stop())}),(P,N)=>{var j;return a.show?(n(),i("div",_n,[e("div",Sn,[e("div",Cn,[e("div",$n,z(((j=a.point)==null?void 0:j.name)||"Camera"),1),e("div",An,[e("span",Vn,z(a.cameraQuality),1)]),e("button",{onClick:ie,class:"p-2 rounded-full text-white hover:bg-gray-700 transition-colors"},N[0]||(N[0]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),e("div",{class:"webcam-video-container",style:Ke(F.value),onTouchstart:de,onClick:de},[e("video",{ref_key:"webcamVideo",ref:c,autoplay:"",playsinline:"",class:"webcam-video"},null,512),e("canvas",{ref_key:"webcamCanvas",ref:V,class:"hidden"},null,512),U.value?(n(),i("div",{key:0,class:"focus-indicator",style:Ke(Y.value)},N[1]||(N[1]=[e("div",{class:"focus-ring"},null,-1)]),4)):d("",!0),H.value&&!U.value?(n(),i("div",Tn,N[2]||(N[2]=[e("div",{class:"auto-focus-ring"},null,-1)]))):d("",!0),M.value?(n(),i("div",Mn,[e("div",En,[N[3]||(N[3]=e("div",{class:"error-icon"},"⚠️",-1)),N[4]||(N[4]=e("h3",{class:"error-title"},"Gagal Mengakses Kamera",-1)),e("p",Un,z(M.value),1),e("button",{onClick:me,class:"retry-button"}," Coba Lagi ")])])):d("",!0)],36),e("div",Nn,[e("div",Dn,[a.settings.enable_flash&&E.value?(n(),i("button",{key:0,onClick:w,class:re(["control-button flash-button",{active:Q.value}])},N[5]||(N[5]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})],-1)]),2)):d("",!0),e("button",{onClick:W,class:"capture-button",disabled:v.value||p.value},[e("div",Ln,[v.value?(n(),i("div",Rn)):(n(),i("div",jn))])],8,Pn),a.settings.enable_camera_switch&&D.value?(n(),i("button",{key:1,onClick:O,class:"control-button switch-button",disabled:p.value},N[6]||(N[6]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"})],-1)]),8,Bn)):d("",!0)])])])])):d("",!0)}}},On=He(Fn,[["__scopeId","data-v-472cc13f"]]),zn={key:0,class:"fixed inset-0 z-40 p-0 webcam-modal-container"},qn={class:"webcam-content-box"},Kn={class:"webcam-header"},Hn={class:"rounded-full text-white hover:bg-gray-700 transition-colors"},Gn={class:"inspection-point-name"},Wn={key:0,class:"screen-flash-overlay"},Yn={key:2,class:"zoom-controls"},Zn=["max"],Jn={class:"webcam-footer"},Xn={class:"camera-controls"},Qn=["disabled"],eo={class:"camera-icon-container"},to={key:0,class:"camera-spinner"},ao={key:1,class:"camera-body"},so={__name:"WebcamModal",props:{show:Boolean,aspectRatio:Number,settings:Object,point:Object},emits:["close","photoCaptured"],setup(a,{emit:ae}){const t=a,A=ae,c=y(null),V=y(null);let b=null,S=null;const I=y("environment"),R=y(!1),x=y(!1),D=y(!1),E=y(!1),Q=y(!1),v=y({}),p=y(!1),M=y(1),K=y(1),U=y(!1),H=te(()=>{var W;return((W=t.settings)==null?void 0:W.max_size)||2048}),Y=te(()=>t.aspectRatio?{aspectRatio:`${t.aspectRatio} / 1`,maxWidth:"100%",maxHeight:"70vh",margin:"0 auto"}:{}),F=te(()=>{if(!t.aspectRatio)return{};const W=t.aspectRatio,G=W>1?80:60,ie=W>1?80/W:60*W;return{width:`${G}%`,height:`${ie}%`}}),k=async()=>{b&&b.getTracks().forEach(W=>W.stop());try{const W={facingMode:I.value,width:{ideal:4096},height:{ideal:2160},aspectRatio:{ideal:t.aspectRatio||1.3333333333333333},frameRate:{ideal:30},advanced:[{focusMode:"continuous"},{exposureMode:"continuous"},{whiteBalanceMode:"continuous"}]};b=await navigator.mediaDevices.getUserMedia({video:W,audio:!1}),S=b.getVideoTracks()[0],c.value.srcObject=b,c.value.onloadedmetadata=async()=>{await ce(),await c.value.play()}}catch(W){console.error("Error accessing camera: ",W),alert("Failed to access camera. Please allow camera permission."),A("close")}},L=()=>{b&&b.getTracks().forEach(W=>W.stop()),A("close")},ce=async()=>{if(S)try{const W=await navigator.mediaDevices.enumerateDevices();R.value=W.filter(ie=>ie.kind==="videoinput").length>1;const G=S.getCapabilities();G.zoom?(U.value=!0,K.value=G.zoom.max,console.log(`Zoom supported. Max zoom: ${K.value}`)):(U.value=!1,console.warn("Zoom is not supported by this camera.")),x.value=G.torch||G.fillLightMode&&G.fillLightMode.includes("torch")}catch(W){console.error("Error checking camera capabilities:",W)}},_=async W=>{if(!S)return;const G=c.value.getBoundingClientRect(),ie=W.clientX-G.left,me=W.clientY-G.top;Q.value=!0,v.value={left:`${ie}px`,top:`${me}px`,transform:"translate(-50%, -50%)"};try{if(S.getCapabilities().pointsOfInterest){const N=ie/G.width,j=me/G.height;await S.applyConstraints({advanced:[{focusMode:"manual",pointsOfInterest:[{x:N,y:j}]}]})}else console.warn("Manual focus with point of interest is not supported.")}catch(P){console.warn("Manual focus failed:",P)}setTimeout(()=>{Q.value=!1,S.getCapabilities().focusMode.includes("continuous")&&S.applyConstraints({advanced:[{focusMode:"continuous"}]})},1e3)},h=async W=>{if(!S||!U.value)return;const G=Math.min(Math.max(W,1),K.value);M.value=G;try{await S.applyConstraints({advanced:[{zoom:G}]})}catch(ie){console.error("Failed to set zoom:",ie)}},s=async()=>{if(!(!S||!x.value))try{I.value==="user"?(D.value=!D.value,E.value=D.value):(await S.applyConstraints({advanced:[{torch:!D.value}]}),D.value=!D.value)}catch(W){console.error("Flash toggle failed:",W)}},w=async()=>{R.value&&(I.value=I.value==="environment"?"user":"environment",b&&b.getTracks().forEach(W=>W.stop()),await k())},O=async W=>new Promise(G=>{const ie=H.value*1024;if(W.size<=ie){G(W);return}const me=new Image,P=new FileReader;P.onload=N=>{me.onload=()=>{const j=document.createElement("canvas"),q=j.getContext("2d"),X=Math.sqrt(ie/W.size);j.width=me.width*X,j.height=me.height*X,q.drawImage(me,0,0,j.width,j.height);let oe=.9;const fe=()=>{j.toBlob(ge=>{ge.size>ie&&oe>.1?(oe-=.1,fe()):G(ge)},"image/jpeg",oe)};fe()},me.src=N.target.result},P.readAsDataURL(W)}),de=async()=>{if(!(p.value||!c.value||!V.value)){p.value=!0;try{const W=c.value,G=V.value,ie=W.videoWidth,me=W.videoHeight;let P,N,j,q;ie/me>t.aspectRatio?(N=me,P=me*t.aspectRatio,j=(ie-P)/2,q=0):(P=ie,N=ie/t.aspectRatio,j=0,q=(me-N)/2),G.width=P,G.height=N,G.getContext("2d").drawImage(W,j,q,P,N,0,0,P,N);const oe=await new Promise(ge=>{G.toBlob(ge,"image/jpeg",1)}),fe=await O(oe);if(fe){const ge=new File([fe],`capture_${Date.now()}.jpeg`,{type:"image/jpeg",lastModified:Date.now()});A("photoCaptured",ge),E.value=!0,setTimeout(()=>{E.value=!1},100)}}catch(W){console.error("Error capturing photo:",W),alert("Failed to capture photo. Please try again.")}finally{p.value=!1}}};return ye(()=>t.show,W=>{W?k():L()}),wt(()=>{b&&b.getTracks().forEach(W=>W.stop())}),(W,G)=>{var ie;return a.show?(n(),i("div",zn,[e("div",qn,[e("div",Kn,[e("p",Hn,z(a.settings.camera_aspect_ratio),1),e("div",Gn,z(((ie=a.point)==null?void 0:ie.name)||"Camera"),1),e("button",{onClick:L,class:"p-2 rounded-full text-white hover:bg-gray-700 transition-colors"},G[2]||(G[2]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),e("div",{class:"webcam-video-container",style:Ke(Y.value),onClick:_,onTouchstart:_},[e("video",{ref_key:"webcamVideo",ref:c,autoplay:"",playsinline:"",class:"webcam-video"},null,512),e("canvas",{ref_key:"webcamCanvas",ref:V,class:"hidden"},null,512),E.value?(n(),i("div",Wn)):d("",!0),e("div",{class:"aspect-ratio-guide",style:Ke(F.value)},null,4),Q.value?(n(),i("div",{key:1,class:"focus-indicator",style:Ke(v.value)},G[3]||(G[3]=[e("div",{class:"focus-ring"},null,-1)]),4)):d("",!0),G[4]||(G[4]=e("div",{class:"hd-badge"},[e("span",{class:"hd-text"},"HD")],-1)),U.value?(n(),i("div",Yn,[Le(e("input",{type:"range",min:"1",max:K.value,step:"0.1","onUpdate:modelValue":G[0]||(G[0]=me=>M.value=me),onInput:G[1]||(G[1]=me=>h(parseFloat(me.target.value))),class:"zoom-slider"},null,40,Zn),[[dt,M.value]])])):d("",!0)],36),e("div",Jn,[e("div",Xn,[a.settings.enable_flash&&x.value?(n(),i("button",{key:0,onClick:s,class:re(["control-button",{active:D.value,disabled:!x.value}])},G[5]||(G[5]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})],-1)]),2)):d("",!0),e("button",{onClick:de,class:"capture-button",disabled:p.value},[e("div",eo,[p.value?(n(),i("div",to)):(n(),i("div",ao,G[6]||(G[6]=[e("div",{class:"camera-lens"},null,-1),e("div",{class:"camera-flash"},null,-1)])))])],8,Qn),a.settings.enable_camera_switch&&R.value?(n(),i("button",{key:1,onClick:w,class:"control-button"},G[7]||(G[7]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"})],-1)]))):d("",!0)])])])])):d("",!0)}}},no=He(so,[["__scopeId","data-v-d307c818"]]),oo={__name:"NativeCameraInput",emits:["photoCaptured"],setup(a,{expose:ae,emit:t}){const A=t,c=y(null);ae({openCamera:()=>{var S;(S=c.value)==null||S.click()}});const b=async S=>{var R;const I=(R=S.target.files)==null?void 0:R[0];I&&(A("directPhotoCaptured",I),S.target.value="")};return(S,I)=>(n(),i("input",{ref_key:"cameraInput",ref:c,type:"file",accept:"image/*",capture:"environment",class:"hidden",onChange:b},null,544))}},io=["accept","multiple","disabled"],lo={class:"text-xs text-gray-500 mb-2"},ro=["disabled"],uo={class:"h-full flex flex-col items-center justify-center p-4 text-center"},co={class:"text-xs text-gray-400 mt-1"},go={key:0,class:"flex items-center gap-4"},po=["src"],mo={key:0,class:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center"},vo=["disabled"],fo={key:1,class:"flex space-x-2 overflow-x-auto pb-2 scrollbar-hide"},ho=["disabled"],bo=["onClick"],yo=["src","onError"],xo={key:0,class:"absolute inset-0 bg-black bg-opacity-30 flex items-center justify-center text-white text-xs font-bold"},wo={key:0},ko={key:1,class:"ml-1"},Io={key:1,class:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center"},_o={key:2,class:"absolute inset-0 bg-red-500 bg-opacity-80 flex flex-col items-center justify-center text-white"},So={key:2,class:"mt-1 text-xs text-red-600"},Co={__name:"InputImage",props:{modelValue:{type:Array,default:()=>[]},error:String,inspectionId:{type:[String,Number],required:!0},pointId:{type:[String,Number],required:!0},settings:{type:Object,default:()=>({max_files:1,allowed_types:["jpg","png","jpeg"],camera_aspect_ratio:"3:4",enable_flash:!0,enable_camera_switch:!0,max_size:2048})},point:Object},emits:["update:modelValue","save","removeImage","uploaded","uploadProgress"],setup(a,{emit:ae}){const t=a,A=ae,c=y(null),V=y(null),b=y(null),S=y(!1),I=y(!1),R=y(!1),x=y([]),D=y(0),E=y(!1),Q=y(!1),v=y(0),p=y(0),M=y(0),K=Lt("imageSourceSetting",y("all")),U=Lt("cameraQualitySetting",y("HD_Std")),H=`inspection-${t.inspectionId}-point-${t.pointId}-backup`,Y=te(()=>Number(t.settings.max_files)>1),F=te(()=>t.settings.allowed_types.map(r=>`.${r}`).join(", ")),k=te(()=>{const r=t.settings.camera_aspect_ratio.split(":");if(r.length===2){const u=parseFloat(r[0]),m=parseFloat(r[1]);if(!isNaN(u)&&!isNaN(m)&&m!==0)return u/m}return 3/4}),L=te(()=>{console.log("🔄 allImages computed called");const r=[],u=new Set;for(const m of t.modelValue){if(!m||typeof m!="object"||m.id&&u.has(m.id))continue;m.id&&u.add(m.id),console.log("📥 Database image:",m),console.log("📥 Type of preview:",typeof m.preview),console.log("📥 Type of public_url:",typeof m.public_url);const C=ce(m);r.push({...C,rotation:C.rotation||0,isNew:!1,isUploaded:!0,isUploading:!1,isFailed:!1})}for(const m of x.value)m.id&&u.add(m.id),r.push({...m,isUploading:m.isUploading||!1,isFailed:m.isFailed||!1});return console.log("✅ Final allImages:",r),r}),ce=r=>{if(!r||typeof r!="object")return{};const u={...r};return["preview","public_url","original_url","optimized_url"].forEach(C=>{u[C]&&(u[C]=_(u[C]))}),u.image_path&&(u.image_path=u.image_path.replace(/^storage\//,"")),u},_=r=>{if(!r||typeof r!="string")return r;let u=r.replace(/\/storage\/storage\//g,"/storage/");return u=u.replace(/\/\/storage\/storage\//g,"/storage/"),u.startsWith("storage/")&&(u=`/${u}`),!u.startsWith("/")&&!u.startsWith("http")&&(u=`/storage/${u}`),u},h=r=>{if(!r||typeof r!="object")return console.warn("❌ safeImageSrc: image is not object",r),"";const u=s(r);return typeof u!="string"?(console.error("🚨 CRITICAL: getImageSrc returned non-string:",typeof u,u),""):(u&&console.log("✅ safeImageSrc result:",u),u)},s=r=>{if(!r||typeof r!="object")return"";if(console.log("🔍 getImageSrc called with:",r),console.log("🔍 Available fields:",Object.keys(r)),r.preview&&typeof r.preview=="string"){const u=_(r.preview);return console.log("✅ Using preview URL:",u),u}if(r.public_url&&typeof r.public_url=="string"){const u=_(r.public_url);return console.log("✅ Using public_url:",u),u}if(r.original_url&&typeof r.original_url=="string"){const u=_(r.original_url);return console.log("✅ Using original_url:",u),u}if(r.optimized_url&&typeof r.optimized_url=="string"){const u=_(r.optimized_url);return console.log("✅ Using optimized_url:",u),u}if(r.image_path&&typeof r.image_path=="string"){const m=`/storage/${r.image_path.replace(/^\/?storage\//,"")}`;return console.log("✅ Generated from image_path:",m),m}if(r.path&&typeof r.path=="string"){const m=`/storage/${r.path.replace(/^\/?storage\//,"")}`;return console.log("✅ Generated from path:",m),m}return console.warn("⚠️ No valid image source found for:",r),""},w=r=>{console.error("❌ Image load error for:",r),console.error("❌ Attempted URL:",h(r)),Q.value=!0;const u=O(r);if(u&&u!==h(r)){console.log("🔄 Trying fallback URL:",u);const m=event==null?void 0:event.target;m&&(m.src=u)}},O=r=>{if(!r||typeof r!="object")return"";const u=["original_url","optimized_url","public_url","preview"];for(const m of u)if(r[m]&&typeof r[m]=="string")return _(r[m]);return""},de=()=>{R.value&&(R.value=!1),K.value==="camera"?G():K.value==="gallery"?W():S.value=!0},W=()=>{S.value=!1,V.value.click()},G=()=>{var r;S.value=!1,U.value==="HP_Native"?(r=c.value)==null||r.openCamera():I.value=!0},ie=()=>{S.value=!1,L.value.length>0&&(R.value=!0)},me=()=>{I.value=!1,L.value.length>0&&(R.value=!0)},P=()=>{R.value=!1,E.value||(x.value.forEach(r=>{r.preview&&r.preview.startsWith("blob:")&&URL.revokeObjectURL(r.preview)}),x.value=[])};ye(()=>t.modelValue,r=>{var u;console.log("🔄 modelValue updated:",r),r&&r.length>0&&(console.log("📊 First image structure:",JSON.stringify(r[0],null,2)),console.log("🔍 Type of preview:",typeof((u=r[0])==null?void 0:u.preview)))},{deep:!0});const N=r=>new Promise(u=>{const m=new FileReader;m.onload=C=>{const Z=new Image;Z.onload=()=>{u({file:r,preview:URL.createObjectURL(r),rotation:0,width:Z.naturalWidth,height:Z.naturalHeight,isNew:!0})},Z.onerror=()=>{console.error("Failed to load image for dimensions:",r.name),u({file:r,preview:URL.createObjectURL(r),rotation:0,width:0,height:0,isNew:!0})},Z.src=C.target.result},m.readAsDataURL(r)}),j=r=>{const u=r.name.split(".").pop().toLowerCase();return t.settings.allowed_types.includes(u)},q=async r=>{const m=(t.settings.max_size||2048)*1024;return new Promise(C=>{const Z=new Image,ue=new FileReader;ue.onload=ve=>{Z.onload=()=>{const f=document.createElement("canvas"),g=f.getContext("2d"),se=Math.max(Z.width,Z.height);f.width=se,f.height=se,g.fillStyle="white",g.fillRect(0,0,se,se);const $=(se-Z.width)/2,ne=(se-Z.height)/2;g.drawImage(Z,$,ne,Z.width,Z.height);let ke=.9;const Ae=()=>{f.toBlob(Ie=>{if(Ie.size>m&&ke>.1)ke-=.1,Ae();else{const Oe=new File([Ie],r.name,{type:"image/jpeg",lastModified:Date.now()});C(Oe)}},"image/jpeg",ke)};Ae()},Z.src=ve.target.result},ue.readAsDataURL(r)})},X=async r=>{const u=Array.from(r.target.files);if(!u.length){S.value=!1,L.value.length>0&&(R.value=!0);return}try{const m=u.filter(g=>!j(g));if(m.length>0){const g=m.map(se=>se.name.split(".").pop()).join(", ");alert(`File type not allowed: ${g}. Allowed types: ${t.settings.allowed_types.join(", ")}`),r.target.value="";return}const C=L.value.length,Z=t.settings.max_files-C,ue=await Promise.all(u.slice(0,Z).map(async g=>await q(g))),ve=await Promise.all(ue.map(N)),f=Y.value?ve:ve.slice(0,1);Y.value?x.value.push(...f):(x.value.forEach(g=>{g.preview&&g.preview.startsWith("blob:")&&URL.revokeObjectURL(g.preview)}),x.value=f),S.value=!1,f.length>0?(D.value=Math.max(0,L.value.length-f.length),R.value=!0):L.value.length>0&&(R.value=!0),r.target.value=""}catch(m){console.error("Error processing selected images:",m),alert("Failed to process selected images. Please try again."),S.value=!1,L.value.length>0&&(R.value=!0)}},oe=async r=>{const u=L.value.length;if(!Y.value||u<t.settings.max_files)try{const m=await q(r),C=new Image;C.onload=()=>{const Z={file:m,preview:URL.createObjectURL(m),rotation:0,width:C.naturalWidth,height:C.naturalHeight,isNew:!0};Y.value?x.value.push(Z):(x.value.forEach(ue=>{ue.preview&&ue.preview.startsWith("blob:")&&URL.revokeObjectURL(ue.preview)}),x.value=[Z]),I.value=!1,S.value=!1,D.value=L.value.length-1,R.value=!0},C.src=URL.createObjectURL(m)}catch(m){console.error("Error processing captured image:",m),alert("Failed to process captured image. Please try again.")}else alert(`Maximum ${t.settings.max_files} files allowed.`),I.value=!1,S.value=!1,L.value.length>0&&(R.value=!0)},fe=async r=>{const u=L.value.length;if(!Y.value||u<t.settings.max_files)try{const m=await q(r),C=new Image;C.onload=()=>{const Z={file:m,preview:URL.createObjectURL(m),rotation:0,width:C.naturalWidth,height:C.naturalHeight,isNew:!0};Y.value?x.value.push(Z):(x.value.forEach(ue=>{ue.preview&&ue.preview.startsWith("blob:")&&URL.revokeObjectURL(ue.preview)}),x.value=[Z]),S.value=!1,D.value=L.value.length-1,R.value=!0},C.src=URL.createObjectURL(m)}catch(m){console.error("Error processing direct captured image:",m),alert("Failed to process captured image. Please try again.")}else alert(`Maximum ${t.settings.max_files} files allowed.`),S.value=!1,L.value.length>0&&(R.value=!0)},ge=(r=0)=>{D.value=r,R.value=!0},Te=r=>new Promise(u=>{if(r.rotation===0||!b.value){if(!r.isNew&&!r.file){u({file:null,width:r.width,height:r.height,isOriginal:!0});return}u({file:r.file,width:r.width,height:r.height});return}const m=new Image;m.onload=async()=>{try{const C=b.value,Z=C.getContext("2d"),ue=m.width,ve=m.height;let f,g;r.rotation===90||r.rotation===270?(f=ve,g=ue):(f=ue,g=ve),C.width=f,C.height=g,Z.clearRect(0,0,C.width,C.height),Z.translate(C.width/2,C.height/2),Z.rotate(r.rotation*Math.PI/180),Z.drawImage(m,-ue/2,-ve/2,ue,ve),Z.setTransform(1,0,0,1,0,0);const se=await new Promise(ke=>{C.toBlob(ke,"image/jpeg",.9)}),$=new File([se],r.file?r.file.name:`rotated_image_${Date.now()}.jpg`,{type:"image/jpeg"}),ne=await q($);u({file:ne,width:f,height:g})}catch(C){console.error("Error processing rotated image:",C),u({file:r.file,width:r.width,height:r.height})}},m.onerror=()=>{console.error("Failed to load image for rotation processing:",r.preview),u({file:r.file,width:r.width,height:r.height})},m.src=r.preview}),_e=r=>{try{const u={images:r.map(m=>{var C;return{fileName:((C=m.file)==null?void 0:C.name)||`image-${Date.now()}.jpg`,rotation:m.rotation||0,width:m.width||0,height:m.height||0,timestamp:Date.now()}}),inspectionId:t.inspectionId,pointId:t.pointId};localStorage.setItem(H,JSON.stringify(u))}catch(u){console.error("Error saving backup:",u)}},he=()=>{localStorage.removeItem(H)},Ce=async r=>{E.value=!0;const u=[],m=[];if(!t.pointId){alert("Error: Point ID is missing. Cannot upload image."),E.value=!1;return}try{_e(r);for(const C of r){if(!C.isNew&&C.rotation===0&&C.id&&C.image_path){u.push({id:C.id,image_path:C.image_path,width:C.width,height:C.height,rotation:0,preview:C.preview,isUploaded:!0});continue}const{file:Z,width:ue,height:ve,isOriginal:f}=await Te(C);if(f&&!C.isNew){u.push({id:C.id,image_path:C.image_path,width:C.width,height:C.height,rotation:C.rotation||0,preview:C.preview,isUploaded:!0});continue}Z&&m.push({file:Z,width:ue,height:ve,rotation:C.rotation||0,originalImage:C})}P(),m.length>0?await $e(m,u):(A("update:modelValue",u),A("save",t.pointId))}catch(C){console.error("Error during image processing:",C),alert("Terjadi error saat memproses gambar. Data tersimpan secara lokal.")}finally{E.value=!1}},$e=async(r,u)=>{M.value=r.length,p.value=0,v.value=0;const m=[...u];let C=0;try{for(let Z=0;Z<r.length;Z++){const ue=r[Z],ve=new FormData;ve.append("inspection_id",t.inspectionId),ve.append("point_id",t.pointId),ve.append("images[]",ue.file);const f=x.value.findIndex(g=>{var se;return g.preview===((se=ue.originalImage)==null?void 0:se.preview)});f!==-1&&(x.value[f].isUploading=!0,x.value[f].isFailed=!1);try{const se=(await jt.post(route("inspections.upload-image"),ve,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:$=>{if($.total){const ne=Math.round($.loaded*100/$.total);v.value=Math.round((Z+$.loaded/$.total)/r.length*100),p.value=Z+1}}})).data.images;if(se&&se.length>0){const $=se[0];if(m.push({id:$.image_id,image_path:$.path,width:$.width||ue.width||0,height:$.height||ue.height||0,rotation:ue.rotation||0,preview:$.public_url,isUploaded:!0}),f!==-1){const ne=x.value.splice(f,1)[0];ne.preview&&ne.preview.startsWith("blob:")&&URL.revokeObjectURL(ne.preview)}C++}}catch(g){console.error(`Error uploading image ${Z+1}:`,g),f!==-1&&(x.value[f].isUploading=!1,x.value[f].isFailed=!0)}}C>0&&(A("update:modelValue",m),A("save",t.pointId),A("uploaded",{pointId:t.pointId,images:m,newImagesCount:C})),C===r.length&&he(),console.log(`✅ Successfully uploaded ${C}/${r.length} images`)}catch(Z){console.error("Error in upload process:",Z),r.forEach(ue=>{const ve=x.value.findIndex(f=>{var g;return f.preview===((g=ue.originalImage)==null?void 0:g.preview)});ve!==-1&&(x.value[ve].isUploading=!1,x.value[ve].isFailed=!0)})}finally{v.value=0,p.value=0,M.value=0,E.value=!1}},we=async r=>{if(!r||!r.file){console.error("No file to retry upload");return}E.value=!0;const u=[...t.modelValue];try{const m=new FormData;m.append("inspection_id",t.inspectionId),m.append("point_id",t.pointId),m.append("images[]",r.file);const C=x.value.findIndex(ve=>ve.preview===r.preview);C!==-1&&(x.value[C].isUploading=!0,x.value[C].isFailed=!1);const ue=(await jt.post(route("inspections.upload-image"),m,{headers:{"Content-Type":"multipart/form-data"}})).data.images;if(ue&&ue.length>0){const ve=ue[0];if(u.push({id:ve.image_id,image_path:ve.path,width:ve.width||r.width||0,height:ve.height||r.height||0,rotation:r.rotation||0,preview:ve.public_url,isUploaded:!0}),C!==-1){const g=x.value.splice(C,1)[0];g.preview&&g.preview.startsWith("blob:")&&URL.revokeObjectURL(g.preview)}A("update:modelValue",u),A("save",t.pointId),A("uploaded",{pointId:t.pointId,images:u,newImagesCount:1}),x.value.some(g=>g.isFailed)||he(),console.log("✅ Successfully retried upload for 1 image")}}catch(m){console.error("Error retrying upload:",m),previewIndex!==-1&&(x.value[previewIndex].isUploading=!1,x.value[previewIndex].isFailed=!0)}finally{E.value=!1}},Me=r=>{if(r){if(r.id&&!r.isNew)Ee(r);else{const u=x.value.findIndex(m=>m.preview&&m.preview===r.preview&&m.isNew||m.id&&m.id===r.id);if(u!==-1){const m=x.value.splice(u,1)[0];m.preview&&m.preview.startsWith("blob:")&&URL.revokeObjectURL(m.preview)}A("update:modelValue",t.modelValue.filter(m=>!(m.id&&m.id===r.id)&&!(m.preview&&m.preview===r.preview)))}D.value>=L.value.length&&(D.value=Math.max(0,L.value.length-1)),L.value.length===0&&P()}},Ee=async r=>{var m,C;if(r.id||r.image_path)try{await jt.delete(route("inspections.delete-image"),{data:{image_id:r.id,image_path:r.image_path}})}catch(Z){console.error("Error deleting image from server:",Z),(C=(m=Z.response)==null?void 0:m.data)!=null&&C.message?alert(`Failed to delete image from server: ${Z.response.data.message}`):alert(`Failed to delete image from server: ${Z.message}`);return}r.preview&&r.preview.startsWith("blob:")&&URL.revokeObjectURL(r.preview);const u=t.modelValue.filter(Z=>Z.id!==r.id);A("update:modelValue",u),x.value=x.value.filter(Z=>Z.isNew&&r.isNew?Z.preview!==r.preview:Z.id!==r.id),A("removeImage",{image:r}),R.value&&L.value.length===0?P():R.value&&D.value>=L.value.length&&(D.value=Math.max(0,L.value.length-1))};return st(()=>{try{localStorage.getItem(H)&&console.log("Found backup images, ready for recovery if needed")}catch(r){console.error("Error loading backup:",r)}}),(r,u)=>(n(),i("div",null,[e("input",{ref_key:"galleryInput",ref:V,type:"file",accept:F.value,class:"hidden",onChange:X,multiple:Y.value,disabled:E.value},null,40,io),e("canvas",{ref_key:"processingCanvas",ref:b,class:"hidden"},null,512),e("p",lo,"Foto Maksimal: "+z(a.settings.max_files)+" | Rasio: "+z(a.settings.camera_aspect_ratio),1),L.value.length===0?(n(),i("label",{key:0,onClick:de,class:re(["block w-full border-2 border-dashed rounded-lg cursor-pointer transition-colors duration-200 h-28",{"border-gray-300 hover:border-indigo-400 bg-gray-50":!0}]),disabled:E.value},[e("div",uo,[u[3]||(u[3]=e("svg",{class:"w-8 h-8 text-gray-400 mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)),u[4]||(u[4]=e("p",{class:"text-sm text-gray-600 font-medium"},"Upload Image",-1)),e("p",co,"Tipe: "+z(F.value),1)])],8,ro)):(n(),i("div",{key:1,class:re(["block w-full rounded-lg transition-colors duration-200 p-2",{"border-2 border-dashed border-indigo-200 bg-indigo-50 h-auto p-2":a.settings.max_files==1,"bg-transparent":a.settings.max_files>1}]),"aria-label":"Image gallery"},[a.settings.max_files===1?(n(),i("div",go,[e("div",{class:"relative flex-shrink-0 w-24 h-24 overflow-hidden rounded-md border border-gray-200 cursor-pointer",onClick:u[1]||(u[1]=m=>ge(0))},[e("img",{src:h(L.value[0]),onError:u[0]||(u[0]=m=>w(L.value[0])),class:"w-full h-full object-cover"},null,40,po),L.value[0].isUploading?(n(),i("div",mo,u[5]||(u[5]=[e("div",{class:"w-6 h-6 border-2 border-white border-t-transparent rounded-full animate-spin"},null,-1)]))):d("",!0)]),e("button",{onClick:u[2]||(u[2]=ct(m=>Ee(L.value[0]),["stop"])),type:"button",class:"flex items-center gap-1 text-red-600 font-medium hover:text-red-800 transition-colors",disabled:E.value},u[6]||(u[6]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.095 21H7.905a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1),Ne(" Hapus Foto ")]),8,vo)])):(n(),i("div",fo,[Y.value&&L.value.length<a.settings.max_files?(n(),i("div",{key:0,class:"flex-shrink-0 flex flex-col items-center justify-center p-2 border-2 border-dashed border-gray-300 rounded-lg cursor-pointer hover:border-indigo-500 transition-colors w-24 h-24",onClick:de,disabled:E.value},u[7]||(u[7]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-8 w-8 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),e("p",{class:"mt-1 text-xs text-gray-600"},"Tambah",-1)]),8,ho)):d("",!0),(n(!0),i(Ue,null,Pe(L.value,(m,C)=>(n(),i("div",{key:m.id||m.preview||C,class:"relative flex-shrink-0 w-24 h-24 overflow-hidden rounded-md border border-gray-200 cursor-pointer",onClick:Z=>m.isFailed?we(m):ge(C)},[e("img",{src:h(m),onError:Z=>w(m),class:"w-full h-full object-cover"},null,40,yo),m.isNew||m.rotation!==0?(n(),i("div",xo,[m.isNew?(n(),i("span",wo,"BARU")):d("",!0),m.rotation!==0?(n(),i("span",ko,"ROTASI")):d("",!0)])):d("",!0),m.isUploading?(n(),i("div",Io,u[8]||(u[8]=[e("div",{class:"w-6 h-6 border-2 border-white border-t-transparent rounded-full animate-spin"},null,-1)]))):d("",!0),m.isFailed?(n(),i("div",_o,u[9]||(u[9]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 mb-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1),e("span",{class:"text-xs font-medium"},"Retry",-1)]))):d("",!0)],8,bo))),128))]))],2)),a.error?(n(),i("p",So,z(a.error),1)):d("",!0),Ve(Ks,{show:S.value,settings:a.settings,onClose:ie,onOpenWebcam:G,onTriggerGallery:W},null,8,["show","settings"]),ee(U)!=="HD_Std"?(n(),De(On,{key:3,show:I.value,"aspect-ratio":k.value,settings:a.settings,point:a.point,"camera-quality":ee(U),onClose:me,onPhotoCaptured:oe},null,8,["show","aspect-ratio","settings","point","camera-quality"])):d("",!0),ee(U)==="HD_Std"?(n(),De(no,{key:4,show:I.value,"aspect-ratio":k.value,settings:a.settings,point:a.point,"camera-quality":ee(U),onClose:me,onPhotoCaptured:oe},null,8,["show","aspect-ratio","settings","point","camera-quality"])):d("",!0),ee(U)==="HP_Native"?(n(),De(oo,{key:5,ref_key:"nativeCamera",ref:c,onDirectPhotoCaptured:fe},null,512)):d("",!0),Ve(In,{show:R.value,images:L.value,point:a.point,"initial-index":D.value,"allow-multiple":Y.value,"max-files":a.settings.max_files,"is-uploading":E.value,"aspect-ratio":k.value,"upload-progress":v.value,"current-upload":p.value,"total-upload":M.value,onClose:P,onSaveImages:Ce,onRemovePreviewImage:Me,onTriggerAddMorePhotos:de,onRetryImage:we},null,8,["show","images","point","initial-index","allow-multiple","max-files","is-uploading","aspect-ratio","upload-progress","current-upload","total-upload"])]))}},Ft=He(Co,[["__scopeId","data-v-c25c1d53"]]),$o={key:0,class:"fixed inset-0 z-50 overflow-hidden"},Ao={class:"absolute bottom-0 left-0 right-0 bg-white rounded-t-2xl max-h-[85vh] overflow-hidden flex flex-col"},Vo={class:"px-4 pb-2 border-b border-gray-200"},To={class:"text-lg font-semibold text-gray-900"},Mo={key:0,class:"text-sm text-gray-500 mt-1"},Eo={class:"flex-1 overflow-y-auto p-4"},Uo={key:0,class:"border-t border-gray-200 p-4 bg-gray-50"},No={__name:"BottomSheetModal",props:{show:Boolean,title:String,subtitle:String},setup(a){return(ae,t)=>(n(),De(gt,{name:"bottom-sheet"},{default:Fe(()=>[a.show?(n(),i("div",$o,[t[1]||(t[1]=e("div",{class:"absolute inset-0 bg-black bg-opacity-50"},null,-1)),e("div",Ao,[t[0]||(t[0]=e("div",{class:"flex justify-center py-3"},[e("div",{class:"w-12 h-1.5 bg-gray-300 rounded-full"})],-1)),e("div",Vo,[e("h3",To,z(a.title),1),a.subtitle?(n(),i("p",Mo,z(a.subtitle),1)):d("",!0)]),e("div",Eo,[aa(ae.$slots,"default",{},void 0,!0)]),ae.$slots.footer?(n(),i("div",Uo,[aa(ae.$slots,"footer",{},void 0,!0)])):d("",!0)])])):d("",!0)]),_:3}))}},pa=He(No,[["__scopeId","data-v-fd942535"]]),Do={class:"space-y-4"},Po={key:0,class:"mt-2"},Lo={key:1,class:"mt-2"},Ro={key:2,class:"mt-2"},jo={key:3,class:"mt-2"},Bo={key:4,class:"mt-2"},Fo={class:"text-sm font-medium text-gray-700 mb-2"},Oo={key:0,class:"text-red-500"},zo={key:0,class:"text-xs text-red-500"},qo=["type","name","value","checked","onChange"],Ko={key:6,class:"mt-4"},Ho={class:"text-sm font-medium text-gray-700 mb-2"},Go={key:0,class:"text-red-500"},Wo={key:0,class:"text-xs text-red-500"},Yo={key:7,class:"space-y-2"},Zo={key:0,class:"text-red-500"},Jo={key:1,class:"text-xs text-red-500"},Xo={class:"flex gap-2"},Qo=["disabled"],Ot={__name:"RadioOptionModal",props:{show:Boolean,title:String,subtitle:String,name:String,options:{type:Array,default:()=>[]},selectedValue:[String,Array],notesValue:String,imagesValue:{type:Array,default:()=>[]},pointId:[String,Number],inspectionId:[String,Number],showTextarea:{type:Boolean,default:!0},showImageUpload:{type:Boolean,default:!0},selectedPoint:Object,point:Object},emits:["update:selectedValue","update:notesValue","update:imagesValue","close","save","hapus","saveTextarea","saveImage","saveText","saveNumber","saveAccount","saveDate"],setup(a,{emit:ae}){const t=a,A=ae,c=v=>A("hapus",v),V=te(()=>Array.isArray(t.selectedValue)?t.options.find(v=>t.selectedValue.includes(v.value)):t.options.find(v=>v.value===t.selectedValue)),b=te(()=>{if(Array.isArray(t.selectedValue))return t.options.filter(v=>t.selectedValue.includes(v.value));if(t.selectedValue){const v=typeof t.selectedValue=="string"?t.selectedValue.split(",").map(p=>p.trim()):[t.selectedValue];return t.options.filter(p=>v.includes(p.value))}return[]}),S=te(()=>{var v;if(Array.isArray(t.selectedValue))return b.value.some(p=>{var M;return p.multi&&((M=p.settings)==null?void 0:M.show_textarea)});{const p=t.options.find(M=>M.value===t.selectedValue);return(v=p==null?void 0:p.settings)==null?void 0:v.show_textarea}}),I=te(()=>{var v;if(Array.isArray(t.selectedValue))return b.value.some(p=>{var M;return p.multi&&((M=p.settings)==null?void 0:M.show_image_upload)});{const p=t.options.find(M=>M.value===t.selectedValue);return(v=p==null?void 0:p.settings)==null?void 0:v.show_image_upload}}),R=te(()=>{var v;if(Array.isArray(t.selectedValue)){const p=b.value.filter(H=>{var Y;return H.multi&&((Y=H.settings)==null?void 0:Y.show_textarea)});if(p.length===0)return null;const M={...p[0].settings},K=[];p.forEach(H=>{var Y;(Y=H.settings)!=null&&Y.damage_options&&K.push(...H.settings.damage_options)});const U=K.filter((H,Y,F)=>Y===F.findIndex(k=>k.value===H.value));return M.damage_options=U,{...p[0],settings:M}}else{const p=t.options.find(M=>M.value===t.selectedValue);return(v=p==null?void 0:p.settings)!=null&&v.show_textarea?p:null}}),x=te(()=>{var v;if(Array.isArray(t.selectedValue))return b.value.find(p=>{var M;return p.multi&&((M=p.settings)==null?void 0:M.show_image_upload)});{const p=t.options.find(M=>M.value===t.selectedValue);return(v=p==null?void 0:p.settings)!=null&&v.show_image_upload?p:null}});te(()=>b.value.find(v=>{var p;return v.multi&&((p=v.settings)==null?void 0:p.show_textarea)})),te(()=>b.value.find(v=>{var p;return v.multi&&((p=v.settings)==null?void 0:p.show_image_upload)}));const D=v=>Array.isArray(t.selectedValue)?t.selectedValue.includes(v.value):t.selectedValue?(typeof t.selectedValue=="string"?t.selectedValue.split(",").map(M=>M.trim()):[t.selectedValue]).includes(v.value):!1,E=(v,p)=>{let M;if(v.multi){const K=Array.isArray(t.selectedValue)?t.selectedValue:[];p.target.checked?M=[...K,v.value]:M=K.filter(U=>U!==v.value)}else M=v.value;A("update:selectedValue",M)},Q=te(()=>{var p,M,K,U,H,Y,F;if(t.point.input_type==="text"&&(!((p=t.notesValue)!=null&&p.trim())||t.point.settings.min_length&&t.notesValue.length<t.point.settings.min_length||t.point.settings.max_length&&t.notesValue.length>t.point.settings.max_length)||t.point.input_type==="number"&&(!((M=t.notesValue)!=null&&M.trim())||t.point.settings.min&&t.notesValue.length<t.point.settings.min||t.point.settings.max&&t.notesValue.length>t.point.settings.max)||t.point.input_type==="account"&&(!((K=t.notesValue)!=null&&K.trim())||t.point.settings.min_value&&t.notesValue.length<t.point.settings.min_value||t.point.settings.max_value&&t.notesValue.length>t.point.settings.max_value)||t.point.input_type==="date"&&(!((U=t.notesValue)!=null&&U.trim())||t.point.settings.min_date&&t.notesValue.length<t.point.settings.min_date||t.point.settings.max_date&&t.notesValue.length>t.point.settings.max_date))return!1;if(t.point.input_type==="imageTOradio"){if(t.imagesValue.length===0)return!1;const k=t.imagesValue.some(ce=>ce.status==="error"),L=t.imagesValue.some(ce=>ce.status==="uploading");if(k||L)return!1}if(t.options.length&&(!t.selectedValue||Array.isArray(t.selectedValue)&&t.selectedValue.length===0))return!1;const v=V.value;if(t.showTextarea&&((H=v==null?void 0:v.settings)!=null&&H.show_textarea)&&(!((Y=t.notesValue)!=null&&Y.trim())||v.settings.min_length&&t.notesValue.length<v.settings.min_length||v.settings.max_length&&t.notesValue.length>v.settings.max_length))return!1;if(t.showImageUpload&&((F=v==null?void 0:v.settings)!=null&&F.show_image_upload)){if(t.imagesValue.length===0||v.settings.max_files&&t.imagesValue.length>v.settings.max_files)return!1;const k=t.imagesValue.some(ce=>ce.status==="error"),L=t.imagesValue.some(ce=>ce.status==="uploading");if(k||L)return!1}return!0});return(v,p)=>(n(),De(pa,{show:a.show,title:a.title,subtitle:a.subtitle,onClose:p[17]||(p[17]=M=>v.$emit("close"))},{footer:Fe(()=>[a.selectedPoint?(n(),i("button",{key:0,onClick:p[14]||(p[14]=M=>c(a.pointId)),class:"flex items-center justify-center text-red-600 hover:text-red-800 mb-3"},p[19]||(p[19]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6M9 7h6m2-3H7m5 0v3"})],-1),Ne(" Hapus Data ")]))):d("",!0),e("div",Xo,[e("button",{type:"button",onClick:p[15]||(p[15]=M=>v.$emit("close")),class:"flex-1 px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50"}," Batal "),e("button",{type:"button",onClick:p[16]||(p[16]=M=>v.$emit("save")),disabled:!Q.value,class:"flex-1 px-4 py-2 bg-indigo-600 border border-transparent rounded-md shadow-sm text-white hover:bg-indigo-700 disabled:bg-gray-300 disabled:cursor-not-allowed"}," Simpan ",8,Qo)])]),default:Fe(()=>{var M,K,U,H,Y,F,k,L,ce,_,h,s,w,O,de,W,G,ie,me,P,N,j,q,X,oe,fe,ge,Te,_e,he,Ce,$e,we,Me,Ee,r;return[e("div",Do,[a.point.input_type==="text"?(n(),i("div",Po,[Ve(ua,{"model-value":a.notesValue,required:(M=a.point.settings)==null?void 0:M.is_required,"min-length":(K=a.point.settings)==null?void 0:K.min_length,"max-length":(U=a.point.settings)==null?void 0:U.max_length,allowSpace:(H=a.point.settings)==null?void 0:H.allow_space,textTransform:(Y=a.point.settings)==null?void 0:Y.text_transform,placeholder:((F=a.point.settings)==null?void 0:F.placeholder)||"Masukan text",error:v.error,"onUpdate:modelValue":p[0]||(p[0]=u=>v.$emit("update:notesValue",u)),onSave:p[1]||(p[1]=u=>v.$emit("saveText",u))},null,8,["model-value","required","min-length","max-length","allowSpace","textTransform","placeholder","error"])])):d("",!0),a.point.input_type==="number"?(n(),i("div",Lo,[Ve(ra,{"model-value":a.notesValue,required:(k=a.point.settings)==null?void 0:k.is_required,min:(L=a.point.settings)==null?void 0:L.min,max:(ce=a.point.settings)==null?void 0:ce.max,step:((_=a.point.settings)==null?void 0:_.step)||1,placeholder:((h=a.point.settings)==null?void 0:h.placeholder)||"Masukan number",error:v.error,"onUpdate:modelValue":p[2]||(p[2]=u=>v.$emit("update:notesValue",u)),onSave:p[3]||(p[3]=u=>v.$emit("saveNumber",u))},null,8,["model-value","required","min","max","step","placeholder","error"])])):d("",!0),a.point.input_type==="account"?(n(),i("div",Ro,[Ve(ca,{"model-value":a.notesValue,required:(s=a.point.settings)==null?void 0:s.is_required,placeholder:((w=a.point.settings)==null?void 0:w.placeholder)||"Masukkan nilai",error:v.error,"point-id":a.pointId,settings:a.point.settings,"onUpdate:modelValue":p[4]||(p[4]=u=>v.$emit("update:notesValue",u)),onSave:p[5]||(p[5]=u=>v.$emit("saveAccount",u))},null,8,["model-value","required","placeholder","error","point-id","settings"])])):d("",!0),a.point.input_type==="date"?(n(),i("div",jo,[Ve(da,{"model-value":a.notesValue,required:(O=a.point.settings)==null?void 0:O.is_required,"min-date":(de=a.point.settings)==null?void 0:de.min_date,"max-date":(W=a.point.settings)==null?void 0:W.max_date,error:v.error,"onUpdate:modelValue":p[6]||(p[6]=u=>v.$emit("update:notesValue",u)),onSave:p[7]||(p[7]=u=>v.$emit("saveDate",u))},null,8,["model-value","required","min-date","max-date","error"])])):d("",!0),a.point.input_type==="imageTOradio"?(n(),i("div",Bo,[e("h4",Fo,[(G=a.point.settings)!=null&&G.required?(n(),i("span",Oo,"*")):d("",!0)]),Ve(Ft,{"model-value":a.imagesValue,"point-id":a.pointId,point:a.point.inspection_point,"inspection-id":a.inspectionId,settings:a.point.settings,"onUpdate:modelValue":p[8]||(p[8]=u=>v.$emit("update:imagesValue",u)),onSave:p[9]||(p[9]=u=>v.$emit("saveImage",u))},null,8,["model-value","point-id","point","inspection-id","settings"]),(ie=a.point.settings)!=null&&ie.required&&a.imagesValue.length===0?(n(),i("p",zo," Foto wajib diupload ")):d("",!0)])):d("",!0),a.options.length?(n(),i("div",{key:5,class:re(["grid gap-2 w-full mt-2",`grid-cols-${Math.min(a.options.length,3)}`])},[(n(!0),i(Ue,null,Pe(a.options,(u,m)=>(n(),i("label",{key:m,class:"cursor-pointer"},[e("input",{type:u.multi?"checkbox":"radio",name:u.multi?`checkbox-${a.name}`:a.name,value:u.value,checked:D(u),onChange:C=>E(u,C),class:"hidden peer"},null,40,qo),e("div",{class:re(["w-full px-4 py-3 border rounded-lg text-center transition-colors whitespace-nowrap text-sm font-medium",{"border-indigo-500 bg-indigo-50 text-indigo-700":D(u),"border-gray-300 text-gray-700 hover:bg-gray-50":!D(u)}])},z(u.label),3)]))),128))],2)):d("",!0),I.value?(n(),i("div",Ko,[e("h4",Ho,[p[18]||(p[18]=Ne(" Upload Foto ")),(P=(me=x.value)==null?void 0:me.settings)!=null&&P.required?(n(),i("span",Go,"*")):d("",!0)]),Ve(Ft,{"model-value":a.imagesValue,"point-id":a.pointId,point:a.point,"inspection-id":a.inspectionId,settings:(N=x.value)==null?void 0:N.settings,"onUpdate:modelValue":p[10]||(p[10]=u=>v.$emit("update:imagesValue",u)),onSave:p[11]||(p[11]=u=>v.$emit("saveImage",u))},null,8,["model-value","point-id","point","inspection-id","settings"]),(q=(j=x.value)==null?void 0:j.settings)!=null&&q.required&&a.imagesValue.length===0?(n(),i("p",Wo," Foto wajib diupload ")):d("",!0)])):d("",!0),S.value?(n(),i("div",Yo,[(oe=(X=R.value)==null?void 0:X.settings)!=null&&oe.required?(n(),i("span",Zo,"*")):d("",!0),Ve(ga,{"model-value":a.notesValue,"point-id":a.pointId,"inspection-id":a.inspectionId,settings:(fe=R.value)==null?void 0:fe.settings,required:(Te=(ge=R.value)==null?void 0:ge.settings)==null?void 0:Te.required,"min-length":(he=(_e=R.value)==null?void 0:_e.settings)==null?void 0:he.min_length,"max-length":($e=(Ce=R.value)==null?void 0:Ce.settings)==null?void 0:$e.max_length,placeholder:((Me=(we=R.value)==null?void 0:we.settings)==null?void 0:Me.placeholder)||"Tambahkan keterangan...","onUpdate:modelValue":p[12]||(p[12]=u=>v.$emit("update:notesValue",u)),onSave:p[13]||(p[13]=u=>v.$emit("saveTextarea",u))},null,8,["model-value","point-id","inspection-id","settings","required","min-length","max-length","placeholder"]),(r=(Ee=R.value)==null?void 0:Ee.settings)!=null&&r.required&&!a.notesValue?(n(),i("p",Jo," Keterangan wajib diisi ")):d("",!0)])):d("",!0)])]}),_:1},8,["show","title","subtitle"]))}},ei={class:"mt-2 space-y-2"},ti=["type","name","value","checked","onChange","required"],ai={key:0,class:"p-2 rounded-lg bg-gray-50"},si={key:0,class:"mt-2"},ni={class:"flex gap-2 overflow-x-auto",style:{"scrollbar-width":"none"}},oi=["src"],ii={key:0,class:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center text-white text-xs"},li={key:1,class:"mt-2"},ri={class:"text-sm text-gray-600"},ui={key:2,class:"mt-2 text-sm text-red-600"},di={__name:"InputRadio",props:{modelValue:[String,Array],required:Boolean,error:String,point:Object,pointId:[String,Number],pointName:String,subtitle:String,inspectionId:[String,Number],options:{type:Array,default:()=>[]},selectedPoint:Object,notes:{type:String,default:""},images:{type:Array,default:()=>[]}},emits:["update:modelValue","update:notes","update:images","save","hapus"],setup(a,{emit:ae}){const t=a,A=ae,c=y(t.notes),V=y([...t.images]),b=y(!1),S=y(""),I=y([]),R=y(""),x=y([]);te(()=>t.options.find(k=>k.value===t.modelValue));const D=te(()=>Array.isArray(t.modelValue)?t.options.filter(k=>t.modelValue.includes(k.value)):t.modelValue?[t.options.find(k=>k.value===t.modelValue)].filter(Boolean):[]),E=k=>Array.isArray(t.modelValue)?t.modelValue.includes(k.value):t.modelValue?(typeof t.modelValue=="string"?t.modelValue.split(",").map(ce=>ce.trim()):[t.modelValue]).includes(k.value):!1,Q=k=>k.settings&&(k.settings.show_textarea||k.settings.show_image_upload);ye(()=>t.notes,k=>{c.value=k}),ye(()=>t.images,k=>{V.value=[...k]}),ye(()=>t.modelValue,k=>{k?R.value=Array.isArray(k)?[...k]:k:R.value=""});const v=(k,L)=>{let ce;if(k.multi){const _=Array.isArray(t.modelValue)?t.modelValue:[];L.target.checked?ce=[..._,k.value]:ce=_.filter(h=>h!==k.value)}else ce=k.value;A("update:modelValue",ce),Q(k)?M():A("save",{pointId:t.pointId,inspectionId:t.inspectionId,value:ce,notes:"",images:[]})},p=k=>k.preview||(k.image_path?`/${k.image_path}`:k),M=()=>{R.value=t.modelValue,S.value=c.value,I.value=[...V.value],x.value=[...V.value],b.value=!0},K=()=>{S.value="",I.value=[],R.value=Array.isArray(t.modelValue)?[...t.modelValue]:t.modelValue,b.value=!1},U=k=>{I.value=k,V.value=[...k],A("update:images",[...k]),A("save",{pointId:t.pointId,inspectionId:t.inspectionId,value:t.modelValue,notes:c.value,images:[...k]})},H=k=>{},Y=()=>{R.value!==t.modelValue&&A("update:modelValue",R.value),c.value=S.value,A("update:notes",S.value),V.value=[...I.value],A("update:images",[...I.value]),A("save",{pointId:t.pointId,inspectionId:t.inspectionId,value:R.value,notes:S.value,images:I.value}),b.value=!1},F=k=>{R.value="",S.value="",I.value=[],c.value="",V.value=[],A("update:modelValue",""),A("update:notes",""),A("update:images",[]),A("hapus",k),b.value=!1};return(k,L)=>{var ce;return n(),i("div",ei,[e("div",{class:re(["grid gap-2 w-full mt-2",`grid-cols-${Math.min(a.options.length,3)}`])},[(n(!0),i(Ue,null,Pe(a.options,(_,h)=>(n(),i("label",{key:h,class:"cursor-pointer"},[e("input",{type:_.multi?"checkbox":"radio",name:_.multi?`checkbox-${a.pointId}`:"radio-"+a.pointId,value:_.value,checked:E(_),onChange:s=>v(_,s),class:"hidden peer",required:a.required&&!_.multi},null,40,ti),e("div",{class:re(["w-full px-4 py-3 border rounded-lg text-center transition-colors whitespace-nowrap text-sm font-medium",{"border-indigo-500 bg-indigo-50 text-indigo-700":E(_),"border-gray-300 text-gray-700 hover:bg-gray-50":!E(_)}])},z(_.label),3)]))),128))],2),a.modelValue&&D.value.length>0&&D.value.some(_=>Q(_))?(n(),i("div",ai,[e("div",{class:"flex justify-between items-start"},[L[4]||(L[4]=e("h4",{class:"text-sm font-medium text-gray-700"},"Detail : ",-1)),e("button",{onClick:M,class:"text-sm text-indigo-600 hover:text-indigo-800"}," Edit ")]),a.images.length>0&&D.value.some(_=>{var h;return(h=_.settings)==null?void 0:h.show_image_upload})?(n(),i("div",si,[e("div",ni,[(n(!0),i(Ue,null,Pe(a.images,(_,h)=>(n(),i("div",{key:h,class:"relative flex-shrink-0",style:{width:"130px",height:"130px"}},[e("img",{src:p(_),class:"w-full h-full object-cover rounded"},null,8,oi),h===3&&a.images.length>4?(n(),i("span",ii," +"+z(a.images.length-4),1)):d("",!0)]))),128))])])):d("",!0),a.notes&&D.value.some(_=>{var h;return(h=_.settings)==null?void 0:h.show_textarea})?(n(),i("div",li,[e("p",ri,z(a.notes),1)])):d("",!0)])):d("",!0),b.value?(n(),De(Ot,{key:(ce=a.selectedPoint)==null?void 0:ce.id,show:b.value,title:a.pointName||"Detail",subtitle:a.subtitle||"",name:"modal-radio-"+a.pointId,options:a.options,"selected-value":R.value,"notes-value":S.value,"images-value":I.value,"point-id":a.pointId,point:a.point,"inspection-id":a.inspectionId,"selected-point":a.selectedPoint,"onUpdate:selectedValue":L[0]||(L[0]=_=>R.value=_),"onUpdate:notesValue":L[1]||(L[1]=_=>S.value=_),"onUpdate:imagesValue":L[2]||(L[2]=_=>U(_)),onClose:K,onSave:Y,onSaveTextarea:k.handleTextareaSave,onSaveImage:H,onHapus:L[3]||(L[3]=_=>F(a.pointId))},null,8,["show","title","subtitle","name","options","selected-value","notes-value","images-value","point-id","point","inspection-id","selected-point","onSaveTextarea"])):d("",!0),a.error?(n(),i("p",ui,z(a.error),1)):d("",!0)])}}},ci={class:"mt-2 space-y-2"},gi={key:0,class:"flex flex-wrap gap-3"},pi={key:1,class:"p-2"},mi={key:0,class:"mt-2"},vi={class:"flex gap-2 overflow-x-auto scrollbar-hide"},fi=["src"],hi={key:0,class:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center text-white text-xs"},bi=["type","name","value","checked"],yi={key:1,class:"mt-2"},xi={class:"text-sm text-gray-600"},wi={key:3,class:"mt-2 text-sm text-red-600"},ki={__name:"InputImageToRadio",props:{modelValue:[String,Array],required:Boolean,error:String,point:Object,pointId:[String,Number],pointName:String,subtitle:String,inspectionId:[String,Number],options:{type:Array,default:()=>[]},selectedPoint:Object,notes:{type:String,default:""},images:{type:Array,default:()=>[]}},emits:["update:modelValue","update:notes","update:images","save","hapus"],setup(a,{emit:ae}){const t=a,A=ae,c=y(t.notes),V=y([...t.images]),b=y(!1),S=y(""),I=y([]),R=y(""),x=y([]),D=te(()=>{if(Array.isArray(t.modelValue))return t.options.find(F=>t.modelValue.includes(F.value));if(t.modelValue){const F=typeof t.modelValue=="string"?t.modelValue.split(",").map(k=>k.trim()):[t.modelValue];return t.options.find(k=>F.includes(k.value))}return null}),E=te(()=>{if(Array.isArray(t.modelValue))return t.options.filter(F=>t.modelValue.includes(F.value));if(t.modelValue){const F=typeof t.modelValue=="string"?t.modelValue.split(",").map(k=>k.trim()):[t.modelValue];return t.options.filter(k=>F.includes(k.value))}return[]}),Q=te(()=>E.value.some(F=>{var k;return F.multi&&((k=F.settings)==null?void 0:k.show_textarea)}));te(()=>E.value.find(F=>{var k;return F.multi&&((k=F.settings)==null?void 0:k.show_textarea)}));const v=F=>Array.isArray(t.modelValue)?t.modelValue.includes(F.value):t.modelValue?(typeof t.modelValue=="string"?t.modelValue.split(",").map(L=>L.trim()):[t.modelValue]).includes(F.value):!1,p=F=>F.preview||(F.image_path?`/${F.image_path}`:F);ye(()=>t.notes,F=>{c.value=F});const M=()=>{R.value=t.modelValue||"",S.value=c.value,I.value=[...V.value],x.value=[...V.value],b.value=!0},K=()=>{S.value="",I.value=[],R.value="",b.value=!1},U=F=>{I.value=F,V.value=[...F],A("update:images",[...F]),A("save",{pointId:t.pointId,inspectionId:t.inspectionId,value:t.modelValue,notes:c.value,images:[...F]})},H=()=>{R.value!==t.modelValue&&A("update:modelValue",R.value),c.value=S.value,A("update:notes",S.value),V.value=[...I.value],A("update:images",[...I.value]),A("save",{pointId:t.pointId,inspectionId:t.inspectionId,value:R.value,notes:S.value,images:I.value}),b.value=!1},Y=F=>{R.value="",S.value="",I.value=[],c.value="",V.value=[],A("update:modelValue",""),A("update:notes",""),A("update:images",[]),A("hapus",F),b.value=!1};return(F,k)=>{var L,ce,_;return n(),i("div",ci,[!a.modelValue&&V.value.length===0&&!c.value?(n(),i("div",gi,[e("div",{class:"relative w-28 h-28 border-2 border-dashed rounded-lg flex items-center justify-center cursor-pointer overflow-hidden",onClick:M},k[4]||(k[4]=[e("div",{class:"flex flex-col items-center text-gray-400"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-8 w-8 mb-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})]),e("span",{class:"text-xs font-medium"},"Tambah")],-1)]))])):(n(),i("div",pi,[e("div",{class:"flex justify-between items-start"},[k[5]||(k[5]=e("h4",{class:"text-sm font-medium text-gray-700"},"Detail :",-1)),e("button",{onClick:M,class:"text-sm text-indigo-600 hover:text-indigo-800"}," Edit ")]),V.value.length>0?(n(),i("div",mi,[e("div",vi,[(n(!0),i(Ue,null,Pe(V.value,(h,s)=>(n(),i("div",{key:s,class:"relative flex-shrink-0",style:{width:"130px",height:"130px"}},[e("img",{src:p(h),class:"w-full h-full object-cover rounded"},null,8,fi),s===3&&V.value.length>4?(n(),i("span",hi," +"+z(V.value.length-4),1)):d("",!0)]))),128))])])):d("",!0),e("div",{class:re(["grid gap-2 w-full mt-2",`grid-cols-${Math.min(a.options.length,3)}`])},[(n(!0),i(Ue,null,Pe(a.options,(h,s)=>(n(),i("label",{key:s,class:"cursor-pointer"},[e("input",{type:h.multi?"checkbox":"radio",name:h.multi?`checkbox-${a.pointId}`:`radio-${a.pointId}`,value:h.value,checked:v(h),disabled:!0,class:"hidden peer"},null,8,bi),e("div",{class:re(["w-full px-4 py-3 border rounded-lg text-center transition-colors whitespace-nowrap text-sm font-medium",{"border-indigo-500 bg-indigo-50 text-indigo-700":v(h),"border-gray-300 text-gray-700 hover:bg-gray-50":!v(h)}])},z(h.label),3)]))),128))],2),c.value&&((ce=(L=D.value)==null?void 0:L.settings)!=null&&ce.show_textarea||Q.value)?(n(),i("div",yi,[e("p",xi,z(c.value),1)])):d("",!0)])),b.value?(n(),De(Ot,{key:(_=a.selectedPoint)==null?void 0:_.id,show:b.value,title:a.pointName||"Detail",subtitle:a.subtitle||"",name:"modal-radio-"+a.pointId,options:a.options,"selected-value":R.value,"notes-value":S.value,"images-value":I.value,"point-id":a.pointId,point:a.point,"inspection-id":a.inspectionId,"selected-point":a.selectedPoint,"onUpdate:selectedValue":k[0]||(k[0]=h=>R.value=h),"onUpdate:notesValue":k[1]||(k[1]=h=>S.value=h),"onUpdate:imagesValue":k[2]||(k[2]=h=>U(h)),onClose:K,onSave:H,onHapus:k[3]||(k[3]=h=>Y(a.pointId))},null,8,["show","title","subtitle","name","options","selected-value","notes-value","images-value","point-id","point","inspection-id","selected-point"])):d("",!0),a.error?(n(),i("p",wi,z(a.error),1)):d("",!0)])}}},Ii={class:"text-base font-semibold text-indigo-700"},_i={key:0,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},Si={key:1,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},Ci={class:"text-base font-semibold text-indigo-700"},$i={class:"p-4 space-y-4"},Ai={key:0,class:"flex justify-end py-1"},Vi=["onClick"],Ti={key:1,class:"space-y-2"},Mi={class:"flex items-start justify-between"},Ei={class:"flex-1"},Ui={class:"block text-sm font-medium text-gray-900"},Ni={class:"font-bold"},Di={key:0,class:"text-red-500"},Pi={key:1,class:"italic text-xs text-gray-400 ml-2"},Li={key:0,class:"mt-1"},Ri={key:0,class:"inline-flex items-center px-2 py-1 rounded text-xs font-medium bg-green-100 text-green-800"},ji={key:0},Bi={key:1},Fi={key:2},Oi={key:3},zi={key:4},qi={key:0,class:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-green-100 text-green-800"},Ki={key:9,class:"p-3 bg-gray-100 rounded text-sm text-gray-600"},Hi={class:"text-xs mt-1 list-disc list-inside"},Gi={key:0},Wi={key:1},Yi={key:2},Zi={key:3},Ji={key:4},Xi={key:0,class:"text-center py-8 text-gray-500"},Qi={key:0,class:"text-xs text-gray-400"},el={__name:"CategorySection",props:{category:Object,form:Object,head:Object,inspectionId:String,selectedPoint:Object,car:Object},emits:["updateResult","removeImage","hapusPoint"],setup(a,{emit:ae}){const t=a,A=ae,c=Lt("vehicleFeatures",y(null));c.value=JSON.parse(localStorage.getItem("vehicle_features")||"{}"),Dt("vehicleFeatures",c);const V=y(!1),b=y([]),S=y(!0),I=y(null),R=xa(),x={MT:"Manual Transmission (MT)",AT:"Automatic Transmission (AT)",CVT:"Continuously Variable Transmission (CVT)","e-CVT":"Electronic CVT (e-CVT)",DCT:"Dual Clutch Transmission (DCT)",AMT:"Automated Manual Transmission (AMT)",IVT:"Intelligent Variable Transmission (IVT)",SSG:"Seamless Shift Gearbox (SSG)",AGS:"Auto Gear Shift (AGS)",DHT:"Dedicated Hybrid Transmission (DHT)"};st(()=>{const _=new IntersectionObserver(([h])=>{S.value=h.isIntersecting},{threshold:.1});I.value&&_.observe(I.value),wt(()=>{I.value&&_.unobserve(I.value)})});const D=()=>{V.value=!V.value,V.value||(b.value=[])},E=te(()=>(t.category.points||[]).some(_=>_.is_default===!1)),Q=_=>!_||!Array.isArray(_)?[]:_.map(h=>x[h]||h),v=_=>{var O,de;const h=_.settings;if(!p(_))return!0;const s=(O=t.car)==null?void 0:O.transmission,w=(de=t.car)==null?void 0:de.fuel_type;return!(h.transmission&&Array.isArray(h.transmission)&&h.transmission.length>0&&s&&!h.transmission.includes(s)||h.fuel_type&&h.fuel_type.trim()!==""&&w&&h.fuel_type!==w||h.rear_door&&(!c.value||!c.value.rear_door)||h.pick_up&&(!c.value||!c.value.pick_up)||h.box&&(!c.value||!c.value.box))},p=_=>{const h=_.settings;return!!(h!=null&&h.transmission&&Array.isArray(h.transmission)&&h.transmission.length>0||h!=null&&h.fuel_type&&h.fuel_type.trim()!==""||h!=null&&h.rear_door||h!=null&&h.pick_up||h!=null&&h.box)},M=_=>p(_)&&(V.value||v(_)),K=te(()=>{const _=t.category.points||[],h=[];let s=[];return V.value?t.category.isDamageMenu?_.filter(w=>{var O;return w.is_default||H((O=w.inspection_point)==null?void 0:O.id)||V.value}):_:t.category.isDamageMenu?_.filter(w=>{var de;const O=(de=w.inspection_point)==null?void 0:de.id;return H(O)||w.is_default||b.value.includes(O)}):(_.forEach(w=>{var P;const O=(P=w.inspection_point)==null?void 0:P.id,de=H(O),W=b.value.includes(O),ie=!p(w)||v(w);(w.is_default||de||W)&&ie?(s.length>0&&(h.push({is_link:!0,count:s.length,hiddenIds:s.map(N=>N.inspection_point.id)}),s.forEach(N=>{b.value.includes(N.inspection_point.id)&&h.push(N)}),s=[]),h.push(w)):(!p(w)||v(w))&&s.push(w)}),s.length>0&&(h.push({is_link:!0,count:s.length,hiddenIds:s.map(w=>w.inspection_point.id)}),s.forEach(w=>{b.value.includes(w.inspection_point.id)&&h.push(w)})),h.filter(w=>{var O,de;return w.is_link||w.is_default||H((O=w.inspection_point)==null?void 0:O.id)||b.value.includes((de=w.inspection_point)==null?void 0:de.id)}))});te(()=>K.value.filter(_=>!_.is_link));const U=_=>{V.value=!1,_.forEach(h=>{b.value.includes(h)||b.value.push(h)})},H=_=>{if(!_)return!1;const h=R.props.existingResults[_]!==void 0,s=R.props.existingImages[_]&&R.props.existingImages[_].length>0,w=t.form.results[_]&&(t.form.results[_].status||t.form.results[_].note),O=t.form.images[_]&&t.form.images[_].length>0;return h||s||w||O},Y=[{value:"good",label:"Good"},{value:"bad",label:"Bad"},{value:"na",label:"N/A"}],F=_=>{var w,O,de,W,G,ie,me,P,N;const h=t.form.results[(w=_.inspection_point)==null?void 0:w.id],s=t.form.images[(O=_.inspection_point)==null?void 0:O.id];if(!h)return!1;switch(_.input_type){case"text":case"number":case"date":case"account":case"textarea":return!!h.note;case"select":case"radio":if(!h.status)return!1;const j=(W=(de=_.settings)==null?void 0:de.radios)==null?void 0:W.find(X=>X.value===h.status);return!(j!=null&&j.settings&&(j.settings.show_textarea&&!((G=h.note)!=null&&G.trim())||j.settings.show_image_upload&&(s==null?void 0:s.length)===0));case"imageTOradio":if((s==null?void 0:s.length)===0||!h.status)return!1;const q=(me=(ie=_.settings)==null?void 0:ie.radios)==null?void 0:me.find(X=>X.value===h.status);return!(q!=null&&q.settings&&q.settings.show_textarea&&!((P=h.note)!=null&&P.trim()));case"image":return(s==null?void 0:s.length)>0;default:return!!h.status||!!((N=h.note)!=null&&N.trim())}},k=(_,h,s)=>{A("updateResult",{pointId:_,type:s,value:h})},L=_=>{console.log("Save result for point:",_)},ce=_=>{A("hapusPoint",_)};return ye(()=>t.form.results,_=>{},{deep:!0}),ye(()=>t.form.images,_=>{},{deep:!0}),ye(()=>t.car,_=>{console.log("Car data updated:",_)},{deep:!0}),ye(c,_=>{console.log("Vehicle features updated:",_)},{deep:!0}),(_,h)=>(n(),i(Ue,null,[t.head==="vertical"?(n(),i("div",{key:0,class:re(["px-6 py-2 border-b flex items-center justify-between bg-indigo-200","fixed top-0 left-0 right-0 z-20"])},[e("h4",Ii,z(a.category.name),1),E.value?(n(),i("button",{key:0,onClick:D,class:"text-sm text-indigo-700 hover:underline focus:outline-none"},z(V.value?"Sembunyikan Semua":"Tampilkan Point Lain"),1)):d("",!0)])):d("",!0),e("div",{class:re(["bg-gray-50 shadow-lg rounded-xl overflow-hidden border border-gray-100",t.head==="vertical"?"pt-6":""])},[!S.value&&E.value?(n(),i("button",{key:0,onClick:D,class:"fixed top-3 right-2 z-10 bg-indigo-600 text-white p-2 rounded-full shadow-lg"},[V.value?(n(),i("svg",_i,h[0]||(h[0]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"},null,-1),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.477 0 8.268 2.943 9.542 7-1.274 4.057-5.065 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"},null,-1)]))):(n(),i("svg",Si,h[1]||(h[1]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.477 0-8.268-2.943-9.542-7a9.956 9.956 0 012.006-3.362M9.88 9.88a3 3 0 104.24 4.24M6.1 6.1l11.8 11.8"},null,-1)])))])):d("",!0),t.head==="horizontal"?(n(),i("div",{key:1,ref_key:"categoryHeader",ref:I,class:"bg-indigo-200 px-6 py-2 border-b flex items-center justify-between"},[e("h4",Ci,z(a.category.name),1),E.value?(n(),i("button",{key:0,onClick:D,class:"text-sm text-indigo-700 hover:underline focus:outline-none"},z(V.value?"Sembunyikan":"Tampilkan Point Lain"),1)):d("",!0)],512)):d("",!0),e("div",$i,[(n(!0),i(Ue,null,Pe(K.value,(s,w)=>{var O,de,W,G,ie,me,P,N,j,q,X,oe,fe,ge,Te,_e,he,Ce,$e,we,Me,Ee,r,u,m,C,Z,ue,ve,f,g,se,$,ne,ke,Ae,Ie,Oe,pt,kt,Ze,mt,vt,ft,It,nt,ht,bt,ot,je,Ge,ze,it,_t,lt,Je,rt,Xe,Qe,St,Ct,$t,et,At,Vt,Tt,Mt,Et,Ut;return n(),i("div",{key:w,class:re(["space-y-2 last:border-0 last:pb-0",s.is_link?"pb-0":"pb-2 border-b border-gray-100"])},[s.is_link?(n(),i("div",Ai,[e("button",{onClick:J=>U(s.hiddenIds),class:"text-sm font-medium text-indigo-600 hover:text-indigo-800 hover:underline focus:outline-none"}," Tampilkan "+z(s.count)+" Point Tersembunyi ",9,Vi)])):(n(),i("div",Ti,[e("div",Mi,[e("div",Ei,[e("label",Ui,[e("span",Ni,z((O=s.inspection_point)==null?void 0:O.name),1),(de=s.settings)!=null&&de.is_required?(n(),i("span",Di,"*")):d("",!0),!s.is_default&&!H((W=s.inspection_point)==null?void 0:W.id)?(n(),i("span",Pi," (opsional) ")):d("",!0)]),M(s)?(n(),i("div",Li,[p(s)?(n(),i("div",Ri,[(G=s.settings)!=null&&G.transmission?(n(),i("div",ji,z(s.settings.transmission.join(", ")),1)):d("",!0),(ie=s.settings)!=null&&ie.fuel_type?(n(),i("div",Bi,z(s.settings.fuel_type),1)):d("",!0),(me=s.settings)!=null&&me.rear_door?(n(),i("div",Fi," Pintu Belakang ")):d("",!0),(P=s.settings)!=null&&P.pick_up?(n(),i("div",Oi," Tipe Pick Up ")):d("",!0),(N=s.settings)!=null&&N.box?(n(),i("div",zi," Memiliki Box ")):d("",!0)])):d("",!0)])):d("",!0)]),F(s)?(n(),i("span",qi," ✓ ")):d("",!0)]),s.input_type==="text"&&v(s)?(n(),De(ua,{key:0,modelValue:a.form.results[(j=s.inspection_point)==null?void 0:j.id].note,"onUpdate:modelValue":[J=>{var T;return a.form.results[(T=s.inspection_point)==null?void 0:T.id].note=J},J=>{var T;return k((T=s.inspection_point)==null?void 0:T.id,J,"note")}],required:(q=s.settings)==null?void 0:q.is_required,"min-length":(X=s.settings)==null?void 0:X.min_length,"max-length":(oe=s.settings)==null?void 0:oe.max_length,allowSpace:(fe=s.settings)==null?void 0:fe.allow_space,textTransform:(ge=s.settings)==null?void 0:ge.text_transform,placeholder:((Te=s.settings)==null?void 0:Te.placeholder)||"Masukan text",error:a.form.errors[`results.${(_e=s.inspection_point)==null?void 0:_e.id}.note`],onSave:J=>{var T;return L((T=s.inspection_point)==null?void 0:T.id)}},null,8,["modelValue","onUpdate:modelValue","required","min-length","max-length","allowSpace","textTransform","placeholder","error","onSave"])):d("",!0),s.input_type==="number"&&v(s)?(n(),De(ra,{key:1,modelValue:a.form.results[(he=s.inspection_point)==null?void 0:he.id].note,"onUpdate:modelValue":[J=>{var T;return a.form.results[(T=s.inspection_point)==null?void 0:T.id].note=J},J=>{var T;return k((T=s.inspection_point)==null?void 0:T.id,J,"note")}],required:(Ce=s.settings)==null?void 0:Ce.is_required,min:($e=s.settings)==null?void 0:$e.min,max:(we=s.settings)==null?void 0:we.max,step:((Me=s.settings)==null?void 0:Me.step)||1,placeholder:((Ee=s.settings)==null?void 0:Ee.placeholder)||"Masukan number",error:a.form.errors[`results.${(r=s.inspection_point)==null?void 0:r.id}.note`],onSave:J=>{var T;return L((T=s.inspection_point)==null?void 0:T.id)}},null,8,["modelValue","onUpdate:modelValue","required","min","max","step","placeholder","error","onSave"])):d("",!0),s.input_type==="account"&&v(s)?(n(),De(ca,{key:2,modelValue:a.form.results[(u=s.inspection_point)==null?void 0:u.id].note,"onUpdate:modelValue":[J=>{var T;return a.form.results[(T=s.inspection_point)==null?void 0:T.id].note=J},J=>{var T;return k((T=s.inspection_point)==null?void 0:T.id,J,"note")}],required:(m=s.settings)==null?void 0:m.is_required,placeholder:((C=s.settings)==null?void 0:C.placeholder)||"Masukkan nilai",error:a.form.errors[`results.${(Z=s.inspection_point)==null?void 0:Z.id}.note`],"point-id":(ue=s.inspection_point)==null?void 0:ue.id,settings:s.settings,onSave:J=>{var T;return L((T=s.inspection_point)==null?void 0:T.id)}},null,8,["modelValue","onUpdate:modelValue","required","placeholder","error","point-id","settings","onSave"])):d("",!0),s.input_type==="date"&&v(s)?(n(),De(da,{key:3,modelValue:a.form.results[(ve=s.inspection_point)==null?void 0:ve.id].note,"onUpdate:modelValue":[J=>{var T;return a.form.results[(T=s.inspection_point)==null?void 0:T.id].note=J},J=>{var T;return k((T=s.inspection_point)==null?void 0:T.id,J,"note")}],required:(f=s.settings)==null?void 0:f.is_required,"min-date":(g=s.settings)==null?void 0:g.min_date,"max-date":(se=s.settings)==null?void 0:se.max_date,error:a.form.errors[`results.${($=s.inspection_point)==null?void 0:$.id}.note`],onSave:J=>{var T;return L((T=s.inspection_point)==null?void 0:T.id)}},null,8,["modelValue","onUpdate:modelValue","required","min-date","max-date","error","onSave"])):d("",!0),s.input_type==="textarea"&&v(s)?(n(),De(ga,{key:4,modelValue:a.form.results[(ne=s.inspection_point)==null?void 0:ne.id].note,"onUpdate:modelValue":[J=>{var T;return a.form.results[(T=s.inspection_point)==null?void 0:T.id].note=J},J=>{var T;return k((T=s.inspection_point)==null?void 0:T.id,J,"note")}],required:(ke=s.settings)==null?void 0:ke.is_required,"min-length":(Ae=s.settings)==null?void 0:Ae.min_length,"max-length":(Ie=s.settings)==null?void 0:Ie.max_length,placeholder:((Oe=s.settings)==null?void 0:Oe.placeholder)||"Masukkan teks di sini",settings:s.settings,error:a.form.errors[`results.${(pt=s.inspection_point)==null?void 0:pt.id}.note`],onSave:J=>{var T;return L((T=s.inspection_point)==null?void 0:T.id)}},null,8,["modelValue","onUpdate:modelValue","required","min-length","max-length","placeholder","settings","error","onSave"])):d("",!0),s.input_type==="radio"&&v(s)?(n(),De(di,{key:5,modelValue:a.form.results[(kt=s.inspection_point)==null?void 0:kt.id].status,"onUpdate:modelValue":[J=>{var T;return a.form.results[(T=s.inspection_point)==null?void 0:T.id].status=J},J=>{var T;return k((T=s.inspection_point)==null?void 0:T.id,J,"status")}],notes:a.form.results[(Ze=s.inspection_point)==null?void 0:Ze.id].note,images:a.form.images[(mt=s.inspection_point)==null?void 0:mt.id],required:(vt=s.settings)==null?void 0:vt.is_required,"point-id":(ft=s.inspection_point)==null?void 0:ft.id,point:s.inspection_point,"inspection-id":a.inspectionId,settings:s.settings,"point-name":(It=s.inspection_point)==null?void 0:It.name,subtitle:(nt=s.inspection_point)==null?void 0:nt.description,"selected-point":s.inspection_point??null,options:((ht=s.settings)==null?void 0:ht.radios)||Y,error:a.form.errors[`results.${(bt=s.inspection_point)==null?void 0:bt.id}.status`],"onUpdate:notes":J=>{var T;return a.form.results[(T=s.inspection_point)==null?void 0:T.id].note=J},"onUpdate:images":J=>{var T;return a.form.images[(T=s.inspection_point)==null?void 0:T.id]=J},onSave:J=>{var T;return L((T=s.inspection_point)==null?void 0:T.id)},onHapus:J=>{var T;return ce((T=s.inspection_point)==null?void 0:T.id)}},null,8,["modelValue","onUpdate:modelValue","notes","images","required","point-id","point","inspection-id","settings","point-name","subtitle","selected-point","options","error","onUpdate:notes","onUpdate:images","onSave","onHapus"])):d("",!0),s.input_type==="imageTOradio"&&v(s)?(n(),De(ki,{key:6,modelValue:a.form.results[(ot=s.inspection_point)==null?void 0:ot.id].status,"onUpdate:modelValue":[J=>{var T;return a.form.results[(T=s.inspection_point)==null?void 0:T.id].status=J},J=>{var T;return k((T=s.inspection_point)==null?void 0:T.id,J,"status")}],notes:a.form.results[(je=s.inspection_point)==null?void 0:je.id].note,images:a.form.images[(Ge=s.inspection_point)==null?void 0:Ge.id],required:(ze=s.settings)==null?void 0:ze.is_required,"point-id":(it=s.inspection_point)==null?void 0:it.id,"inspection-id":a.inspectionId,settings:s.settings,"point-name":(_t=s.inspection_point)==null?void 0:_t.name,subtitle:(lt=s.inspection_point)==null?void 0:lt.description,point:s,"selected-point":s.inspection_point??null,options:((Je=s.settings)==null?void 0:Je.radios)||Y,error:a.form.errors[`results.${(rt=s.inspection_point)==null?void 0:rt.id}.status`],"onUpdate:notes":J=>{var T;return a.form.results[(T=s.inspection_point)==null?void 0:T.id].note=J},"onUpdate:images":J=>{var T;return a.form.images[(T=s.inspection_point)==null?void 0:T.id]=J},onSave:J=>{var T;return L((T=s.inspection_point)==null?void 0:T.id)},onHapus:J=>{var T;return ce((T=s.inspection_point)==null?void 0:T.id)}},null,8,["modelValue","onUpdate:modelValue","notes","images","required","point-id","inspection-id","settings","point-name","subtitle","point","selected-point","options","error","onUpdate:notes","onUpdate:images","onSave","onHapus"])):d("",!0),s.input_type==="image"&&v(s)?(n(),De(Ft,{key:7,modelValue:a.form.images[(Xe=s.inspection_point)==null?void 0:Xe.id],"onUpdate:modelValue":J=>{var T;return a.form.images[(T=s.inspection_point)==null?void 0:T.id]=J},error:a.form.errors[`images.${(Qe=s.inspection_point)==null?void 0:Qe.id}`],"inspection-id":a.inspectionId,"point-id":(St=s.inspection_point)==null?void 0:St.id,point:s.inspection_point,"point-name":(Ct=s.inspection_point)==null?void 0:Ct.name,settings:s.settings,"onUpdate:notes":J=>{var T;return a.form.results[(T=s.inspection_point)==null?void 0:T.id].note=J},"onUpdate:status":J=>{var T;return a.form.results[(T=s.inspection_point)==null?void 0:T.id].status=J}},null,8,["modelValue","onUpdate:modelValue","error","inspection-id","point-id","point","point-name","settings","onUpdate:notes","onUpdate:status"])):d("",!0),s.input_type==="select"&&v(s)?(n(),De(js,{key:8,modelValue:a.form.results[($t=s.inspection_point)==null?void 0:$t.id].status,"onUpdate:modelValue":[J=>{var T;return a.form.results[(T=s.inspection_point)==null?void 0:T.id].status=J},J=>{var T;return k((T=s.inspection_point)==null?void 0:T.id,J,"status")}],required:(et=s.settings)==null?void 0:et.is_required,error:a.form.errors[`results.${(At=s.inspection_point)==null?void 0:At.id}.status`],onSave:J=>{var T;return L((T=s.inspection_point)==null?void 0:T.id)}},null,8,["modelValue","onUpdate:modelValue","required","error","onSave"])):d("",!0),!v(s)&&p(s)?(n(),i("div",Ki,[h[2]||(h[2]=e("p",{class:"font-medium"},"Tidak tersedia untuk kendaraan ini",-1)),h[3]||(h[3]=e("p",{class:"text-xs mt-1"},"Point ini hanya tersedia untuk:",-1)),e("ul",Hi,[(Vt=s.settings)!=null&&Vt.transmission?(n(),i("li",Gi," Transmisi: "+z(Q(s.settings.transmission).join(", ")),1)):d("",!0),(Tt=s.settings)!=null&&Tt.fuel_type?(n(),i("li",Wi," Bahan bakar: "+z(s.settings.fuel_type),1)):d("",!0),(Mt=s.settings)!=null&&Mt.rear_door?(n(),i("li",Yi,"Kendaraan dengan pintu belakang")):d("",!0),(Et=s.settings)!=null&&Et.pick_up?(n(),i("li",Zi,"Tipe pick up")):d("",!0),(Ut=s.settings)!=null&&Ut.box?(n(),i("li",Ji,"Kendaraan dengan box")):d("",!0)])])):d("",!0)]))],2)}),128)),K.value.filter(s=>!s.is_link).length===0?(n(),i("div",Xi,[h[4]||(h[4]=e("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9.172 16.172a4 4 0 015.656 0M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)),h[5]||(h[5]=e("p",{class:"mt-2 text-sm"},"Tidak ada data untuk ditampilkan",-1)),a.category.isDamageMenu?(n(),i("p",Qi,' Tambahkan data melalui tombol "+" di pojok kanan bawah ')):d("",!0)])):d("",!0)])],2)],64))}},tl=He(el,[["__scopeId","data-v-704b9892"]]),al={class:"bg-gray-50 shadow-lg rounded-xl overflow-hidden border border-gray-100"},sl={class:"p-4 space-y-4-6"},nl={class:"grid grid-cols-2 sm:grid-cols-2 md:grid-cols-3 gap-2 w-full"},ol=["value"],il={class:"p-4 space-y-4-6"},ll={class:"grid grid-cols-2 sm:grid-cols-2 md:grid-cols-3 gap-2 w-full"},rl=["value"],ul={key:0,class:"p-4 space-y-4 bg-blue-50 rounded-lg border border-blue-200"},dl={class:"grid grid-cols-2 sm:grid-cols-2 md:grid-cols-3 gap-2 w-full"},cl=["value"],gl={class:"p-4 space-y-2"},pl={class:"flex items-center justify-between mb-2"},ml={key:0,class:"mb-4 p-4 bg-white border border-gray-200 rounded-lg shadow-lg"},vl={class:"flex items-center justify-between mb-3"},fl={class:"grid grid-cols-1 md:grid-cols-2 gap-3 max-h-60 overflow-y-auto"},hl=["onClick"],bl={class:"text-sm font-medium text-gray-800 mb-1"},yl={class:"text-xs text-gray-600 line-clamp-2"},xl={class:"flex flex-wrap gap-1 mb-2 p-2 bg-gray-100 rounded-md"},wl={key:0,class:"text-xs text-gray-500 mb-2 bg-gray-50 p-2 rounded border"},kl={key:0,class:"font-bold mx-1 bg-indigo-100 text-indigo-700 px-2 py-1 rounded"},Il={key:1,class:"italic mx-1 bg-indigo-100 text-indigo-700 px-2 py-1 rounded"},_l={key:2,class:"underline mx-1 bg-indigo-100 text-indigo-700 px-2 py-1 rounded"},Sl={__name:"ConclusionSection",props:{inspectionId:{type:Number,required:!0},inspection:{type:Object,required:!0},form:{type:Object,required:!0}},emits:["updateConclusion"],setup(a,{emit:ae}){const t=a,A=ae,c=y(null),V=y(!1),b=y(!1),S=sa({bold:!1,italic:!1,underline:!1}),I=sa({flooded:"",collision:"",collision_severity:"",notes:""}),R=y([{id:1,name:"Kendaraan Normal",description:"Template untuk kendaraan dalam kondisi normal tanpa masalah signifikan (Ringkas)",content:`<p><strong>A. HASIL INSPEKSI:</strong></p>
- Kondisi kendaraan secara umum: <b>BAIK</b><br>
- Tidak ditemukan indikasi kerusakan signifikan<br>
- Semua sistem berfungsi dengan normal<br>`},{id:2,name:"Kendaraan Bekas Tabrakan Ringan",description:"Template untuk kendaraan dengan riwayat tabrakan ringan (Lengkap A, C, B)",content:`<p><strong>A. HASIL INSPEKSI:</strong></p>
- Kendaraan memiliki riwayat tabrakan dengan tingkat kerusakan: <b>RINGAN</b><br>
- Area yang terdampak: PERLU DIISI<br>
- Perbaikan yang dilakukan: PERLU DIISI<br>

<p><strong>C. ESTIMASI PERBAIKAN DAN PERAWATAN:</strong></p>
<p>* PERBAIKAN & PENGGANTIAN PART DALAM WAKTU DEKAT/ SEGERA:</p>
- PERLU DIISI<br>
- Estimasi Biaya: PERLU DIISI
<p>* PERBAIKAN & PENGGANTIAN PART TENGGANG WAKTU MINIMAL 6 BULAN S/D 1 TAHUN KE DEPAN:</p>
- PERLU DIISI<br>
- Estimasi Biaya: PERLU DIISI
<p><em>Note: Estimasi perbaikan bisa lebih murah/lebih mahal. Opsional tergantung lokasi/daerah dan ketersediaan spare part.</em></p>`},{id:3,name:"Kendaraan Bekas Banjir",description:"Template untuk kendaraan dengan riwayat terkena banjir (Lengkap A, C, B)",content:`<p><strong>A. HASIL INSPEKSI:</strong></p>
- Kendaraan memiliki riwayat terkena banjir<br>
- Tingkat paparan air: PERLU DIISI<br>
- Komponen yang terdampak: PERLU DIISI<br>

<p><strong>C. ESTIMASI PERBAIKAN DAN PERAWATAN:</strong></p>
<p>* PERBAIKAN & PENGGANTIAN PART DALAM WAKTU DEKAT/ SEGERA:</p>
- PERLU DIISI<br>
- Estimasi Biaya: PERLU DIISI
<p>* PERBAIKAN & PENGGANTIAN PART TENGGANG WAKTU MINIMAL 6 BULAN S/D 1 TAHUN KE DEPAN:</p>
- PERLU DIISI<br>
- Estimasi Biaya: PERLU DIISI
<p><em>Note: Estimasi perbaikan bisa lebih murah/lebih mahal. Opsional tergantung lokasi/daerah dan ketersediaan spare part.</em></p>`},{id:4,name:"Kendaraan dengan Multiple Issues",description:"Template untuk kendaraan dengan beberapa masalah umum (Lengkap A, C, B)",content:`<p><strong>A. HASIL INSPEKSI:</strong></p>
- Kondisi umum kendaraan: PERLU DIISI<br>
- Masalah utama yang ditemukan: PERLU DIISI<br>
- Komponen yang perlu perhatian: PERLU DIISI<br>
- Status Tabrak/Banjir: PERLU DIISI<br>

<p><strong>C. ESTIMASI PERBAIKAN DAN PERAWATAN:</strong></p>
<p>* PERBAIKAN & PENGGANTIAN PART DALAM WAKTU DEKAT/ SEGERA:</p>
- PERLU DIISI<br>
- Estimasi Biaya: PERLU DIISI
<p>* PERBAIKAN & PENGGANTIAN PART TENGGANG WAKTU MINIMAL 6 BULAN S/D 1 TAHUN KE DEPAN:</p>
- PERLU DIISI<br>
- Estimasi Biaya: PERLU DIISI
<p><em>Note: Estimasi perbaikan bisa lebih murah/lebih mahal. Opsional tergantung lokasi/daerah dan ketersediaan spare part.</em></p>`},{id:5,name:"Template Singkat",description:"Template ringkas untuk kesimpulan cepat (Ringkas)",content:`<p><strong>A. HASIL INSPEKSI:</strong></p>
- Status Keseluruhan Kendaraan: PERLU DIISI<br>
- Catatan Utama: PERLU DIISI<br>
- Status Tabrak/Banjir: PERLU DIISI`},{id:6,name:"Template Teknis Detail",description:"Template detail untuk laporan teknis lengkap (Lengkap A, C, B)",content:`<p><strong>A. LAPORAN HASIL INSPEKSI TEKNIS:</strong></p>
- Tanggal Inspeksi: PERLU DIISI<br>
- Kondisi Mesin: PERLU DIISI<br>
- Kondisi Transmisi: PERLU DIISI<br>
- Kondisi Suspensi: PERLU DIISI<br>
- Kondisi Rem: PERLU DIISI<br>
- Kondisi Body: PERLU DIISI<br>
- Kondisi Interior: PERLU DIISI<br>
- Kesimpulan Akhir: PERLU DIISI

<p><strong>C. ESTIMASI PERBAIKAN DAN PERAWATAN:</strong></p>
<p>* PERBAIKAN & PENGGANTIAN PART DALAM WAKTU DEKAT/ SEGERA:</p>
- PERLU DIISI<br>
- Estimasi Biaya: PERLU DIISI
<p>* PERBAIKAN & PENGGANTIAN PART TENGGANG WAKTU MINIMAL 6 BULAN S/D 1 TAHUN KE DEPAN:</p>
- PERLU DIISI<br>
- Estimasi Biaya: PERLU DIISI
<p><em>Note: Estimasi perbaikan bisa lebih murah/lebih mahal. Opsional tergantung lokasi/daerah dan ketersediaan spare part.</em></p>`}]);y(["{PLATE_NUMBER}","{CAR_NAME}","{INSPECTION_DATE}","{DAMAGED_AREA}","{REPAIR_DETAILS}","{WATER_LEVEL}","{AFFECTED_COMPONENTS}","{OVERALL_CONDITION}","{MAIN_ISSUES}","{ATTENTION_NEEDED}","{REPAIR_COST_ESTIMATE}","{RECOMMENDATION}","{OVERALL_STATUS}","{ADDITIONAL_NOTES}","{ENGINE_CONDITION}","{TRANSMISSION_CONDITION}","{SUSPENSION_CONDITION}","{BRAKE_CONDITION}","{BODY_CONDITION}","{INTERIOR_CONDITION}","{FINAL_CONCLUSION}"]);const x=s=>{if(!s)return{};if(typeof s=="string")try{return JSON.parse(s)||{}}catch(w){return console.error("Error parsing settings JSON:",w),{}}return typeof s=="object"&&s!==null?s:{}};te(()=>x(t.inspection.settings).conclusion||{});const D=[{value:"yes",label:"Ya"},{value:"no",label:"Tidak"}],E=[{value:"yes",label:"Ya"},{value:"no",label:"Tidak"}],Q=[{value:"light",label:"Ringan"},{value:"heavy",label:"Berat"}];st(()=>{p(),Pt(()=>{v(),U()})});const v=()=>{c.value&&I.notes&&(c.value.innerHTML=I.notes)},p=()=>{const w=x(t.inspection.settings).conclusion||{},O=t.form.conclusion||{};I.flooded=O.flooded||w.flooded||"",I.collision=O.collision||w.collision||"",I.collision_severity=O.collision_severity||w.collision_severity||"",I.notes=O.notes||t.inspection.notes||""},M=s=>{if(!c.value)return;let w=s.content;w=w.replace(/{PLATE_NUMBER}/g,t.inspection.plate_number||"[NOMOR_PLAT]").replace(/{CAR_NAME}/g,t.inspection.car_name||"[NAMA_MOBIL]").replace(/{INSPECTION_DATE}/g,new Date().toLocaleDateString("id-ID")).replace(/{FLOOD_STATUS}/g,I.flooded==="yes"?"Pernah terkena banjir":"Tidak pernah terkena banjir").replace(/{COLLISION_STATUS}/g,I.collision==="yes"?"Pernah mengalami tabrakan":"Tidak pernah mengalami tabrakan"),c.value.innerHTML=w,I.notes=w,b.value=!1,Pt(()=>{c.value.focus(),h()})},K=()=>{c.value&&(c.value.innerHTML="",I.notes="",h())},U=()=>{if(!c.value)return;const s=window.getSelection();s.rangeCount===0||s.isCollapsed||(S.bold=document.queryCommandState("bold"),S.italic=document.queryCommandState("italic"),S.underline=document.queryCommandState("underline"))},H=s=>{if(!c.value)return;c.value.focus();const w=S[s];switch(s){case"bold":document.execCommand("bold",!1,!w);break;case"italic":document.execCommand("italic",!1,!w);break;case"underline":document.execCommand("underline",!1,!w);break}setTimeout(()=>{U(),Y()},10)},Y=la.debounce(()=>{c.value&&(I.notes=c.value.innerHTML,h())},200),F=s=>{s.preventDefault(),document.execCommand("insertParagraph",!1,null)},k=s=>{s.preventDefault();const w=(s.clipboardData||window.clipboardData).getData("text/plain");document.execCommand("insertText",!1,w)},L=()=>{V.value=!0},ce=()=>{V.value=!1,c.value&&(I.notes=c.value.innerHTML,h())},_=()=>{h()},h=()=>{const s={flooded:I.flooded,collision:I.collision,collision_severity:I.collision==="yes"?I.collision_severity:null,notes:I.notes};A("updateConclusion",s)};return ye(()=>t.form.conclusion,s=>{s&&(I.flooded=s.flooded!==void 0?s.flooded:I.flooded,I.collision=s.collision!==void 0?s.collision:I.collision,I.collision_severity=s.collision_severity!==void 0?s.collision_severity:I.collision_severity,I.notes=s.notes!==void 0?s.notes:I.notes,c.value&&s.notes!==void 0&&c.value.innerHTML!==s.notes&&(c.value.innerHTML=s.notes))},{deep:!0,immediate:!0}),ye([()=>I.flooded,()=>I.collision,()=>I.collision_severity,()=>I.notes],()=>{h()},{deep:!0}),(s,w)=>(n(),i("div",al,[w[21]||(w[21]=e("div",{class:"bg-indigo-200 px-6 py-2 border-b flex items-center justify-between"},[e("h4",{class:"text-base font-semibold text-indigo-700"}," Detail Kendaraan ")],-1)),e("div",sl,[w[10]||(w[10]=e("label",{class:"block text-sm font-medium text-gray-700 mb-3"},[Ne(" Apakah kendaraan pernah terkena banjir? "),e("span",{class:"text-red-500"},"*")],-1)),e("div",nl,[(n(),i(Ue,null,Pe(D,O=>e("label",{key:O.value,class:"cursor-pointer"},[Le(e("input",{type:"radio","onUpdate:modelValue":w[0]||(w[0]=de=>I.flooded=de),value:O.value,class:"hidden peer",onChange:_},null,40,ol),[[at,I.flooded]]),e("div",{class:re(["w-full px-4 py-3 border rounded-lg text-center transition-all duration-200 ease-in-out whitespace-nowrap text-sm font-medium",{"border-indigo-500 bg-indigo-50 text-indigo-700 shadow-sm scale-[0.98]":I.flooded===O.value,"border-gray-300 text-gray-700 hover:bg-gray-50 hover:border-gray-400":I.flooded!==O.value}])},z(O.label),3)])),64))])]),e("div",il,[w[12]||(w[12]=e("label",{class:"block text-sm font-medium text-gray-700 mb-3"},[Ne(" Apakah kendaraan pernah mengalami tabrakan? "),e("span",{class:"text-red-500"},"*")],-1)),e("div",ll,[(n(),i(Ue,null,Pe(E,O=>e("label",{key:O.value,class:"cursor-pointer"},[Le(e("input",{type:"radio","onUpdate:modelValue":w[1]||(w[1]=de=>I.collision=de),value:O.value,class:"hidden peer",onChange:_},null,40,rl),[[at,I.collision]]),e("div",{class:re(["w-full px-4 py-3 border rounded-lg text-center transition-all duration-200 ease-in-out whitespace-nowrap text-sm font-medium",{"border-indigo-500 bg-indigo-50 text-indigo-700 shadow-sm scale-[0.98]":I.collision===O.value,"border-gray-300 text-gray-700 hover:bg-gray-50 hover:border-gray-400":I.collision!==O.value}])},z(O.label),3)])),64))]),Ve(gt,{"enter-active-class":"transition-all duration-300 ease-out","enter-from-class":"opacity-0 transform -translate-y-2","enter-to-class":"opacity-100 transform translate-y-0","leave-active-class":"transition-all duration-200 ease-in","leave-from-class":"opacity-100 transform translate-y-0","leave-to-class":"opacity-0 transform -translate-y-2"},{default:Fe(()=>[I.collision==="yes"?(n(),i("div",ul,[w[11]||(w[11]=e("label",{class:"block text-sm font-medium text-gray-700 mb-3"},[Ne("Tingkat kerusakan: "),e("span",{class:"text-red-500"},"*")],-1)),e("div",dl,[(n(),i(Ue,null,Pe(Q,O=>e("label",{key:O.value,class:"cursor-pointer"},[Le(e("input",{type:"radio","onUpdate:modelValue":w[2]||(w[2]=de=>I.collision_severity=de),value:O.value,class:"hidden peer",onChange:_},null,40,cl),[[at,I.collision_severity]]),e("div",{class:re(["w-full px-4 py-3 border rounded-lg text-center transition-all duration-200 ease-in-out whitespace-nowrap text-sm font-medium",{"border-blue-500 bg-blue-100 text-blue-700 shadow-sm scale-[0.98]":I.collision_severity===O.value,"border-gray-300 text-gray-700 hover:bg-white hover:border-gray-400":I.collision_severity!==O.value}])},z(O.label),3)])),64))])])):d("",!0)]),_:1})]),e("div",gl,[e("div",pl,[w[14]||(w[14]=e("label",{class:"block text-sm font-medium text-gray-700"},"Catatan Kesimpulan",-1)),e("button",{type:"button",onClick:w[3]||(w[3]=O=>b.value=!b.value),class:"flex items-center gap-2 px-3 py-2 text-sm bg-green-100 text-green-700 rounded-lg hover:bg-green-200 transition-all duration-200"},w[13]||(w[13]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})],-1),Ne(" Template ")]))]),Ve(gt,{"enter-active-class":"transition-all duration-200 ease-out","enter-from-class":"opacity-0 transform scale-95","enter-to-class":"opacity-100 transform scale-100","leave-active-class":"transition-all duration-150 ease-in","leave-from-class":"opacity-100 transform scale-100","leave-to-class":"opacity-0 transform scale-95"},{default:Fe(()=>[b.value?(n(),i("div",ml,[e("div",vl,[w[16]||(w[16]=e("h5",{class:"text-sm font-semibold text-gray-700"},"Pilih Template Kesimpulan",-1)),e("button",{onClick:w[4]||(w[4]=O=>b.value=!1),class:"text-gray-400 hover:text-gray-600"},w[15]||(w[15]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),e("div",fl,[(n(!0),i(Ue,null,Pe(R.value,O=>(n(),i("button",{key:O.id,onClick:de=>M(O),class:"p-3 text-left border border-gray-200 rounded-lg hover:border-indigo-300 hover:bg-indigo-50 transition-all duration-150"},[e("div",bl,z(O.name),1),e("div",yl,z(O.description),1)],8,hl))),128))])])):d("",!0)]),_:1}),e("div",xl,[e("button",{type:"button",onClick:w[5]||(w[5]=O=>H("bold")),class:re(["p-2 rounded transition-all duration-150 ease-in-out font-medium",S.bold?"bg-indigo-500 text-white shadow-sm":"hover:bg-gray-200 hover:shadow-sm"]),title:"Bold"},w[17]||(w[17]=[e("strong",null,"B",-1)]),2),e("button",{type:"button",onClick:w[6]||(w[6]=O=>H("italic")),class:re(["p-2 rounded transition-all duration-150 ease-in-out font-medium",S.italic?"bg-indigo-500 text-white shadow-sm":"hover:bg-gray-200 hover:shadow-sm"]),title:"Italic"},w[18]||(w[18]=[e("em",null,"I",-1)]),2),e("button",{type:"button",onClick:w[7]||(w[7]=O=>H("underline")),class:re(["p-2 rounded transition-all duration-150 ease-in-out font-medium",S.underline?"bg-indigo-500 text-white shadow-sm":"hover:bg-gray-200 hover:shadow-sm"]),title:"Underline"},w[19]||(w[19]=[e("u",null,"U",-1)]),2),e("button",{type:"button",onClick:w[8]||(w[8]=O=>K()),class:"p-2 rounded transition-all duration-150 ease-in-out hover:bg-gray-200 hover:shadow-sm ml-2",title:"Clear Template"}," 🗑️ Clear ")]),Ve(gt,{"enter-active-class":"transition-all duration-200 ease-out","enter-from-class":"opacity-0 transform -translate-y-1","enter-to-class":"opacity-100 transform translate-y-0","leave-active-class":"transition-all duration-150 ease-in","leave-from-class":"opacity-100 transform translate-y-0","leave-to-class":"opacity-0 transform -translate-y-1"},{default:Fe(()=>[Object.values(S).some(O=>O)?(n(),i("div",wl,[w[20]||(w[20]=Ne(" Format aktif: ")),S.bold?(n(),i("span",kl,"Bold")):d("",!0),S.italic?(n(),i("span",Il,"Italic")):d("",!0),S.underline?(n(),i("span",_l,"Underline")):d("",!0)])):d("",!0)]),_:1}),e("div",{ref_key:"editorRef",ref:c,contenteditable:"true",class:re(["w-full min-h-[120px] p-3 rounded-md border border-gray-300 shadow-sm transition-all duration-200 ease-in-out prose max-w-none",{"bg-white border-gray-300":!V.value,"bg-blue-50 border-indigo-500 ring-2 ring-indigo-200":V.value}]),onInput:w[9]||(w[9]=(...O)=>ee(Y)&&ee(Y)(...O)),onBlur:ce,onFocus:L,onKeydown:wa(F,["enter"]),onPaste:k,onMouseup:U,onKeyup:U,placeholder:"Tambahkan catatan kesimpulan inspeksi di sini..."},null,34)])]))}},Cl=He(Sl,[["__scopeId","data-v-6b429a8f"]]);function na(a,ae){const t=y({x:ae.x,y:ae.y}),A=y(!1),c=y(null),V=y(!1),b=y({x:0,y:0});st(()=>{const E=localStorage.getItem(a);if(E)try{t.value=JSON.parse(E)}catch(Q){console.error("Error parsing saved position:",Q)}});const S=E=>{E.type.includes("touch")?(b.value.x=E.touches[0].clientX,b.value.y=E.touches[0].clientY):(b.value.x=E.clientX,b.value.y=E.clientY),c.value=setTimeout(()=>{V.value=!0,A.value=!0,console.log("Long press activated - drag mode ON")},900)},I=()=>{c.value&&(clearTimeout(c.value),c.value=null),V.value=!1};return{pos:t,dragging:A,startLongPress:S,cancelLongPress:I,onDrag:E=>{if(!A.value||!V.value)return;E.preventDefault();let Q,v;E.type.includes("touch")?(Q=E.touches[0].clientX,v=E.touches[0].clientY):(Q=E.clientX,v=E.clientY),t.value.x=Q-24,t.value.y=v-24},stopDrag:()=>{if(A.value&&V.value){console.log("Drag stopped - saving position"),A.value=!1,V.value=!1;try{localStorage.setItem(a,JSON.stringify(t.value))}catch(E){console.error("Error saving position:",E)}}I()},handleClick:E=>!A.value&&!V.value?(console.log("Regular click detected"),!0):(console.log("Click ignored - part of drag operation"),!1)}}const $l={class:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100"},Al={key:0,class:"fixed inset-0 bg-black bg-opacity-40 z-30 pointer-events-none transition-opacity duration-200"},Vl={key:0,xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",viewBox:"0 0 20 20",fill:"currentColor","stroke-width":"2"},Tl={key:1,xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",viewBox:"0 0 20 20",fill:"currentColor","stroke-width":"2"},Ml={class:"flex items-center px-4"},El={class:"flex"},Ul={key:0,class:"ml-2 inline-flex items-center justify-center w-5 h-5 text-xs rounded-full bg-green-500 text-white"},Nl=["onClick","data-category"],Dl={key:0,class:"ml-2 inline-flex items-center justify-center w-5 h-5 text-xs rounded-full bg-green-500 text-white"},Pl={key:0,class:"ml-2 inline-flex items-center justify-center w-5 h-5 text-xs rounded-full bg-green-500 text-white"},Ll={key:3,class:"fixed inset-0 z-30"},Rl={class:"mt-2 space-y-2"},jl={key:0,class:"ml-2 inline-flex items-center justify-center w-5 h-5 text-xs rounded-full bg-green-500 text-white"},Bl=["onClick"],Fl={key:0,class:"ml-2 inline-flex items-center justify-center w-5 h-5 text-xs rounded-full bg-green-500 text-white"},Ol={key:0,class:"ml-2 inline-flex items-center justify-center w-5 h-5 text-xs rounded-full bg-green-500 text-white"},zl={key:0,class:"fixed top-4 left-1/2 transform -translate-x-1/2 bg-green-400 text-white px-4 py-2 rounded shadow-lg z-50"},ql={class:"relative overflow-hidden"},Kl={key:"vehicle"},Hl={key:"conclusion"},Gl={key:1},Wl=["disabled"],Yl={key:0,class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},Zl={class:"space-y-4"},Jl={class:"relative"},Xl={class:"max-h-64 overflow-y-auto"},Ql={key:0,class:"text-center py-4 text-gray-500"},er=["onClick"],tr={class:"font-medium text-gray-900"},ar={class:"text-sm text-gray-500"},sr={class:"text-xs text-gray-400 mt-1"},nr={key:0,class:"text-xs text-green-600 mt-1"},or={key:3,class:"fixed bottom-20 left-1/2 transform -translate-x-1/2 bg-gray-800 text-white px-6 py-3 rounded-lg shadow-lg z-50 text-center"},ir={class:"p-4 space-y-6"},lr={class:"flex items-center justify-between"},rr=["aria-checked"],ur={class:"space-y-2"},dr={class:"space-y-2"},cr={class:"space-y-2"},gr={class:"flex space-x-4"},pr={class:"flex items-center"},mr={class:"flex items-center"},vr={key:0,class:"space-y-2"},fr={class:"flex space-x-4"},hr={class:"flex items-center"},br={class:"flex items-center"},yr={key:1,class:"space-y-2"},xr={__name:"IndexLocal",props:{inspection:Object,inspectionId:Object,category:Object,car:Object,appMenus:Array,damagePoints:Array,existingResults:Object,existingImages:Object,CarDetail:Array,allInspections:Array},setup(a){var Kt,Ht,Gt,Wt,Yt,Zt,Jt,Xt,Qt,ea;const ae=l=>{if(!l)return{};if(typeof l=="string")try{return JSON.parse(l)||{}}catch(o){return console.error("Error parsing settings JSON:",o),{}}return typeof l=="object"&&l!==null?l:{}},t=a,A=te(()=>`inspection_data_${t.inspection.id}`),c=te(()=>`swipe_toggle_${t.inspection.id}`),V=te(()=>`image_source_${t.inspection.id}`),b=te(()=>`active_category_${t.inspection.id}`),S=()=>{try{const l=localStorage.getItem(A.value);return l?JSON.parse(l):{}}catch(l){return console.error("Error reading local storage:",l),{}}},I=l=>{try{localStorage.setItem(A.value,JSON.stringify(l))}catch(o){console.error("Error writing to local storage:",o)}},R=()=>{try{localStorage.removeItem(A.value),localStorage.removeItem(c.value),localStorage.removeItem(V.value),localStorage.removeItem(b.value)}catch(l){console.error("Error clearing local storage:",l)}},x=()=>{try{const l=localStorage.getItem(c.value);return l?JSON.parse(l):!0}catch(l){return console.error("Error reading swipe toggle state:",l),!0}},D=l=>{try{localStorage.setItem(c.value,JSON.stringify(l))}catch(o){console.error("Error writing swipe toggle state:",o)}},E=()=>{try{return localStorage.getItem(V.value)||"all"}catch(l){return console.error("Error reading image source setting:",l),"all"}},Q=l=>{try{localStorage.setItem(V.value,l)}catch(o){console.error("Error writing image source setting:",o)}},v=te(()=>`camera_quality_${t.inspection.id}`),p=()=>{try{return localStorage.getItem(v.value)||"HD_Std"}catch(l){return console.error("Error reading camera quality setting:",l),"HD_Std"}},M=l=>{try{localStorage.setItem(v.value,l)}catch(o){console.error("Error writing camera quality setting:",o)}},K=()=>{try{return localStorage.getItem(b.value)||m.value[0]}catch(l){return console.error("Error reading active category:",l),m.value[0]}},U=l=>{try{localStorage.setItem(b.value,l)}catch(o){console.error("Error writing active category:",o)}},H=y(((Ht=(Kt=t.category)==null?void 0:Kt.settings)==null?void 0:Ht.menu_model)||"horizontal"),Y=y(((Wt=(Gt=t.category)==null?void 0:Gt.settings)==null?void 0:Wt.position)||"top"),F=y(!1),k=y(!1),{pos:L,dragging:ce,startLongPress:_,cancelLongPress:h,onDrag:s,stopDrag:w,handleClick:O}=na("toggleMenuButtonPos",{x:window.innerWidth-80,y:20}),de=l=>{O(l)&&W()},W=()=>{F.value=!F.value},G=()=>{F.value=!1},ie=l=>l?"bg-gradient-to-r from-indigo-700 to-sky-600 text-white":"bg-gray-50 hover:bg-gray-100 text-gray-700",{pos:me,dragging:P,startLongPress:N,cancelLongPress:j,onDrag:q,stopDrag:X,handleClick:oe}=na("damageButtonPos",{x:window.innerWidth-80,y:window.innerHeight-80}),fe=l=>{oe(l)&&(ge.value=!0)},ge=y(!1),Te=y(!1),_e=y(""),he=y(null),Ce=y(""),$e=y(""),we=y(""),Me=y(!1),Ee=y(null),r=(l,o)=>{Me.value=!0,Ee.value=o,Nt.visit(l,{onFinish:()=>{Me.value=!1,Ee.value=null}})},u=te(()=>t.appMenus.some(l=>l.input_type==="damage")),m=te(()=>["vehicle",...t.appMenus.map(l=>String(l.id)),"conclusion"]),C=y(m.value[0]),Z=y(0),ue=te(()=>{if(C.value==="vehicle"||C.value==="conclusion")return null;const l=t.appMenus.find(o=>String(o.id)===C.value);return l?{...l,points:ve(l.menu_point,l.input_type==="damage")}:null}),ve=(l,o)=>o?(l||[]).filter(pe=>{const le=pe.inspection_point_id;return vt(le)}):l||[],f=y({plate_number:t.inspection.plate_number,car_id:t.inspection.car_id,car_name:t.inspection.car_name}),g=y({notes:t.inspection.overall_note||"",flooded:((Zt=(Yt=ae(t.inspection.settings))==null?void 0:Yt.conclusion)==null?void 0:Zt.flooded)||null,collision:((Xt=(Jt=ae(t.inspection.settings))==null?void 0:Jt.conclusion)==null?void 0:Xt.collision)||null,collision_severity:((ea=(Qt=ae(t.inspection.settings))==null?void 0:Qt.conclusion)==null?void 0:ea.collision_severity)||null}),$=oa((()=>{const l=[...t.appMenus.flatMap(We=>We.menu_point||[]),...t.damagePoints||[]],o={},pe={};l.forEach(We=>{const qe=We.inspection_point_id,Be=t.existingResults[qe];o[qe]={status:(Be==null?void 0:Be.status)||"",note:(Be==null?void 0:Be.note)||""},pe[qe]=t.existingImages[qe]||[]});const le=S(),be={...o,...le.results||{}},xe={...pe,...le.images||{}},Re={...f.value,...le.vehicleDetails||{}},Se=le.overall_note!==void 0?le.overall_note:t.inspection.overall_note||"";return{inspection_id:t.inspection.id,results:be,images:xe,overall_note:Se,plate_number:Re.plate_number,car_id:Re.car_id,car_name:Re.car_name}})());ye($,l=>{I({results:l.results,images:l.images,overall_note:l.overall_note,vehicleDetails:f.value,conclusion:g.value})},{deep:!0}),ye(f,l=>{$.plate_number=l.plate_number,$.car_id=l.car_id,$.car_name=l.car_name},{deep:!0}),ye(g,l=>{$.overall_note=l.notes},{deep:!0});const ne=Lt("vehicleFeatures",y(null));ne.value=JSON.parse(localStorage.getItem("vehicle_features")||"{}"),Dt("vehicleFeatures",ne);const ke=l=>{var be,xe;const o=l.settings;if(!Ae(l))return!0;const pe=(be=t.car)==null?void 0:be.transmission,le=(xe=t.car)==null?void 0:xe.fuel_type;return!(o.transmission&&Array.isArray(o.transmission)&&o.transmission.length>0&&pe&&!o.transmission.includes(pe)||o.fuel_type&&o.fuel_type.trim()!==""&&le&&o.fuel_type!==le||o.rear_door&&(!ne.value||!ne.value.rear_door)||o.pick_up&&(!ne.value||!ne.value.pick_up)||o.box&&(!ne.value||!ne.value.box))},Ae=l=>{const o=l.settings;return!!(o!=null&&o.transmission&&Array.isArray(o.transmission)&&o.transmission.length>0||o!=null&&o.fuel_type&&o.fuel_type.trim()!==""||o!=null&&o.rear_door||o!=null&&o.pick_up||o!=null&&o.box)},Ie=y(!1),Oe=l=>{Ie.value=l},pt=y(!1),kt=l=>{pt.value=l},Ze=te(()=>{var be;const l=f.value.plate_number&&/^[A-Z]{1,2}\d{1,4}[A-Z]{0,3}$/.test(f.value.plate_number),o=!!((be=f.value.car_name)!=null&&be.trim()),pe=!pt.value,le=!Ie.value;return l&&o&&pe&&le}),mt=te(()=>{if(!_e.value.trim())return t.damagePoints||[];const l=_e.value.toLowerCase().trim();return(t.damagePoints||[]).filter(o=>{var pe,le,be,xe,Re;return((le=(pe=o.inspection_point)==null?void 0:pe.name)==null?void 0:le.toLowerCase().includes(l))||((xe=(be=o.inspection_point)==null?void 0:be.description)==null?void 0:xe.toLowerCase().includes(l))||((Re=ft(o))==null?void 0:Re.toLowerCase().includes(l))})}),vt=l=>{const o=$.results[l]&&($.results[l].status||$.results[l].note),pe=$.images[l]&&$.images[l].length>0;return o||pe},ft=l=>{var o;return((o=l.inspection_point.component)==null?void 0:o.name)||"Komponen Tidak Diketahui"},It=l=>$.results[l]||null,nt=()=>{var xe;const l=g.value,o=!!l.flooded,pe=!!l.collision,le=l.collision==="yes"?!!l.collision_severity:!0,be=!!((xe=l.notes)!=null&&xe.trim());return o&&pe&&le&&be},ht=te(()=>({flooded:g.value.flooded||null,collision:g.value.collision||null,collision_severity:g.value.collision_severity||null,note:g.value.notes||null,isComplete:nt()})),bt=te(()=>{const l=Ze.value,o=t.appMenus.every(le=>ot(le)),pe=nt();return l&&o&&pe}),ot=l=>l.input_type==="damage"?!0:l.id==="conclusion"?nt():l.id==="vehicle"?Ze.value:(ve(l.menu_point,!1)||[]).filter(le=>le.is_default&&ke(le)).every(le=>{var Se,We,qe,Be,yt,xt;const be=$.results[le.inspection_point_id],xe=$.images[le.inspection_point_id];if(!be)return!1;const Re=ae(le.settings);switch(le.input_type){case"text":case"number":case"date":case"account":case"textarea":return!!((Se=be.note)!=null&&Se.trim());case"select":case"radio":if(!be.status)return!1;const Ye=(We=Re.radios)==null?void 0:We.find(tt=>tt.value===be.status);return!(Ye!=null&&Ye.settings&&(Ye.settings.show_textarea&&!((qe=be.note)!=null&&qe.trim())||Ye.settings.show_image_upload&&(xe==null?void 0:xe.length)===0));case"imageTOradio":if((xe==null?void 0:xe.length)===0||!be.status)return!1;const B=(Be=Re.radios)==null?void 0:Be.find(tt=>tt.value===be.status);return!(B!=null&&B.settings&&B.settings.show_textarea&&B.settings.required&&!((yt=be.note)!=null&&yt.trim()));case"image":return(xe==null?void 0:xe.length)>0;default:return!!be.status||!!((xt=be.note)!=null&&xt.trim())}}),je=y(!0),Ge=y(E()),ze=y(p()),it=y(!1),_t=()=>{console.log("Opening settings modal"),it.value=!0},lt=()=>{console.log("Closing settings modal"),it.value=!1},Je=y(null),rt=y([]),Xe=y(0),Qe=y(!1);Dt("imageSourceSetting",Ge),Dt("cameraQualitySetting",ze);const St=()=>{je.value=!je.value,D(je.value)},Ct=()=>{Q(Ge.value),console.log("Image source setting updated to:",Ge.value)},$t=()=>{M(ze.value),console.log("Camera quality setting updated to:",ze.value)},et=()=>{Je.value&&Pt(()=>{const l=Je.value.querySelector(`[data-category="${C.value}"]`);if(!l)return;const o=Je.value,pe=o.clientWidth,le=l.offsetLeft,be=l.clientWidth,xe=le-pe/2+be/2;o.scrollTo({left:xe,behavior:"smooth"})})},At=()=>Xe.value===0?(Xe.value=1,Qe.value=!0,setTimeout(()=>{Xe.value=0,Qe.value=!1},2e3),window.history.pushState(null,null,window.location.href),!1):(Xe.value=0,Qe.value=!1,Nt.visit(route("job.index")),!0),Vt=()=>{window.history.state===null&&window.history.replaceState({isBackButtonControlled:!0},""),window.history.pushState({isBackButtonControlled:!0},""),window.addEventListener("popstate",l=>{l.state&&l.state.isBackButtonControlled&&(l.preventDefault(),At())})},Tt=l=>{he.value=l;const o=l.inspection_point_id,pe=$.results[o]||{};Ce.value=pe.status||"",$e.value=pe.note||"",ge.value=!1,Te.value=!0},Mt=l=>{he.value&&($.images[he.value.inspection_point_id]=l)},Et=()=>{if(he.value){const l=he.value.inspection_point_id;$.results[l]={...$.results[l],status:Ce.value,note:$e.value},we.value="Data berhasil disimpan di lokal!",setTimeout(()=>we.value="",1e3)}Rt()},Ut=({pointId:l,type:o,value:pe})=>{var le;(le=$.results[l])!=null&&le.hasOwnProperty(o)&&($.results[l][o]=pe)},J=async l=>{if(l&&confirm("Apakah kamu yakin ingin menghapus data ini?")){try{await Nt.post(route("inspections.delete-result"),{inspection_id:t.inspection.id,point_id:l},{preserveScroll:!0,preserveState:!0,onSuccess:()=>{$.results[l]&&($.results[l]={status:"",note:""}),$.images[l]&&($.images[l]=[]),we.value="Data berhasil dihapus!",setTimeout(()=>we.value="",1e3)},onError:o=>{console.error("Error menghapus hasil:",o)}})}catch(o){console.error("Error menghapus hasil:",o)}Rt()}},T=l=>{Object.assign(f.value,l),Oe(!0)},ma=l=>{console.log("Save car details locally:",l)},va=l=>{console.log("Received conclusion data from child:",l),g.value={...g.value,...l},$.overall_note=l.notes||"",console.log("Conclusion state updated:",g.value)},fa=()=>{if(!bt.value){alert("Harap lengkapi semua menu inspeksi termasuk kesimpulan sebelum submit final");return}if(!confirm("Apakah Anda yakin ingin mengirim semua data inspeksi? Data lokal akan dihapus setelah berhasil dikirim."))return;k.value=!0;const l={...$.data(),overall_note:g.value.notes,conclusion:{notes:g.value.notes,flooded:g.value.flooded,collision:g.value.collision,collision_severity:g.value.collision_severity}};Nt.post(route("inspections.final-submit-local",{id:t.inspection.id}),l,{preserveScroll:!0,onSuccess:()=>{R()},onError:o=>{console.error("Kesalahan pengiriman:",o),k.value=!1}})},ha=({pointId:l,imageId:o})=>{$.images[l]&&($.images[l]=$.images[l].filter(pe=>pe.id!==o))},zt=()=>{ge.value=!1,_e.value=""},Rt=()=>{Te.value=!1,he.value=null,Ce.value="",$e.value=""},ba=()=>{},ut=l=>{C.value=l,U(l),et()},qt=l=>{let o=Z.value+l;o>=0&&o<m.value.length&&(C.value=m.value[o],et())},ya=()=>{let l=0,o=0,pe=null;const le=Se=>{je.value&&(l=Se.changedTouches[0].screenX)},be=Se=>{je.value&&(o=Se.changedTouches[0].screenX,xe())},xe=()=>{if(!je.value)return;const Se=250;o<l-Se?qt(1):o>l+Se&&qt(-1)},Re=()=>{const Se=document.querySelector(".relative.overflow-hidden");return Se&&(Se.addEventListener("touchstart",le,{passive:!0}),Se.addEventListener("touchend",be,{passive:!0})),()=>{Se&&(Se.removeEventListener("touchstart",le),Se.removeEventListener("touchend",be))}};return pe=Re(),ye(je,Se=>{pe&&pe(),Se&&(pe=Re())}),()=>{pe&&pe()}};return ye(C,(l,o)=>{et()}),ye(C,l=>{Z.value=m.value.indexOf(l)}),ye(ze,l=>{$t()}),st(()=>{const l=S();if(je.value=x(),Ge.value=E(),ze.value=p(),l.vehicleDetails&&(Object.assign(f.value,l.vehicleDetails),$.plate_number=l.vehicleDetails.plate_number,$.car_id=l.vehicleDetails.car_id,$.car_name=l.vehicleDetails.car_name),l.conclusion)console.log("Loading conclusion from localStorage:",l.conclusion),Object.assign(g.value,l.conclusion),$.overall_note=l.conclusion.notes||"";else{const le=ae(t.inspection.settings).conclusion||{};g.value={notes:t.inspection.notes||"",flooded:le.flooded||"",collision:le.collision||"",collision_severity:le.collision_severity||""},$.overall_note=t.inspection.notes||""}l.results&&Object.assign($.results,l.results),l.images&&Object.assign($.images,l.images);const o=K();m.value.includes(o)?C.value=o:(C.value=m.value[0],U(m.value[0])),ya(),Vt(),setTimeout(()=>{et()},100)}),(l,o)=>{var pe,le,be,xe,Re,Se,We,qe,Be,yt,xt,Ye;return n(),i("div",$l,[ee(P)||ee(ce)?(n(),i("div",Al)):d("",!0),H.value==="vertical"?(n(),i("button",{key:1,onMousedown:o[0]||(o[0]=(...B)=>ee(_)&&ee(_)(...B)),onMouseup:o[1]||(o[1]=(...B)=>ee(w)&&ee(w)(...B)),onMouseleave:o[2]||(o[2]=(...B)=>ee(h)&&ee(h)(...B)),onMousemove:o[3]||(o[3]=(...B)=>ee(s)&&ee(s)(...B)),onTouchstart:o[4]||(o[4]=(...B)=>ee(_)&&ee(_)(...B)),onTouchend:o[5]||(o[5]=(...B)=>ee(w)&&ee(w)(...B)),onTouchmove:o[6]||(o[6]=(...B)=>ee(s)&&ee(s)(...B)),onClick:de,class:"fixed z-40 p-4 bg-gradient-to-r from-indigo-700 to-sky-600 text-white border shadow-lg rounded-full hover:shadow-xl transition",style:Ke({left:ee(L).x+"px",top:ee(L).y+"px"}),"aria-label":"Toggle vertical menu"},[F.value?(n(),i("svg",Tl,o[31]||(o[31]=[e("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"},null,-1)]))):(n(),i("svg",Vl,o[30]||(o[30]=[e("path",{"fill-rule":"evenodd",d:"M3 5h14v2H3V5zm0 4h10v2H3V9zm0 4h6v2H3v-2z","clip-rule":"evenodd"},null,-1)])))],36)):d("",!0),H.value==="horizontal"?(n(),i("div",{key:2,class:re(["z-10 bg-white shadow-sm",{"sticky top-0 mb-2":Y.value==="top","fixed bottom-0 left-0 right-0":Y.value==="bottom"}])},[e("div",Ml,[e("div",{class:"flex-shrink-0"},[e("button",{onClick:_t,class:"p-2 rounded-full text-gray-600 hover:text-gray-800 hover:bg-gray-100 transition-colors duration-200",title:"Pengaturan"},o[32]||(o[32]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})],-1)]))]),e("div",{ref_key:"menuContainer",ref:Je,class:"flex-1 overflow-x-auto scrollbar-hide py-3 ml-2 space-x-2 menu-container",onScroll:ba},[e("div",El,[e("button",{ref_key:"menuItems",ref:rt,onClick:o[7]||(o[7]=B=>ut("vehicle")),class:re(["flex-shrink-0 px-4 py-2 rounded-full text-sm font-medium whitespace-nowrap transition-colors duration-200 menu-item",{"bg-gradient-to-r from-indigo-700 to-sky-600 shadow-lg text-white":C.value==="vehicle","bg-gray-100 text-gray-700 hover:bg-gray-200":C.value!=="vehicle"}]),"data-category":"vehicle"},[o[33]||(o[33]=Ne(" Detail Kendaraan ")),Ze.value?(n(),i("span",Ul," ✓ ")):d("",!0)],2),(n(!0),i(Ue,null,Pe(a.appMenus,B=>(n(),i("button",{key:B.id,ref_for:!0,ref_key:"menuItems",ref:rt,onClick:tt=>ut(String(B.id)),class:re(["flex-shrink-0 px-4 py-2 rounded-full text-sm font-medium whitespace-nowrap transition-colors duration-200 menu-item",{"bg-gradient-to-r from-indigo-700 to-sky-600 shadow-lg text-white":C.value===String(B.id),"bg-gray-100 text-gray-700 hover:bg-gray-200":C.value!==String(B.id)}]),"data-category":String(B.id)},[Ne(z(B.name)+" ",1),ot(B)?(n(),i("span",Dl," ✓ ")):d("",!0)],10,Nl))),128)),e("button",{ref_key:"menuItems",ref:rt,onClick:o[8]||(o[8]=B=>ut("conclusion")),class:re(["flex-shrink-0 px-4 py-2 rounded-full text-sm font-medium whitespace-nowrap transition-colors duration-200 menu-item",{"bg-gradient-to-r from-indigo-700 to-sky-600 shadow-lg text-white":C.value==="conclusion","bg-gray-100 text-gray-700 hover:bg-gray-200":C.value!=="conclusion"}]),"data-category":"conclusion"},[o[34]||(o[34]=Ne(" Kesimpulan ")),ht.value.isComplete?(n(),i("span",Pl," ✓ ")):d("",!0)],2)])],544)])],2)):d("",!0),H.value==="vertical"&&F.value?(n(),i("div",Ll,[e("div",{class:"absolute inset-0 bg-black bg-opacity-30",onClick:G}),e("div",{class:re(["absolute z-40 w-60 bg-white rounded-xl shadow-xl p-2 max-h-[75vh] overflow-y-auto",{"top-16 right-4":Y.value==="top-right","top-16 left-4":Y.value==="top-left","bottom-16 right-4":Y.value==="bottom-right","bottom-16 left-4":Y.value==="bottom-left"}])},[e("div",{class:"flex items-center justify-between px-2 py-1 border-b"},[o[35]||(o[35]=e("div",{class:"text-sm font-semibold"},"Pilih Menu",-1)),e("button",{onClick:G,class:"text-xs text-gray-500 hover:text-gray-700"},"Tutup")]),e("div",Rl,[e("button",{onClick:o[9]||(o[9]=B=>{ut("vehicle"),G()}),class:re([ie(C.value==="vehicle"),"w-full flex items-center justify-between px-3 py-2 rounded-md text-sm"])},[o[36]||(o[36]=e("span",null,"Detail Kendaraan",-1)),Ze.value?(n(),i("span",jl,"✓")):d("",!0)],2),(n(!0),i(Ue,null,Pe(a.appMenus,B=>(n(),i("button",{key:`vmenu-${B.id}`,onClick:()=>{ut(String(B.id)),G()},class:re([ie(C.value===String(B.id)),"w-full flex items-center justify-between px-3 py-2 rounded-md text-sm"])},[e("span",null,z(B.name),1),ot(B)?(n(),i("span",Fl,"✓")):d("",!0)],10,Bl))),128)),e("button",{onClick:o[10]||(o[10]=B=>{ut("conclusion"),G()}),class:re([ie(C.value==="conclusion"),"w-full flex items-center justify-between px-3 py-2 rounded-md text-sm"])},[o[37]||(o[37]=e("span",null,"Kesimpulan",-1)),ht.value.isComplete?(n(),i("span",Ol,"✓")):d("",!0)],2)])],2)])):d("",!0),e("div",{class:re(["max-w-7xl mx-auto px-2 sm:px-4 lg:px-6 py-1",{"pb-4 pt-1":Y.value==="top","pb-20 pt-4":Y.value==="bottom","pb-4 pt-4":H.value==="vertical"}])},[Ve(gt,{name:"fade"},{default:Fe(()=>[we.value?(n(),i("div",zl,z(we.value),1)):d("",!0)]),_:1}),e("div",ql,[Ve(gt,{name:"category-slide",mode:"out-in"},{default:Fe(()=>[C.value==="vehicle"?(n(),i("div",Kl,[Ve(hs,{inspection:a.inspection,CarDetail:a.CarDetail,allInspections:t.allInspections,onUpdateVehicle:T,onSaveCarDetails:ma,"onUpdate:validation":kt,"onUpdate:hasUnsavedChanges":Oe},null,8,["inspection","CarDetail","allInspections"])])):ue.value&&C.value!=="conclusion"?(n(),i("div",{key:ue.value.id},[Ve(tl,{category:ue.value,"inspection-id":a.inspection.id,car:t.car,form:ee($),head:H.value,onUpdateResult:Ut,onHapusPoint:J,onRemoveImage:ha},null,8,["category","inspection-id","car","form","head"])])):C.value==="conclusion"?(n(),i("div",Hl,[Ve(Cl,{form:{conclusion:g.value},"inspection-id":a.inspection.id,inspection:a.inspection,settings:a.inspection.settings||{},onUpdateConclusion:va},null,8,["form","inspection-id","inspection","settings"])])):d("",!0)]),_:1})]),C.value==="conclusion"?(n(),i("div",{key:0,class:re(["flex justify-end gap-4 mt-2 p-4 bg-white rounded-xl shadow-md",{"mb-4":Y.value==="top","mb-20":Y.value==="bottom"}])},[Ve(ee(ka),{href:l.route("inspections.pending",a.inspectionId),as:"button",type:"button",disabled:Me.value&&Ee.value==="pending",onClick:o[11]||(o[11]=ct(B=>r(l.route("inspections.pending",a.inspectionId),"pending"),["prevent"])),class:"inline-flex items-center justify-center px-3 py-1.5 text-sm font-medium rounded-md shadow-sm bg-yellow-500 text-white hover:bg-yellow-600 transition disabled:opacity-50 disabled:cursor-not-allowed"},{default:Fe(()=>[Me.value&&Ee.value==="pending"?(n(),i(Ue,{key:0},[o[38]||(o[38]=e("svg",{class:"animate-spin h-4 w-4 text-white mr-2",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)),o[39]||(o[39]=e("span",null,"Memproses...",-1))],64)):(n(),i("span",Gl,"Tunda"))]),_:1},8,["href","disabled"]),e("button",{type:"button",onClick:fa,disabled:!bt.value||k.value,class:"w-full inline-flex items-center justify-center px-6 py-3 border border-transparent text-base font-medium rounded-md shadow-sm bg-gradient-to-r from-indigo-700 to-sky-600 shadow-lg text-white focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition duration-150 ease-in-out disabled:opacity-50 disabled:cursor-not-allowed"},[k.value?(n(),i("svg",Yl,o[40]||(o[40]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):d("",!0),e("span",null,z(k.value?"Mengirim...":"Final Kirim Inspeksi"),1)],8,Wl)],2)):d("",!0),u.value?(n(),i("button",{key:1,onMousedown:o[12]||(o[12]=(...B)=>ee(N)&&ee(N)(...B)),onMouseup:o[13]||(o[13]=(...B)=>ee(X)&&ee(X)(...B)),onMouseleave:o[14]||(o[14]=(...B)=>ee(j)&&ee(j)(...B)),onMousemove:o[15]||(o[15]=(...B)=>ee(q)&&ee(q)(...B)),onTouchstart:o[16]||(o[16]=(...B)=>ee(N)&&ee(N)(...B)),onTouchend:o[17]||(o[17]=(...B)=>ee(X)&&ee(X)(...B)),onTouchmove:o[18]||(o[18]=(...B)=>ee(q)&&ee(q)(...B)),onClick:fe,class:"fixed z-5 p-4 bg-gradient-to-r from-indigo-700 to-sky-600 text-white rounded-full shadow-lg",style:Ke({left:ee(me).x+"px",top:ee(me).y+"px"})},o[41]||(o[41]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 4v16m8-8H4"})],-1)]),36)):d("",!0),Ve(pa,{show:ge.value,title:"Cari Point Inspeksi",subtitle:"Pilih point inspeksi untuk ditambahkan",onClose:zt},{default:Fe(()=>[e("button",{onClick:zt,class:"absolute top-4 right-4 text-gray-400 hover:text-gray-600 transition-colors z-10"},o[42]||(o[42]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])),e("div",Zl,[e("div",Jl,[Le(e("input",{"onUpdate:modelValue":o[19]||(o[19]=B=>_e.value=B),type:"text",placeholder:"Cari point inspeksi...",class:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"},null,512),[[dt,_e.value]]),o[43]||(o[43]=e("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[e("svg",{class:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})])],-1))]),e("div",Xl,[mt.value.length===0?(n(),i("div",Ql," Tidak ada point yang ditemukan ")):d("",!0),(n(!0),i(Ue,null,Pe(mt.value,B=>{var tt,ta;return n(),i("button",{key:B.id,onClick:wr=>Tt(B),class:"w-full text-left p-3 border-b border-gray-200 hover:bg-gray-50 transition-colors"},[e("div",tr,z((tt=B.inspection_point)==null?void 0:tt.name),1),e("div",ar,z((ta=B.inspection_point)==null?void 0:ta.description),1),e("div",sr,z(ft(B)),1),vt(B.inspection_point_id)?(n(),i("div",nr," ✓ Sudah ada data ")):d("",!0)],8,er)}),128))])])]),_:1},8,["show"]),Te.value?(n(),De(Ot,{key:(pe=he.value)==null?void 0:pe.id,show:Te.value,title:((be=(le=he.value)==null?void 0:le.inspection_point)==null?void 0:be.name)||"Detail Point",subtitle:(Re=(xe=he.value)==null?void 0:xe.inspection_point)==null?void 0:Re.description,name:`point-${(Se=he.value)==null?void 0:Se.id}`,"inspection-id":a.inspection.id,"point-id":(We=he.value)==null?void 0:We.inspection_point_id,settings:((qe=he.value)==null?void 0:qe.settings)||{},options:((yt=(Be=he.value)==null?void 0:Be.settings)==null?void 0:yt.radios)||[],"selected-Point":he.value,"selected-value":Ce.value,"images-value":ee($).images[(xt=he.value)==null?void 0:xt.inspection_point_id],"notes-value":$e.value,point:he.value,"existing-data":It((Ye=he.value)==null?void 0:Ye.inspection_point_id),"onUpdate:selectedValue":o[20]||(o[20]=B=>Ce.value=B),"onUpdate:notesValue":o[21]||(o[21]=B=>$e.value=B),"onUpdate:imagesValue":Mt,onSave:Et,onClose:Rt,onHapus:J},null,8,["show","title","subtitle","name","inspection-id","point-id","settings","options","selected-Point","selected-value","images-value","notes-value","point","existing-data"])):d("",!0),Qe.value?(n(),i("div",or,o[44]||(o[44]=[e("p",{class:"text-sm"},"Tekan sekali lagi untuk keluar dari inspeksi",-1),e("p",{class:"text-xs text-gray-300 mt-1"},"Data inspeksi telah disimpan secara lokal",-1)]))):d("",!0),it.value?(n(),i("div",{key:4,class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",onClick:lt},[e("div",{class:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4 max-h-[80vh] overflow-y-auto",onClick:o[29]||(o[29]=ct(()=>{},["stop"]))},[e("div",{class:"flex items-center justify-between p-4 border-b"},[o[46]||(o[46]=e("h3",{class:"text-lg font-semibold text-gray-900"},"Pengaturan Inspeksi",-1)),e("button",{onClick:lt,class:"text-gray-400 hover:text-gray-600 transition-colors"},o[45]||(o[45]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),e("div",ir,[e("div",lr,[o[47]||(o[47]=e("div",null,[e("label",{class:"text-sm font-medium text-gray-700"},"Swipe Gesture"),e("p",{class:"text-xs text-gray-500"},"Aktifkan navigasi dengan geser")],-1)),e("button",{onClick:St,type:"button",class:re(["relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",je.value?"bg-indigo-600":"bg-gray-200"]),role:"switch","aria-checked":je.value},[e("span",{"aria-hidden":"true",class:re(["pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out",je.value?"translate-x-5":"translate-x-0"])},null,2)],10,rr)]),e("div",ur,[o[49]||(o[49]=e("label",{class:"text-sm font-medium text-gray-700"},"Sumber Gambar",-1)),Le(e("select",{"onUpdate:modelValue":o[22]||(o[22]=B=>Ge.value=B),onChange:Ct,class:"w-full text-sm border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"},o[48]||(o[48]=[e("option",{value:"all"},"Tanya",-1),e("option",{value:"camera"},"Kamera",-1),e("option",{value:"gallery"},"Galeri",-1)]),544),[[Bt,Ge.value]])]),e("div",dr,[o[51]||(o[51]=e("label",{class:"text-sm font-medium text-gray-700"},"Kualitas Kamera",-1)),Le(e("select",{"onUpdate:modelValue":o[23]||(o[23]=B=>ze.value=B),class:"w-full text-sm border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"},o[50]||(o[50]=[ia('<option value="HP_Native" data-v-99fd500f>HP</option><option value="HD_Std" data-v-99fd500f>HD Std</option><option value="4K" data-v-99fd500f>4K Rtc</option><option value="HD" data-v-99fd500f>HD Rtc</option><option value="SD" data-v-99fd500f>SD Rtc</option>',5)]),512),[[Bt,ze.value]])]),e("div",cr,[o[54]||(o[54]=e("label",{class:"text-sm font-medium text-gray-700"},"Mode Menu",-1)),e("div",gr,[e("label",pr,[Le(e("input",{type:"radio","onUpdate:modelValue":o[24]||(o[24]=B=>H.value=B),value:"horizontal",class:"text-indigo-600 focus:ring-indigo-500"},null,512),[[at,H.value]]),o[52]||(o[52]=e("span",{class:"ml-2 text-sm text-gray-700"},"Scroll samping",-1))]),e("label",mr,[Le(e("input",{type:"radio","onUpdate:modelValue":o[25]||(o[25]=B=>H.value=B),value:"vertical",class:"text-indigo-600 focus:ring-indigo-500"},null,512),[[at,H.value]]),o[53]||(o[53]=e("span",{class:"ml-2 text-sm text-gray-700"},"Menu Ngambang",-1))])])]),H.value==="horizontal"?(n(),i("div",vr,[o[57]||(o[57]=e("label",{class:"text-sm font-medium text-gray-700"},"Posisi Menu",-1)),e("div",fr,[e("label",hr,[Le(e("input",{type:"radio","onUpdate:modelValue":o[26]||(o[26]=B=>Y.value=B),value:"top",class:"text-indigo-600 focus:ring-indigo-500"},null,512),[[at,Y.value]]),o[55]||(o[55]=e("span",{class:"ml-2 text-sm text-gray-700"},"Atas",-1))]),e("label",br,[Le(e("input",{type:"radio","onUpdate:modelValue":o[27]||(o[27]=B=>Y.value=B),value:"bottom",class:"text-indigo-600 focus:ring-indigo-500"},null,512),[[at,Y.value]]),o[56]||(o[56]=e("span",{class:"ml-2 text-sm text-gray-700"},"Bawah",-1))])])])):d("",!0),H.value==="vertical"?(n(),i("div",yr,[o[59]||(o[59]=e("label",{class:"text-sm font-medium text-gray-700"},"Posisi Menu Vertikal",-1)),Le(e("select",{"onUpdate:modelValue":o[28]||(o[28]=B=>Y.value=B),class:"w-full text-sm border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"},o[58]||(o[58]=[e("option",{value:"top-right"},"Atas Kanan",-1),e("option",{value:"top-left"},"Atas Kiri",-1),e("option",{value:"bottom-right"},"Bawah Kanan",-1),e("option",{value:"bottom-left"},"Bawah Kiri",-1)]),512),[[Bt,Y.value]])])):d("",!0)]),e("div",{class:"flex justify-end p-4 border-t bg-gray-50"},[e("button",{onClick:lt,class:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2"}," Tutup ")])])])):d("",!0)],2)])}}},Vr=He(xr,[["__scopeId","data-v-99fd500f"]]);export{Vr as default};
