import{q as j,r as b,x as Tn,G as J,L as Vn,M as it,g as En,c as _,o as x,b as I,d as i,u as f,N as Ut,n as q,f as ot,F as Re,m as at,k as ke,j as Kt,w as lt,t as Y,T as An,z as N,O as rt,y as Ht,S as On,A as Fn,I as ut,e as jn,J as Ue,D as qn,W as Ke}from"./vendor-C3sNAm3r.js";import{l as zn}from"./lodash-CgsIOpDF.js";import{u as $t,V as Bn,_ as Nn,C as Rn,B as Un,a as Kn}from"./useDraggableButton-Cjx2iHYO.js";import{_ as Hn}from"./app-0h-sH7Ui.js";import"./PrimaryButton-CabVcq5_.js";import"./ActionMessage-RVNDh048.js";import"./fuse-Ch1WBRTM.js";import"./InputNumber-B-de2KL-.js";const $n={class:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100"},Gn={key:0,class:"fixed inset-0 bg-black bg-opacity-40 z-30 pointer-events-none transition-opacity duration-200"},Jn={key:0,xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",viewBox:"0 0 20 20",fill:"currentColor","stroke-width":"2"},Wn={key:1,xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",viewBox:"0 0 20 20",fill:"currentColor","stroke-width":"2"},Qn={class:"flex items-center px-4"},Yn={class:"flex"},Xn={key:0,class:"ml-2 inline-flex items-center justify-center w-5 h-5 text-xs rounded-full bg-green-500 text-white"},Zn=["onClick","data-category"],es={key:0,class:"ml-2 inline-flex items-center justify-center w-5 h-5 text-xs rounded-full bg-green-500 text-white"},ts={key:0,class:"ml-2 inline-flex items-center justify-center w-5 h-5 text-xs rounded-full bg-green-500 text-white"},ns={key:3,class:"fixed inset-0 z-30"},ss={class:"mt-2 space-y-2"},is={key:0,class:"ml-2 inline-flex items-center justify-center w-5 h-5 text-xs rounded-full bg-green-500 text-white"},os=["onClick"],as={key:0,class:"ml-2 inline-flex items-center justify-center w-5 h-5 text-xs rounded-full bg-green-500 text-white"},ls={key:0,class:"ml-2 inline-flex items-center justify-center w-5 h-5 text-xs rounded-full bg-green-500 text-white"},rs={key:0,class:"fixed top-4 left-1/2 transform -translate-x-1/2 bg-green-400 text-white px-4 py-2 rounded shadow-lg z-50"},us={class:"relative overflow-hidden"},cs={class:"category-content"},ds={class:"category-content"},gs={class:"category-content"},fs={key:1},ms=["disabled"],ps={key:0,class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},vs={class:"space-y-4"},hs={class:"relative"},xs={class:"max-h-64 overflow-y-auto"},ys={key:0,class:"text-center py-4 text-gray-500"},_s=["onClick"],ws={class:"font-medium text-gray-900"},bs={class:"text-sm text-gray-500"},ks={class:"text-xs text-gray-400 mt-1"},Cs={key:0,class:"text-xs text-green-600 mt-1"},Ss={key:3,class:"fixed bottom-20 left-1/2 transform -translate-x-1/2 bg-gray-800 text-white px-6 py-3 rounded-lg shadow-lg z-50 text-center"},Is={class:"p-4 space-y-6"},Ms={class:"flex items-center justify-between"},Ds=["aria-checked"],Ls={class:"space-y-2"},Ps={class:"space-y-2"},Ts={class:"space-y-2"},Vs={class:"flex space-x-4"},Es={class:"flex items-center"},As={class:"flex items-center"},Os={key:0,class:"space-y-2"},Fs={class:"flex space-x-4"},js={class:"flex items-center"},qs={class:"flex items-center"},zs={key:1,class:"space-y-2"},Bs={__name:"IndexLocal",props:{inspection:Object,inspectionId:Object,category:Object,car:Object,appMenus:Array,damagePoints:Array,existingResults:Object,existingImages:Object,CarDetail:Array,allInspections:Array},setup(E){var Et,At,Ot,Ft,jt,qt,zt,Bt,Nt,Rt;const Ce=t=>{if(!t)return{};if(typeof t=="string")try{return JSON.parse(t)||{}}catch(e){return console.error("Error parsing settings JSON:",e),{}}return typeof t=="object"&&t!==null?t:{}},p=E,He=j(()=>`inspection_data_${p.inspection.id}`),$e=j(()=>`swipe_toggle_${p.inspection.id}`),Ge=j(()=>`image_source_${p.inspection.id}`),Je=j(()=>`active_category_${p.inspection.id}`),ct=()=>{try{const t=localStorage.getItem(He.value);return t?JSON.parse(t):{}}catch(t){return console.error("Error reading local storage:",t),{}}},Gt=t=>{try{localStorage.setItem(He.value,JSON.stringify(t))}catch(e){console.error("Error writing to local storage:",e)}},Jt=()=>{try{localStorage.removeItem(He.value),localStorage.removeItem($e.value),localStorage.removeItem(Ge.value),localStorage.removeItem(Je.value)}catch(t){console.error("Error clearing local storage:",t)}},Wt=()=>{try{const t=localStorage.getItem($e.value);return t?JSON.parse(t):!0}catch(t){return console.error("Error reading swipe toggle state:",t),!0}},Qt=t=>{try{localStorage.setItem($e.value,JSON.stringify(t))}catch(e){console.error("Error writing swipe toggle state:",e)}},dt=()=>{try{return localStorage.getItem(Ge.value)||"all"}catch(t){return console.error("Error reading image source setting:",t),"all"}},Yt=t=>{try{localStorage.setItem(Ge.value,t)}catch(e){console.error("Error writing image source setting:",e)}},gt=j(()=>`camera_quality_${p.inspection.id}`),ft=()=>{try{return localStorage.getItem(gt.value)||"HP_Native"}catch(t){return console.error("Error reading camera quality setting:",t),"HP_Native"}},Xt=t=>{try{localStorage.setItem(gt.value,t)}catch(e){console.error("Error writing camera quality setting:",e)}},Zt=()=>{try{return localStorage.getItem(Je.value)||U.value[0]}catch(t){return console.error("Error reading active category:",t),U.value[0]}},mt=t=>{try{localStorage.setItem(Je.value,t)}catch(e){console.error("Error writing active category:",e)}},A=b(((At=(Et=p.category)==null?void 0:Et.settings)==null?void 0:At.menu_model)||"horizontal"),L=b(((Ft=(Ot=p.category)==null?void 0:Ot.settings)==null?void 0:Ft.position)||"top"),ne=b(!1),se=b(!1),{pos:pt,dragging:en,startLongPress:Se,cancelLongPress:vt,onDrag:Ie,stopDrag:Me,handleClick:tn}=$t("toggleMenuButtonPos",{x:window.innerWidth-80,y:20}),nn=t=>{tn(t)&&sn()},sn=()=>{ne.value=!ne.value},ie=()=>{ne.value=!1},We=t=>t?"bg-gradient-to-r from-indigo-700 to-sky-600 text-white":"bg-gray-50 hover:bg-gray-100 text-gray-700",{pos:ht,dragging:on,startLongPress:De,cancelLongPress:xt,onDrag:Le,stopDrag:Pe,handleClick:an}=$t("damageButtonPos",{x:window.innerWidth-80,y:window.innerHeight-80}),ln=t=>{an(t)&&(Te.value=!0)},Te=b(!1),Ve=b(!1),oe=b(""),D=b(null),ae=b(""),le=b(""),X=b(""),Ee=b(!1),Ae=b(null),rn=(t,e)=>{Ee.value=!0,Ae.value=e,Ke.visit(t,{onFinish:()=>{Ee.value=!1,Ae.value=null}})},O=b([]),un=t=>{const{pointId:e,targetPointIds:g,action:u}=t;u==="update"&&(g.forEach(w=>{const s=w.toString(),c=O.value.indexOf(s);c>-1&&O.value.splice(c,1)}),g.forEach(w=>{const s=w.toString();O.value.includes(s)||O.value.push(s)}))},yt=t=>{O.value=[],t.forEach(e=>{(e.menu_point||[]).forEach(u=>{var s,c;if((s=u.id)!=null&&s.toString()&&(u.input_type==="radio"||u.input_type==="imageTOradio"||u.input_type==="select")){const n=m.results[u.inspection_point_id];if(n&&n.status){const v=u.settings||{};let r=[];if(Array.isArray(n.status))n.status.forEach(C=>{var R;const P=(R=v.radios)==null?void 0:R.find(F=>F.value===C);P&&r.push(P)});else{const C=(c=v.radios)==null?void 0:c.find(P=>P.value===n.status);C&&r.push(C)}r.forEach(C=>{var P;(P=C==null?void 0:C.settings)!=null&&P.show_trigger&&(C.settings.target_point_id||[]).forEach(F=>{const o=F.toString();O.value.includes(o)||O.value.push(o)})})}}})})},cn=j(()=>p.appMenus.some(t=>t.input_type==="damage")),U=j(()=>["vehicle",...p.appMenus.map(t=>String(t.id)),"conclusion"]),k=b(U.value[0]),_t=b(0),Qe=j(()=>{if(k.value==="vehicle"||k.value==="conclusion")return null;const t=p.appMenus.find(e=>String(e.id)===k.value);return t?{...t,points:Ye(t.menu_point,t.input_type==="damage")}:null}),Ye=(t,e)=>e?(t||[]).filter(g=>{const u=g.inspection_point_id;return St(u)}):t||[],H=b({plate_number:p.inspection.plate_number,car_id:p.inspection.car_id,car_name:p.inspection.car_name}),M=b({notes:p.inspection.overall_note||"",flooded:((qt=(jt=Ce(p.inspection.settings))==null?void 0:jt.conclusion)==null?void 0:qt.flooded)||null,collision:((Bt=(zt=Ce(p.inspection.settings))==null?void 0:zt.conclusion)==null?void 0:Bt.collision)||null,collision_severity:((Rt=(Nt=Ce(p.inspection.settings))==null?void 0:Nt.conclusion)==null?void 0:Rt.collision_severity)||null}),m=Tn((()=>{const t=[...p.appMenus.flatMap(v=>v.menu_point||[]),...p.damagePoints||[]],e={},g={};t.forEach(v=>{const r=v.inspection_point_id,C=p.existingResults[r];e[r]={status:(C==null?void 0:C.status)||"",note:(C==null?void 0:C.note)||""},g[r]=p.existingImages[r]||[]});const u=ct(),w={...e,...u.results||{}},s={...g,...u.images||{}},c={...H.value,...u.vehicleDetails||{}},n=u.overall_note!==void 0?u.overall_note:p.inspection.overall_note||"";return{inspection_id:p.inspection.id,results:w,images:s,overall_note:n,plate_number:c.plate_number,car_id:c.car_id,car_name:c.car_name}})());J(m,t=>{Gt({results:t.results,images:t.images,overall_note:t.overall_note,vehicleDetails:H.value,conclusion:M.value})},{deep:!0}),J(H,t=>{m.plate_number=t.plate_number,m.car_id=t.car_id,m.car_name=t.car_name},{deep:!0}),J(M,t=>{m.overall_note=t.notes},{deep:!0});const z=Vn("vehicleFeatures",b(null));z.value=JSON.parse(localStorage.getItem("vehicle_features")||"{}"),it("vehicleFeatures",z);const wt=b(!1),bt=t=>{wt.value=t},kt=b(!1),dn=t=>{kt.value=t},Oe=j(()=>{var w;const t=H.value.plate_number&&/^[A-Z]{1,2}\d{1,4}[A-Z]{0,3}$/.test(H.value.plate_number),e=!!((w=H.value.car_name)!=null&&w.trim()),g=!kt.value,u=!wt.value;return t&&e&&g&&u}),Ct=j(()=>{if(!oe.value.trim())return p.damagePoints||[];const t=oe.value.toLowerCase().trim();return(p.damagePoints||[]).filter(e=>{var g,u,w,s,c;return((u=(g=e.inspection_point)==null?void 0:g.name)==null?void 0:u.toLowerCase().includes(t))||((s=(w=e.inspection_point)==null?void 0:w.description)==null?void 0:s.toLowerCase().includes(t))||((c=It(e))==null?void 0:c.toLowerCase().includes(t))})}),St=t=>{const e=m.results[t]&&(m.results[t].status||m.results[t].note),g=m.images[t]&&m.images[t].length>0;return e||g},It=t=>{var e;return((e=t.inspection_point.component)==null?void 0:e.name)||"Komponen Tidak Diketahui"},gn=t=>m.results[t]||null,Xe=()=>{var s;const t=M.value,e=!!t.flooded,g=!!t.collision,u=t.collision==="yes"?!!t.collision_severity:!0,w=!!((s=t.notes)!=null&&s.trim());return e&&g&&u&&w},Mt=j(()=>({flooded:M.value.flooded||null,collision:M.value.collision||null,collision_severity:M.value.collision_severity||null,note:M.value.notes||null,isComplete:Xe()})),Dt=j(()=>{const t=Oe.value,e=p.appMenus.every(u=>Ze(u)),g=Xe();return t&&e&&g}),re=t=>{try{return typeof t.settings=="string"?JSON.parse(t.settings):t.settings}catch{return{}}},Lt=t=>{var w,s;const e=re(t);if(!(e.transmission||e.fuel_type||e.rear_door||e.pick_up||e.box))return!0;const g=(w=p.car)==null?void 0:w.transmission,u=(s=p.car)==null?void 0:s.fuel_type;if(e.transmission&&Array.isArray(e.transmission)&&e.transmission.length>0&&g&&!e.transmission.includes(g)||e.fuel_type&&e.fuel_type.trim()!==""&&u&&e.fuel_type!==u||e.rear_door&&(!z.value||!z.value.rear_door))return!1;if(e.pick_up&&e.box)if(z.value){const c=z.value.pick_up===!0,n=z.value.box===!0;if(!c&&!n)return!1}else return!1;else if(e.pick_up){if(!z.value||!z.value.pick_up)return!1}else if(e.box&&(!z.value||!z.value.box))return!1;return!0},Ze=t=>t.input_type==="damage"?(Ye(t.menu_point,!0)||[]).filter(s=>{var r;if(!Lt(s))return!1;const n=re(s),v=(r=s.id)==null?void 0:r.toString();return n!=null&&n.is_triggered?O.value.includes(v):s.is_default}).every(s=>{var F,o,K,$,te,ue,ce,de,ge,fe,me,pe,ve,he,xe,ye,_e,we,be,Q,Be;const c=s.inspection_point_id,n=m.results[c],v=m.images[c]||[],r=re(s);let C=r.is_required!==!1;if(r!=null&&r.is_triggered&&O.value.includes((F=s.id)==null?void 0:F.toString())&&(C=!0),!C)return!0;if(!n)return!1;const P=Array.isArray(n.status);switch(s.input_type){case"text":if(!n.note||n.note.trim()==="")return!1;if(r.min_length){const a=parseInt(r.min_length);if(n.note.trim().length<a)return!1}if(r.max_length){const a=parseInt(r.max_length);if(n.note.trim().length>a)return!1}return!0;case"number":if(!n.note||n.note.trim()==="")return!1;const G=parseFloat(n.note);if(isNaN(G))return!1;if(r.min!==void 0){const a=parseFloat(r.min);if(G<a)return!1}if(r.max!==void 0){const a=parseFloat(r.max);if(G>a)return!1}if(r.step){const a=parseFloat(r.step),d=(G-(r.min||0))%a;if(Math.abs(d)>1e-5&&Math.abs(d-a)>1e-5)return!1}return!0;case"textarea":if(!n.note||n.note.trim()==="")return!1;if(r.min_length){const a=parseInt(r.min_length);if(n.note.trim().length<a)return!1}if(r.max_length){const a=parseInt(r.max_length);if(n.note.trim().length>a)return!1}return!0;case"account":if(!n.note||n.note.trim()==="")return!1;const Ne=n.note.replace(/[^0-9]/g,""),T=parseFloat(Ne);if(isNaN(T))return!1;if(r.min_value){const a=parseFloat(r.min_value);if(T<a)return!1}if(r.max_value){const a=parseFloat(r.max_value);if(T>a)return!1}return!0;case"date":if(!n.note||n.note.trim()==="")return!1;const l=new Date(n.note);if(r.min_date){const a=new Date(r.min_date);if(l<a)return!1}if(r.max_date){const a=new Date(r.max_date);if(l>a)return!1}return!0;case"radio":if(!n.status)return!1;if(P){if(n.status.length===0)return!1;let a=!1,d=!1;for(const y of n.status){const S=(o=r.radios)==null?void 0:o.find(V=>V.value===y);S&&((K=S.settings)!=null&&K.show_textarea&&S.settings.textarea_is_required!==!1&&(a=!0),($=S.settings)!=null&&$.show_image_upload&&S.settings.image_is_required!==!1&&(d=!0))}if(a&&(!n.note||n.note.trim()===""))return!1;if(n.note&&n.note.trim()!=="")for(const y of n.status){const S=(te=r.radios)==null?void 0:te.find(V=>V.value===y);if(!(!S||!((ue=S.settings)!=null&&ue.show_textarea))){if(S.settings.min_length){const V=parseInt(S.settings.min_length);if(n.note.trim().length<V)return!1}if(S.settings.max_length){const V=parseInt(S.settings.max_length);if(n.note.trim().length>V)return!1}}}if(d&&(!v||v.length===0))return!1;if(v&&v.length>0){let y=1;for(const S of n.status){const V=(ce=r.radios)==null?void 0:ce.find(Pn=>Pn.value===S);(de=V==null?void 0:V.settings)!=null&&de.show_image_upload&&V.settings.max_files&&(y=Math.max(y,parseInt(V.settings.max_files)))}if(v.length>y)return!1}return!0}else{const a=(ge=r.radios)==null?void 0:ge.find(d=>d.value===n.status);if(!a)return!1;if((fe=a.settings)!=null&&fe.show_textarea){if(a.settings.textarea_is_required!==!1&&(!n.note||n.note.trim()===""))return!1;if(n.note&&n.note.trim()!==""){if(a.settings.min_length){const d=parseInt(a.settings.min_length);if(n.note.trim().length<d)return!1}if(a.settings.max_length){const d=parseInt(a.settings.max_length);if(n.note.trim().length>d)return!1}}}if((me=a.settings)!=null&&me.show_image_upload){if(a.settings.image_is_required!==!1&&(!v||v.length===0))return!1;if(v&&v.length>0&&a.settings.max_files){const d=parseInt(a.settings.max_files);if(v.length>d)return!1}}return!0}case"select":if(!n.status)return!1;const h=(pe=r.radios)==null?void 0:pe.find(a=>a.value===n.status);if(!h)return!1;if((ve=h.settings)!=null&&ve.show_textarea){if(h.settings.textarea_is_required!==!1&&(!n.note||n.note.trim()===""))return!1;if(n.note&&n.note.trim()!==""){if(h.settings.min_length){const a=parseInt(h.settings.min_length);if(n.note.trim().length<a)return!1}if(h.settings.max_length){const a=parseInt(h.settings.max_length);if(n.note.trim().length>a)return!1}}}if((he=h.settings)!=null&&he.show_image_upload){if(h.settings.image_is_required!==!1&&(!v||v.length===0))return!1;if(v&&v.length>0&&h.settings.max_files){const a=parseInt(h.settings.max_files);if(v.length>a)return!1}}return!0;case"imageTOradio":if(!v||v.length===0||!n.status)return!1;if(r.max_files){const a=parseInt(r.max_files);if(v.length>a)return!1}if(P){if(n.status.length===0)return!1;let a=!1;for(const d of n.status){const y=(xe=r.radios)==null?void 0:xe.find(S=>S.value===d);y&&(ye=y.settings)!=null&&ye.show_textarea&&y.settings.textarea_is_required!==!1&&(a=!0)}if(a&&(!n.note||n.note.trim()===""))return!1;if(n.note&&n.note.trim()!=="")for(const d of n.status){const y=(_e=r.radios)==null?void 0:_e.find(S=>S.value===d);if(!(!y||!((we=y.settings)!=null&&we.show_textarea))){if(y.settings.min_length){const S=parseInt(y.settings.min_length);if(n.note.trim().length<S)return!1}if(y.settings.max_length){const S=parseInt(y.settings.max_length);if(n.note.trim().length>S)return!1}}}return!0}else{const a=(be=r.radios)==null?void 0:be.find(d=>d.value===n.status);if(!a)return!1;if((Q=a.settings)!=null&&Q.show_textarea){if(a.settings.textarea_is_required!==!1&&(!n.note||n.note.trim()===""))return!1;if(n.note&&n.note.trim()!==""){if(a.settings.min_length){const d=parseInt(a.settings.min_length);if(n.note.trim().length<d)return!1}if(a.settings.max_length){const d=parseInt(a.settings.max_length);if(n.note.trim().length>d)return!1}}}return!0}case"image":if(v.length===0)return!1;if(r.max_files){const a=parseInt(r.max_files);if(v.length>a)return!1}return!0;default:return!!(n.status||(Be=n.note)!=null&&Be.trim())}}):t.id==="conclusion"?Xe():t.id==="vehicle"?Oe.value:(Ye(t.menu_point,!1)||[]).filter(u=>{var n;if(!Lt(u))return!1;const s=re(u),c=(n=u.id)==null?void 0:n.toString();return s!=null&&s.is_triggered?O.value.includes(c):u.is_default}).every(u=>{var P,R,F,o,K,$,te,ue,ce,de,ge,fe,me,pe,ve,he,xe,ye,_e,we,be;const w=u.inspection_point_id,s=m.results[w],c=m.images[w]||[],n=re(u);let v=n.is_required!==!1;if(n!=null&&n.is_triggered&&O.value.includes((P=u.id)==null?void 0:P.toString())&&(v=!0),!v)return!0;if(!s)return!1;const r=Array.isArray(s.status);switch(u.input_type){case"text":if(!s.note||s.note.trim()==="")return!1;if(n.min_length){const l=parseInt(n.min_length);if(s.note.trim().length<l)return!1}if(n.max_length){const l=parseInt(n.max_length);if(s.note.trim().length>l)return!1}return!0;case"number":if(!s.note||s.note.trim()==="")return!1;const Q=parseFloat(s.note);if(isNaN(Q))return!1;if(n.min!==void 0){const l=parseFloat(n.min);if(Q<l)return!1}if(n.max!==void 0){const l=parseFloat(n.max);if(Q>l)return!1}if(n.step){const l=parseFloat(n.step),h=(Q-(n.min||0))%l;if(Math.abs(h)>1e-5&&Math.abs(h-l)>1e-5)return!1}return!0;case"textarea":if(!s.note||s.note.trim()==="")return!1;if(n.min_length){const l=parseInt(n.min_length);if(s.note.trim().length<l)return!1}if(n.max_length){const l=parseInt(n.max_length);if(s.note.trim().length>l)return!1}return!0;case"account":if(!s.note||s.note.trim()==="")return!1;const Be=s.note.replace(/[^0-9]/g,""),G=parseFloat(Be);if(isNaN(G))return!1;if(n.min_value){const l=parseFloat(n.min_value);if(G<l)return!1}if(n.max_value){const l=parseFloat(n.max_value);if(G>l)return!1}return!0;case"date":if(!s.note||s.note.trim()==="")return!1;const Ne=new Date(s.note);if(n.min_date){const l=new Date(n.min_date);if(Ne<l)return!1}if(n.max_date){const l=new Date(n.max_date);if(Ne>l)return!1}return!0;case"radio":if(!s.status)return!1;if(r){if(s.status.length===0)return!1;let l=!1,h=!1;for(const a of s.status){const d=(R=n.radios)==null?void 0:R.find(y=>y.value===a);d&&((F=d.settings)!=null&&F.show_textarea&&d.settings.textarea_is_required!==!1&&(l=!0),(o=d.settings)!=null&&o.show_image_upload&&d.settings.image_is_required!==!1&&(h=!0))}if(l&&(!s.note||s.note.trim()===""))return!1;if(s.note&&s.note.trim()!=="")for(const a of s.status){const d=(K=n.radios)==null?void 0:K.find(y=>y.value===a);if(!(!d||!(($=d.settings)!=null&&$.show_textarea))){if(d.settings.min_length){const y=parseInt(d.settings.min_length);if(s.note.trim().length<y)return!1}if(d.settings.max_length){const y=parseInt(d.settings.max_length);if(s.note.trim().length>y)return!1}}}if(h&&(!c||c.length===0))return!1;if(c&&c.length>0){let a=1;for(const d of s.status){const y=(te=n.radios)==null?void 0:te.find(S=>S.value===d);(ue=y==null?void 0:y.settings)!=null&&ue.show_image_upload&&y.settings.max_files&&(a=Math.max(a,parseInt(y.settings.max_files)))}if(c.length>a)return!1}return!0}else{const l=(ce=n.radios)==null?void 0:ce.find(h=>h.value===s.status);if(!l)return!1;if((de=l.settings)!=null&&de.show_textarea){if(l.settings.textarea_is_required!==!1&&(!s.note||s.note.trim()===""))return!1;if(s.note&&s.note.trim()!==""){if(l.settings.min_length){const h=parseInt(l.settings.min_length);if(s.note.trim().length<h)return!1}if(l.settings.max_length){const h=parseInt(l.settings.max_length);if(s.note.trim().length>h)return!1}}}if((ge=l.settings)!=null&&ge.show_image_upload){if(l.settings.image_is_required!==!1&&(!c||c.length===0))return!1;if(c&&c.length>0&&l.settings.max_files){const h=parseInt(l.settings.max_files);if(c.length>h)return!1}}return!0}case"select":if(!s.status)return!1;const T=(fe=n.radios)==null?void 0:fe.find(l=>l.value===s.status);if(!T)return!1;if((me=T.settings)!=null&&me.show_textarea){if(T.settings.textarea_is_required!==!1&&(!s.note||s.note.trim()===""))return!1;if(s.note&&s.note.trim()!==""){if(T.settings.min_length){const l=parseInt(T.settings.min_length);if(s.note.trim().length<l)return!1}if(T.settings.max_length){const l=parseInt(T.settings.max_length);if(s.note.trim().length>l)return!1}}}if((pe=T.settings)!=null&&pe.show_image_upload){if(T.settings.image_is_required!==!1&&(!c||c.length===0))return!1;if(c&&c.length>0&&T.settings.max_files){const l=parseInt(T.settings.max_files);if(c.length>l)return!1}}return!0;case"imageTOradio":if(!c||c.length===0||!s.status)return!1;if(n.max_files){const l=parseInt(n.max_files);if(c.length>l)return!1}if(r){if(s.status.length===0)return!1;let l=!1;for(const h of s.status){const a=(ve=n.radios)==null?void 0:ve.find(d=>d.value===h);a&&(he=a.settings)!=null&&he.show_textarea&&a.settings.textarea_is_required!==!1&&(l=!0)}if(l&&(!s.note||s.note.trim()===""))return!1;if(s.note&&s.note.trim()!=="")for(const h of s.status){const a=(xe=n.radios)==null?void 0:xe.find(d=>d.value===h);if(!(!a||!((ye=a.settings)!=null&&ye.show_textarea))){if(a.settings.min_length){const d=parseInt(a.settings.min_length);if(s.note.trim().length<d)return!1}if(a.settings.max_length){const d=parseInt(a.settings.max_length);if(s.note.trim().length>d)return!1}}}return!0}else{const l=(_e=n.radios)==null?void 0:_e.find(h=>h.value===s.status);if(!l)return!1;if((we=l.settings)!=null&&we.show_textarea){if(l.settings.textarea_is_required!==!1&&(!s.note||s.note.trim()===""))return!1;if(s.note&&s.note.trim()!==""){if(l.settings.min_length){const h=parseInt(l.settings.min_length);if(s.note.trim().length<h)return!1}if(l.settings.max_length){const h=parseInt(l.settings.max_length);if(s.note.trim().length>h)return!1}}}return!0}case"image":if(c.length===0)return!1;if(n.max_files){const l=parseInt(n.max_files);if(c.length>l)return!1}return!0;default:return!!(s.status||(be=s.note)!=null&&be.trim())}}),B=b(!0),Z=b(dt()),W=b(ft()),et=b(!1),fn=()=>{console.log("Opening settings modal"),et.value=!0},tt=()=>{console.log("Closing settings modal"),et.value=!1},Fe=b(null),nt=b([]),je=b(0),qe=b(!1);it("imageSourceSetting",Z),it("cameraQualitySetting",W);const mn=()=>{B.value=!B.value,Qt(B.value)},pn=()=>{Yt(Z.value),console.log("Image source setting updated to:",Z.value)},vn=()=>{Xt(W.value),console.log("Camera quality setting updated to:",W.value)},ze=()=>{Fe.value&&qn(()=>{const t=Fe.value.querySelector(`[data-category="${k.value}"]`);if(!t)return;const e=Fe.value,g=e.clientWidth,u=t.offsetLeft,w=t.clientWidth,s=u-g/2+w/2;e.scrollTo({left:s,behavior:"smooth"})})},hn=()=>je.value===0?(je.value=1,qe.value=!0,setTimeout(()=>{je.value=0,qe.value=!1},2e3),window.history.pushState(null,null,window.location.href),!1):(je.value=0,qe.value=!1,Ke.visit(route("job.index")),!0),xn=()=>{window.history.state===null&&window.history.replaceState({isBackButtonControlled:!0},""),window.history.pushState({isBackButtonControlled:!0},""),window.addEventListener("popstate",t=>{t.state&&t.state.isBackButtonControlled&&(t.preventDefault(),hn())})},yn=t=>{D.value=t;const e=t.inspection_point_id,g=m.results[e]||{};ae.value=g.status||"",le.value=g.note||"",Te.value=!1,Ve.value=!0},_n=t=>{D.value&&(m.images[D.value.inspection_point_id]=t)},wn=()=>{if(D.value){const t=D.value.inspection_point_id;m.results[t]={...m.results[t],status:ae.value,note:le.value},X.value="Data berhasil disimpan di lokal!",setTimeout(()=>X.value="",1e3)}st()},bn=({pointId:t,type:e,value:g})=>{var u;(u=m.results[t])!=null&&u.hasOwnProperty(e)&&(m.results[t][e]=g)},Pt=async t=>{if(t&&confirm("Apakah kamu yakin ingin menghapus data ini?")){try{await Ke.post(route("inspections.delete-result"),{inspection_id:p.inspection.id,point_id:t},{preserveScroll:!0,preserveState:!0,onSuccess:()=>{m.results[t]&&(m.results[t]={status:"",note:""}),m.images[t]&&(m.images[t]=[]),X.value="Data berhasil dihapus!",setTimeout(()=>X.value="",1e3)},onError:e=>{console.error("Error menghapus hasil:",e)}})}catch(e){console.error("Error menghapus hasil:",e)}st()}},kn=t=>{Object.assign(H.value,t),bt(!0)},Cn=t=>{console.log("Save car details locally:",t)},Sn=t=>{console.log("Received conclusion data from child:",t),M.value={...M.value,...t},m.overall_note=t.notes||"",console.log("Conclusion state updated:",M.value)},In=()=>{if(!Dt.value){alert("Harap lengkapi semua menu inspeksi termasuk kesimpulan sebelum submit final");return}if(!confirm("Apakah Anda yakin ingin mengirim semua data inspeksi? Data lokal akan dihapus setelah berhasil dikirim."))return;se.value=!0;const t={...m.data(),overall_note:M.value.notes,conclusion:{notes:M.value.notes,flooded:M.value.flooded,collision:M.value.collision,collision_severity:M.value.collision_severity}};Ke.post(route("inspections.final-submit-local",{id:p.inspection.id}),t,{preserveScroll:!0,onSuccess:()=>{Jt()},onError:e=>{console.error("Kesalahan pengiriman:",e),se.value=!1}})},Mn=({pointId:t,imageId:e})=>{m.images[t]&&(m.images[t]=m.images[t].filter(g=>g.id!==e))},Tt=()=>{Te.value=!1,oe.value=""},st=()=>{Ve.value=!1,D.value=null,ae.value="",le.value=""},Dn=()=>{},ee=zn.throttle(t=>{k.value!==t&&(k.value=t,mt(t),A.value==="horizontal"&&ze())},50),Vt=t=>{let e=_t.value+t;e>=0&&e<U.value.length&&(k.value=U.value[e],ze())},Ln=()=>{let t=0,e=0,g=null;const u=n=>{B.value&&(t=n.changedTouches[0].screenX)},w=n=>{B.value&&(e=n.changedTouches[0].screenX,s())},s=()=>{if(!B.value)return;const n=250;e<t-n?Vt(1):e>t+n&&Vt(-1)},c=()=>{const n=document.querySelector(".relative.overflow-hidden");return n&&(n.addEventListener("touchstart",u,{passive:!0}),n.addEventListener("touchend",w,{passive:!0})),()=>{n&&(n.removeEventListener("touchstart",u),n.removeEventListener("touchend",w))}};return g=c(),J(B,n=>{g&&g(),n&&(g=c())}),()=>{g&&g()}};return J(k,(t,e)=>{ze()}),J(k,t=>{_t.value=U.value.indexOf(t)}),J(W,t=>{vn()}),J(()=>m.results,t=>{yt(p.appMenus)},{deep:!0}),En(()=>{yt(p.appMenus);const t=ct();if(B.value=Wt(),Z.value=dt(),W.value=ft(),t.vehicleDetails&&(Object.assign(H.value,t.vehicleDetails),m.plate_number=t.vehicleDetails.plate_number,m.car_id=t.vehicleDetails.car_id,m.car_name=t.vehicleDetails.car_name),t.conclusion)console.log("Loading conclusion from localStorage:",t.conclusion),Object.assign(M.value,t.conclusion),m.overall_note=t.conclusion.notes||"";else{const u=Ce(p.inspection.settings).conclusion||{};M.value={notes:p.inspection.notes||"",flooded:u.flooded||"",collision:u.collision||"",collision_severity:u.collision_severity||""},m.overall_note=p.inspection.notes||""}t.results&&Object.assign(m.results,t.results),t.images&&Object.assign(m.images,t.images);const e=Zt();U.value.includes(e)?k.value=e:(k.value=U.value[0],mt(U.value[0])),Ln(),xn(),setTimeout(()=>{ze()},100)}),(t,e)=>{var g,u,w,s,c,n,v,r,C,P,R,F;return x(),_("div",$n,[f(on)||f(en)?(x(),_("div",Gn)):I("",!0),A.value==="vertical"?(x(),_("button",{key:1,onMousedown:e[0]||(e[0]=(...o)=>f(Se)&&f(Se)(...o)),onMouseup:e[1]||(e[1]=(...o)=>f(Me)&&f(Me)(...o)),onMouseleave:e[2]||(e[2]=(...o)=>f(vt)&&f(vt)(...o)),onMousemove:e[3]||(e[3]=(...o)=>f(Ie)&&f(Ie)(...o)),onTouchstart:e[4]||(e[4]=(...o)=>f(Se)&&f(Se)(...o)),onTouchend:e[5]||(e[5]=(...o)=>f(Me)&&f(Me)(...o)),onTouchmove:e[6]||(e[6]=(...o)=>f(Ie)&&f(Ie)(...o)),onClick:nn,class:"fixed z-40 p-4 bg-gradient-to-r from-indigo-700 to-sky-600 text-white border shadow-lg rounded-full hover:shadow-xl transition",style:Ut({left:f(pt).x+"px",top:f(pt).y+"px"}),"aria-label":"Toggle vertical menu"},[ne.value?(x(),_("svg",Wn,e[31]||(e[31]=[i("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"},null,-1)]))):(x(),_("svg",Jn,e[30]||(e[30]=[i("path",{"fill-rule":"evenodd",d:"M3 5h14v2H3V5zm0 4h10v2H3V9zm0 4h6v2H3v-2z","clip-rule":"evenodd"},null,-1)])))],36)):I("",!0),A.value==="horizontal"?(x(),_("div",{key:2,class:q(["z-10 bg-white shadow-sm",{"sticky top-0 mb-2":L.value==="top","fixed bottom-0 left-0 right-0":L.value==="bottom"}])},[i("div",Qn,[i("div",{class:"flex-shrink-0"},[i("button",{onClick:fn,class:"p-2 rounded-full text-gray-600 hover:text-gray-800 hover:bg-gray-100 transition-colors duration-200",title:"Pengaturan"},e[32]||(e[32]=[i("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[i("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),i("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})],-1)]))]),i("div",{ref_key:"menuContainer",ref:Fe,class:"flex-1 overflow-x-auto scrollbar-hide py-3 ml-2 space-x-2 menu-container",onScroll:Dn},[i("div",Yn,[i("button",{ref_key:"menuItems",ref:nt,onClick:e[7]||(e[7]=o=>f(ee)("vehicle")),class:q(["flex-shrink-0 px-4 py-2 rounded-full text-sm font-medium whitespace-nowrap transition-colors duration-200 menu-item",{"bg-gradient-to-r from-indigo-700 to-sky-600 shadow-lg text-white":k.value==="vehicle","bg-gray-100 text-gray-700 hover:bg-gray-200":k.value!=="vehicle"}]),"data-category":"vehicle"},[e[33]||(e[33]=ot(" Detail Kendaraan ")),Oe.value?(x(),_("span",Xn," ✓ ")):I("",!0)],2),(x(!0),_(Re,null,at(E.appMenus,o=>(x(),_("button",{key:o.id,ref_for:!0,ref_key:"menuItems",ref:nt,onClick:K=>f(ee)(String(o.id)),class:q(["flex-shrink-0 px-4 py-2 rounded-full text-sm font-medium whitespace-nowrap transition-colors duration-200 menu-item",{"bg-gradient-to-r from-indigo-700 to-sky-600 shadow-lg text-white":k.value===String(o.id),"bg-gray-100 text-gray-700 hover:bg-gray-200":k.value!==String(o.id)}]),"data-category":String(o.id)},[ot(Y(o.name)+" ",1),Ze(o)?(x(),_("span",es," ✓ ")):I("",!0)],10,Zn))),128)),i("button",{ref_key:"menuItems",ref:nt,onClick:e[8]||(e[8]=o=>f(ee)("conclusion")),class:q(["flex-shrink-0 px-4 py-2 rounded-full text-sm font-medium whitespace-nowrap transition-colors duration-200 menu-item",{"bg-gradient-to-r from-indigo-700 to-sky-600 shadow-lg text-white":k.value==="conclusion","bg-gray-100 text-gray-700 hover:bg-gray-200":k.value!=="conclusion"}]),"data-category":"conclusion"},[e[34]||(e[34]=ot(" Kesimpulan ")),Mt.value.isComplete?(x(),_("span",ts," ✓ ")):I("",!0)],2)])],544)])],2)):I("",!0),A.value==="vertical"&&ne.value?(x(),_("div",ns,[i("div",{class:"absolute inset-0 bg-black bg-opacity-30",onClick:ie}),i("div",{class:q(["absolute z-40 w-60 bg-white rounded-xl shadow-xl p-2 max-h-[75vh] overflow-y-auto",{"top-16 right-4":L.value==="top-right","top-16 left-4":L.value==="top-left","bottom-16 right-4":L.value==="bottom-right","bottom-16 left-4":L.value==="bottom-left"}])},[i("div",{class:"flex items-center justify-between px-2 py-1 border-b"},[e[35]||(e[35]=i("div",{class:"text-sm font-semibold"},"Pilih Menu",-1)),i("button",{onClick:ie,class:"text-xs text-gray-500 hover:text-gray-700"},"Tutup")]),i("div",ss,[i("button",{onClick:e[9]||(e[9]=o=>{f(ee)("vehicle"),ie()}),class:q([We(k.value==="vehicle"),"w-full flex items-center justify-between px-3 py-2 rounded-md text-sm"])},[e[36]||(e[36]=i("span",null,"Detail Kendaraan",-1)),Oe.value?(x(),_("span",is,"✓")):I("",!0)],2),(x(!0),_(Re,null,at(E.appMenus,o=>(x(),_("button",{key:`vmenu-${o.id}`,onClick:()=>{f(ee)(String(o.id)),ie()},class:q([We(k.value===String(o.id)),"w-full flex items-center justify-between px-3 py-2 rounded-md text-sm"])},[i("span",null,Y(o.name),1),Ze(o)?(x(),_("span",as,"✓")):I("",!0)],10,os))),128)),i("button",{onClick:e[10]||(e[10]=o=>{f(ee)("conclusion"),ie()}),class:q([We(k.value==="conclusion"),"w-full flex items-center justify-between px-3 py-2 rounded-md text-sm"])},[e[37]||(e[37]=i("span",null,"Kesimpulan",-1)),Mt.value.isComplete?(x(),_("span",ls,"✓")):I("",!0)],2)])],2)])):I("",!0),i("div",{class:q(["max-w-7xl mx-auto px-2 sm:px-4 lg:px-6 py-1",{"pb-4 pt-1":L.value==="top","pb-20 pt-4":L.value==="bottom","pb-4 pt-4":A.value==="vertical"}])},[ke(An,{name:"fade"},{default:lt(()=>[X.value?(x(),_("div",rs,Y(X.value),1)):I("",!0)]),_:1}),i("div",us,[N(i("div",cs,[ke(Bn,{inspection:E.inspection,CarDetail:E.CarDetail,allInspections:p.allInspections,onUpdateVehicle:kn,onSaveCarDetails:Cn,"onUpdate:validation":dn,"onUpdate:hasUnsavedChanges":bt},null,8,["inspection","CarDetail","allInspections"])],512),[[rt,k.value==="vehicle"]]),N(i("div",ds,[Qe.value?(x(),Kt(Nn,{key:0,category:Qe.value,"inspection-id":E.inspection.id,car:p.car,form:f(m),head:A.value,triggeredPoints:O.value,onUpdateResult:bn,onHapusPoint:Pt,onRemoveImage:Mn,onTriggerPointsChanged:un},null,8,["category","inspection-id","car","form","head","triggeredPoints"])):I("",!0)],512),[[rt,Qe.value&&k.value!=="conclusion"]]),N(i("div",gs,[ke(Rn,{form:{conclusion:M.value},"inspection-id":E.inspection.id,inspection:E.inspection,settings:E.inspection.settings||{},onUpdateConclusion:Sn},null,8,["form","inspection-id","inspection","settings"])],512),[[rt,k.value==="conclusion"]])]),k.value==="conclusion"?(x(),_("div",{key:0,class:q(["flex justify-end gap-4 mt-2 p-4 bg-white rounded-xl shadow-md",{"mb-4":L.value==="top","mb-20":L.value==="bottom"}])},[ke(f(On),{href:t.route("inspections.pending",E.inspectionId),as:"button",type:"button",disabled:Ee.value&&Ae.value==="pending",onClick:e[11]||(e[11]=Ht(o=>rn(t.route("inspections.pending",E.inspectionId),"pending"),["prevent"])),class:"inline-flex items-center justify-center px-3 py-1.5 text-sm font-medium rounded-md shadow-sm bg-yellow-500 text-white hover:bg-yellow-600 transition disabled:opacity-50 disabled:cursor-not-allowed"},{default:lt(()=>[Ee.value&&Ae.value==="pending"?(x(),_(Re,{key:0},[e[38]||(e[38]=i("svg",{class:"animate-spin h-4 w-4 text-white mr-2",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[i("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),i("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)),e[39]||(e[39]=i("span",null,"Memproses...",-1))],64)):(x(),_("span",fs,"Tunda"))]),_:1},8,["href","disabled"]),i("button",{type:"button",onClick:In,disabled:!Dt.value||se.value,class:"w-full inline-flex items-center justify-center px-6 py-3 border border-transparent text-base font-medium rounded-md shadow-sm bg-gradient-to-r from-indigo-700 to-sky-600 shadow-lg text-white focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition duration-150 ease-in-out disabled:opacity-50 disabled:cursor-not-allowed"},[se.value?(x(),_("svg",ps,e[40]||(e[40]=[i("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),i("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):I("",!0),i("span",null,Y(se.value?"Mengirim...":"Final Kirim Inspeksi"),1)],8,ms)],2)):I("",!0),cn.value?(x(),_("button",{key:1,onMousedown:e[12]||(e[12]=(...o)=>f(De)&&f(De)(...o)),onMouseup:e[13]||(e[13]=(...o)=>f(Pe)&&f(Pe)(...o)),onMouseleave:e[14]||(e[14]=(...o)=>f(xt)&&f(xt)(...o)),onMousemove:e[15]||(e[15]=(...o)=>f(Le)&&f(Le)(...o)),onTouchstart:e[16]||(e[16]=(...o)=>f(De)&&f(De)(...o)),onTouchend:e[17]||(e[17]=(...o)=>f(Pe)&&f(Pe)(...o)),onTouchmove:e[18]||(e[18]=(...o)=>f(Le)&&f(Le)(...o)),onClick:ln,class:"fixed z-5 p-4 bg-gradient-to-r from-indigo-700 to-sky-600 text-white rounded-full shadow-lg",style:Ut({left:f(ht).x+"px",top:f(ht).y+"px"})},e[41]||(e[41]=[i("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[i("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 4v16m8-8H4"})],-1)]),36)):I("",!0),ke(Un,{show:Te.value,title:"Cari Point Inspeksi",subtitle:"Pilih point inspeksi untuk ditambahkan",onClose:Tt},{default:lt(()=>[i("button",{onClick:Tt,class:"absolute top-4 right-4 text-gray-400 hover:text-gray-600 transition-colors z-10"},e[42]||(e[42]=[i("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[i("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])),i("div",vs,[i("div",hs,[N(i("input",{"onUpdate:modelValue":e[19]||(e[19]=o=>oe.value=o),type:"text",placeholder:"Cari point inspeksi...",class:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"},null,512),[[Fn,oe.value]]),e[43]||(e[43]=i("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[i("svg",{class:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[i("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})])],-1))]),i("div",xs,[Ct.value.length===0?(x(),_("div",ys," Tidak ada point yang ditemukan ")):I("",!0),(x(!0),_(Re,null,at(Ct.value,o=>{var K,$;return x(),_("button",{key:o.id,onClick:te=>yn(o),class:"w-full text-left p-3 border-b border-gray-200 hover:bg-gray-50 transition-colors"},[i("div",ws,Y((K=o.inspection_point)==null?void 0:K.name),1),i("div",bs,Y(($=o.inspection_point)==null?void 0:$.description),1),i("div",ks,Y(It(o)),1),St(o.inspection_point_id)?(x(),_("div",Cs," ✓ Sudah ada data ")):I("",!0)],8,_s)}),128))])])]),_:1},8,["show"]),Ve.value?(x(),Kt(Kn,{key:(g=D.value)==null?void 0:g.id,show:Ve.value,title:((w=(u=D.value)==null?void 0:u.inspection_point)==null?void 0:w.name)||"Detail Point",subtitle:(c=(s=D.value)==null?void 0:s.inspection_point)==null?void 0:c.description,name:`point-${(n=D.value)==null?void 0:n.id}`,"inspection-id":E.inspection.id,"point-id":(v=D.value)==null?void 0:v.inspection_point_id,settings:((r=D.value)==null?void 0:r.settings)||{},options:((P=(C=D.value)==null?void 0:C.settings)==null?void 0:P.radios)||[],"selected-Point":D.value,"selected-value":ae.value,"images-value":f(m).images[(R=D.value)==null?void 0:R.inspection_point_id],"notes-value":le.value,point:D.value,"existing-data":gn((F=D.value)==null?void 0:F.inspection_point_id),"onUpdate:selectedValue":e[20]||(e[20]=o=>ae.value=o),"onUpdate:notesValue":e[21]||(e[21]=o=>le.value=o),"onUpdate:imagesValue":_n,onSave:wn,onClose:st,onHapus:Pt},null,8,["show","title","subtitle","name","inspection-id","point-id","settings","options","selected-Point","selected-value","images-value","notes-value","point","existing-data"])):I("",!0),qe.value?(x(),_("div",Ss,e[44]||(e[44]=[i("p",{class:"text-sm"},"Tekan sekali lagi untuk keluar dari inspeksi",-1),i("p",{class:"text-xs text-gray-300 mt-1"},"Data inspeksi telah disimpan secara lokal",-1)]))):I("",!0),et.value?(x(),_("div",{key:4,class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",onClick:tt},[i("div",{class:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4 max-h-[80vh] overflow-y-auto",onClick:e[29]||(e[29]=Ht(()=>{},["stop"]))},[i("div",{class:"flex items-center justify-between p-4 border-b"},[e[46]||(e[46]=i("h3",{class:"text-lg font-semibold text-gray-900"},"Pengaturan Inspeksi",-1)),i("button",{onClick:tt,class:"text-gray-400 hover:text-gray-600 transition-colors"},e[45]||(e[45]=[i("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[i("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),i("div",Is,[i("div",Ms,[e[47]||(e[47]=i("div",null,[i("label",{class:"text-sm font-medium text-gray-700"},"Swipe Gesture"),i("p",{class:"text-xs text-gray-500"},"Aktifkan navigasi dengan geser")],-1)),i("button",{onClick:mn,type:"button",class:q(["relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",B.value?"bg-indigo-600":"bg-gray-200"]),role:"switch","aria-checked":B.value},[i("span",{"aria-hidden":"true",class:q(["pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out",B.value?"translate-x-5":"translate-x-0"])},null,2)],10,Ds)]),i("div",Ls,[e[49]||(e[49]=i("label",{class:"text-sm font-medium text-gray-700"},"Sumber Gambar",-1)),N(i("select",{"onUpdate:modelValue":e[22]||(e[22]=o=>Z.value=o),onChange:pn,class:"w-full text-sm border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"},e[48]||(e[48]=[i("option",{value:"all"},"Tanya",-1),i("option",{value:"camera"},"Kamera",-1),i("option",{value:"gallery"},"Galeri",-1)]),544),[[ut,Z.value]])]),i("div",Ps,[e[51]||(e[51]=i("label",{class:"text-sm font-medium text-gray-700"},"Kualitas Kamera",-1)),N(i("select",{"onUpdate:modelValue":e[23]||(e[23]=o=>W.value=o),class:"w-full text-sm border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"},e[50]||(e[50]=[jn('<option value="HP_Native" data-v-57ce1441>Kamera HP</option><option value="HD_Std" data-v-57ce1441>HD Std</option><option value="4K" data-v-57ce1441>4K Rtc</option><option value="HD" data-v-57ce1441>HD Rtc</option><option value="SD" data-v-57ce1441>SD Rtc</option>',5)]),512),[[ut,W.value]])]),i("div",Ts,[e[54]||(e[54]=i("label",{class:"text-sm font-medium text-gray-700"},"Mode Menu",-1)),i("div",Vs,[i("label",Es,[N(i("input",{type:"radio","onUpdate:modelValue":e[24]||(e[24]=o=>A.value=o),value:"horizontal",class:"text-indigo-600 focus:ring-indigo-500"},null,512),[[Ue,A.value]]),e[52]||(e[52]=i("span",{class:"ml-2 text-sm text-gray-700"},"Scroll samping",-1))]),i("label",As,[N(i("input",{type:"radio","onUpdate:modelValue":e[25]||(e[25]=o=>A.value=o),value:"vertical",class:"text-indigo-600 focus:ring-indigo-500"},null,512),[[Ue,A.value]]),e[53]||(e[53]=i("span",{class:"ml-2 text-sm text-gray-700"},"Menu Ngambang",-1))])])]),A.value==="horizontal"?(x(),_("div",Os,[e[57]||(e[57]=i("label",{class:"text-sm font-medium text-gray-700"},"Posisi Menu",-1)),i("div",Fs,[i("label",js,[N(i("input",{type:"radio","onUpdate:modelValue":e[26]||(e[26]=o=>L.value=o),value:"top",class:"text-indigo-600 focus:ring-indigo-500"},null,512),[[Ue,L.value]]),e[55]||(e[55]=i("span",{class:"ml-2 text-sm text-gray-700"},"Atas",-1))]),i("label",qs,[N(i("input",{type:"radio","onUpdate:modelValue":e[27]||(e[27]=o=>L.value=o),value:"bottom",class:"text-indigo-600 focus:ring-indigo-500"},null,512),[[Ue,L.value]]),e[56]||(e[56]=i("span",{class:"ml-2 text-sm text-gray-700"},"Bawah",-1))])])])):I("",!0),A.value==="vertical"?(x(),_("div",zs,[e[59]||(e[59]=i("label",{class:"text-sm font-medium text-gray-700"},"Posisi Menu Vertikal",-1)),N(i("select",{"onUpdate:modelValue":e[28]||(e[28]=o=>L.value=o),class:"w-full text-sm border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"},e[58]||(e[58]=[i("option",{value:"top-right"},"Atas Kanan",-1),i("option",{value:"top-left"},"Atas Kiri",-1),i("option",{value:"bottom-right"},"Bawah Kanan",-1),i("option",{value:"bottom-left"},"Bawah Kiri",-1)]),512),[[ut,L.value]])])):I("",!0)]),i("div",{class:"flex justify-end p-4 border-t bg-gray-50"},[i("button",{onClick:tt,class:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2"}," Tutup ")])])])):I("",!0)],2)])}}},Qs=Hn(Bs,[["__scopeId","data-v-57ce1441"]]);export{Qs as default};
