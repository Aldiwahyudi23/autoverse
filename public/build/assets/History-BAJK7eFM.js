import{r as w,q as k,j as $,o as n,w as H,k as E,d as e,u as G,v as K,c as r,b as m,t as a,z as h,F as v,m as _,H as D,n as Q,f as C,W as M}from"./vendor-D9AtPSqO.js";import{A as X}from"./AppLayout-C-o7je2P.js";import"./app-DD5nWmYF.js";const Z={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6"},ee={class:"mb-6"},te={class:"text-gray-600 mt-2"},se={class:"mb-6 bg-white shadow rounded-lg p-4"},oe={class:"grid grid-cols-3 md:grid-cols-3 lg:grid-cols-5 gap-4"},ne=["value"],re=["disabled"],ae=["value","disabled"],le={key:0},ie=["value"],de={key:1},ue=["value"],me={key:0,class:"mt-4 flex justify-end"},pe={key:0,class:"mb-4 grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4"},ge={class:"bg-white shadow rounded-lg p-4"},ce={class:"flex items-center"},xe={class:"ml-4"},ve={class:"text-lg font-semibold text-gray-900"},fe={class:"bg-white shadow rounded-lg p-4"},ye={class:"flex items-center"},be={class:"ml-4"},we={class:"text-lg font-semibold text-gray-900"},ke={class:"bg-white shadow rounded-lg p-4"},he={class:"flex items-center"},_e={class:"ml-4"},De={class:"text-lg font-semibold text-gray-900"},Ce={class:"bg-white shadow rounded-lg p-4"},Me={class:"flex items-center"},Se={class:"ml-4"},Be={class:"text-lg font-semibold text-gray-900"},Te={class:"bg-white shadow rounded-lg overflow-hidden"},Ae={key:0,class:"text-center py-12 text-gray-500"},je={class:"mt-1 text-sm text-gray-500"},Fe={key:1,class:"overflow-x-auto"},Re={class:"min-w-full divide-y divide-gray-200"},Ue={class:"bg-gray-50"},Ve={key:0,class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},qe={class:"bg-white divide-y divide-gray-200"},ze={key:0,class:"px-6 py-4 whitespace-nowrap"},Ne={class:"flex items-center"},Pe={class:"flex-shrink-0 h-10 w-10"},Ie={class:"h-10 w-10 rounded-full bg-blue-100 flex items-center justify-center"},We={class:"text-blue-600 font-medium"},Le={class:"ml-4"},Ye={class:"text-sm font-medium text-gray-900"},Je={class:"text-xs text-gray-500"},Oe={class:"px-6 py-4 whitespace-nowrap"},$e={class:"flex items-center"},He=["onClick"],Ee={key:0,class:"ml-2"},Ge={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"},Ke={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},Qe={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"},Xe={class:"px-6 py-4 whitespace-nowrap"},Ze={class:"text-sm text-gray-900"},et={key:0,class:"text-xs text-gray-500"},tt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},st={class:"text-xs text-gray-400"},ot={class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},nt=["onClick"],rt={key:1,disabled:"",class:"inline-flex items-center px-3 py-1.5 border border-gray-300 text-xs font-medium rounded-md text-gray-500 bg-gray-100 cursor-not-allowed"},at={key:1,class:"text-gray-400 text-xs"},lt={key:0,class:"px-6 py-3 bg-gray-50 border-t border-gray-200"},it={class:"flex justify-between items-center"},dt={class:"text-sm text-gray-600"},ut={class:"font-medium"},mt={key:0},pt={class:"text-sm text-gray-600"},gt={class:"font-bold text-blue-600"},ft={__name:"History",props:{withdrawals:{type:Array,required:!0},filters:{type:Object,default:()=>({})},is_admin_or_coordinator:{type:Boolean,default:!1},regions:{type:Array,default:()=>[]},all_users:{type:Array,default:()=>[]},available_years:{type:Array,default:()=>[]},current_user_id:{type:Number,required:!0}},setup(d){const l=d,i=w(l.filters.year||""),g=w(l.filters.month||""),c=w(l.filters.status||""),f=w(l.filters.region_id||""),p=w(l.filters.user_id||""),R=["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"],U=o=>i.value?l.withdrawals.some(t=>{const s=new Date(t.requested_at);return s.getFullYear()===parseInt(i.value)&&s.getMonth()+1===o}):!0,u=k(()=>{let o=[...l.withdrawals];if(i.value){const t=parseInt(i.value);o=o.filter(s=>new Date(s.requested_at).getFullYear()===t)}if(g.value){const t=parseInt(g.value);o=o.filter(s=>new Date(s.requested_at).getMonth()+1===t)}return c.value&&(o=o.filter(t=>t.status===c.value)),l.is_admin_or_coordinator&&p.value&&(o=o.filter(t=>t.user_id==p.value)),o.sort((t,s)=>new Date(s.requested_at)-new Date(t.requested_at))}),B=k(()=>u.value.reduce((o,t)=>o+parseFloat(t.total_amount),0)),V=k(()=>u.value.filter(o=>o.status==="completed").length),q=k(()=>u.value.filter(o=>o.status==="pending").length),S=k(()=>{const o=i.value||g.value||c.value;return l.is_admin_or_coordinator?o||f.value||p.value:o}),b=()=>{const o={};i.value&&(o.year=i.value),g.value&&(o.month=g.value),c.value&&(o.status=c.value),l.is_admin_or_coordinator&&(f.value&&(o.region_id=f.value),p.value&&(o.user_id=p.value)),M.get(route("withdrawals.history"),o,{preserveState:!0,preserveScroll:!0,replace:!0})},z=()=>{p.value="",b()},T=()=>{i.value="",g.value="",c.value="",l.is_admin_or_coordinator&&(f.value="",p.value=""),M.get(route("withdrawals.history"),{},{preserveState:!0,preserveScroll:!0,replace:!0})},N=o=>({pending:"Pending",approved:"Dikirim",processing:"Diproses",completed:"Selesai",rejected:"Ditolak"})[o]||o,P=o=>({pending:"bg-yellow-100 text-yellow-800",approved:"bg-green-100 text-green-800 border border-green-200",processing:"bg-indigo-100 text-indigo-800",completed:"bg-blue-100 text-blue-800",rejected:"bg-red-100 text-red-800"})[o]||"bg-gray-100 text-gray-800",I=o=>({transfer:"Transfer",cash:"Tunai"})[o]||o,W=o=>{M.visit(route("withdrawal.show",o))},L=o=>{confirm("Apakah Anda yakin telah menerima dana penarikan ini? Dana akan ditandai sebagai selesai dan tidak dapat dikembalikan.")&&M.post(route("withdrawal.complete",o.id),{preserveScroll:!0,onSuccess:()=>M.reload()})},y=o=>new Intl.NumberFormat("id-ID").format(o||0),Y=o=>new Date(o).toLocaleDateString("id-ID",{day:"2-digit",month:"2-digit",year:"numeric"}),J=o=>new Date(o).toLocaleTimeString("id-ID",{hour:"2-digit",minute:"2-digit"});return(o,t)=>(n(),$(X,{title:"Riwayat Penarikan"},{default:H(()=>[E(G(K),{title:"Riwayat Penarikan"}),e("div",Z,[e("div",ee,[t[5]||(t[5]=e("h1",{class:"text-2xl font-bold text-gray-900"},"Riwayat Penarikan Dana",-1)),e("p",te,"Daftar semua pengajuan penarikan "+a(d.is_admin_or_coordinator?"sistem":"Anda"),1)]),e("div",se,[e("div",oe,[e("div",null,[t[7]||(t[7]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"}," Tahun ",-1)),h(e("select",{"onUpdate:modelValue":t[0]||(t[0]=s=>i.value=s),onChange:b,class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"},[t[6]||(t[6]=e("option",{value:""},"Semua Tahun",-1)),(n(!0),r(v,null,_(o.availableYears,s=>(n(),r("option",{key:s,value:s},a(s),9,ne))),128))],544),[[D,i.value]])]),e("div",null,[t[9]||(t[9]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"}," Bulan ",-1)),h(e("select",{"onUpdate:modelValue":t[1]||(t[1]=s=>g.value=s),onChange:b,disabled:!i.value,class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"},[t[8]||(t[8]=e("option",{value:""},"Semua Bulan",-1)),(n(),r(v,null,_(R,(s,x)=>e("option",{key:x,value:x+1,disabled:!U(x+1)},a(s),9,ae)),64))],40,re),[[D,g.value]])]),e("div",null,[t[11]||(t[11]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"}," Status ",-1)),h(e("select",{"onUpdate:modelValue":t[2]||(t[2]=s=>c.value=s),onChange:b,class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"},t[10]||(t[10]=[e("option",{value:""},"Semua Status",-1),e("option",{value:"pending"},"Pending",-1),e("option",{value:"approved"},"Dikirim",-1),e("option",{value:"processing"},"Diproses",-1),e("option",{value:"completed"},"Selesai",-1),e("option",{value:"rejected"},"Ditolak",-1)]),544),[[D,c.value]])]),d.is_admin_or_coordinator?(n(),r("div",le,[t[14]||(t[14]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"}," Wilayah ",-1)),h(e("select",{"onUpdate:modelValue":t[3]||(t[3]=s=>f.value=s),onChange:z,class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"},[t[12]||(t[12]=e("option",{value:""},"Semua Wilayah",-1)),t[13]||(t[13]=e("option",{value:"all"},"Semua Wilayah",-1)),(n(!0),r(v,null,_(d.regions,s=>(n(),r("option",{key:s.id,value:s.id},a(s.name),9,ie))),128))],544),[[D,f.value]])])):m("",!0),d.is_admin_or_coordinator?(n(),r("div",de,[t[16]||(t[16]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"}," User ",-1)),h(e("select",{"onUpdate:modelValue":t[4]||(t[4]=s=>p.value=s),onChange:b,class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"},[t[15]||(t[15]=e("option",{value:""},"Semua User",-1)),(n(!0),r(v,null,_(d.all_users,s=>(n(),r("option",{key:s.id,value:s.id},a(s.name),9,ue))),128))],544),[[D,p.value]])])):m("",!0)]),S.value?(n(),r("div",me,[e("button",{onClick:T,class:"px-3 py-1.5 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"}," Reset Filter ")])):m("",!0)]),u.value.length>0?(n(),r("div",pe,[e("div",ge,[e("div",ce,[t[18]||(t[18]=e("div",{class:"flex-shrink-0 bg-blue-100 rounded-md p-3"},[e("svg",{class:"h-6 w-6 text-blue-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),e("div",xe,[t[17]||(t[17]=e("p",{class:"text-sm font-medium text-gray-600"},"Total Penarikan",-1)),e("p",ve,a(u.value.length),1)])])]),e("div",fe,[e("div",ye,[t[20]||(t[20]=e("div",{class:"flex-shrink-0 bg-green-100 rounded-md p-3"},[e("svg",{class:"h-6 w-6 text-green-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),e("div",be,[t[19]||(t[19]=e("p",{class:"text-sm font-medium text-gray-600"},"Total Dana",-1)),e("p",we,"Rp "+a(y(B.value)),1)])])]),e("div",ke,[e("div",he,[t[22]||(t[22]=e("div",{class:"flex-shrink-0 bg-purple-100 rounded-md p-3"},[e("svg",{class:"h-6 w-6 text-purple-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})])],-1)),e("div",_e,[t[21]||(t[21]=e("p",{class:"text-sm font-medium text-gray-600"},"Berhasil",-1)),e("p",De,a(V.value)+" dari "+a(u.value.length),1)])])]),e("div",Ce,[e("div",Me,[t[24]||(t[24]=e("div",{class:"flex-shrink-0 bg-yellow-100 rounded-md p-3"},[e("svg",{class:"h-6 w-6 text-yellow-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),e("div",Se,[t[23]||(t[23]=e("p",{class:"text-sm font-medium text-gray-600"},"Pending",-1)),e("p",Be,a(q.value),1)])])])])):m("",!0),e("div",Te,[u.value.length===0?(n(),r("div",Ae,[S.value?(n(),r(v,{key:0},[t[25]||(t[25]=e("svg",{class:"h-12 w-12 mx-auto text-gray-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),t[26]||(t[26]=e("h3",{class:"mt-2 text-sm font-medium text-gray-900"},"Tidak ditemukan",-1)),t[27]||(t[27]=e("p",{class:"mt-1 text-sm text-gray-500"}," Tidak ada data penarikan dengan filter yang dipilih ",-1)),e("button",{onClick:T,class:"mt-4 inline-flex items-center px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"}," Tampilkan semua ")],64)):(n(),r(v,{key:1},[t[28]||(t[28]=e("svg",{class:"h-12 w-12 mx-auto text-gray-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),t[29]||(t[29]=e("h3",{class:"mt-2 text-sm font-medium text-gray-900"},"Belum ada riwayat penarikan",-1)),e("p",je,a(d.is_admin_or_coordinator?"Belum ada data penarikan di sistem":"Anda belum melakukan pengajuan penarikan."),1)],64))])):(n(),r("div",Fe,[e("table",Re,[e("thead",Ue,[e("tr",null,[d.is_admin_or_coordinator?(n(),r("th",Ve," User ")):m("",!0),t[30]||(t[30]=e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Status ",-1)),t[31]||(t[31]=e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Total ",-1)),t[32]||(t[32]=e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Biaya Admin ",-1)),t[33]||(t[33]=e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Diterima ",-1)),t[34]||(t[34]=e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Metode ",-1)),t[35]||(t[35]=e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Tanggal ",-1)),t[36]||(t[36]=e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Aksi ",-1))])]),e("tbody",qe,[(n(!0),r(v,null,_(u.value,s=>{var x,A,j,F;return n(),r("tr",{key:s.id},[d.is_admin_or_coordinator?(n(),r("td",ze,[e("div",Ne,[e("div",Pe,[e("div",Ie,[e("span",We,a(((A=(x=s.user)==null?void 0:x.name)==null?void 0:A.charAt(0))||"U"),1)])]),e("div",Le,[e("div",Ye,a(((j=s.user)==null?void 0:j.name)||"Unknown User"),1),e("div",Je,a(((F=s.user)==null?void 0:F.email)||""),1)])])])):m("",!0),e("td",Oe,[e("div",$e,[e("button",{onClick:O=>W(s.id),class:Q(`${P(s.status)} px-3 py-1 inline-flex text-xs leading-5 font-semibold rounded-full hover:opacity-80 transition-opacity cursor-pointer`)},a(N(s.status)),11,He),s.status==="approved"?(n(),r("div",Ee,t[37]||(t[37]=[e("span",{class:"animate-ping absolute h-2 w-2 rounded-full bg-green-400 opacity-75"},null,-1),e("span",{class:"relative h-2 w-2 rounded-full bg-green-500"},null,-1)]))):m("",!0)])]),e("td",Ge," Rp "+a(y(s.total_amount)),1),e("td",Ke,a(s.admin_fee>0?"Rp "+y(s.admin_fee):"Gratis"),1),e("td",Qe,a(s.final_amount?"Rp "+y(s.final_amount):"Rp "+y(s.total_amount)),1),e("td",Xe,[e("div",Ze,a(I(s.payment_method)),1),s.bank_name?(n(),r("div",et,a(s.bank_name),1)):m("",!0)]),e("td",tt,[e("div",null,a(Y(s.requested_at)),1),e("div",st,a(J(s.requested_at)),1)]),e("td",ot,[s.status==="approved"?(n(),r(v,{key:0},[s.user_id===d.current_user_id?(n(),r("button",{key:0,onClick:O=>L(s),class:"inline-flex items-center px-3 py-1.5 border border-transparent text-xs font-medium rounded-md text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 transition-colors duration-200"},t[38]||(t[38]=[e("svg",{class:"h-4 w-4 mr-1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"})],-1),C(" Konfirmasi Diterima ")]),8,nt)):(n(),r("button",rt,t[39]||(t[39]=[e("svg",{class:"h-4 w-4 mr-1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z","clip-rule":"evenodd"})],-1),C(" Menunggu Diterima ")])))],64)):(n(),r("span",at,"-"))])])}),128))])]),u.value.length>0?(n(),r("div",lt,[e("div",it,[e("div",dt,[t[40]||(t[40]=C(" Menampilkan ")),e("span",ut,a(u.value.length),1),t[41]||(t[41]=C(" data ")),S.value?(n(),r("span",mt," (difilter) ")):m("",!0)]),e("div",pt,[t[42]||(t[42]=C(" Total: ")),e("span",gt,"Rp "+a(y(B.value)),1)])])])):m("",!0)]))])])]),_:1}))}};export{ft as default};
