import{x as V,r as d,g as H,P as F,L as K,j as G,o as s,w as U,k as q,d as o,u as f,v as P,c as l,b as n,t as y,z as Q,A as R,F as I,m as z,f as A,y as _}from"./vendor-D9AtPSqO.js";import{l as J}from"./lodash-BHkPC8MA.js";import{A as O}from"./AppLayout-C-o7je2P.js";import"./app-DD5nWmYF.js";const W={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6 relative"},X={class:"space-y-6 bg-white rounded-xl shadow-md p-6"},Y={class:"flex justify-between items-center mb-6"},Z=["href"],ee={key:0,class:"mb-4 text-sm text-red-600 bg-red-100 p-3 rounded-md"},te={class:"mb-6"},oe={class:"relative"},se={key:0,class:"absolute right-3 top-3"},le={key:1,class:"absolute z-10 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-60 overflow-y-auto"},re={key:0},ae=["onMousedown"],ne={class:"font-medium text-gray-900"},ie={key:1,class:"p-4 text-sm text-gray-500 text-center"},ue={key:1,class:"mb-6 p-4 bg-gray-50 rounded-lg border border-gray-200"},de={key:0,class:"mb-4"},ce=["innerHTML"],ve={key:1},pe={class:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3"},me=["onClick"],ge=["src","alt"],fe={key:0,class:"absolute inset-0 bg-black bg-opacity-50 opacity-0 group-hover:opacity-100 transition-opacity rounded-lg flex items-center justify-center p-2"},ye={class:"text-white text-xs text-center"},he={key:2,class:"text-center py-4 text-gray-500 text-sm"},be={class:"relative max-w-4xl max-h-full w-full h-full flex items-center justify-center"},xe=["src","alt"],we={key:2,class:"absolute bottom-4 left-1/2 transform -translate-x-1/2 text-white bg-black bg-opacity-50 px-3 py-1 rounded-full text-sm"},ke={key:3,class:"absolute bottom-4 left-4 text-white bg-black bg-opacity-50 px-3 py-1 rounded text-sm max-w-md"},je={__name:"Detail",props:{CarDetail:Array},setup(T){const D=T,c=V({car_id:null,car_name:""}),p=d(""),m=d(!1),w=d(!1),b=d([]),v=d(null),a=d([]),x=d(!1),i=d(0),h=t=>{var u,r,g;if(!t)return"";const e=[];return(u=t.brand)!=null&&u.name&&e.push(t.brand.name),(r=t.model)!=null&&r.name&&e.push(t.model.name),(g=t.type)!=null&&g.name&&e.push(t.type.name),t.cc&&e.push(`${t.cc}cc`),t.transmission&&e.push(t.transmission),t.fuel_type&&e.push(t.fuel_type),t.year&&e.push(t.year.toString()),t.production_period&&e.push(`(${t.production_period})`),e.join(" ")},C=J.debounce(()=>{if(!p.value.trim()){b.value=[],m.value=!1;return}w.value=!0;const t=p.value.toLowerCase().trim();b.value=D.CarDetail.filter(e=>h(e).toLowerCase().includes(t)),m.value=!0,w.value=!1},300),S=()=>{setTimeout(()=>{m.value=!1},200)},$=async t=>{v.value=t,p.value=h(t),c.car_id=t.id,c.car_name=h(t),m.value=!1,await E(t.id)},E=async t=>{try{const e=await fetch(`/api/cars/${t}/images`);if(e.ok){const u=await e.json();a.value=Array.isArray(u)?u:[]}else a.value=[]}catch(e){console.error("Error loading car images:",e),a.value=[]}},M=t=>t!=null&&t.file_path?`/storage/${t.file_path}`:"",N=t=>{i.value=t,x.value=!0,document.body.style.overflow="hidden"},k=()=>{x.value=!1,document.body.style.overflow=""},L=()=>{i.value=(i.value+1)%a.value.length},B=()=>{i.value=(i.value-1+a.value.length)%a.value.length},j=t=>{x.value&&(t.key==="Escape"&&k(),t.key==="ArrowRight"&&L(),t.key==="ArrowLeft"&&B())};return H(()=>window.addEventListener("keydown",j)),F(()=>window.removeEventListener("keydown",j)),K(p,t=>{(!v.value||h(v.value)!==t)&&(c.car_id=null,c.car_name=t,v.value=null,a.value=[])}),(t,e)=>(s(),G(O,{title:"Kendaraan"},{default:U(()=>{var u;return[q(f(P),{title:"Inspek Baru"}),o("div",W,[o("div",X,[o("div",Y,[e[5]||(e[5]=o("h3",{class:"text-xl md:text-3xl font-bold text-gray-900 text-center flex-grow"}," Data Detail Kendaraan ",-1)),o("a",{href:t.route("car.create"),class:"ml-4"},e[4]||(e[4]=[o("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-8 w-8 text-indigo-600 hover:text-indigo-800 transition-colors",viewBox:"0 0 24 24",fill:"currentColor"},[o("path",{"fill-rule":"evenodd",d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm5 11h-4v4h-2v-4H7v-2h4V7h2v4h4v2z","clip-rule":"evenodd"})],-1)]),8,Z)]),f(c).errors.form_error?(s(),l("div",ee,y(f(c).errors.form_error),1)):n("",!0),o("div",te,[e[8]||(e[8]=o("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Nama Mobil ",-1)),o("div",oe,[Q(o("input",{"onUpdate:modelValue":e[0]||(e[0]=r=>p.value=r),type:"text",placeholder:"Cari atau ketik nama mobil...",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors",onInput:e[1]||(e[1]=(...r)=>f(C)&&f(C)(...r)),onFocus:e[2]||(e[2]=r=>m.value=!0),onBlur:S},null,544),[[R,p.value]]),w.value?(s(),l("div",se,e[6]||(e[6]=[o("svg",{class:"animate-spin h-5 w-5 text-gray-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[o("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),o("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)]))):n("",!0),m.value?(s(),l("div",le,[b.value.length>0?(s(),l("div",re,[(s(!0),l(I,null,z(b.value,r=>(s(),l("div",{key:r.id,class:"px-4 py-2 hover:bg-gray-50 cursor-pointer border-b border-gray-100 last:border-b-0",onMousedown:g=>$(r)},[o("div",ne,y(h(r)),1)],40,ae))),128))])):(s(),l("div",ie,e[7]||(e[7]=[A(" Tidak ada data mobil yang cocok. "),o("br",null,null,-1),A(" Silakan input manual dengan format: "),o("br",null,null,-1),o("span",{class:"font-medium text-gray-800"},"Toyota Avanza 1.5 G AT Bensin 2019",-1)])))])):n("",!0)])]),f(c).car_id&&v.value?(s(),l("div",ue,[v.value.description?(s(),l("div",de,[e[9]||(e[9]=o("h3",{class:"text-sm font-medium text-gray-700 mb-2"},"Deskripsi:",-1)),o("div",{class:"prose prose-sm max-w-none text-gray-600",innerHTML:v.value.description},null,8,ce)])):n("",!0),a.value.length>0?(s(),l("div",ve,[e[10]||(e[10]=o("h3",{class:"text-sm font-medium text-gray-700 mb-3"},"Gambar Mobil:",-1)),o("div",pe,[(s(!0),l(I,null,z(a.value,(r,g)=>(s(),l("div",{key:r.id||g,class:"relative group cursor-pointer",onClick:_e=>N(g)},[o("img",{src:M(r),alt:r.name||"Car Image",class:"w-full h-24 object-cover rounded-lg border border-gray-200 transition-transform duration-200 group-hover:scale-105"},null,8,ge),r.note?(s(),l("div",fe,[o("p",ye,y(r.note),1)])):n("",!0)],8,me))),128))])])):(s(),l("div",he," Tidak ada gambar tersedia untuk mobil ini "))])):n("",!0),x.value?(s(),l("div",{key:2,class:"fixed inset-0 bg-black bg-opacity-90 z-50 flex items-center justify-center p-4",onClick:k},[o("div",be,[o("button",{onClick:k,class:"absolute top-4 right-4 z-10 text-white bg-black bg-opacity-50 rounded-full p-2 hover:bg-opacity-70 transition-colors"},e[11]||(e[11]=[o("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])),a.value.length>1?(s(),l("button",{key:0,onClick:_(B,["stop"]),class:"absolute left-4 z-10 text-white bg-black bg-opacity-50 rounded-full p-3 hover:bg-opacity-70 transition-colors"},e[12]||(e[12]=[o("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)]))):n("",!0),a.value.length>1?(s(),l("button",{key:1,onClick:_(L,["stop"]),class:"absolute right-4 z-10 text-white bg-black bg-opacity-50 rounded-full p-3 hover:bg-opacity-70 transition-colors"},e[13]||(e[13]=[o("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)]))):n("",!0),o("img",{src:M(a.value[i.value]),alt:"Car Image "+(i.value+1),class:"max-w-full max-h-full object-contain",onClick:e[3]||(e[3]=_(()=>{},["stop"]))},null,8,xe),a.value.length>1?(s(),l("div",we,y(i.value+1)+" / "+y(a.value.length),1)):n("",!0),(u=a.value[i.value])!=null&&u.note?(s(),l("div",ke,y(a.value[i.value].note),1)):n("",!0)])])):n("",!0)])])]}),_:1}))}};export{je as default};
