import{p as Lt,r as c,q as L,g as St,L as Rt,c as o,o as n,d as e,b as g,k as rt,t as i,F as A,J as _e,m as V,y as Ke,n as $,a as At,D as it,f as Ft}from"./vendor-D9AtPSqO.js";import{_ as Kt,a as $t}from"./RepairEstimationSection-B8-Ix0eX.js";import{_ as zt}from"./app-lVSMz3ZX.js";const Ht={class:"flex flex-col lg:grid lg:grid-cols-12 gap-4"},Ot={class:"p-4 md:p-6 bg-white rounded-lg shadow-md lg:col-span-7"},Yt={key:0,class:"mb-4 p-4 bg-green-100 border border-green-400 text-green-700 rounded"},Gt={class:"flex"},Xt={key:1,class:"mb-4 p-4 bg-red-100 border border-red-400 text-red-700 rounded"},Ut={class:"flex"},Wt={key:2},Vt={class:"header flex flex-col gap-5 mb-6 mt-2 md:mt-6"},Zt={class:"flex flex-col md:flex-row items-center md:items-start gap-5"},qt={class:"flex-shrink-0"},Jt=["src"],Qt={key:1,class:"w-32 h-32 md:w-48 md:h-48 border border-gray-300 rounded-lg flex items-center justify-center bg-gray-100 text-gray-400"},es={class:"text-center md:text-left mt-2 md:mt-8"},ts={class:"text-2xl md:text-3xl font-bold m-0 text-gray-800"},ss={key:0,class:"car-info"},os={class:"w-full border-collapse border border-gray-300 rounded-lg overflow-hidden text-sm md:text-base"},ns={class:"bg-gray-50"},as={class:"p-2 border border-gray-300 text-gray-600"},rs={class:"bg-gray-50"},is={class:"p-2 border border-gray-300 text-gray-600"},ls={class:"p-2 border border-gray-300 text-gray-600"},ds={class:"bg-gray-50"},us={class:"p-2 border border-gray-300 text-gray-600"},cs={class:"p-2 border border-gray-300 text-gray-600"},ms={class:"bg-gray-50"},ps={class:"p-2 border border-gray-300 text-gray-600"},gs={class:"p-2 border border-gray-300 text-gray-600"},vs={class:"bg-gray-50"},hs={class:"p-2 border border-gray-300 text-gray-600"},fs={class:"p-2 border border-gray-300 text-gray-600"},bs={class:"bg-gray-50"},ys={class:"p-2 border border-gray-300 text-gray-600"},xs={class:"bg-gray-50"},ks={class:"p-2 border border-gray-300 text-gray-600"},ws={class:"bg-gray-50"},_s={class:"p-2 border border-gray-300 text-gray-600"},js={class:"bg-gray-50"},Cs={class:"p-2 border border-gray-300 text-gray-600"},Ms={class:"bg-gray-50"},Is={class:"p-2 border border-gray-300 text-gray-600"},Ts={key:1,class:"flex flex-col md:flex-row gap-4 mt-4"},Ds={class:"flex-1 text-center p-4 bg-gray-50 rounded-lg"},Ps={class:"flex flex-col items-center"},Bs={key:0,src:"/images/icons/banjir.png",alt:"Banjir",class:"w-16 h-16 md:w-20 md:h-20"},Ns={key:1,src:"/images/icons/aman.png",alt:"Aman",class:"w-16 h-16 md:w-20 md:h-20"},Es={key:2,class:"font-bold text-sm md:text-base text-red-600 mt-2"},Ls={key:3,class:"font-bold text-sm md:text-base text-green-600 mt-2"},Ss={class:"flex-1 text-center p-4 bg-gray-50 rounded-lg"},Rs={class:"flex flex-col items-center"},As=["src"],Fs={key:2,class:"conclusion p-4 bg-gray-50 border-l-4 border-gray-800 rounded-lg mt-4"},Ks={class:"m-0 text-gray-600 text-sm md:text-base"},$s=["innerHTML"],zs={class:"component-title bg-gray-100 px-3 py-2 border-l-4 border-gray-800 font-bold rounded-l-lg text-sm md:text-base"},Hs={key:0,class:"images flex flex-wrap gap-2 mt-3 md:mt-4"},Os=["src","onClick"],Ys={key:1,class:"w-24 h-24 md:w-32 md:h-32 border border-gray-300 rounded-lg flex items-center justify-center bg-gray-100 text-xs text-gray-400"},Gs={class:"point-name inline-block font-bold align-top text-gray-700 text-sm md:text-base min-w-[140px] md:min-w-[180px]"},Xs={class:"point-content inline-block align-top w-[calc(100%-150px)] md:w-[calc(100%-190px)]"},Us={key:0,class:"status-badges-container"},Ws=["onClick"],Vs={key:1,class:"point-note italic text-gray-600 my-1 text-xs md:text-sm"},Zs={key:0,class:"inspection-images flex flex-wrap gap-2 mt-3 md:mt-4"},qs=["src","onClick"],Js={key:1,class:"w-16 h-16 md:w-24 md:h-24 border border-gray-300 rounded-lg flex items-center justify-center bg-gray-100 text-xs text-gray-400"},Qs={key:1,class:"textarea-note italic text-gray-600 my-2 text-xs md:text-sm"},eo={key:0,class:"mt-4 md:mt-6 mb-4 md:mb-6"},to={key:3,class:"flex flex-col items-center justify-center h-64 md:h-96 text-center p-4"},so=["href"],oo={key:4,class:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50"},no={class:"bg-white p-4 md:p-6 rounded-lg shadow-xl w-11/12 md:w-96 max-w-sm mx-4"},ao={class:"flex justify-end space-x-3 md:space-x-4"},ro=["disabled"],io={key:0},lo={key:1},uo={key:1,class:"bg-indigo-600 text-white px-3 py-1.5 md:px-4 md:py-2 rounded-lg hover:bg-indigo-700 transition-colors duration-200 cursor-not-allowed text-sm md:text-base"},co={class:"absolute top-0 left-0 right-0 bg-black bg-opacity-90 text-white p-3 md:p-4 flex items-center justify-between z-20"},mo={class:"flex-1 text-center"},po={class:"text-base md:text-lg font-bold truncate max-w-[70vw] mx-auto"},go={class:"relative w-full h-full flex items-center justify-center p-2 md:p-4 pt-12 md:pt-16 pb-32 md:pb-40"},vo=["src"],ho={key:1,class:"text-white text-base md:text-lg"},fo={class:"absolute bottom-0 left-0 right-0 bg-black bg-opacity-90 z-20 max-h-[60vh] overflow-y-auto"},bo={class:"p-2 md:p-3 border-b border-gray-700 sticky top-0 bg-black bg-opacity-90"},yo={class:"flex items-center justify-between"},xo={class:"text-xs md:text-sm font-medium text-gray-300"},ko={class:"flex items-center gap-2 md:gap-3"},wo={class:"flex items-center gap-1 md:gap-2"},_o=["disabled"],jo={class:"w-12 md:w-16 text-center"},Co={class:"text-xs md:text-sm font-medium text-white"},Mo=["disabled"],Io={class:"flex items-center gap-1 md:gap-2"},To={class:"w-8 md:w-10 text-center"},Do={class:"text-xs md:text-sm font-medium text-white"},Po={class:"p-3 md:p-4"},Bo={class:"flex flex-col md:flex-row md:items-center gap-1 md:gap-2 mb-1 md:mb-2"},No={class:"text-sm md:text-base font-semibold text-white truncate"},Eo={key:0,class:"flex items-center flex-shrink-0"},Lo={key:0,class:"mt-1 md:mt-2 mb-2"},So={class:"text-xs md:text-sm text-gray-200 italic break-words leading-relaxed"},Ro={key:1,class:"mt-2 mb-2 p-2 bg-gray-800 rounded-lg"},Ao={class:"font-medium"},Fo={key:2,class:"mt-2 pt-2 border-t border-gray-700"},Ko={key:6,class:"fixed bottom-4 md:bottom-6 right-4 md:right-6 flex flex-col gap-2 z-40"},$o={key:0,class:"hidden lg:block lg:col-span-5 bg-white rounded-lg shadow-md p-4 overflow-y-auto h-[calc(100vh-2rem)] sticky top-4"},zo={class:"space-y-4"},Ho=["src"],Oo={class:"absolute inset-x-0 top-1/2 transform -translate-y-1/2 flex justify-between px-2"},Yo=["disabled"],Go=["disabled"],Xo={class:"bg-gray-50 rounded-lg p-3"},Uo={class:"flex items-center justify-between mb-2"},Wo={class:"text-sm font-medium text-gray-900"},Vo={class:"flex items-center gap-2 mb-3"},Zo=["disabled"],qo=["disabled"],Jo={class:"flex items-center justify-between mb-2"},Qo={class:"text-sm font-medium text-gray-900"},en={class:"bg-gray-50 rounded-lg p-4"},tn={class:"space-y-3"},sn={class:"text-sm font-medium text-gray-900 mt-1"},on={class:"flex items-center gap-2 mt-1"},nn={class:"text-sm font-medium text-gray-900 flex-1"},an={key:0},rn={class:"text-sm text-gray-700 italic mt-1"},ln={key:1,class:"pt-3 border-t border-gray-200"},dn={class:"text-center text-sm text-gray-500"},un={__name:"ReviewPDF copy 2",props:{inspection:{type:Object,required:!0},menu_points:{type:Array,default:()=>[]},coverImage:{type:Object,default:null},encryptedIds:Object,repairEstimations:{type:Array,default:()=>[]},totalRepairCost:{type:Number,default:0}},setup(re){const l=re,lt=Lt(),ie=c(!1),le=c(!1),de=c(l.repairEstimations),$e=c(l.totalRepairCost),je=c(!1),Ce=c(null),ue=c(!1),ce=c(""),Me=c(0),Q=c(null),me=c(!1),Z=c(""),w=c(0),y=c([]),m=c(1),Ie=c(null),G=c(!1),ze=c(window.innerWidth>=1024),x=c({pointName:"",componentName:"",status:"",note:"",relatedInfo:null}),He=c(null),Te=c(null),Oe=c(null),De=c(null),X=c(!1),Pe=c({x:0,y:0}),D=c({x:0,y:0}),U=c({width:0,height:0}),S=c(0),ee=c(!1),Be=c(0),Ye=c(1),q=L(()=>{var s;return((s=lt.props.global)==null?void 0:s.has_roles)||[]});L(()=>q.value.includes("quality_control")||q.value.includes("Admin"));const pe=L(()=>(q.value.includes("quality_control")||q.value.includes("Admin"))&&d.value.status==="pending_review"),dt=L(()=>(q.value.includes("quality_control")||q.value.includes("Admin"))&&d.value.status==="pending_review"),Ge=L(()=>{const s=y.value[w.value];return s!=null&&s.pointData?ot(s.pointData):!1}),d=c(l.inspection),Ne=c(l.menu_points),z=c(l.coverImage),ut=async()=>{if(d.value.status==="in_progress")try{const s=await At.get(route("inspections.detail",l.encryptedIds));d.value=s.data.inspection,Ne.value=s.data.menu_points,z.value=s.data.coverImage,de.value=s.data.repairEstimations||[],$e.value=s.data.totalRepairCost||0}catch(s){console.error("Polling gagal:",s)}},Xe=()=>{ze.value=window.innerWidth>=1024};St(()=>{setInterval(ut,5e3);const s=()=>{const t=window.scrollY;t>Me.value?ce.value="down":t<Me.value&&(ce.value="up"),Me.value=t,t>200?(ue.value=!0,Q.value&&clearTimeout(Q.value),Q.value=setTimeout(()=>{ue.value=!1},2e3)):ue.value=!1};return window.addEventListener("scroll",s),window.addEventListener("resize",Xe),window.addEventListener("keydown",Ue),()=>{window.removeEventListener("scroll",s),window.removeEventListener("resize",Xe),window.removeEventListener("keydown",Ue),Q.value&&clearTimeout(Q.value)}});const Ue=s=>{if(G.value)switch(s.key){case"ArrowLeft":s.preventDefault(),he();break;case"ArrowRight":s.preventDefault(),fe();break;case"Escape":s.preventDefault(),Je();break;case"+":case"=":s.preventDefault(),be();break;case"-":s.preventDefault(),ye();break;case"0":s.preventDefault(),xe();break}else if(me.value)switch(s.key){case"ArrowLeft":s.preventDefault(),he();break;case"ArrowRight":s.preventDefault(),fe();break;case"Escape":s.preventDefault(),Le();break;case"+":case"=":s.preventDefault(),be();break;case"-":s.preventDefault(),ye();break;case"0":s.preventDefault(),xe();break}},ct=s=>{de.value=s},mt=s=>{$e.value=s},We=s=>{var t;Ce.value={part_name:((t=s.inspection_point)==null?void 0:t.name)||"",repair_description:"",urgency:"segera",status:"perlu",estimated_cost:0,notes:""},je.value=!0},Ve=()=>{const s=y.value[w.value];s!=null&&s.pointData&&We(s.pointData)},Ze=()=>{je.value=!1,Ce.value=null},pt=s=>{de.value.push(s),Ze()},gt=()=>{window.scrollTo({top:0,behavior:"smooth"})},vt=()=>{window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"})},Ee=(s,t=null,a=0)=>{qe();const r=y.value.findIndex(u=>u.url===s||u.pointData===t&&u.imageIndex===a);r!==-1?(w.value=r,te(r)):(w.value=y.value.length,y.value.push({url:s,pointData:t,imageIndex:a}),te(w.value)),ze.value?(Ie.value=s,G.value=!0):me.value=!0,m.value=1,D.value={x:0,y:0},U.value={width:0,height:0}},qe=()=>{y.value=[],z.value&&z.value.image_path&&y.value.push({url:H(z.value.image_path),type:"cover",pointName:"Foto Utama Kendaraan",componentName:"Cover",pointData:{type:"cover",name:"Foto Utama Kendaraan"}}),l.menu_points.forEach(s=>{var C,M,P,B,O,Y,f;const t=((C=s.inspection_point)==null?void 0:C.images)||[],a=((P=(M=s.inspection_point)==null?void 0:M.component)==null?void 0:P.name)||"Tanpa Komponen",r=((B=s.inspection_point)==null?void 0:B.name)||"Unknown",v=J(s).join(", ")||"",j=((f=(Y=(O=s.inspection_point)==null?void 0:O.results)==null?void 0:Y[0])==null?void 0:f.note)||"";t.forEach((p,F)=>{p.image_path&&y.value.push({url:H(p.image_path),pointData:s,imageIndex:F,pointName:r,componentName:a,status:v,note:j})})})},ht=(s,t)=>{var r,u,v,j,C,M,P,B,O,Y,f,p,F,K,W,N,we,Fe,nt,at;if(!t||!l.menu_points)return null;const a={};if(s==="Instrumen Cluster"){const b=l.menu_points.find(k=>{var h;return((h=k.inspection_point)==null?void 0:h.name)==="Jarak Tempuh (KM)"});b&&_(b)&&(a.mesin={name:"KM",value:b.inspection_point.results[0].note||"-"})}if(s==="No Fisik Mesin"){const b=l.menu_points.find(k=>{var h;return((h=k.inspection_point)==null?void 0:h.name)==="No Mesin"});b&&_(b)&&(a.mesin={name:"No Mesin",value:b.inspection_point.results[0].note||"-"})}if(s==="No Fisik Rangka"){const b=l.menu_points.find(k=>{var h;return((h=k.inspection_point)==null?void 0:h.name)==="No Rangka"});b&&_(b)&&(a.rangka={name:"No Rangka",value:b.inspection_point.results[0].note||"-"})}if(s==="STNK"){const b=((u=(r=l.inspection.car)==null?void 0:r.brand)==null?void 0:u.name)+" "+((j=(v=l.inspection.car)==null?void 0:v.model)==null?void 0:j.name)+" "+((M=(C=l.inspection.car)==null?void 0:C.type)==null?void 0:M.name)+" "+((P=l.inspection.car)==null?void 0:P.cc)+" "+((B=l.inspection.car)==null?void 0:B.fuel_type)+" "+((O=l.inspection.car)==null?void 0:O.transmission)+" "+((Y=l.inspection.car)==null?void 0:Y.year),k=l.menu_points.find(T=>{var R;return((R=T.inspection_point)==null?void 0:R.name)==="No Mesin"}),h=l.menu_points.find(T=>{var R;return((R=T.inspection_point)==null?void 0:R.name)==="No Rangka"}),E=l.menu_points.find(T=>{var R,ne,ae;return((R=T.inspection_point)==null?void 0:R.name)==="Pajak Tahunan"||((ae=(ne=T.inspection_point)==null?void 0:ne.name)==null?void 0:ae.includes("Pajak Tahunan"))}),I=l.menu_points.find(T=>{var R,ne,ae;return((R=T.inspection_point)==null?void 0:R.name)==="Pajak 5 Tahunan"||((ae=(ne=T.inspection_point)==null?void 0:ne.name)==null?void 0:ae.includes("Pajak 5 Tahunan"))});l.inspection.car_id&&(a.car={name:"Type",value:b||"-"}),h&&_(h)&&(a.rangka={name:"No Rangka",value:h.inspection_point.results[0].note||"-"}),k&&_(k)&&(a.mesin={name:"No Mesin",value:k.inspection_point.results[0].note||"-"}),E&&_(E)&&(a.pajakTahunan={name:"Pajak Tahunan",value:E.inspection_point.results[0].note||"-"}),I&&_(I)&&(a.pajak5Tahunan={name:"Pajak 5 Tahunan",value:I.inspection_point.results[0].note||"-"})}if(s==="BPKB Asli"){const b=((p=(f=l.inspection.car)==null?void 0:f.brand)==null?void 0:p.name)+" "+((K=(F=l.inspection.car)==null?void 0:F.model)==null?void 0:K.name)+" "+((N=(W=l.inspection.car)==null?void 0:W.type)==null?void 0:N.name)+" "+((we=l.inspection.car)==null?void 0:we.cc)+" "+((Fe=l.inspection.car)==null?void 0:Fe.fuel_type)+" "+((nt=l.inspection.car)==null?void 0:nt.transmission)+" "+((at=l.inspection.car)==null?void 0:at.year),k=l.menu_points.find(E=>{var I;return((I=E.inspection_point)==null?void 0:I.name)==="No Mesin"}),h=l.menu_points.find(E=>{var I;return((I=E.inspection_point)==null?void 0:I.name)==="No Rangka"});l.inspection.car_id&&(a.car={name:"Type",value:b||"-"}),k&&_(k)&&(a.mesin={name:"No Mesin",value:k.inspection_point.results[0].note||"-"}),h&&_(h)&&(a.rangka={name:"No Rangka",value:h.inspection_point.results[0].note||"-"})}if(s==="Samsat Online"){const b=l.menu_points.find(h=>{var E,I,T;return((E=h.inspection_point)==null?void 0:E.name)==="Pajak Tahunan"||((T=(I=h.inspection_point)==null?void 0:I.name)==null?void 0:T.includes("Pajak Tahunan"))}),k=l.menu_points.find(h=>{var E,I,T;return((E=h.inspection_point)==null?void 0:E.name)==="Pajak 5 Tahunan"||((T=(I=h.inspection_point)==null?void 0:I.name)==null?void 0:T.includes("Pajak 5 Tahunan"))});b&&_(b)&&(a.pajakTahunan={name:"Pajak Tahunan",value:b.inspection_point.results[0].note||"-"}),k&&_(k)&&(a.pajak5Tahunan={name:"Pajak 5 Tahunan",value:k.inspection_point.results[0].note||"-"})}return Object.keys(a).length>0?a:null},te=s=>{if(s<0||s>=y.value.length)return;const t=y.value[s];Z.value=t.url,x.value={pointName:t.pointName||"Gambar Inspeksi",componentName:t.componentName||"",status:t.status||"",note:t.note||"",relatedInfo:ht(t.pointName,t.pointData)}},Le=()=>{me.value=!1,Z.value="",w.value=0,y.value=[],m.value=1,D.value={x:0,y:0}},Je=()=>{G.value=!1,Ie.value=null,Z.value="",w.value=0,y.value=[],m.value=1,D.value={x:0,y:0}},ge=L(()=>w.value>0),ve=L(()=>w.value<y.value.length-1),he=()=>{ge.value&&(w.value--,te(w.value),m.value=1,D.value={x:0,y:0},S.value=0)},fe=()=>{ve.value&&(w.value++,te(w.value),m.value=1,D.value={x:0,y:0},S.value=0)},be=()=>{m.value<3&&(m.value=Math.min(m.value+.25,3))},ye=()=>{m.value>.5&&(m.value=Math.max(m.value-.25,.5))},xe=()=>{m.value=1,D.value={x:0,y:0},S.value=0},Qe=()=>{S.value=(S.value-90)%360},et=()=>{S.value=(S.value+90)%360},ft=s=>{s.preventDefault();const t=s.deltaY>0?-.1:.1;m.value=Math.max(.5,Math.min(3,m.value+t))},ke=s=>{if(m.value<=1)return;X.value=!0;const t=s.type.includes("mouse")?s.clientX:s.touches[0].clientX,a=s.type.includes("mouse")?s.clientY:s.touches[0].clientY;Pe.value={x:t-D.value.x,y:a-D.value.y},s.preventDefault()},Se=s=>{var B;if(!X.value)return;const t=s.type.includes("mouse")?s.clientX:s.touches[0].clientX,a=s.type.includes("mouse")?s.clientY:s.touches[0].clientY,r=t-Pe.value.x,u=a-Pe.value.y,v=(B=G.value?Oe.value:He.value)==null?void 0:B.getBoundingClientRect();if(!v)return;const j=U.value.width*m.value,C=U.value.height*m.value,M=Math.max(0,(j-v.width)/2),P=Math.max(0,(C-v.height)/2);D.value={x:Math.max(-M,Math.min(M,r)),y:Math.max(-P,Math.min(P,u))},s.preventDefault()},se=()=>{X.value=!1},tt=(s,t)=>{const a=s.clientX-t.clientX,r=s.clientY-t.clientY;return Math.sqrt(a*a+r*r)},bt=s=>{if(s.touches.length===2){s.preventDefault(),ee.value=!0;const t=s.touches[0],a=s.touches[1];Be.value=tt(t,a),Ye.value=m.value}else s.touches.length===1&&ke(s)},yt=s=>{if(s.touches.length===2&&ee.value){s.preventDefault();const t=s.touches[0],a=s.touches[1],r=tt(t,a);if(Be.value>0){const u=r/Be.value,v=Math.max(.5,Math.min(3,Ye.value*u));m.value=v}}else s.touches.length===1&&X.value&&Se(s)},xt=s=>{s.touches.length===0?(ee.value=!1,se()):s.touches.length===1&&ee.value&&(ee.value=!1,ke(s))},kt=()=>{it(()=>{if(Te.value){const s=Te.value;U.value={width:s.naturalWidth,height:s.naturalHeight}}})},wt=()=>{it(()=>{if(De.value){const s=De.value;U.value={width:s.naturalWidth,height:s.naturalHeight}}})},_t=L(()=>{if(!Ne.value)return[];const s=new Map;Ne.value.forEach(a=>{var v;const r=(v=a.inspection_point)==null?void 0:v.component,u=(r==null?void 0:r.id)||0;s.has(u)||s.set(u,{component:r||{id:0,name:"Tanpa Komponen",order:9999},points:[]}),s.get(u).points.push(a)});const t=Array.from(s.values()).sort((a,r)=>a.component.order===r.component.order?new Date(a.component.created_at)-new Date(r.component.created_at):(a.component.order||9999)-(r.component.order||9999));return t.forEach(a=>{a.points.sort((r,u)=>r.order===u.order?new Date(r.created_at)-new Date(u.created_at):(r.order||9999)-(u.order||9999))}),t}),jt=()=>{le.value=!0,setTimeout(()=>{window.location.href=route("inspections.download.pdf",l.encryptedIds),le.value=!1,ie.value=!1},2e3)},Ct=L(()=>{const s=l.menu_points.some(a=>_(a)||oe(a)),t=l.coverImage&&l.coverImage.image_path;return s||t}),Re=s=>s&&s.length>0,H=s=>`/${s}`,_=s=>{var t;return((t=s.inspection_point)==null?void 0:t.results)&&s.inspection_point.results.length>0},oe=s=>{var t;return((t=s.inspection_point)==null?void 0:t.images)&&s.inspection_point.images.length>0},st=s=>_(s)&&s.inspection_point.results[0].note,J=s=>{var a,r;if(!_(s))return[];const t=(r=(a=s.inspection_point)==null?void 0:a.results[0])==null?void 0:r.status;return t?Array.isArray(t)?t:typeof t=="string"&&t.includes(",")?t.split(",").map(u=>u.trim()).filter(u=>u.length>0):[t]:[]},Mt=s=>{const t=s.input_type||"",a=J(s);return["radio","imageTOradio"].includes(t)&&a.length>0},It=s=>{const t=s.input_type||"";return["text","number","date","textarea","account"].includes(t)&&st(s)},Tt=s=>{var r,u,v;const t=s.input_type||"",a=s.settings||{};if((r=s.inspection_point)!=null&&r.results[0],t==="image"&&oe(s)||t==="imageTOradio"&&oe(s))return!0;if(t==="radio"){const j=J(s);for(const C of j)if((((v=(((u=a.radios)==null?void 0:u.find(B=>B.value===C))||{}).settings)==null?void 0:v.show_image_upload)||!1)&&oe(s))return!0}return!1},Dt=s=>{var r,u,v;const t=s.settings||{};(r=s.inspection_point)!=null&&r.results[0];const a=J(s);for(const j of a)if((v=(((u=t.radios)==null?void 0:u.find(M=>M.value===j))||{}).settings)!=null&&v.show_textarea)return!0;return!1},Ae=s=>{if(!s)return"status-warning";const t=String(s).toLowerCase().trim();return["normal","ada","baik","good","ok"].includes(t)?"status-good":["tidak normal","tidak ada","rusak","bad","not ok","rusak","repaired"].includes(t)?"status-bad":"status-warning"},ot=s=>J(s).some(a=>{const r=String(a).toLowerCase().trim();return!["normal","ada","baik","good","ok"].includes(r)}),Pt=s=>{var u;const t=s.input_type||"",a=((u=s.inspection_point)==null?void 0:u.results[0])||{},r=s.settings||{};if(t==="account"&&a.note){const v=a.note.replace(/[^\d.-]/g,""),j=parseFloat(v);if(isNaN(j))return a.note;const C=r.currency_symbol||"Rp";return new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0,maximumFractionDigits:2}).format(j).replace("Rp",C)}return a.note},Bt=L(()=>{if(!d.value.settings||d.value.settings.conclusion.collision!=="yes")return"/images/icons/aman.png";const s=d.value.settings.conclusion.collision_severity;return s==="moderate"?"/images/icons/beruntun.png":s==="heavy"?"/images/icons/berat.png":"/images/icons/ringan.png"}),Nt=L(()=>{if(!d.value.settings||d.value.settings.conclusion.collision!=="yes")return"Bebas Tabrak";const s=d.value.settings.conclusion.collision_severity;return s==="moderate"?"Tabrak Beruntun":s==="heavy"?"Tabrak Berat":"Tabrak Ringan"}),Et=L(()=>{if(!d.value.settings||d.value.settings.conclusion.collision!=="yes")return"#28a745";const s=d.value.settings.conclusion.collision_severity;return s==="moderate"?"#fd7e14":s==="heavy"?"#dc3545":"#ffc107"});return Rt(G,s=>{s&&y.value.length===0&&(qe(),y.value.length>0&&(w.value=0,te(0)))}),(s,t)=>{var a,r,u,v,j,C,M,P,B,O,Y;return n(),o("div",Ht,[e("div",Ot,[s.$page.props.flash.success?(n(),o("div",Yt,[e("div",Gt,[t[4]||(t[4]=e("svg",{class:"w-5 h-5 text-green-400 mr-2",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"})],-1)),e("span",null,i(s.$page.props.flash.success),1)])])):g("",!0),s.$page.props.flash.error?(n(),o("div",Xt,[e("div",Ut,[t[5]||(t[5]=e("svg",{class:"w-5 h-5 text-red-400 mr-2",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})],-1)),e("span",null,i(s.$page.props.flash.error),1)])])):g("",!0),Ct.value?(n(),o("div",Wt,[e("div",Vt,[e("div",Zt,[e("div",qt,[z.value&&Re(z.value.image_path)?(n(),o("img",{key:0,src:H(z.value.image_path),alt:"Foto Utama",class:"w-32 h-32 md:w-48 md:h-48 object-cover rounded-lg border border-gray-300 cursor-pointer hover:opacity-90 transition-opacity",onClick:t[0]||(t[0]=f=>Ee(H(z.value.image_path),{type:"cover",name:"Foto Utama Kendaraan"},0))},null,8,Jt)):(n(),o("div",Qt,t[6]||(t[6]=[e("span",{class:"text-sm md:text-base"},"Gambar tidak tersedia",-1)])))]),e("div",es,[e("h2",ts,i(d.value.car_name),1)])]),d.value.car_id?(n(),o("div",ss,[e("table",os,[e("tr",ns,[t[7]||(t[7]=e("td",{class:"p-2 border border-gray-300 font-bold text-gray-700 w-1/3 md:w-1/4"},"ID Order",-1)),e("td",as,i(d.value.order_code),1)]),e("tr",rs,[t[8]||(t[8]=e("td",{class:"p-2 border border-gray-300 font-bold text-gray-700"},"Nomor Polisi",-1)),e("td",is,i(d.value.plate_number),1)]),e("tr",null,[t[9]||(t[9]=e("td",{class:"p-2 border border-gray-300 font-bold text-gray-700"},"Merek",-1)),e("td",ls,i((r=(a=d.value.car)==null?void 0:a.brand)==null?void 0:r.name),1)]),e("tr",ds,[t[10]||(t[10]=e("td",{class:"p-2 border border-gray-300 font-bold text-gray-700"},"Model",-1)),e("td",us,i((v=(u=d.value.car)==null?void 0:u.model)==null?void 0:v.name),1)]),e("tr",null,[t[11]||(t[11]=e("td",{class:"p-2 border border-gray-300 font-bold text-gray-700"},"Tipe",-1)),e("td",cs,i((C=(j=d.value.car)==null?void 0:j.type)==null?void 0:C.name),1)]),e("tr",ms,[t[12]||(t[12]=e("td",{class:"p-2 border border-gray-300 font-bold text-gray-700"},"CC",-1)),e("td",ps,i((M=d.value.car)==null?void 0:M.cc),1)]),e("tr",null,[t[13]||(t[13]=e("td",{class:"p-2 border border-gray-300 font-bold text-gray-700"},"Bahan Bakar",-1)),e("td",gs,i((P=d.value.car)==null?void 0:P.fuel_type),1)]),e("tr",vs,[t[14]||(t[14]=e("td",{class:"p-2 border border-gray-300 font-bold text-gray-700"},"Transmisi",-1)),e("td",hs,i((B=d.value.car)==null?void 0:B.transmission),1)]),e("tr",null,[t[15]||(t[15]=e("td",{class:"p-2 border border-gray-300 font-bold text-gray-700"},"Periode Model",-1)),e("td",fs,i(((O=d.value.car)==null?void 0:O.production_period)||"-"),1)]),e("tr",bs,[t[16]||(t[16]=e("td",{class:"p-2 border border-gray-300 font-bold text-gray-700"},"Tahun Pembuatan",-1)),e("td",ys,i((Y=d.value.car)==null?void 0:Y.year),1)]),e("tr",xs,[t[17]||(t[17]=e("td",{class:"p-2 border border-gray-300 font-bold text-gray-700"},"Warna",-1)),e("td",ks,i(d.value.color),1)]),e("tr",ws,[t[18]||(t[18]=e("td",{class:"p-2 border border-gray-300 font-bold text-gray-700"},"No Rangka",-1)),e("td",_s,i(d.value.noka),1)]),e("tr",js,[t[19]||(t[19]=e("td",{class:"p-2 border border-gray-300 font-bold text-gray-700"},"No Mesin",-1)),e("td",Cs,i(d.value.nosin),1)]),e("tr",Ms,[t[20]||(t[20]=e("td",{class:"p-2 border border-gray-300 font-bold text-gray-700"},"KM",-1)),e("td",Is,i(d.value.km),1)])])])):g("",!0),d.value.settings?(n(),o("div",Ts,[e("div",Ds,[e("div",Ps,[d.value.settings.conclusion.flooded==="yes"?(n(),o("img",Bs)):(n(),o("img",Ns)),d.value.settings.conclusion.flooded==="yes"?(n(),o("p",Es," Bekas Banjir ")):(n(),o("p",Ls," Bebas Banjir "))])]),e("div",Ss,[e("div",Rs,[d.value.settings.conclusion.collision==="yes"?(n(),o(A,{key:0},[e("img",{src:Bt.value,alt:"Tabrak",class:"w-16 h-16 md:w-20 md:h-20"},null,8,As),e("p",{style:_e({fontWeight:"bold",fontSize:"14px",color:Et.value,marginTop:"8px"})},i(Nt.value),5)],64)):(n(),o(A,{key:1},[t[21]||(t[21]=e("img",{src:"/images/icons/aman.png",alt:"Aman",class:"w-16 h-16 md:w-20 md:h-20"},null,-1)),t[22]||(t[22]=e("p",{class:"font-bold text-sm md:text-base text-green-600 mt-2"}," Bebas Tabrak ",-1))],64))])])])):g("",!0),d.value.notes?(n(),o("div",Fs,[t[23]||(t[23]=e("h3",{class:"text-lg font-bold mb-2 text-gray-800"},"Kesimpulan Inspeksi:",-1)),e("p",Ks,[e("div",{innerHTML:d.value.notes||"-"},null,8,$s)])])):g("",!0)]),t[28]||(t[28]=e("h2",{class:"text-xl md:text-2xl font-bold border-b-2 border-gray-800 pb-2 mb-4 md:mb-6"},"Hasil Inspeksi",-1)),(n(!0),o(A,null,V(_t.value,f=>(n(),o("div",{key:f.component.id,class:$(["section mb-4 md:mb-6",f.component.name==="Foto Kendaraan"?"photo-component":""])},[e("div",zs,i(f.component.name||"Tanpa Komponen"),1),f.component.name==="Foto Kendaraan"?(n(),o("div",Hs,[(n(!0),o(A,null,V(f.points,p=>{var F;return n(),o("div",{key:p.id},[(n(!0),o(A,null,V((F=p.inspection_point)==null?void 0:F.images,(K,W)=>(n(),o("div",{key:K.id,class:"image-container"},[Re(K.image_path)?(n(),o("img",{key:0,src:H(K.image_path),alt:"Foto Kendaraan",class:"w-24 h-24 md:w-32 md:h-32 object-cover border border-gray-300 rounded-lg cursor-pointer hover:opacity-90 transition-opacity hover:scale-105",onClick:N=>Ee(H(K.image_path),p,W)},null,8,Os)):(n(),o("div",Ys,t[24]||(t[24]=[e("span",null,"Gambar tidak ditemukan",-1)])))]))),128))])}),128))])):(n(!0),o(A,{key:1},V(f.points,p=>{var F,K,W;return n(),o("div",{key:p.id,class:"point ml-3 md:ml-4 py-3 border-b border-gray-100"},[_(p)||oe(p)?(n(),o(A,{key:0},[e("span",Gs,i(((F=p.inspection_point)==null?void 0:F.name)||"-"),1),e("div",Xs,[_(p)?(n(),o(A,{key:0},[Mt(p)?(n(),o("div",Us,[(n(!0),o(A,null,V(J(p),N=>(n(),o("span",{key:N,class:$(["status-badge",Ae(N)])},i(N.trim()),3))),128)),pe.value&&ot(p)&&f.component.name!=="Dokumen"?(n(),o("button",{key:0,onClick:N=>We(p),class:"ml-2 bg-orange-500 text-white px-2 py-1 rounded text-xs hover:bg-orange-600 transition-colors inline-flex items-center",title:"Tambah Estimasi Perbaikan"},t[25]||(t[25]=[e("svg",{class:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1)]),8,Ws)):g("",!0)])):g("",!0),It(p)?(n(),o("div",Vs,i(Pt(p)),1)):g("",!0)],64)):g("",!0)]),Tt(p)?(n(),o("div",Zs,[(n(!0),o(A,null,V((K=p.inspection_point)==null?void 0:K.images,(N,we)=>(n(),o("div",{key:N.id,class:"image-container"},[Re(N.image_path)?(n(),o("img",{key:0,src:H(N.image_path),alt:"image",class:"w-16 h-16 md:w-24 md:h-24 object-cover border border-gray-300 rounded-lg cursor-pointer hover:opacity-90 transition-opacity hover:scale-105",onClick:Fe=>Ee(H(N.image_path),p,we)},null,8,qs)):(n(),o("div",Js,t[26]||(t[26]=[e("span",null,"Gambar tidak ditemukan",-1)])))]))),128))])):g("",!0),Dt(p)&&st(p)?(n(),o("div",Qs,i((W=p.inspection_point)==null?void 0:W.results[0].note),1)):g("",!0)],64)):g("",!0)])}),128))],2))),128)),rt(Kt,{estimations:de.value,"inspection-id":d.value.id,"encrypted-ids":re.encryptedIds,"can-edit":pe.value,"onUpdate:estimations":ct,"onUpdate:totalCost":mt},null,8,["estimations","inspection-id","encrypted-ids","can-edit"]),dt.value?(n(),o("div",eo,[e("button",{onClick:t[1]||(t[1]=f=>ie.value=!0),class:"w-full md:w-auto bg-blue-600 text-white px-4 py-2 md:px-6 md:py-3 rounded-lg shadow hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors duration-200 text-sm md:text-base"}," Setujui Laporan "),t[27]||(t[27]=e("p",{class:"text-xs md:text-sm text-gray-500 mt-2 italic"}," Catatan: Halaman ini hanya simulasi dan mungkin berbeda dengan tampilan file PDF. Silakan periksa lebih detail untuk memastikan tidak ada kesalahan. Jika sudah yakin, silakan setujui untuk proses selanjutnya. ",-1))])):g("",!0)])):(n(),o("div",to,[t[29]||(t[29]=e("p",{class:"text-base md:text-lg font-semibold text-gray-700"}," Data sudah tidak ada, karena sudah dijadikan PDF. ",-1)),e("a",{href:s.route("inspections.download.approved.pdf",re.encryptedIds),class:"mt-4 inline-block bg-blue-600 text-white px-4 py-2 md:px-6 md:py-3 rounded-lg shadow-md hover:bg-blue-700 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 text-sm md:text-base"}," Download PDF ",8,so)])),ie.value?(n(),o("div",oo,[e("div",no,[t[31]||(t[31]=e("h3",{class:"text-lg font-bold mb-3 md:mb-4"},"Konfirmasi Laporan",-1)),t[32]||(t[32]=e("p",{class:"text-gray-700 mb-4 md:mb-6 text-sm md:text-base"}," Apakah Anda yakin semua data sudah sesuai? Setelah disetujui, laporan akan diproses menjadi file PDF. ",-1)),e("div",ao,[e("button",{onClick:t[2]||(t[2]=f=>ie.value=!1),class:"bg-gray-300 text-gray-800 px-3 py-1.5 md:px-4 md:py-2 rounded-lg hover:bg-gray-400 text-sm md:text-base"}," Batal "),d.value.file?(n(),o("button",uo,t[30]||(t[30]=[e("span",null,"Laporan sudah di buat",-1)]))):(n(),o("button",{key:0,onClick:jt,class:"bg-sky-600 text-white px-3 py-1.5 md:px-4 md:py-2 rounded-lg hover:bg-sky-700 transition-colors duration-200 text-sm md:text-base",disabled:le.value},[le.value?(n(),o("span",io,"Membuat file PDF...")):(n(),o("span",lo,"Setujui Laporan"))],8,ro))])])])):g("",!0),me.value&&!G.value?(n(),o("div",{key:5,class:"fixed inset-0 bg-black bg-opacity-95 flex flex-col items-center justify-center z-50",onClick:Ke(Le,["self"])},[e("div",co,[e("div",mo,[e("h3",po,i(x.value.componentName||"Gambar Inspeksi"),1)]),e("button",{onClick:Le,class:"bg-red-600 hover:bg-red-700 text-white rounded-full w-8 h-8 md:w-10 md:h-10 flex items-center justify-center transition-all flex-shrink-0 ml-2 md:ml-4"},t[33]||(t[33]=[e("svg",{class:"w-5 h-5 md:w-6 md:h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),e("div",go,[ge.value?(n(),o("button",{key:0,onClick:he,class:$(["absolute left-2 md:left-4 top-1/2 transform -translate-y-1/2 z-10 bg-black bg-opacity-60 text-white rounded-full w-10 h-10 md:w-12 md:h-12 flex items-center justify-center hover:bg-opacity-80 transition-all hover:scale-110",{"opacity-50":!ge.value}])},t[34]||(t[34]=[e("svg",{class:"w-6 h-6 md:w-8 md:h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)]),2)):g("",!0),e("div",{ref_key:"imageContainer",ref:He,class:$(["relative overflow-hidden w-full h-full flex items-center justify-center",{dragging:X.value}]),style:_e({touchAction:m.value>1?"none":"pan-y"}),onTouchstart:Ke(bt,["stop"]),onTouchmove:yt,onTouchend:xt,onMousedown:ke,onMousemove:Se,onMouseup:se,onMouseleave:se},[Z.value?(n(),o("img",{key:0,ref_key:"imageElement",ref:Te,src:Z.value,alt:"Full size image",class:"absolute max-w-none object-contain cursor-grab active:cursor-grabbing",style:_e({transform:`scale(${m.value}) translate(${D.value.x}px, ${D.value.y}px) rotate(${S.value}deg)`,transition:X.value?"none":"transform 0.2s ease",width:U.value.width+"px",height:U.value.height+"px"}),onLoad:kt,onClick:t[3]||(t[3]=Ke(()=>{},["stop"]))},null,44,vo)):(n(),o("div",ho," Gambar tidak dapat dimuat "))],38),ve.value?(n(),o("button",{key:1,onClick:fe,class:$(["absolute right-2 md:right-4 top-1/2 transform -translate-y-1/2 z-10 bg-black bg-opacity-60 text-white rounded-full w-10 h-10 md:w-12 md:h-12 flex items-center justify-center hover:bg-opacity-80 transition-all hover:scale-110",{"opacity-50":!ve.value}])},t[35]||(t[35]=[e("svg",{class:"w-6 h-6 md:w-8 md:h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)]),2)):g("",!0)]),e("div",fo,[e("div",bo,[e("div",yo,[e("div",xo," Gambar "+i(w.value+1)+" / "+i(y.value.length),1),e("div",ko,[e("div",wo,[e("button",{onClick:ye,class:$(["bg-gray-800 hover:bg-gray-700 text-white rounded-lg w-7 h-7 md:w-9 md:h-9 flex items-center justify-center transition-colors",{"opacity-50 cursor-not-allowed":m.value<=.5}]),disabled:m.value<=.5,title:"Zoom Out"},t[36]||(t[36]=[e("svg",{class:"w-4 h-4 md:w-5 md:h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20 12H4"})],-1)]),10,_o),e("div",jo,[e("span",Co,i(Math.round(m.value*100))+"%",1)]),e("button",{onClick:be,class:$(["bg-gray-800 hover:bg-gray-700 text-white rounded-lg w-7 h-7 md:w-9 md:h-9 flex items-center justify-center transition-colors",{"opacity-50 cursor-not-allowed":m.value>=3}]),disabled:m.value>=3,title:"Zoom In"},t[37]||(t[37]=[e("svg",{class:"w-4 h-4 md:w-5 md:h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1)]),10,Mo)]),e("div",Io,[e("button",{onClick:Qe,class:"bg-gray-800 hover:bg-gray-700 text-white rounded-lg w-7 h-7 md:w-9 md:h-9 flex items-center justify-center transition-colors",title:"Putar ke Kiri"},t[38]||(t[38]=[e("svg",{class:"w-4 h-4 md:w-5 md:h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 12a9 9 0 019-9 9.75 9.75 0 017.5 3.5L21 12m0 0l-3.5-3.5M21 12H15"})],-1)])),e("div",To,[e("span",Do,i(S.value)+"°",1)]),e("button",{onClick:et,class:"bg-gray-800 hover:bg-gray-700 text-white rounded-lg w-7 h-7 md:w-9 md:h-9 flex items-center justify-center transition-colors",title:"Putar ke Kanan"},t[39]||(t[39]=[e("svg",{class:"w-4 h-4 md:w-5 md:h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 12a9 9 0 01-9 9 9.75 9.75 0 01-7.5-3.5L3 12m0 0l3.5 3.5M3 12h6"})],-1)]))]),e("button",{onClick:xe,class:"bg-blue-600 hover:bg-blue-700 text-white rounded-lg px-2 py-1 md:px-3 md:py-1.5 text-xs md:text-sm transition-colors whitespace-nowrap",title:"Reset Zoom dan Posisi"}," Reset ")])])]),e("div",Po,[e("div",Bo,[e("h4",No,i(x.value.pointName||"Poin Inspeksi"),1),x.value.status?(n(),o("div",Eo,[t[40]||(t[40]=e("span",{class:"text-xs md:text-sm font-medium text-gray-300"},"(",-1)),e("span",{class:$(["px-2 py-0.5 md:py-1 rounded-full text-xs md:text-sm font-semibold",Ae(x.value.status)])},i(x.value.status),3),t[41]||(t[41]=e("span",{class:"text-xs md:text-sm font-medium text-gray-300"},")",-1))])):g("",!0)]),x.value.note?(n(),o("div",Lo,[e("div",So,i(x.value.note),1)])):g("",!0),x.value.relatedInfo?(n(),o("div",Ro,[t[42]||(t[42]=e("div",{class:"text-xs font-semibold text-gray-300 mb-1"},"Informasi Terkait:",-1)),(n(!0),o(A,null,V(x.value.relatedInfo,(f,p)=>(n(),o("div",{key:p,class:"text-xs text-gray-200"},[e("span",Ao,i(f.name)+":",1),Ft(" "+i(f.value),1)]))),128))])):g("",!0),pe.value&&Ge.value?(n(),o("div",Fo,[e("button",{onClick:Ve,class:"w-full bg-orange-600 hover:bg-orange-700 text-white py-2 px-3 rounded-lg transition-colors flex items-center justify-center gap-2"},t[43]||(t[43]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),e("span",{class:"text-sm font-medium"},"Tambah Estimasi Perbaikan",-1)]))])):g("",!0)])])])):g("",!0),rt($t,{showModal:je.value,estimationData:Ce.value,inspectionId:d.value.id,encryptedIds:re.encryptedIds,onClose:Ze,onSaved:pt},null,8,["showModal","estimationData","inspectionId","encryptedIds"]),ue.value?(n(),o("div",Ko,[ce.value==="up"?(n(),o("button",{key:0,onClick:gt,class:"bg-blue-600 hover:bg-blue-700 text-white p-2 md:p-3 rounded-full shadow-lg transition-all duration-300 transform hover:scale-110",title:"Scroll ke atas"},t[44]||(t[44]=[e("svg",{class:"w-4 h-4 md:w-5 md:h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 10l7-7m0 0l7 7m-7-7v18"})],-1)]))):g("",!0),ce.value==="down"?(n(),o("button",{key:1,onClick:vt,class:"bg-green-600 hover:bg-green-700 text-white p-2 md:p-3 rounded-full shadow-lg transition-all duration-300 transform hover:scale-110",title:"Scroll ke bawah"},t[45]||(t[45]=[e("svg",{class:"w-4 h-4 md:w-5 md:h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 14l-7 7m0 0l-7-7m7 7V4"})],-1)]))):g("",!0)])):g("",!0)]),G.value&&Ie.value?(n(),o("div",$o,[e("div",{class:"mb-4 pb-4 border-b border-gray-200"},[e("div",{class:"flex items-center justify-between"},[t[47]||(t[47]=e("h3",{class:"text-lg font-bold text-gray-800"},"Review Gambar",-1)),e("button",{onClick:Je,class:"text-gray-500 hover:text-gray-700",title:"Tutup sidebar"},t[46]||(t[46]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))])]),e("div",zo,[e("div",{ref_key:"desktopImageContainer",ref:Oe,class:"relative bg-gray-100 rounded-lg overflow-hidden",onMousedown:ke,onMousemove:Se,onMouseup:se,onMouseleave:se,onWheel:ft},[e("img",{ref_key:"desktopImageElement",ref:De,src:Z.value,alt:"Gambar Preview",class:"w-full h-auto max-h-80 object-contain cursor-grab active:cursor-grabbing",style:_e({transform:`scale(${m.value}) translate(${D.value.x}px, ${D.value.y}px) rotate(${S.value}deg)`,transition:X.value?"none":"transform 0.2s ease",transformOrigin:"center center"}),onLoad:wt},null,44,Ho),e("div",Oo,[e("button",{onClick:he,disabled:!ge.value,class:"bg-black bg-opacity-50 text-white rounded-full w-10 h-10 flex items-center justify-center hover:bg-opacity-70 transition-all disabled:opacity-30 disabled:cursor-not-allowed"},t[48]||(t[48]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)]),8,Yo),e("button",{onClick:fe,disabled:!ve.value,class:"bg-black bg-opacity-50 text-white rounded-full w-10 h-10 flex items-center justify-center hover:bg-opacity-70 transition-all disabled:opacity-30 disabled:cursor-not-allowed"},t[49]||(t[49]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)]),8,Go)])],544),e("div",Xo,[e("div",Uo,[t[50]||(t[50]=e("span",{class:"text-sm font-medium text-gray-700"},"Zoom",-1)),e("span",Wo,i(Math.round(m.value*100))+"%",1)]),e("div",Vo,[e("button",{onClick:ye,disabled:m.value<=.5,class:"flex-1 bg-gray-200 hover:bg-gray-300 text-gray-800 py-2 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed transition-colors"},t[51]||(t[51]=[e("svg",{class:"w-5 h-5 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20 12H4"})],-1)]),8,Zo),e("button",{onClick:xe,class:"flex-1 bg-blue-600 hover:bg-blue-700 text-white py-2 rounded-lg transition-colors"}," Reset "),e("button",{onClick:be,disabled:m.value>=3,class:"flex-1 bg-gray-200 hover:bg-gray-300 text-gray-800 py-2 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed transition-colors"},t[52]||(t[52]=[e("svg",{class:"w-5 h-5 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1)]),8,qo)]),e("div",Jo,[t[53]||(t[53]=e("span",{class:"text-sm font-medium text-gray-700"},"Rotasi",-1)),e("span",Qo,i(S.value)+"°",1)]),e("div",{class:"flex items-center gap-2"},[e("button",{onClick:Qe,class:"flex-1 bg-gray-200 hover:bg-gray-300 text-gray-800 py-2 rounded-lg transition-colors",title:"Putar ke Kiri"},t[54]||(t[54]=[e("svg",{class:"w-5 h-5 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 12a9 9 0 019-9 9.75 9.75 0 017.5 3.5L21 12m0 0l-3.5-3.5M21 12H15"})],-1)])),e("button",{onClick:et,class:"flex-1 bg-gray-200 hover:bg-gray-300 text-gray-800 py-2 rounded-lg transition-colors",title:"Putar ke Kanan"},t[55]||(t[55]=[e("svg",{class:"w-5 h-5 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 12a9 9 0 01-9 9 9.75 9.75 0 01-7.5-3.5L3 12m0 0l3.5 3.5M3 12h6"})],-1)]))])]),e("div",en,[e("div",tn,[e("div",null,[t[56]||(t[56]=e("label",{class:"text-xs font-semibold text-gray-500 uppercase tracking-wide"},"Komponen",-1)),e("p",sn,i(x.value.componentName||"-"),1)]),e("div",null,[t[57]||(t[57]=e("label",{class:"text-xs font-semibold text-gray-500 uppercase tracking-wide"},"Poin Inspeksi",-1)),e("div",on,[e("p",nn,i(x.value.pointName||"-"),1),x.value.status?(n(),o("span",{key:0,class:$(["px-2 py-1 rounded-full text-xs font-semibold",Ae(x.value.status)])},i(x.value.status),3)):g("",!0)])]),x.value.note?(n(),o("div",an,[t[58]||(t[58]=e("label",{class:"text-xs font-semibold text-gray-500 uppercase tracking-wide"},"Catatan",-1)),e("p",rn,i(x.value.note),1)])):g("",!0),pe.value&&Ge.value?(n(),o("div",ln,[e("button",{onClick:Ve,class:"w-full bg-orange-600 hover:bg-orange-700 text-white py-2 px-4 rounded-lg transition-colors flex items-center justify-center gap-2"},t[59]||(t[59]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),e("span",{class:"text-sm font-medium"},"Tambah Estimasi Perbaikan",-1)]))])):g("",!0)])]),e("div",dn," Gambar "+i(w.value+1)+" dari "+i(y.value.length),1)])])):g("",!0)])}}},gn=zt(un,[["__scopeId","data-v-c30fd45e"]]);export{gn as default};
