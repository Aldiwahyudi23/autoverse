import{r as c,q as P,x as S,j as I,o,w as U,k as V,d as t,u as m,v as q,c as n,b as r,n as p,t as a,F as O,m as $,y as B,z as w,A as v,W as F}from"./vendor-D9AtPSqO.js";import{A as J}from"./AppLayout-C-o7je2P.js";import"./app-DD5nWmYF.js";const K={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6"},L={class:"mb-6"},z={class:"flex justify-between items-start"},E={key:0,class:"mb-4 bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded"},G={class:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6"},W={class:"bg-white shadow rounded-lg p-6"},H={class:"space-y-3"},Q={class:"mt-1 text-sm text-gray-900"},X={class:"mt-1 text-sm text-gray-900"},Y={class:"mt-1 text-sm text-gray-900"},Z={class:"bg-white shadow rounded-lg p-6"},tt={class:"space-y-3"},et={class:"mt-1 text-sm text-gray-900"},st={key:0},at={class:"mt-1 text-sm text-gray-900"},ot={key:1},nt={class:"mt-1 text-sm text-gray-900"},rt={key:2},lt={class:"mt-1 text-sm text-gray-900"},it={class:"bg-white shadow rounded-lg p-6 mb-6"},dt={class:"overflow-x-auto"},mt={class:"min-w-full divide-y divide-gray-200"},ut={class:"bg-white divide-y divide-gray-200"},xt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},gt={class:"text-xs text-gray-500"},yt={class:"text-xs text-gray-500"},ft={class:"px-6 py-4 text-sm text-gray-900"},bt={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"},ct={class:"bg-gray-50"},pt={class:"px-6 py-4 whitespace-nowrap text-sm font-bold text-gray-900"},wt={key:1,class:"bg-white shadow rounded-lg p-6"},vt={class:"mb-6"},ht={class:"flex space-x-4"},kt={key:0},_t={key:0,class:"mt-1 text-sm text-red-600"},jt={class:"mt-1 relative rounded-md shadow-sm"},Dt={class:"bg-gray-50 rounded-lg p-4"},Pt={class:"flex justify-between mb-2"},St={class:"text-sm font-medium"},Bt={class:"flex justify-between mb-2"},Ft={class:"text-sm font-medium text-red-600"},Tt={class:"flex justify-between pt-2 border-t border-gray-200"},At={class:"text-sm font-bold text-green-600"},Nt={class:"flex justify-end"},Rt=["disabled"],Ct={key:0},Mt={key:1},It={key:0,class:"mt-1 text-sm text-red-600"},Ut={class:"flex justify-end"},Vt=["disabled"],qt={key:0},Ot={key:1},$t={key:2,class:"bg-white shadow rounded-lg p-6"},Jt={class:"space-y-4"},Kt={key:0},Lt={class:"mt-1 text-sm text-gray-900"},zt={key:1},Et={class:"mt-1 text-sm text-gray-900"},Gt={key:2},Wt={class:"mt-1 text-sm text-gray-900"},Ht={key:3},Qt={class:"mt-1 text-sm font-gray-900"},Xt={key:4},Yt={class:"mt-1 text-sm text-gray-900"},Zt={key:5},te={class:"mt-1 text-sm text-gray-900"},ee={key:6},se={class:"mt-2"},ae=["href"],le={__name:"Process",props:{withdrawal:{type:Object,required:!0},paymentMethods:{type:Object,required:!0}},setup(s){const y=s,x=c("approve"),u=c(!1),h=c(y.withdrawal.total_amount),T={pending:"Pending",approved:"Disetujui",processing:"Diproses",completed:"Selesai",rejected:"Ditolak"},A=P(()=>({pending:"bg-yellow-100 text-yellow-800",approved:"bg-blue-100 text-blue-800",processing:"bg-indigo-100 text-indigo-800",completed:"bg-green-100 text-green-800",rejected:"bg-red-100 text-red-800"})[y.withdrawal.status]||"bg-gray-100 text-gray-800"),d=S({admin_fee:0,notes:"",proof_file:null}),f=S({rejection_reason:""}),b=P(()=>x.value==="approve"?d.errors:f.errors),N=i=>{d.proof_file=i.target.files[0]},R=()=>{const i=parseFloat(d.admin_fee)||0;h.value=y.withdrawal.total_amount-i},C=()=>{d.post(route("withdrawal.approve",y.withdrawal.id),{preserveScroll:!0,onStart:()=>u.value=!0,onFinish:()=>u.value=!1,onSuccess:()=>F.reload()})},M=()=>{f.post(route("withdrawal.reject",y.withdrawal.id),{preserveScroll:!0,onStart:()=>u.value=!0,onFinish:()=>u.value=!1,onSuccess:()=>F.reload()})},g=i=>new Intl.NumberFormat("id-ID").format(i||0),k=i=>i?new Date(i).toLocaleDateString("id-ID",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}):"-";return(i,e)=>(o(),I(J,{title:"Detail Penarikan"},{default:U(()=>{var _,j,D;return[V(m(q),{title:"Detail Penarikan"}),t("div",K,[t("div",L,[t("div",z,[e[5]||(e[5]=t("div",null,[t("h3",{class:"text-xl font-bold text-gray-900"},"Detail Pengajuan Penarikan")],-1)),t("div",{class:p([A.value,"px-3 py-1 rounded-full text-sm font-medium"])},a(T[s.withdrawal.status]||s.withdrawal.status),3)])]),i.$page.props.flash.error?(o(),n("div",E,a(i.$page.props.flash.error),1)):r("",!0),t("div",G,[t("div",W,[e[9]||(e[9]=t("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Informasi Pengaju",-1)),t("div",H,[t("div",null,[e[6]||(e[6]=t("label",{class:"text-sm font-medium text-gray-500"},"Nama",-1)),t("p",Q,a((_=s.withdrawal.user)==null?void 0:_.name),1)]),t("div",null,[e[7]||(e[7]=t("label",{class:"text-sm font-medium text-gray-500"},"Email",-1)),t("p",X,a((j=s.withdrawal.user)==null?void 0:j.email),1)]),t("div",null,[e[8]||(e[8]=t("label",{class:"text-sm font-medium text-gray-500"},"Tanggal Pengajuan",-1)),t("p",Y,a(k(s.withdrawal.requested_at)),1)])])]),t("div",Z,[e[14]||(e[14]=t("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Informasi Pembayaran",-1)),t("div",tt,[t("div",null,[e[10]||(e[10]=t("label",{class:"text-sm font-medium text-gray-500"},"Metode Pembayaran",-1)),t("p",et,a(s.paymentMethods[s.withdrawal.payment_method]),1)]),s.withdrawal.account_number?(o(),n("div",st,[e[11]||(e[11]=t("label",{class:"text-sm font-medium text-gray-500"},"Nomor Rekening",-1)),t("p",at,a(s.withdrawal.account_number),1)])):r("",!0),s.withdrawal.account_name?(o(),n("div",ot,[e[12]||(e[12]=t("label",{class:"text-sm font-medium text-gray-500"},"Nama Pemilik",-1)),t("p",nt,a(s.withdrawal.account_name),1)])):r("",!0),s.withdrawal.bank_name?(o(),n("div",rt,[e[13]||(e[13]=t("label",{class:"text-sm font-medium text-gray-500"},"Nama Bank",-1)),t("p",lt,a(s.withdrawal.bank_name),1)])):r("",!0)])])]),t("div",it,[e[17]||(e[17]=t("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Distribusi yang Dipilih",-1)),t("div",dt,[t("table",mt,[e[16]||(e[16]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Kode Transaksi "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Deskripsi "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Jumlah ")])],-1)),t("tbody",ut,[(o(!0),n(O,null,$(s.withdrawal.transaction_distributions,l=>(o(),n("tr",{key:l.id},[t("td",xt,[t("div",null,a(l.transaction.invoice_number),1),t("div",gt,a(l.transaction.inspection.plate_number),1),t("div",yt,a(l.transaction.inspection.car_name),1)]),t("td",ft,a(l.role_type||"Distribusi Pendapatan"),1),t("td",bt," Rp "+a(g(l.amount)),1)]))),128))]),t("tfoot",ct,[t("tr",null,[e[15]||(e[15]=t("td",{colspan:"3",class:"px-6 py-4 text-right text-sm font-medium text-gray-900"}," Total: ",-1)),t("td",pt," Rp "+a(g(s.withdrawal.total_amount)),1)])])])])]),s.withdrawal.status==="pending"||s.withdrawal.status==="processing"?(o(),n("div",wt,[e[30]||(e[30]=t("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Konfirmasi Penarikan",-1)),t("div",vt,[t("nav",ht,[t("button",{onClick:e[0]||(e[0]=l=>x.value="approve"),class:p([x.value==="approve"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","border-b-2 px-1 pb-4 text-sm font-medium"])}," Setujui ",2),t("button",{onClick:e[1]||(e[1]=l=>x.value="reject"),class:p([x.value==="reject"?"border-red-500 text-red-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","border-b-2 px-1 pb-4 text-sm font-medium"])}," Tolak ",2)])]),x.value==="approve"?(o(),n("form",{key:0,onSubmit:B(C,["prevent"]),class:"space-y-6"},[s.withdrawal.payment_method==="transfer"?(o(),n("div",kt,[e[18]||(e[18]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Upload Bukti Transfer * ",-1)),t("input",{type:"file",onChange:N,accept:".jpg,.jpeg,.png,.pdf",class:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"},null,32),e[19]||(e[19]=t("p",{class:"mt-1 text-sm text-gray-500"}," Upload bukti transfer dalam format JPG, PNG, atau PDF (maks. 2MB) ",-1)),b.value.proof_file?(o(),n("p",_t,a(b.value.proof_file),1)):r("",!0)])):r("",!0),t("div",null,[e[21]||(e[21]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Biaya Admin ",-1)),t("div",jt,[e[20]||(e[20]=t("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[t("span",{class:"text-gray-500 sm:text-sm"},"Rp")],-1)),w(t("input",{type:"number","onUpdate:modelValue":e[2]||(e[2]=l=>m(d).admin_fee=l),onInput:R,min:"0",step:"1000",class:"pl-12 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"},null,544),[[v,m(d).admin_fee]])]),e[22]||(e[22]=t("p",{class:"mt-1 text-sm text-gray-500"}," Kosongkan jika tidak ada biaya admin ",-1))]),t("div",Dt,[t("div",Pt,[e[23]||(e[23]=t("span",{class:"text-sm text-gray-600"},"Total Pengajuan:",-1)),t("span",St,"Rp "+a(g(s.withdrawal.total_amount)),1)]),t("div",Bt,[e[24]||(e[24]=t("span",{class:"text-sm text-gray-600"},"Biaya Admin:",-1)),t("span",Ft,"- Rp "+a(g(m(d).admin_fee||0)),1)]),t("div",Tt,[e[25]||(e[25]=t("span",{class:"text-sm font-medium text-gray-900"},"Dana yang Diterima:",-1)),t("span",At,"Rp "+a(g(h.value)),1)])]),t("div",null,[e[26]||(e[26]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Catatan (Opsional) ",-1)),w(t("textarea",{"onUpdate:modelValue":e[3]||(e[3]=l=>m(d).notes=l),rows:"3",class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"},null,512),[[v,m(d).notes]]),e[27]||(e[27]=t("p",{class:"mt-1 text-sm text-gray-500"}," Berikan catatan tambahan jika diperlukan ",-1))]),t("div",Nt,[t("button",{type:"submit",disabled:u.value||s.withdrawal.payment_method==="transfer"&&!m(d).proof_file,class:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed"},[u.value?(o(),n("span",Ct,"Menyetujui...")):(o(),n("span",Mt,"Setujui Penarikan"))],8,Rt)])],32)):r("",!0),x.value==="reject"?(o(),n("form",{key:1,onSubmit:B(M,["prevent"]),class:"space-y-6"},[t("div",null,[e[28]||(e[28]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Alasan Penolakan * ",-1)),w(t("textarea",{"onUpdate:modelValue":e[4]||(e[4]=l=>m(f).rejection_reason=l),rows:"4",required:"",class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-red-500 focus:ring-red-500"},null,512),[[v,m(f).rejection_reason]]),e[29]||(e[29]=t("p",{class:"mt-1 text-sm text-gray-500"}," Jelaskan alasan penolakan pengajuan ini ",-1)),b.value.rejection_reason?(o(),n("p",It,a(b.value.rejection_reason),1)):r("",!0)]),t("div",Ut,[t("button",{type:"submit",disabled:u.value,class:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 disabled:opacity-50 disabled:cursor-not-allowed"},[u.value?(o(),n("span",qt,"Menolak...")):(o(),n("span",Ot,"Tolak Pengajuan"))],8,Vt)])],32)):r("",!0)])):(o(),n("div",$t,[e[38]||(e[38]=t("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Status Penarikan",-1)),t("div",Jt,[s.withdrawal.processed_at?(o(),n("div",Kt,[e[31]||(e[31]=t("label",{class:"text-sm font-medium text-gray-500"},"Tanggal Diproses",-1)),t("p",Lt,a(k(s.withdrawal.processed_at)),1)])):r("",!0),s.withdrawal.processor?(o(),n("div",zt,[e[32]||(e[32]=t("label",{class:"text-sm font-medium text-gray-500"},"Diproses Oleh",-1)),t("p",Et,a((D=s.withdrawal.processor)==null?void 0:D.name),1)])):r("",!0),s.withdrawal.admin_fee>0?(o(),n("div",Gt,[e[33]||(e[33]=t("label",{class:"text-sm font-medium text-gray-500"},"Biaya Admin",-1)),t("p",Wt,"Rp "+a(g(s.withdrawal.admin_fee)),1)])):r("",!0),s.withdrawal.final_amount?(o(),n("div",Ht,[e[34]||(e[34]=t("label",{class:"text-sm font-medium text-gray-500"},"Dana yang Diterima",-1)),t("p",Qt,"Rp "+a(g(s.withdrawal.final_amount)),1)])):r("",!0),s.withdrawal.rejection_reason?(o(),n("div",Xt,[e[35]||(e[35]=t("label",{class:"text-sm font-medium text-gray-500 text-red-600"},"Alasan Penolakan",-1)),t("p",Yt,a(s.withdrawal.rejection_reason),1)])):r("",!0),s.withdrawal.notes?(o(),n("div",Zt,[e[36]||(e[36]=t("label",{class:"text-sm font-medium text-gray-500"},"Catatan",-1)),t("p",te,a(s.withdrawal.notes),1)])):r("",!0),s.withdrawal.file_path?(o(),n("div",ee,[e[37]||(e[37]=t("label",{class:"text-sm font-medium text-gray-500"},"Bukti Transfer",-1)),t("div",se,[t("a",{href:i.route("withdrawal.download-proof",s.withdrawal.id),target:"_blank",class:"inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"}," Download Bukti ",8,ae)])])):r("",!0)])]))])]}),_:1}))}};export{le as default};
