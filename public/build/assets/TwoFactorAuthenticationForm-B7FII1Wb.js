import{r as g,O as R,c as o,o as e,d as a,k as r,l as U,w as n,f as c,n as _,t as C,B as $,D as E,p as Q,x as j,q as D,G,j as y,b as m,u as V,F as I,m as O,W as M}from"./vendor-g77w9U1W.js";import{b as W,a as J}from"./DialogModal-CIpg-nCT.js";import{_ as z}from"./InputError-nKXwU56H.js";import{_ as B}from"./PrimaryButton-CrKKsBb9.js";import{_ as A}from"./SecondaryButton-DsbfI-Qu.js";import{_ as H}from"./TextInput-BPKZukLD.js";import{_ as X}from"./DangerButton-DOAnj2wa.js";import{_ as Y}from"./InputLabel-BvO_QVNR.js";import"./SectionTitle-BA1Y70LV.js";import"./app-Dk-tShi8.js";const Z={class:"mt-4"},w={__name:"ConfirmsPassword",props:{title:{type:String,default:"Confirm Password"},content:{type:String,default:"For your security, please confirm your password to continue."},button:{type:String,default:"Confirm"}},emits:["confirmed"],setup(h,{emit:S}){const b=S,i=g(!1),t=R({password:"",error:"",processing:!1}),u=g(null),v=()=>{axios.get(route("password.confirmation")).then(l=>{l.data.confirmed?b("confirmed"):(i.value=!0,setTimeout(()=>u.value.focus(),250))})},k=()=>{t.processing=!0,axios.post(route("password.confirm"),{password:t.password}).then(()=>{t.processing=!1,f(),E().then(()=>b("confirmed"))}).catch(l=>{t.processing=!1,t.error=l.response.data.errors.password[0],u.value.focus()})},f=()=>{i.value=!1,t.password="",t.error=""};return(l,d)=>(e(),o("span",null,[a("span",{onClick:v},[U(l.$slots,"default")]),r(W,{show:i.value,onClose:f},{title:n(()=>[c(C(h.title),1)]),content:n(()=>[c(C(h.content)+" ",1),a("div",Z,[r(H,{ref_key:"passwordInput",ref:u,modelValue:t.password,"onUpdate:modelValue":d[0]||(d[0]=T=>t.password=T),type:"password",class:"mt-1 block w-3/4",placeholder:"Password",autocomplete:"current-password",onKeyup:$(k,["enter"])},null,8,["modelValue"]),r(z,{message:t.error,class:"mt-2"},null,8,["message"])])]),footer:n(()=>[r(A,{onClick:f},{default:n(()=>d[1]||(d[1]=[c(" Cancel ")])),_:1,__:[1]}),r(B,{class:_(["ms-3",{"opacity-25":t.processing}]),disabled:t.processing,onClick:k},{default:n(()=>[c(C(h.button),1)]),_:1},8,["class","disabled"])]),_:1},8,["show"])]))}},ee={key:0,class:"text-lg font-medium text-gray-900"},te={key:1,class:"text-lg font-medium text-gray-900"},oe={key:2,class:"text-lg font-medium text-gray-900"},ae={key:3},se={key:0},ne={class:"mt-4 max-w-xl text-sm text-gray-600"},re={key:0,class:"font-semibold"},ie={key:1},le=["innerHTML"],ue={key:0,class:"mt-4 max-w-xl text-sm text-gray-600"},de={class:"font-semibold"},ce=["innerHTML"],me={key:1,class:"mt-4"},fe={key:1},pe={class:"grid gap-1 max-w-xl mt-4 px-4 py-4 font-mono text-sm bg-gray-100 rounded-lg border border-gray-200"},ge={class:"mt-5"},ke={key:0},ve={key:0,class:"flex items-center"},ye={key:1},we={key:1},he={key:0,class:"flex items-center"},_e={key:1},be={key:0,class:"flex items-center"},xe={key:1},$e={__name:"TwoFactorAuthenticationForm",props:{requiresConfirmation:Boolean},setup(h){const S=h,b=Q(),i=g(!1),t=g(!1),u=g(!1),v=g(null),k=g(null),f=g([]),l=j({code:""}),d=D(()=>{var p;return!i.value&&((p=b.props.auth.user)==null?void 0:p.two_factor_enabled)});G(d,()=>{d.value||(l.reset(),l.clearErrors())});const T=()=>{i.value=!0,M.post(route("two-factor.enable"),{},{preserveScroll:!0,onSuccess:()=>Promise.all([q(),L(),K()]),onFinish:()=>{i.value=!1,t.value=S.requiresConfirmation}})},q=()=>axios.get(route("two-factor.qr-code")).then(p=>{v.value=p.data.svg}),L=()=>axios.get(route("two-factor.secret-key")).then(p=>{k.value=p.data.secretKey}),K=()=>axios.get(route("two-factor.recovery-codes")).then(p=>{f.value=p.data}),F=()=>{l.post(route("two-factor.confirm"),{errorBag:"confirmTwoFactorAuthentication",preserveScroll:!0,preserveState:!0,onSuccess:()=>{t.value=!1,v.value=null,k.value=null}})},N=()=>{axios.post(route("two-factor.recovery-codes")).then(()=>K())},P=()=>{u.value=!0,M.delete(route("two-factor.disable"),{preserveScroll:!0,onSuccess:()=>{u.value=!1,t.value=!1}})};return(p,s)=>(e(),y(J,null,{content:n(()=>[d.value&&!t.value?(e(),o("h3",ee," Anda telah mengaktifkan autentikasi dua faktor. ")):d.value&&t.value?(e(),o("h3",te," Selesaikan pengaktifan autentikasi dua faktor. ")):(e(),o("h3",oe," Anda belum mengaktifkan autentikasi dua faktor. ")),s[9]||(s[9]=a("div",{class:"mt-3 max-w-xl text-sm text-gray-600"},[a("p",null," Ketika autentikasi dua faktor diaktifkan, Anda akan diminta untuk memasukkan token acak yang aman selama proses autentikasi. Anda dapat mengambil token ini dari aplikasi Google Authenticator di ponsel Anda. ")],-1)),d.value?(e(),o("div",ae,[v.value?(e(),o("div",se,[a("div",ne,[t.value?(e(),o("p",re," Untuk menyelesaikan pengaktifan autentikasi dua faktor, pindai kode QR berikut menggunakan aplikasi authenticator di ponsel Anda atau masukkan kunci pengaturan dan berikan kode OTP yang dihasilkan. ")):(e(),o("p",ie," Autentikasi dua faktor sekarang sudah aktif. Pindai kode QR berikut menggunakan aplikasi authenticator di ponsel Anda atau masukkan kunci pengaturan. "))]),a("div",{class:"mt-4 p-2 inline-block bg-white rounded-lg border border-gray-300",innerHTML:v.value},null,8,le),k.value?(e(),o("div",ue,[a("p",de,[s[1]||(s[1]=c(" Kunci Pengaturan: ")),a("span",{innerHTML:k.value},null,8,ce)])])):m("",!0),t.value?(e(),o("div",me,[r(Y,{for:"code",value:"Kode"}),r(H,{id:"code",modelValue:V(l).code,"onUpdate:modelValue":s[0]||(s[0]=x=>V(l).code=x),type:"text",name:"code",class:"block mt-1 w-1/2",inputmode:"numeric",autofocus:"",autocomplete:"one-time-code",onKeyup:$(F,["enter"])},null,8,["modelValue"]),r(z,{message:V(l).errors.code,class:"mt-2"},null,8,["message"])])):m("",!0)])):m("",!0),f.value.length>0&&!t.value?(e(),o("div",fe,[s[2]||(s[2]=a("div",{class:"mt-4 max-w-xl text-sm text-gray-600"},[a("p",{class:"font-semibold"}," Simpan kode pemulihan ini di pengelola kata sandi yang aman. Kode ini dapat digunakan untuk memulihkan akses ke akun Anda jika perangkat autentikasi dua faktor Anda hilang. ")],-1)),a("div",pe,[(e(!0),o(I,null,O(f.value,x=>(e(),o("div",{key:x},C(x),1))),128))])])):m("",!0)])):m("",!0),a("div",ge,[d.value?(e(),o("div",we,[r(w,{onConfirmed:F},{default:n(()=>[t.value?(e(),y(B,{key:0,type:"button",class:_(["me-3",["px-6 py-2 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white","bg-gradient-to-r from-sky-600 to-blue-700 hover:from-sky-700 hover:to-blue-800","focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500","transition-all duration-200 transform hover:scale-105",i.value?"opacity-50 cursor-not-allowed":""]]),disabled:i.value},{default:n(()=>[i.value?(e(),o("span",he,s[4]||(s[4]=[a("svg",{class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[a("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),a("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),c(" Mengonfirmasi... ")]))):(e(),o("span",_e," Konfirmasi "))]),_:1},8,["class","disabled"])):m("",!0)]),_:1}),r(w,{onConfirmed:N},{default:n(()=>[f.value.length>0&&!t.value?(e(),y(A,{key:0,class:"me-3 px-4 py-2 bg-white border border-gray-300 rounded-lg text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200"},{default:n(()=>s[5]||(s[5]=[c(" Buat Ulang Kode Pemulihan ")])),_:1,__:[5]})):m("",!0)]),_:1}),r(w,{onConfirmed:K},{default:n(()=>[f.value.length===0&&!t.value?(e(),y(A,{key:0,class:"me-3 px-4 py-2 bg-white border border-gray-300 rounded-lg text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200"},{default:n(()=>s[6]||(s[6]=[c(" Tampilkan Kode Pemulihan ")])),_:1,__:[6]})):m("",!0)]),_:1}),r(w,{onConfirmed:P},{default:n(()=>[t.value?(e(),y(A,{key:0,class:_(["px-4 py-2 bg-white border border-gray-300 rounded-lg text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200",{"opacity-25":u.value}]),disabled:u.value},{default:n(()=>s[7]||(s[7]=[c(" Batal ")])),_:1,__:[7]},8,["class","disabled"])):m("",!0)]),_:1}),r(w,{onConfirmed:P},{default:n(()=>[t.value?m("",!0):(e(),y(X,{key:0,class:_(["px-6 py-2 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white","bg-red-600 hover:bg-red-700","focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500","transition-all duration-200 transform hover:scale-105",u.value?"opacity-50 cursor-not-allowed":""]),disabled:u.value},{default:n(()=>[u.value?(e(),o("span",be,s[8]||(s[8]=[a("svg",{class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[a("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),a("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),c(" Menonaktifkan... ")]))):(e(),o("span",xe," Nonaktifkan "))]),_:1},8,["class","disabled"]))]),_:1})])):(e(),o("div",ke,[r(w,{onConfirmed:T},{default:n(()=>[r(B,{type:"button",class:_(["px-6 py-2 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white","bg-gradient-to-r from-sky-600 to-blue-700 hover:from-sky-700 hover:to-blue-800","focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500","transition-all duration-200 transform hover:scale-105",i.value?"opacity-50 cursor-not-allowed":""]),disabled:i.value},{default:n(()=>[i.value?(e(),o("span",ve,s[3]||(s[3]=[a("svg",{class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[a("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),a("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),c(" Mengaktifkan... ")]))):(e(),o("span",ye," Aktifkan "))]),_:1},8,["class","disabled"])]),_:1})]))])]),_:1}))}};export{$e as default};
