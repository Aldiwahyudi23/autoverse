import{r as f,x as Y,q as x,G as Ue,g as We,j as N,o as r,w as V,k as m,d as e,b as u,c as a,u as l,v as qe,f as v,t as i,z as $,A as Z,F as ee,m as te,n as j,S as O,y as ye,U as ze,I as xe,W as M}from"./vendor-C4AlKu7N.js";import{A as He}from"./AppLayout-Bo87GCWJ.js";import{_ as Ne}from"./CardCustomer-DwYRhtI6.js";import{_ as Oe}from"./app-CtsRg-vw.js";import{r as se,a as Ee}from"./XMarkIcon-CAAE2YrG.js";import{r as Ke,a as be,b as Ge,c as Je}from"./PlusIcon-aJq3j7gG.js";import{a as Qe,r as Xe,C as E}from"./car-zy9_a15B.js";const Ye={class:"w-full px-4 sm:px-6 lg:px-6 py-6"},Ze={class:"flex flex-col sm:flex-row sm:items-center justify-between mb-6 gap-4"},et={class:"text-xl md:text-3xl font-bold text-gray-900 text-center sm:text-left"},tt={key:0,class:"text-lg text-gray-600 block sm:inline sm:ml-2"},st={key:1,class:"text-lg text-gray-600 block sm:inline sm:ml-2"},nt={key:2,class:"text-lg text-gray-600 block sm:inline sm:ml-2"},rt={key:0,class:"flex items-center gap-2"},at={key:0,class:"relative flex-1"},ot={key:0,class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4"},it={class:"px-4 py-2 border-b flex justify-between items-center"},lt={class:"flex items-center gap-2"},dt=["onClick"],ut={key:0,class:"px-4 py-3 bg-gray-50 border-b"},ct={class:"flex items-center justify-between"},mt={class:"flex items-center"},pt={class:"text-sm text-gray-600"},gt=["href"],ft={class:"p-4 flex justify-between items-start"},vt={class:"flex items-center mb-1"},yt={class:"text-sm font-semibold text-blue-700 ml-7 -mt-1"},xt=["onClick"],bt={class:"flex items-center justify-between"},_t={class:"flex items-center flex-1"},ht={class:"text-sm font-medium text-gray-800"},wt={key:0},kt={class:"text-gray-600"},It={key:1},Ct={class:"flex items-center mt-2"},Rt={class:"text-sm font-bold text-gray-900"},$t={class:"transition-all duration-300 ease-in-out"},jt={class:"px-4 py-3 bg-white border-t border-gray-100"},Mt={class:"grid grid-cols-2 gap-1 text-sm"},At={key:1,class:"p-2 bg-yellow-50 border border-yellow-200 rounded"},Lt={class:"p-4 flex space-x-2"},Tt=["onClick"],St=["onClick","disabled"],Bt={key:1,class:"text-center py-8"},Dt={class:"text-gray-500"},Pt={class:"text-center mt-6"},Ft={key:1,class:"fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center p-4 z-50"},Vt={class:"bg-white rounded-lg shadow-xl max-w-md w-full"},Ut={class:"p-6"},Wt={class:"flex items-start mb-4"},qt={key:0},zt={class:"font-medium text-gray-800"},Ht={class:"text-sm text-gray-600"},Nt={class:"text-gray-500"},Ot={key:1,class:"text-sm font-medium text-gray-800"},Et={class:"flex items-center mt-2"},Kt={class:"text-base font-bold text-gray-900"},Gt={class:"text-gray-600 mb-6"},Jt={key:0,class:"font-semibold text-gray-800"},Qt={class:"flex justify-end space-x-3"},Xt=["disabled"],Yt={key:0},Zt={key:1},es={key:2,class:"fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center p-4 z-50"},ts={class:"bg-white rounded-lg shadow-xl max-w-md w-full"},ss={class:"p-6"},ns={class:"flex items-center justify-between mb-4"},rs={class:"mb-6 p-4 bg-gray-50 rounded-lg"},as={class:"flex items-start"},os={class:"font-medium text-gray-800"},is={class:"text-sm text-gray-600"},ls={class:"text-sm text-gray-500 mt-1"},ds={class:"font-medium"},us={class:"space-y-4"},cs=["disabled"],ms=["value","disabled"],ps={key:0,class:"text-xs text-gray-500"},gs={key:0,class:"text-xs text-gray-500 mt-1"},fs=["value"],vs={key:0,class:"text-red-500 text-sm mt-1"},ys={class:"flex justify-end space-x-3 mt-6"},xs=["disabled"],bs={key:0},_s={key:1},hs={key:3,class:"fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center p-4 z-50"},ws={class:"bg-white rounded-lg shadow-xl max-w-md w-full"},ks={class:"p-6"},Is={class:"flex items-center justify-between mb-4"},Cs={class:"flex items-start mb-4"},Rs={key:0},$s={class:"font-medium text-gray-800"},js={class:"text-sm text-gray-600"},Ms={class:"text-gray-500"},As={key:1,class:"text-sm font-medium text-gray-800"},Ls={class:"flex items-center mt-2"},Ts={class:"text-base font-bold text-gray-900"},Ss={class:"mb-6"},Bs={key:0,class:"text-red-500 text-sm mt-1"},Ds={class:"flex justify-end space-x-3"},Ps=["disabled"],Fs={key:0},Vs={key:1},Us={__name:"Index",props:{tasks:Array,encryptedIds:Object,userRole:String,userId:Number,team:Array,filters:Object},setup(A){const d=A,L=f(!1),K=f(!1),G=f(!1),U=f(!1),o=f(null),k=f(""),I=f(""),C=f(""),T=f(d.filters.search),S=f(""),W=f([]),q=f(!1),z=f(new Set),J=Y({}),R=Y({reason:""}),w=Y({new_inspector_id:"",transfer_reason:""});let ne=null;const _e=()=>{clearTimeout(ne),ne=setTimeout(()=>{M.get(route("job.index"),{search:T.value},{preserveState:!0,replace:!0})},300)},re=()=>{U.value&&(T.value="",M.get(route("job.index"),{search:""},{preserveState:!0,replace:!0})),U.value=!U.value},he=t=>{if(o.value=t,p.value){M.get(route("inspections.review",{id:d.encryptedIds[t.id]}));return}if(y.value){if(t.status==="pending_review"){M.get(route("inspections.review",{id:d.encryptedIds[t.id]}));return}L.value=!0;return}if(h.value)if(t.user_id===d.userId){if(t.status==="pending_review"){M.get(route("inspections.review",{id:d.encryptedIds[t.id]}));return}L.value=!0;return}else{M.get(route("inspections.review",{id:d.encryptedIds[t.id]}));return}L.value=!0},we=t=>{o.value=t,K.value=!0},ke=t=>{var s;if(o.value=t,(s=t.customer)!=null&&s.sellers){const c=t.customer.sellers.find(g=>g.inspection_area&&(Array.isArray(g.inspection_area)?g.inspection_area.length>0:typeof g.inspection_area=="string"&&g.inspection_area.trim().length>0));if(c!=null&&c.inspection_area){const g=W.value.find(D=>{const b=c.inspection_area;return Array.isArray(b)&&b.length>0?b.some(P=>typeof P=="string"&&P.trim().toLowerCase()===D.name.toLowerCase()):typeof b=="string"&&b.trim().length>0?b.trim().toLowerCase()===D.name.toLowerCase():!1});g&&(S.value=g.id)}else console.warn("inspection_area not found or invalid for seller:",c)}G.value=!0},_=()=>{L.value=!1,K.value=!1,G.value=!1,k.value="",I.value="",C.value=""},Ie=()=>{o.value&&(R.reason=k.value,R.post(route("inspections.cancel",{inspection:d.encryptedIds[o.value.id]}),{onSuccess:()=>{_(),k.value=""}}))},Ce=()=>{o.value&&J.get(route("inspections.start",{inspection:d.encryptedIds[o.value.id]}),{onFinish:()=>{_()}})},Re=()=>{o.value&&(w.new_inspector_id=C.value,w.transfer_reason=I.value,w.post(route("inspections.transfer",{inspection:d.encryptedIds[o.value.id]}),{onSuccess:()=>{_(),I.value="",C.value=""}}))},p=x(()=>d.userRole==="admin_plann"),H=x(()=>d.userRole==="inspector"),y=x(()=>d.userRole==="quality_control"),h=x(()=>d.userRole==="coordinator"),ae=x(()=>d.userRole==="Admin"),B=x(()=>d.userRole==="Admin"),$e=x(()=>["Admin","coordinator","admin_plann","admin_region"].includes(d.userRole)),Q=t=>B.value||p.value||y.value||h.value?!1:H.value?d.tasks.some(c=>(c.status==="in_progress"||c.status==="revision")&&c.id!==t.id)&&!(t.status==="in_progress"||t.status==="revision"):!1,X=t=>p.value?"Lihat Detail":h.value?t.user_id===d.userId?t.status==="draft"?"Mulai Inspeksi":t.status==="in_progress"?"Lanjutkan Inspeksi":t.status==="pending_review"?"Periksa Laporan":t.status==="revision"?"Lanjutkan Revisi":t.status==="pending"?"Lanjutkan Inspeksi":"Detail":"Lihat Detail":(y.value||B.value,t.status==="draft"?"Mulai Inspeksi":t.status==="in_progress"?"Lanjutkan Inspeksi":t.status==="pending_review"?"Periksa Laporan":t.status==="revision"?"Lanjutkan Revisi":t.status==="pending"?"Lanjutkan Inspeksi":"Detail"),je=t=>p.value||y.value?"Memuat...":t.status==="draft"?"Memuat Halaman Inspeksi...":t.status==="in_progress"?"Membuka Halaman Inspeksi...":t.status==="pending_review"?"Memuat Halaman Review...":t.status==="revision"?"Memuat Halaman Revisi...":t.status==="pending"?"Memuat Halaman Inspeksi...":"Memuat...",Me=t=>{if(!t)return"";const c=new Date(t.inspection_date).toLocaleDateString("id-ID",{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),g=t.car?`${t.car.brand.name} ${t.car.model.name} ${t.car.type.name} ${(t.car.cc/1e3).toFixed(1)}L ${t.car.transmission} ${t.car.year}`:t.car_name;return`Halo, ada jadwal inspeksi baru:

ðŸ“… *${c}*
ðŸš— *${g}*
ðŸ“ *${t.plate_number}*

Tolong di bantu untuk melakukan inspeksi sesuai jadwal. Terima kasih!`},Ae=t=>{if(!t)return"";let s=t.replace(/\D/g,"");return s.startsWith("0")&&(s="62"+s.substring(1)),s.startsWith("62")||(s="62"+s),s},Le=["draft","pending"],Te=t=>p.value&&Le.includes(t.status),Se=t=>["inspector","coordinator","Admin","admin_plann","quality_control"].includes(d.userRole)&&["draft","in_progress","pending","revision"].includes(t.status),Be=t=>{switch(t){case"draft":return"bg-gray-100 text-gray-800";case"in_progress":return"bg-blue-100 text-blue-800";case"pending":return"bg-yellow-100 text-yellow-800";case"pending_review":return"bg-purple-100 text-purple-800";case"revision":return"bg-orange-100 text-orange-800";default:return"bg-gray-100 text-gray-800"}};x(()=>!p.value),x(()=>{var t,s;return((s=(t=d.tasks.customer)==null?void 0:t.sellers)==null?void 0:s.find(c=>c.inspection_id===d.tasks.id))||null});const De=t=>{z.value.has(t)?z.value.delete(t):z.value.add(t)},oe=t=>z.value.has(t);Ue(T,()=>{_e()});const Pe=async()=>{try{q.value=!0;const t=await fetch("/api/regions/active-with-teams");if(t.ok){const s=await t.json();W.value=s.regions||[]}else console.error("Failed to fetch regions")}catch(t){console.error("Error fetching regions:",t)}finally{q.value=!1}};We(()=>{Pe()});const Fe=t=>{const s=!t.customer,c=!t.transaction;return s&&c?"Belum ada data cust dan transaksi":s?"Belum ada data cust":c?"Belum ada transaksi":""},Ve=x(()=>{if(!S.value)return d.team;const t=W.value.find(s=>s.id===S.value);return t?d.team.filter(s=>s.region_name===t.name):[]});return(t,s)=>(r(),N(He,null,{default:V(()=>{var c,g,D,b,P,ie,le,de,ue,ce,me;return[m(l(qe),{title:"Tugas"}),e("div",Ye,[e("div",Ze,[e("h3",et,[v(i(p.value?"Monitoring Tugas Inspeksi":y.value?"Review & Revisi Inspeksi":"Tugas Inspeksi")+" ",1),H.value?(r(),a("span",tt,"- Saya")):u("",!0),h.value?(r(),a("span",st,"- Coordinator")):u("",!0),B.value?(r(),a("span",nt,"- Admin")):u("",!0)]),p.value||y.value||ae.value||h.value?(r(),a("div",rt,[U.value?(r(),a("div",at,[$(e("input",{"onUpdate:modelValue":s[0]||(s[0]=n=>T.value=n),type:"text",placeholder:"Cari plat/nama mobil/inspector...",class:"w-full px-4 py-2 pr-10 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm",autofocus:""},null,512),[[Z,T.value]]),e("button",{onClick:re,class:"absolute right-2 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600"},[m(l(se),{class:"h-5 w-5"})])])):u("",!0),e("button",{onClick:re,class:"p-2 text-gray-400 hover:text-gray-600 transition-colors"},[m(l(Ee),{class:"h-5 w-5"})])])):u("",!0)]),A.tasks.length>0?(r(),a("div",ot,[(r(!0),a(ee,null,te(A.tasks,n=>{var pe,ge,fe,ve;return r(),a("div",{key:n.id,class:"bg-white rounded-xl shadow-md overflow-hidden border border-gray-200 hover:shadow-lg transition"},[e("div",it,[e("div",lt,[e("span",{class:j(["px-2 py-1 text-xs font-medium rounded-full",Be(n.status)])},i(n.status.replace("_"," ").toUpperCase()),3),$e.value&&(!n.customer||!n.transaction)?(r(),N(l(O),{key:0,href:t.route("inspections.review",{id:A.encryptedIds[n.id]}),class:"cursor-pointer"},{default:V(()=>[m(l(Ke),{class:"h-5 w-5 text-yellow-500",title:Fe(n)},null,8,["title"])]),_:2},1032,["href"])):u("",!0)]),Te(n)?(r(),a("button",{key:0,onClick:ye(F=>ke(n),["stop"]),class:"text-xs text-blue-600 hover:text-blue-800 font-medium",title:"Alihkan ke inspector lain"},[m(l(be),{class:"h-4 w-4 inline"}),s[5]||(s[5]=v(" Alihkan "))],8,dt)):u("",!0)]),(p.value||y.value||h.value||ae.value)&&n.user?(r(),a("div",ut,[e("div",ct,[e("div",mt,[m(l(Qe),{class:"h-4 w-4 text-gray-500 mr-2"}),e("div",null,[s[6]||(s[6]=e("p",{class:"text-sm font-medium text-gray-700"},"Inspector",-1)),e("p",pt,i(n.user.name),1)])]),p.value&&n.user.numberPhone?(r(),a("a",{key:0,href:`https://wa.me/${Ae(n.user.numberPhone)}?text=${encodeURIComponent(Me(n))}`,target:"_blank",class:"text-green-600 hover:text-green-800 transition",title:"Kirim pesan WhatsApp ke inspector"},s[7]||(s[7]=[e("svg",{class:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24"},[e("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893A11.821 11.821 0 0020.465 3.488"})],-1)]),8,gt)):u("",!0)])])):u("",!0),e("div",ft,[e("div",null,[e("div",vt,[m(l(Xe),{class:"h-5 w-5 text-blue-500 mr-2"}),s[8]||(s[8]=e("span",{class:"text-sm font-medium text-gray-600"},"Jadwal",-1))]),e("p",yt,i(new Date(n.inspection_date).toLocaleDateString("id-ID",{weekday:"short",year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})),1)]),m(l(O),{href:t.route("inspection.log",{inspection:A.encryptedIds[n.id]}),class:"text-xs font-semibold text-indigo-600 hover:underline"},{default:V(()=>s[9]||(s[9]=[v(" Lihat Log ")])),_:2,__:[9]},1032,["href"])]),e("div",{onClick:F=>De(n.id),class:"px-4 py-3 bg-gray-50 border-t border-gray-100 cursor-pointer hover:bg-gray-100 transition-colors"},[e("div",bt,[e("div",_t,[m(l(E),{class:"h-5 w-5 text-gray-500 mr-2"}),e("div",ht,[n.car?(r(),a("div",wt,[v(i(`${n.car.brand.name} ${n.car.model.name} ${n.car.type.name} ${(n.car.cc/1e3).toFixed(1)} ${n.car.transmission} ${n.car.year}`)+" ",1),e("span",kt,"("+i(n.car.fuel_type)+")",1)])):(r(),a("div",It,i(n.car_name),1))])]),(r(),a("svg",{class:j(["h-5 w-5 text-gray-400 transition-transform",oe(n.id)?"rotate-180":""]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},s[10]||(s[10]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)]),2))]),e("div",Ct,[s[11]||(s[11]=e("span",{class:"text-xs font-semibold uppercase tracking-wide text-gray-500 mr-2"},"NO POLISI: ",-1)),e("span",Rt,i(n.plate_number),1)])],8,xt),$(e("div",$t,[e("div",jt,[m(Ne,{customer:n.customer,seller:((ge=(pe=n.customer)==null?void 0:pe.sellers)==null?void 0:ge.find(F=>F.inspection_id===n.id))||null,inspection:n,userRole:d.userRole},null,8,["customer","seller","inspection","userRole"]),n.transaction?(r(),a("div",{key:0,class:j(["p-2 rounded",{"bg-green-50 border border-green-200":(n==null?void 0:n.transaction.status)==="paid","bg-yellow-50 border border-yellow-200":((fe=n==null?void 0:n.transaction)==null?void 0:fe.status)==="pending"}])},[s[13]||(s[13]=e("p",{class:"text-xs font-medium text-gray-500"},"Pembayaran",-1)),e("div",Mt,[s[12]||(s[12]=e("span",null,"Status:",-1)),e("span",{class:j({"text-green-600 font-semibold":(n==null?void 0:n.transaction.status)==="paid","text-yellow-600 font-semibold":((ve=n==null?void 0:n.transaction)==null?void 0:ve.status)==="pending"})},i((n==null?void 0:n.transaction.status)==="paid"?"Lunas":"Menunggu"),3)])],2)):(r(),a("div",At,s[14]||(s[14]=[e("p",{class:"text-xs text-yellow-700"},"Data transaksi belum tersedia",-1)])))]),e("div",Lt,[Se(n)?(r(),a("button",{key:0,onClick:ye(F=>we(n),["stop"]),type:"button",class:"px-3 py-2 bg-gray-200 text-gray-700 font-medium rounded-md text-sm hover:bg-gray-300 transition-colors"}," Batal ",8,Tt)):u("",!0),e("button",{onClick:F=>he(n),disabled:Q(n),class:j(["flex-1 inline-flex items-center justify-center px-3 py-2 font-medium rounded-md text-sm transition-colors",p.value?"bg-gradient-to-r from-blue-600 to-indigo-600 text-white hover:from-blue-700 hover:to-indigo-700":y.value?"bg-gradient-to-r from-purple-600 to-pink-600 text-white hover:from-purple-700 hover:to-pink-700":Q(n)?"bg-gray-300 text-gray-600 cursor-not-allowed":"bg-gradient-to-r from-indigo-700 to-sky-600 text-white hover:from-indigo-800 hover:to-sky-700"])},[v(i(X(n))+" ",1),!p.value&&!y.value&&!Q(n)?(r(),N(l(Ge),{key:0,class:"ml-2 h-4 w-4"})):u("",!0)],10,St)])],512),[[ze,oe(n.id)]])])}),128))])):(r(),a("div",Bt,[e("p",Dt,i(p.value?"Tidak ada tugas inspeksi yang perlu dimonitor.":y.value?"Tidak ada laporan yang perlu direview.":"Tidak ada tugas inspeksi yang tersedia."),1)])),e("div",Pt,[m(l(O),{href:t.route("inspections.history"),class:"inline-block px-4 py-2 text-sm font-medium text-indigo-600 border border-indigo-600 rounded-md hover:bg-blue-50"},{default:V(()=>s[15]||(s[15]=[v(" Lihat Riwayat Inspeksi ")])),_:1,__:[15]},8,["href"])])]),p.value?(r(),N(l(O),{key:0,href:t.route("inspections.create.new"),class:"fixed bottom-24 right-6 z-40 p-4 bg-gradient-to-r from-indigo-700 to-sky-600 shadow-lg text-white rounded-full transition-colors duration-200 animate-bounce",title:"Buat Inspeksi Baru"},{default:V(()=>[m(l(Je),{class:"h-6 w-6"})]),_:1},8,["href"])):u("",!0),L.value&&(H.value||h.value||B.value||y.value)?(r(),a("div",Ft,[e("div",Vt,[e("div",Ut,[s[18]||(s[18]=e("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Konfirmasi",-1)),e("div",Wt,[m(l(E),{class:"h-8 w-8 text-blue-500 mr-3 mt-1"}),e("div",null,[(c=o.value)!=null&&c.car?(r(),a("div",qt,[e("p",zt,i(`${o.value.car.brand.name} ${o.value.car.model.name} ${o.value.car.type.name}`),1),e("p",Ht,[v(i(o.value.car.cc)+" â€¢ "+i(o.value.car.transmission)+" â€¢ "+i(o.value.car.year)+" ",1),e("span",Nt,"("+i(o.value.car.fuel_type)+")",1)])])):(r(),a("div",Ot,i((g=o.value)==null?void 0:g.car_name),1)),e("div",Et,[s[16]||(s[16]=e("span",{class:"text-sm font-semibold uppercase tracking-wide text-gray-500 mr-2"},"no polisi:",-1)),e("span",Kt,i((D=o.value)==null?void 0:D.plate_number),1)])])]),e("p",Gt,[v(" Anda yakin ingin "+i(X(o.value).toLowerCase())+" inspeksi ini ",1),(b=o.value)!=null&&b.category?(r(),a("span",Jt," berdasarkan Type Inspek: "+i(o.value.category.name),1)):u("",!0),s[17]||(s[17]=v("? "))]),e("div",Qt,[e("button",{onClick:_,type:"button",class:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50"}," Batal "),e("button",{onClick:Ce,type:"button",disabled:l(J).processing,class:"flex-1 inline-flex items-center justify-center px-4 py-2 bg-gradient-to-r from-indigo-700 to-sky-600 shadow-lg text-white border border-transparent rounded-md text-sm font-medium hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed"},[l(J).processing?(r(),a("span",Yt,i(je(o.value)),1)):(r(),a("span",Zt,i(X(o.value)),1))],8,Xt)])])])])):u("",!0),G.value&&p.value?(r(),a("div",es,[e("div",ts,[e("div",ss,[e("div",ns,[s[19]||(s[19]=e("h3",{class:"text-lg font-medium text-gray-900"},"Alihkan Tugas Inspeksi",-1)),e("button",{onClick:_,class:"text-gray-400 hover:text-gray-600"},[m(l(se),{class:"h-6 w-6"})])]),e("div",rs,[e("div",as,[m(l(E),{class:"h-6 w-6 text-gray-500 mr-3 mt-0.5"}),e("div",null,[e("p",os,i((P=o.value)==null?void 0:P.plate_number),1),e("p",is,i((ie=o.value)==null?void 0:ie.car_name),1),e("p",ls,[s[20]||(s[20]=v(" Inspector saat ini: ")),e("span",ds,i(((de=(le=o.value)==null?void 0:le.user)==null?void 0:de.name)||"Belum ditugaskan"),1)])])])]),e("div",us,[e("div",null,[s[22]||(s[22]=e("label",{for:"region",class:"block text-sm font-medium text-gray-700 mb-1"}," Pilih Region ",-1)),$(e("select",{id:"region","onUpdate:modelValue":s[1]||(s[1]=n=>S.value=n),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500 text-sm",disabled:q.value},[s[21]||(s[21]=e("option",{value:""},"-- Semua Region --",-1)),(r(!0),a(ee,null,te(W.value,n=>(r(),a("option",{key:n.id,value:n.id,disabled:!n.has_active_team,class:j({"text-gray-400":!n.has_active_team})},[v(i(n.name)+" ",1),n.has_active_team?u("",!0):(r(),a("span",ps,"(Tidak tersedia)"))],10,ms))),128))],8,cs),[[xe,S.value]]),q.value?(r(),a("p",gs,"Memuat data area...")):u("",!0)]),e("div",null,[s[24]||(s[24]=e("label",{for:"inspector",class:"block text-sm font-medium text-gray-700 mb-1"}," Pilih Inspector Baru * ",-1)),$(e("select",{id:"inspector","onUpdate:modelValue":s[2]||(s[2]=n=>C.value=n),required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500 text-sm"},[s[23]||(s[23]=e("option",{value:""},"-- Pilih Inspector --",-1)),(r(!0),a(ee,null,te(Ve.value,n=>(r(),a("option",{key:n.id,value:n.id},i(n.name)+" ("+i(n.email)+") ",9,fs))),128))],512),[[xe,C.value]])]),e("div",null,[s[25]||(s[25]=e("label",{for:"transferReason",class:"block text-sm font-medium text-gray-700 mb-1"}," Alasan Pengalihan * ",-1)),$(e("textarea",{id:"transferReason","onUpdate:modelValue":s[3]||(s[3]=n=>I.value=n),rows:"3",required:"",placeholder:"Masukkan alasan mengapa tugas ini dialihkan...",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500 text-sm"},null,512),[[Z,I.value]]),l(w).errors.transfer_reason?(r(),a("p",vs,i(l(w).errors.transfer_reason),1)):u("",!0)])]),e("div",ys,[e("button",{onClick:_,type:"button",class:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50"}," Batal "),e("button",{onClick:Re,disabled:!C.value||!I.value.trim()||l(w).processing,class:"px-4 py-2 bg-gradient-to-r from-green-600 to-emerald-600 text-white border border-transparent rounded-md text-sm font-medium hover:from-green-700 hover:to-emerald-700 disabled:opacity-50 disabled:cursor-not-allowed"},[l(w).processing?(r(),a("span",bs,[m(l(be),{class:"h-4 w-4 animate-spin inline mr-2"}),s[26]||(s[26]=v(" Mengalihkan... "))])):(r(),a("span",_s,"Alihkan Tugas"))],8,xs)])])])])):u("",!0),K.value&&(H.value||h.value||B.value||p.value||y.value)?(r(),a("div",hs,[e("div",ws,[e("div",ks,[e("div",Is,[s[27]||(s[27]=e("h3",{class:"text-lg font-medium text-gray-900"},"Batalkan Inspeksi",-1)),e("button",{onClick:_,class:"text-gray-400 hover:text-gray-600"},[m(l(se),{class:"h-6 w-6"})])]),e("div",Cs,[m(l(E),{class:"h-8 w-8 text-red-500 mr-3 mt-1"}),e("div",null,[(ue=o.value)!=null&&ue.car?(r(),a("div",Rs,[e("p",$s,i(`${o.value.car.brand.name} ${o.value.car.model.name} ${o.value.car.type.name}`),1),e("p",js,[v(i(o.value.car.cc)+" â€¢ "+i(o.value.car.transmission)+" â€¢ "+i(o.value.car.year)+" ",1),e("span",Ms,"("+i(o.value.car.fuel_type)+")",1)])])):(r(),a("div",As,i((ce=o.value)==null?void 0:ce.car_name),1)),e("div",Ls,[s[28]||(s[28]=e("span",{class:"text-sm font-semibold uppercase tracking-wide text-gray-500 mr-2"},"no polisi:",-1)),e("span",Ts,i((me=o.value)==null?void 0:me.plate_number),1)])])]),e("div",Ss,[s[29]||(s[29]=e("label",{for:"cancelReason",class:"block text-sm font-medium text-gray-700 mb-2"}," Alasan Pembatalan * ",-1)),$(e("textarea",{id:"cancelReason","onUpdate:modelValue":s[4]||(s[4]=n=>k.value=n),rows:"4",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Masukkan alasan pembatalan inspeksi...",required:""},null,512),[[Z,k.value]]),l(R).errors.reason?(r(),a("p",Bs,i(l(R).errors.reason),1)):u("",!0)]),e("div",Ds,[e("button",{onClick:_,type:"button",class:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50"}," Tutup "),e("button",{onClick:Ie,disabled:!k.value.trim()||l(R).processing,class:"px-4 py-2 bg-red-600 text-white border border-transparent rounded-md text-sm font-medium hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed"},[l(R).processing?(r(),a("span",Fs,"Memproses...")):(r(),a("span",Vs,"Batalkan Inspeksi"))],8,Ps)])])])])):u("",!0)]}),_:1}))}},Ks=Oe(Us,[["__scopeId","data-v-ea62021e"]]);export{Ks as default};
