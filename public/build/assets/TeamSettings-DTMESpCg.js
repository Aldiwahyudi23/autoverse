import{r as S,x as P,g as j,q as r,j as A,o as l,w as D,d as t,t as c,c as d,y as N,z as p,u,A as b,I as F}from"./vendor-CUNG9NG6.js";import{A as H}from"./AppLayout-BMeJQA_5.js";import{_ as I}from"./app-C4hI74Dr.js";const M={class:"min-h-screen bg-gray-100 p-4 flex items-center justify-center font-inter antialiased"},V={class:"w-full max-w-2xl bg-white rounded-2xl shadow-2xl p-6 md:p-8"},B={class:"profile-card"},E={class:"profile-photo-container"},O=["src"],q={class:"flex-1 text-center sm:text-left"},U={class:"text-2xl font-bold text-gray-900 mb-0.5"},C={class:"flex flex-col sm:flex-row items-center justify-center sm:justify-start text-gray-500 text-sm space-y-1 sm:space-y-0 sm:space-x-2"},J={key:0,class:"inline-block px-2 py-0.5 text-xs font-semibold rounded-full bg-green-100 text-green-800"},R={key:1,class:"inline-block px-2 py-0.5 text-xs font-semibold rounded-full bg-red-100 text-red-800"},z={key:2,class:"inline-block px-2 py-0.5 text-xs font-semibold rounded-full bg-yellow-100 text-yellow-800"},K={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},L=["disabled"],$={class:"bg-gray-50 p-5 rounded-xl border border-gray-200"},G={class:"grid grid-cols-1 md:grid-cols-2 gap-5"},Q={class:"mt-1 relative rounded-lg shadow-sm"},W=["disabled"],X={class:"mt-1 relative rounded-lg shadow-sm"},Y=["disabled"],Z={class:"flex justify-end pt-4"},ee=["disabled"],te={key:0},se={key:1},ie={__name:"TeamSettings",props:{regionTeam:Object,auth:Object},setup(a){const n=a,g=S(null),i=P({_method:"put",user_id:n.regionTeam.user.id,status:n.regionTeam.status,settings:n.regionTeam.settings||{inspection_price_self:0,inspection_price_external:0}});j(()=>{var s,e;g.value={status:n.regionTeam.status,settings:{inspection_price_self:((s=n.regionTeam.settings)==null?void 0:s.inspection_price_self)||0,inspection_price_external:((e=n.regionTeam.settings)==null?void 0:e.inspection_price_external)||0}}});const x=s=>{if(!s)return"";const e=typeof s=="string"?parseFloat(s.replace(/\./g,"").replace(",",".")):s;return isNaN(e)?s:new Intl.NumberFormat("id-ID").format(e)},_=s=>{const e=parseFloat(s.replace(/\./g,"").replace(",","."));return isNaN(e)?0:e},y=r({get:()=>x(i.settings.inspection_price_self),set:s=>{i.settings.inspection_price_self=_(s)}}),v=r({get:()=>x(i.settings.inspection_price_external),set:s=>{i.settings.inspection_price_external=_(s)}}),m=r(()=>{var s,e;return((e=(s=n.auth)==null?void 0:s.user)==null?void 0:e.id)===n.regionTeam.user.id}),f=r(()=>i.status==="paused"||m.value),k=r(()=>{if(!g.value)return!1;const s={status:i.status,settings:{inspection_price_self:i.settings.inspection_price_self,inspection_price_external:i.settings.inspection_price_external}};return JSON.stringify(s)!==JSON.stringify(g.value)}),h=r(()=>i.status==="paused"||!k.value||m.value),T=r(()=>{if(m.value)return"Tidak Dapat Mengubah Pengaturan Sendiri";if(i.status==="paused")return"Akun di team sedang di bekukan";const s=n.regionTeam.settings,e=!s||s.inspection_price_self===0&&s.inspection_price_external===0;return k.value?"Perbaharui Perjanjian Harga":e?"Tambahkan Perjanjian Harga":"Persetujuan Harga"}),w=()=>{i.post(`/team-settings/${n.regionTeam.id}`,{onSuccess:()=>{console.log("Pengaturan berhasil disimpan!")},onError:s=>{console.error("Ada kesalahan saat menyimpan:",s)}})};return(s,e)=>(l(),A(H,null,{default:D(()=>[t("div",M,[t("div",V,[t("section",B,[t("div",E,[t("img",{src:a.regionTeam.user.profile_photo_url||"https://placehold.co/150x150/e5e7eb/6b7280?text=Foto",alt:"Foto Profil Pengguna",class:"profile-photo"},null,8,O)]),t("div",q,[t("h1",U,c(a.regionTeam.user.name),1),t("div",C,[t("span",null,c(a.regionTeam.user.email)+" | "+c(a.regionTeam.user.numberPhone),1),a.regionTeam.status==="active"?(l(),d("span",J,"Aktif")):a.regionTeam.status==="inactive"?(l(),d("span",R,"Tidak Aktif")):(l(),d("span",z,"Dibekukan"))])])]),t("form",{onSubmit:N(w,["prevent"]),class:"space-y-4"},[e[13]||(e[13]=t("h2",{class:"text-xl font-bold text-gray-800 text-center mb-2"},"Pengaturan Anggota Tim",-1)),p(t("input",{type:"hidden","onUpdate:modelValue":e[0]||(e[0]=o=>u(i).user_id=o)},null,512),[[b,u(i).user_id]]),t("div",K,[t("div",null,[e[5]||(e[5]=t("label",{for:"status",class:"block text-sm font-medium text-gray-700 mb-1"},"Status",-1)),p(t("select",{id:"status","onUpdate:modelValue":e[1]||(e[1]=o=>u(i).status=o),class:"w-full border-gray-300 rounded-lg shadow-sm focus:border-indigo-500 focus:ring-indigo-500 transition-all duration-200",disabled:f.value,required:""},e[4]||(e[4]=[t("option",{value:"active"},"Aktif",-1),t("option",{value:"inactive"},"Tidak Aktif",-1),t("option",{disabled:"",value:"paused"},"Dibekukan",-1)]),8,L),[[F,u(i).status]])]),e[6]||(e[6]=t("div",{class:"hidden md:block"},null,-1))]),t("div",$,[e[11]||(e[11]=t("h3",{class:"text-lg font-semibold text-gray-800 mb-2"},"Tagihan Inspector",-1)),e[12]||(e[12]=t("p",{class:"text-xs text-gray-500 mb-4 italic"}," *Harga **Self Submission** adalah tagihan jika inspektur mendapatkan pelanggan sendiri. **External Submission** adalah tagihan jika jadwal inspeksi dibuat oleh Koordinator. ",-1)),t("div",G,[t("div",null,[e[8]||(e[8]=t("label",{for:"inspection_price_self",class:"block text-sm font-medium text-gray-700 mb-1"},"Harga (Self Submission)",-1)),t("div",Q,[e[7]||(e[7]=t("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[t("span",{class:"text-gray-500 text-sm"},"Rp")],-1)),p(t("input",{type:"text",id:"inspection_price_self","onUpdate:modelValue":e[2]||(e[2]=o=>y.value=o),class:"block w-full pl-9 pr-3 py-2 border-gray-300 rounded-lg focus:ring-indigo-500 focus:border-indigo-500 transition-all duration-200",placeholder:"0",disabled:f.value,required:""},null,8,W),[[b,y.value]])])]),t("div",null,[e[10]||(e[10]=t("label",{for:"inspection_price_external",class:"block text-sm font-medium text-gray-700 mb-1"},"Harga (External Submission)",-1)),t("div",X,[e[9]||(e[9]=t("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[t("span",{class:"text-gray-500 text-sm"},"Rp")],-1)),p(t("input",{type:"text",id:"inspection_price_external","onUpdate:modelValue":e[3]||(e[3]=o=>v.value=o),class:"block w-full pl-9 pr-3 py-2 border-gray-300 rounded-lg focus:ring-indigo-500 focus:border-indigo-500 transition-all duration-200",placeholder:"0",disabled:f.value,required:""},null,8,Y),[[b,v.value]])])])])]),t("div",Z,[t("button",{type:"submit",disabled:h.value,class:"w-full sm:w-auto px-6 py-2 rounded-lg font-semibold transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed bg-gradient-to-r from-indigo-700 to-sky-600 shadow-lg text-white"},[u(i).processing?(l(),d("span",te,"Menyimpan...")):(l(),d("span",se,c(T.value),1))],8,ee)])],32)])])]),_:1}))}},re=I(ie,[["__scopeId","data-v-ff67026d"]]);export{re as default};
