import R from"./RadioOptionModal-DeSk_2WN.js";import{r as v,q as T,G as I,c as o,o as n,d,b as p,j as E,F as C,m as N,n as j,t as y}from"./vendor-g77w9U1W.js";import"./InputImage-Dp8MVx3W.js";import"./ImageSourceOptionsModal-CoH0kONx.js";import"./WebcamModal-rolY63BU.js";import"./app-DQF5o8Rz.js";import"./PreviewModal-BS3KfIRK.js";import"./InputTextarea-o3DjKd7m.js";import"./BottomSheetModal-C1RFMGd0.js";import"./InputAccount-CbAzA0fb.js";import"./InputDate-By-igtci.js";import"./InputNumber-BLISdcLF.js";import"./InputText-aPa2T8tF.js";const F={class:"mt-2 space-y-2"},H=["name","value","checked","onChange","required"],z={key:0,class:"p-2 rounded-lg bg-gray-50"},G={key:0,class:"mt-2"},L={class:"flex gap-2 overflow-x-auto",style:{"scrollbar-width":"none"}},J=["src"],K={key:0,class:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center text-white text-xs"},Q={key:1,class:"mt-2"},W={class:"text-sm text-gray-600"},X={key:2,class:"mt-2 text-sm text-red-600"},me={__name:"InputRadio",props:{modelValue:String,required:Boolean,error:String,point:Object,pointId:[String,Number],pointName:String,subtitle:String,inspectionId:[String,Number],options:{type:Array,default:()=>[]},selectedPoint:Object,notes:{type:String,default:""},images:{type:Array,default:()=>[]}},emits:["update:modelValue","update:notes","update:images","save","hapus"],setup(t,{emit:O}){const a=t,s=O,h=v(a.notes),c=v([...a.images]),g=v(!1),r=v(""),m=v([]),u=v(""),q=v([]),f=T(()=>a.options.find(e=>e.value===a.modelValue)),b=e=>e.settings&&(e.settings.show_textarea||e.settings.show_image_upload);I(()=>a.notes,e=>{h.value=e}),I(()=>a.images,e=>{c.value=[...e]}),I(()=>a.modelValue,e=>{e&&(u.value=e)});const B=e=>{s("update:modelValue",e.value),b(e)?V():s("save",{pointId:a.pointId,inspectionId:a.inspectionId,value:e.value,notes:"",images:[]})},$=e=>e.preview||(e.image_path?`/${e.image_path}`:e),V=()=>{u.value=a.modelValue,r.value=h.value,m.value=[...c.value],q.value=[...c.value],g.value=!0},D=()=>{r.value="",m.value=[],u.value="",g.value=!1},M=e=>{m.value=e,c.value=[...e],s("update:images",[...e]),s("save",{pointId:a.pointId,inspectionId:a.inspectionId,value:a.modelValue,notes:h.value,images:[...e]})},P=e=>{},U=()=>{u.value!==a.modelValue&&s("update:modelValue",u.value),h.value=r.value,s("update:notes",r.value),c.value=[...m.value],s("update:images",[...m.value]),s("save",{pointId:a.pointId,inspectionId:a.inspectionId,value:u.value,notes:r.value,images:m.value}),g.value=!1},A=e=>{u.value="",r.value="",m.value=[],h.value="",c.value=[],s("update:modelValue",""),s("update:notes",""),s("update:images",[]),s("hapus",e),g.value=!1};return(e,i)=>{var w,k,S;return n(),o("div",F,[d("div",{class:j(["grid gap-2 w-full mt-2",`grid-cols-${Math.min(t.options.length,3)}`])},[(n(!0),o(C,null,N(t.options,(l,x)=>(n(),o("label",{key:x,class:"cursor-pointer"},[d("input",{type:"radio",name:"radio-"+t.pointId,value:l.value,checked:t.modelValue===l.value,onChange:Y=>B(l),class:"hidden peer",required:t.required},null,40,H),d("div",{class:j(["w-full px-4 py-3 border rounded-lg text-center transition-colors whitespace-nowrap text-sm font-medium",{"border-indigo-500 bg-indigo-50 text-indigo-700":t.modelValue===l.value,"border-gray-300 text-gray-700 hover:bg-gray-50":t.modelValue!==l.value}])},y(l.label),3)]))),128))],2),t.modelValue&&f.value&&b(f.value)?(n(),o("div",z,[d("div",{class:"flex justify-between items-start"},[i[4]||(i[4]=d("h4",{class:"text-sm font-medium text-gray-700"},"Detail : ",-1)),d("button",{onClick:V,class:"text-sm text-indigo-600 hover:text-indigo-800"}," Edit ")]),t.images.length>0&&((w=f.value.settings)!=null&&w.show_image_upload)?(n(),o("div",G,[d("div",L,[(n(!0),o(C,null,N(t.images,(l,x)=>(n(),o("div",{key:x,class:"relative flex-shrink-0",style:{width:"130px",height:"130px"}},[d("img",{src:$(l),class:"w-full h-full object-cover rounded"},null,8,J),x===3&&t.images.length>4?(n(),o("span",K," +"+y(t.images.length-4),1)):p("",!0)]))),128))])])):p("",!0),t.notes&&((k=f.value.settings)!=null&&k.show_textarea)?(n(),o("div",Q,[d("p",W,y(t.notes),1)])):p("",!0)])):p("",!0),g.value?(n(),E(R,{key:(S=t.selectedPoint)==null?void 0:S.id,show:g.value,title:t.pointName||"Detail",subtitle:t.subtitle||"",name:"modal-radio-"+t.pointId,options:t.options,"selected-value":u.value,"notes-value":r.value,"images-value":m.value,"point-id":t.pointId,point:t.point,"inspection-id":t.inspectionId,"selected-point":t.selectedPoint,"onUpdate:selectedValue":i[0]||(i[0]=l=>u.value=l),"onUpdate:notesValue":i[1]||(i[1]=l=>r.value=l),"onUpdate:imagesValue":i[2]||(i[2]=l=>M(l)),onClose:D,onSave:U,onSaveTextarea:e.handleTextareaSave,onSaveImage:P,onHapus:i[3]||(i[3]=l=>A(t.pointId))},null,8,["show","title","subtitle","name","options","selected-value","notes-value","images-value","point-id","point","inspection-id","selected-point","onSaveTextarea"])):p("",!0),t.error?(n(),o("p",X,y(t.error),1)):p("",!0)])}}};export{me as default};
