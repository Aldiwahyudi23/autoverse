import{p as wt,r as c,q as I,g as _t,G as jt,c as o,o as n,d as e,b as h,k as Ue,t as d,F as D,N as pe,m as $,y as Te,n as N,a as Ct,D as We,f as Mt}from"./vendor-C3sNAm3r.js";import{_ as It,a as Tt}from"./RepairEstimationSection-CuHSVkmV.js";import{_ as Dt}from"./app-oolKVDcX.js";const Pt={class:"flex flex-col lg:grid lg:grid-cols-12 gap-4"},Nt={class:"p-4 md:p-6 bg-white rounded-lg shadow-md lg:col-span-7"},Bt={key:0,class:"mb-4 p-4 bg-green-100 border border-green-400 text-green-700 rounded"},Et={class:"flex"},Lt={key:1,class:"mb-4 p-4 bg-red-100 border border-red-400 text-red-700 rounded"},St={class:"flex"},Rt={key:2},At={class:"header flex flex-col gap-5 mb-6 mt-2 md:mt-6"},Ft={class:"flex flex-col md:flex-row items-center md:items-start gap-5"},$t={class:"flex-shrink-0"},zt=["src"],Kt={key:1,class:"w-32 h-32 md:w-48 md:h-48 border border-gray-300 rounded-lg flex items-center justify-center bg-gray-100 text-gray-400"},Ht={class:"text-center md:text-left mt-2 md:mt-8"},Ot={class:"text-2xl md:text-3xl font-bold m-0 text-gray-800"},Yt={key:0,class:"car-info"},Gt={class:"w-full border-collapse border border-gray-300 rounded-lg overflow-hidden text-sm md:text-base"},Xt={class:"bg-gray-50"},Ut={class:"p-2 border border-gray-300 text-gray-600"},Wt={class:"bg-gray-50"},Vt={class:"p-2 border border-gray-300 text-gray-600"},Zt={class:"p-2 border border-gray-300 text-gray-600"},qt={class:"bg-gray-50"},Jt={class:"p-2 border border-gray-300 text-gray-600"},Qt={class:"p-2 border border-gray-300 text-gray-600"},es={class:"bg-gray-50"},ts={class:"p-2 border border-gray-300 text-gray-600"},ss={class:"p-2 border border-gray-300 text-gray-600"},os={class:"bg-gray-50"},ns={class:"p-2 border border-gray-300 text-gray-600"},as={class:"p-2 border border-gray-300 text-gray-600"},rs={class:"bg-gray-50"},ls={class:"p-2 border border-gray-300 text-gray-600"},is={class:"bg-gray-50"},ds={class:"p-2 border border-gray-300 text-gray-600"},us={class:"bg-gray-50"},cs={class:"p-2 border border-gray-300 text-gray-600"},ms={class:"bg-gray-50"},ps={class:"p-2 border border-gray-300 text-gray-600"},gs={class:"bg-gray-50"},vs={class:"p-2 border border-gray-300 text-gray-600"},hs={key:1,class:"flex flex-col md:flex-row gap-4 mt-4"},bs={class:"flex-1 text-center p-4 bg-gray-50 rounded-lg"},fs={class:"flex flex-col items-center"},ys={key:0,src:"/images/icons/banjir.png",alt:"Banjir",class:"w-16 h-16 md:w-20 md:h-20"},xs={key:1,src:"/images/icons/aman.png",alt:"Aman",class:"w-16 h-16 md:w-20 md:h-20"},ks={key:2,class:"font-bold text-sm md:text-base text-red-600 mt-2"},ws={key:3,class:"font-bold text-sm md:text-base text-green-600 mt-2"},_s={class:"flex-1 text-center p-4 bg-gray-50 rounded-lg"},js={class:"flex flex-col items-center"},Cs=["src"],Ms={key:2,class:"conclusion p-4 bg-gray-50 border-l-4 border-gray-800 rounded-lg mt-4"},Is={class:"m-0 text-gray-600 text-sm md:text-base"},Ts=["innerHTML"],Ds={class:"component-title bg-gray-100 px-3 py-2 border-l-4 border-gray-800 font-bold rounded-l-lg text-sm md:text-base"},Ps={key:0,class:"images flex flex-wrap gap-2 mt-3 md:mt-4"},Ns=["src","onClick"],Bs={key:1,class:"w-24 h-24 md:w-32 md:h-32 border border-gray-300 rounded-lg flex items-center justify-center bg-gray-100 text-xs text-gray-400"},Es={class:"point-name inline-block font-bold align-top text-gray-700 text-sm md:text-base min-w-[140px] md:min-w-[180px]"},Ls={class:"point-content inline-block align-top w-[calc(100%-150px)] md:w-[calc(100%-190px)]"},Ss={key:0,class:"status-badges-container"},Rs=["onClick"],As={key:1,class:"point-note italic text-gray-600 my-1 text-xs md:text-sm"},Fs={key:0,class:"inspection-images flex flex-wrap gap-2 mt-3 md:mt-4"},$s=["src","onClick"],zs={key:1,class:"w-16 h-16 md:w-24 md:h-24 border border-gray-300 rounded-lg flex items-center justify-center bg-gray-100 text-xs text-gray-400"},Ks={key:1,class:"textarea-note italic text-gray-600 my-2 text-xs md:text-sm"},Hs={key:0,class:"mt-4 md:mt-6 mb-4 md:mb-6"},Os={key:3,class:"flex flex-col items-center justify-center h-64 md:h-96 text-center p-4"},Ys=["href"],Gs={key:4,class:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50"},Xs={class:"bg-white p-4 md:p-6 rounded-lg shadow-xl w-11/12 md:w-96 max-w-sm mx-4"},Us={class:"flex justify-end space-x-3 md:space-x-4"},Ws=["disabled"],Vs={key:0},Zs={key:1},qs={key:1,class:"bg-indigo-600 text-white px-3 py-1.5 md:px-4 md:py-2 rounded-lg hover:bg-indigo-700 transition-colors duration-200 cursor-not-allowed text-sm md:text-base"},Js={class:"absolute top-0 left-0 right-0 bg-black bg-opacity-90 text-white p-3 md:p-4 flex items-center justify-between z-20"},Qs={class:"flex-1 text-center"},eo={class:"text-base md:text-lg font-bold truncate max-w-[70vw] mx-auto"},to={class:"relative w-full h-full flex items-center justify-center p-2 md:p-4 pt-12 md:pt-16 pb-32 md:pb-40"},so=["src"],oo={key:1,class:"text-white text-base md:text-lg"},no={class:"absolute bottom-0 left-0 right-0 bg-black bg-opacity-90 z-20 max-h-[60vh] overflow-y-auto"},ao={class:"p-2 md:p-3 border-b border-gray-700 sticky top-0 bg-black bg-opacity-90"},ro={class:"flex items-center justify-between"},lo={class:"text-xs md:text-sm font-medium text-gray-300"},io={class:"flex items-center gap-2 md:gap-3"},uo={class:"flex items-center gap-1 md:gap-2"},co=["disabled"],mo={class:"w-12 md:w-16 text-center"},po={class:"text-xs md:text-sm font-medium text-white"},go=["disabled"],vo={class:"flex items-center gap-1 md:gap-2"},ho={class:"w-8 md:w-10 text-center"},bo={class:"text-xs md:text-sm font-medium text-white"},fo={class:"p-3 md:p-4"},yo={class:"flex flex-col md:flex-row md:items-center gap-1 md:gap-2 mb-1 md:mb-2"},xo={class:"text-sm md:text-base font-semibold text-white truncate"},ko={key:0,class:"flex items-center flex-shrink-0"},wo={key:0,class:"mt-1 md:mt-2 mb-2"},_o={class:"text-xs md:text-sm text-gray-200 italic break-words leading-relaxed"},jo={key:1,class:"mt-2 mb-2 p-2 bg-gray-800 rounded-lg"},Co={class:"font-medium"},Mo={key:2,class:"mt-2 pt-2 border-t border-gray-700"},Io={key:6,class:"fixed bottom-4 md:bottom-6 right-4 md:right-6 flex flex-col gap-2 z-40"},To={key:0,class:"hidden lg:block lg:col-span-5 bg-white rounded-lg shadow-md p-4 overflow-y-auto h-[calc(100vh-2rem)] sticky top-4"},Do={class:"space-y-4"},Po=["src"],No={class:"absolute inset-x-0 top-1/2 transform -translate-y-1/2 flex justify-between px-2"},Bo=["disabled"],Eo=["disabled"],Lo={class:"bg-gray-50 rounded-lg p-3"},So={class:"flex items-center justify-between mb-2"},Ro={class:"text-sm font-medium text-gray-900"},Ao={class:"flex items-center gap-2 mb-3"},Fo=["disabled"],$o=["disabled"],zo={class:"flex items-center justify-between mb-2"},Ko={class:"text-sm font-medium text-gray-900"},Ho={class:"bg-gray-50 rounded-lg p-4"},Oo={class:"space-y-3"},Yo={class:"text-sm font-medium text-gray-900 mt-1"},Go={class:"flex items-center gap-2 mt-1"},Xo={class:"text-sm font-medium text-gray-900 flex-1"},Uo={key:0},Wo={class:"text-sm text-gray-700 italic mt-1"},Vo={key:1,class:"pt-3 border-t border-gray-200"},Zo={class:"text-center text-sm text-gray-500"},qo={__name:"ReviewPDF",props:{inspection:{type:Object,required:!0},menu_points:{type:Array,default:()=>[]},coverImage:{type:Object,default:null},encryptedIds:Object,repairEstimations:{type:Array,default:()=>[]},totalRepairCost:{type:Number,default:0}},setup(Z){const f=Z,Ve=wt(),q=c(!1),J=c(!1),Q=c(f.repairEstimations),De=c(f.totalRepairCost),ge=c(!1),ve=c(null),ee=c(!1),te=c(""),he=c(0),O=c(null),se=c(!1),z=c(""),k=c(0),y=c([]),m=c(1),be=c(null),L=c(!1),Pe=c(window.innerWidth>=1024),x=c({pointName:"",componentName:"",status:"",note:"",relatedInfo:null}),Ne=c(null),fe=c(null),Be=c(null),ye=c(null),S=c(!1),xe=c({x:0,y:0}),M=c({x:0,y:0}),R=c({width:0,height:0}),T=c(0),Y=c(!1),ke=c(0),Ee=c(1),K=I(()=>{var s;return((s=Ve.props.global)==null?void 0:s.has_roles)||[]});I(()=>K.value.includes("quality_control")||K.value.includes("Admin"));const oe=I(()=>(K.value.includes("quality_control")||K.value.includes("Admin"))&&u.value.status==="pending_review"),Ze=I(()=>(K.value.includes("quality_control")||K.value.includes("Admin"))&&u.value.status==="pending_review"),Le=I(()=>{const s=y.value[k.value];return s!=null&&s.pointData?Xe(s.pointData):!1}),u=c(f.inspection),we=c(f.menu_points),B=c(f.coverImage),qe=async()=>{if(u.value.status==="in_progress")try{const s=await Ct.get(route("inspections.detail",f.encryptedIds));u.value=s.data.inspection,we.value=s.data.menu_points,B.value=s.data.coverImage,Q.value=s.data.repairEstimations||[],De.value=s.data.totalRepairCost||0}catch(s){console.error("Polling gagal:",s)}},Se=()=>{Pe.value=window.innerWidth>=1024};_t(()=>{setInterval(qe,5e3);const s=()=>{const t=window.scrollY;t>he.value?te.value="down":t<he.value&&(te.value="up"),he.value=t,t>200?(ee.value=!0,O.value&&clearTimeout(O.value),O.value=setTimeout(()=>{ee.value=!1},2e3)):ee.value=!1};return window.addEventListener("scroll",s),window.addEventListener("resize",Se),window.addEventListener("keydown",Re),()=>{window.removeEventListener("scroll",s),window.removeEventListener("resize",Se),window.removeEventListener("keydown",Re),O.value&&clearTimeout(O.value)}});const Re=s=>{if(L.value)switch(s.key){case"ArrowLeft":s.preventDefault(),re();break;case"ArrowRight":s.preventDefault(),le();break;case"Escape":s.preventDefault(),Ke();break;case"+":case"=":s.preventDefault(),ie();break;case"-":s.preventDefault(),de();break;case"0":s.preventDefault(),ue();break}else if(se.value)switch(s.key){case"ArrowLeft":s.preventDefault(),re();break;case"ArrowRight":s.preventDefault(),le();break;case"Escape":s.preventDefault(),je();break;case"+":case"=":s.preventDefault(),ie();break;case"-":s.preventDefault(),de();break;case"0":s.preventDefault(),ue();break}},Je=s=>{Q.value=s},Qe=s=>{De.value=s},Ae=s=>{var t;ve.value={part_name:((t=s.inspection_point)==null?void 0:t.name)||"",repair_description:"",urgency:"segera",status:"perlu",estimated_cost:0,notes:""},ge.value=!0},Fe=()=>{const s=y.value[k.value];s!=null&&s.pointData&&Ae(s.pointData)},$e=()=>{ge.value=!1,ve.value=null},et=s=>{Q.value.push(s),$e()},tt=()=>{window.scrollTo({top:0,behavior:"smooth"})},st=()=>{window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"})},_e=(s,t=null,r=0)=>{ze();const a=y.value.findIndex(l=>l.url===s||l.pointData===t&&l.imageIndex===r);a!==-1?(k.value=a,G(a)):(k.value=y.value.length,y.value.push({url:s,pointData:t,imageIndex:r}),G(k.value)),Pe.value?(be.value=s,L.value=!0):se.value=!0,m.value=1,M.value={x:0,y:0},R.value={width:0,height:0}},ze=()=>{y.value=[],B.value&&B.value.image_path&&y.value.push({url:E(B.value.image_path),type:"cover",pointName:"Foto Utama Kendaraan",componentName:"Cover",pointData:{type:"cover",name:"Foto Utama Kendaraan"}}),f.menu_points.forEach(s=>{var v,p,w,_,W,V,j;const t=((v=s.inspection_point)==null?void 0:v.images)||[],r=((w=(p=s.inspection_point)==null?void 0:p.component)==null?void 0:w.name)||"Tanpa Komponen",a=((_=s.inspection_point)==null?void 0:_.name)||"Unknown",i=H(s).join(", ")||"",g=((j=(V=(W=s.inspection_point)==null?void 0:W.results)==null?void 0:V[0])==null?void 0:j.note)||"";t.forEach((b,A)=>{b.image_path&&y.value.push({url:E(b.image_path),pointData:s,imageIndex:A,pointName:a,componentName:r,status:i,note:g})})})},ot=(s,t)=>{if(!t||!f.menu_points)return null;const r={};if(s==="No Fisik Mesin"){const a=f.menu_points.find(l=>{var i;return((i=l.inspection_point)==null?void 0:i.name)==="No Mesin"});a&&C(a)&&(r.mesin={name:"No Mesin",value:a.inspection_point.results[0].note||"-"})}if(s==="No Fisik Rangka"){const a=f.menu_points.find(l=>{var i;return((i=l.inspection_point)==null?void 0:i.name)==="No Rangka"});a&&C(a)&&(r.rangka={name:"No Rangka",value:a.inspection_point.results[0].note||"-"})}if(s==="STNK"){const a=f.menu_points.find(v=>{var p;return((p=v.inspection_point)==null?void 0:p.name)==="No Mesin"}),l=f.menu_points.find(v=>{var p;return((p=v.inspection_point)==null?void 0:p.name)==="No Rangka"}),i=f.menu_points.find(v=>{var p,w,_;return((p=v.inspection_point)==null?void 0:p.name)==="Pajak Tahunan"||((_=(w=v.inspection_point)==null?void 0:w.name)==null?void 0:_.includes("Pajak Tahunan"))}),g=f.menu_points.find(v=>{var p,w,_;return((p=v.inspection_point)==null?void 0:p.name)==="Pajak 5 Tahunan"||((_=(w=v.inspection_point)==null?void 0:w.name)==null?void 0:_.includes("Pajak 5 Tahunan"))});a&&C(a)&&(r.mesin={name:"No Mesin",value:a.inspection_point.results[0].note||"-"}),l&&C(l)&&(r.rangka={name:"No Rangka",value:l.inspection_point.results[0].note||"-"}),i&&C(i)&&(r.pajakTahunan={name:"Pajak Tahunan",value:i.inspection_point.results[0].note||"-"}),g&&C(g)&&(r.pajak5Tahunan={name:"Pajak 5 Tahunan",value:g.inspection_point.results[0].note||"-"})}if(s==="BPKB Asli"){const a=f.menu_points.find(i=>{var g;return((g=i.inspection_point)==null?void 0:g.name)==="No Mesin"}),l=f.menu_points.find(i=>{var g;return((g=i.inspection_point)==null?void 0:g.name)==="No Rangka"});a&&C(a)&&(r.mesin={name:"No Mesin",value:a.inspection_point.results[0].note||"-"}),l&&C(l)&&(r.rangka={name:"No Rangka",value:l.inspection_point.results[0].note||"-"})}if(s==="Samsat Online"){const a=f.menu_points.find(i=>{var g,v,p;return((g=i.inspection_point)==null?void 0:g.name)==="Pajak Tahunan"||((p=(v=i.inspection_point)==null?void 0:v.name)==null?void 0:p.includes("Pajak Tahunan"))}),l=f.menu_points.find(i=>{var g,v,p;return((g=i.inspection_point)==null?void 0:g.name)==="Pajak 5 Tahunan"||((p=(v=i.inspection_point)==null?void 0:v.name)==null?void 0:p.includes("Pajak 5 Tahunan"))});a&&C(a)&&(r.pajakTahunan={name:"Pajak Tahunan",value:a.inspection_point.results[0].note||"-"}),l&&C(l)&&(r.pajak5Tahunan={name:"Pajak 5 Tahunan",value:l.inspection_point.results[0].note||"-"})}return Object.keys(r).length>0?r:null},G=s=>{if(s<0||s>=y.value.length)return;const t=y.value[s];z.value=t.url,x.value={pointName:t.pointName||"Gambar Inspeksi",componentName:t.componentName||"",status:t.status||"",note:t.note||"",relatedInfo:ot(t.pointName,t.pointData)}},je=()=>{se.value=!1,z.value="",k.value=0,y.value=[],m.value=1,M.value={x:0,y:0}},Ke=()=>{L.value=!1,be.value=null,z.value="",k.value=0,y.value=[],m.value=1,M.value={x:0,y:0}},ne=I(()=>k.value>0),ae=I(()=>k.value<y.value.length-1),re=()=>{ne.value&&(k.value--,G(k.value),m.value=1,M.value={x:0,y:0},T.value=0)},le=()=>{ae.value&&(k.value++,G(k.value),m.value=1,M.value={x:0,y:0},T.value=0)},ie=()=>{m.value<3&&(m.value=Math.min(m.value+.25,3))},de=()=>{m.value>.5&&(m.value=Math.max(m.value-.25,.5))},ue=()=>{m.value=1,M.value={x:0,y:0},T.value=0},He=()=>{T.value=(T.value-90)%360},Oe=()=>{T.value=(T.value+90)%360},nt=s=>{s.preventDefault();const t=s.deltaY>0?-.1:.1;m.value=Math.max(.5,Math.min(3,m.value+t))},ce=s=>{if(m.value<=1)return;S.value=!0;const t=s.type.includes("mouse")?s.clientX:s.touches[0].clientX,r=s.type.includes("mouse")?s.clientY:s.touches[0].clientY;xe.value={x:t-M.value.x,y:r-M.value.y},s.preventDefault()},Ce=s=>{var _;if(!S.value)return;const t=s.type.includes("mouse")?s.clientX:s.touches[0].clientX,r=s.type.includes("mouse")?s.clientY:s.touches[0].clientY,a=t-xe.value.x,l=r-xe.value.y,i=(_=L.value?Be.value:Ne.value)==null?void 0:_.getBoundingClientRect();if(!i)return;const g=R.value.width*m.value,v=R.value.height*m.value,p=Math.max(0,(g-i.width)/2),w=Math.max(0,(v-i.height)/2);M.value={x:Math.max(-p,Math.min(p,a)),y:Math.max(-w,Math.min(w,l))},s.preventDefault()},X=()=>{S.value=!1},Ye=(s,t)=>{const r=s.clientX-t.clientX,a=s.clientY-t.clientY;return Math.sqrt(r*r+a*a)},at=s=>{if(s.touches.length===2){s.preventDefault(),Y.value=!0;const t=s.touches[0],r=s.touches[1];ke.value=Ye(t,r),Ee.value=m.value}else s.touches.length===1&&ce(s)},rt=s=>{if(s.touches.length===2&&Y.value){s.preventDefault();const t=s.touches[0],r=s.touches[1],a=Ye(t,r);if(ke.value>0){const l=a/ke.value,i=Math.max(.5,Math.min(3,Ee.value*l));m.value=i}}else s.touches.length===1&&S.value&&Ce(s)},lt=s=>{s.touches.length===0?(Y.value=!1,X()):s.touches.length===1&&Y.value&&(Y.value=!1,ce(s))},it=()=>{We(()=>{if(fe.value){const s=fe.value;R.value={width:s.naturalWidth,height:s.naturalHeight}}})},dt=()=>{We(()=>{if(ye.value){const s=ye.value;R.value={width:s.naturalWidth,height:s.naturalHeight}}})},ut=I(()=>{if(!we.value)return[];const s=new Map;we.value.forEach(r=>{var i;const a=(i=r.inspection_point)==null?void 0:i.component,l=(a==null?void 0:a.id)||0;s.has(l)||s.set(l,{component:a||{id:0,name:"Tanpa Komponen",order:9999},points:[]}),s.get(l).points.push(r)});const t=Array.from(s.values()).sort((r,a)=>r.component.order===a.component.order?new Date(r.component.created_at)-new Date(a.component.created_at):(r.component.order||9999)-(a.component.order||9999));return t.forEach(r=>{r.points.sort((a,l)=>a.order===l.order?new Date(a.created_at)-new Date(l.created_at):(a.order||9999)-(l.order||9999))}),t}),ct=()=>{J.value=!0,setTimeout(()=>{window.location.href=route("inspections.download.pdf",f.encryptedIds),J.value=!1,q.value=!1},2e3)},mt=I(()=>{const s=f.menu_points.some(r=>C(r)||U(r)),t=f.coverImage&&f.coverImage.image_path;return s||t}),Me=s=>s&&s.length>0,E=s=>`/${s}`,C=s=>{var t;return((t=s.inspection_point)==null?void 0:t.results)&&s.inspection_point.results.length>0},U=s=>{var t;return((t=s.inspection_point)==null?void 0:t.images)&&s.inspection_point.images.length>0},Ge=s=>C(s)&&s.inspection_point.results[0].note,H=s=>{var r,a;if(!C(s))return[];const t=(a=(r=s.inspection_point)==null?void 0:r.results[0])==null?void 0:a.status;return t?Array.isArray(t)?t:typeof t=="string"&&t.includes(",")?t.split(",").map(l=>l.trim()).filter(l=>l.length>0):[t]:[]},pt=s=>{const t=s.input_type||"",r=H(s);return["radio","imageTOradio"].includes(t)&&r.length>0},gt=s=>{const t=s.input_type||"";return["text","number","date","textarea","account"].includes(t)&&Ge(s)},vt=s=>{var a,l,i;const t=s.input_type||"",r=s.settings||{};if((a=s.inspection_point)!=null&&a.results[0],t==="image"&&U(s)||t==="imageTOradio"&&U(s))return!0;if(t==="radio"){const g=H(s);for(const v of g)if((((i=(((l=r.radios)==null?void 0:l.find(_=>_.value===v))||{}).settings)==null?void 0:i.show_image_upload)||!1)&&U(s))return!0}return!1},ht=s=>{var a,l,i;const t=s.settings||{};(a=s.inspection_point)!=null&&a.results[0];const r=H(s);for(const g of r)if((i=(((l=t.radios)==null?void 0:l.find(p=>p.value===g))||{}).settings)!=null&&i.show_textarea)return!0;return!1},Ie=s=>{if(!s)return"status-warning";const t=String(s).toLowerCase().trim();return["normal","ada","baik","good","ok"].includes(t)?"status-good":["tidak normal","tidak ada","rusak","bad","not ok","rusak","repaired"].includes(t)?"status-bad":"status-warning"},Xe=s=>H(s).some(r=>{const a=String(r).toLowerCase().trim();return!["normal","ada","baik","good","ok"].includes(a)}),bt=s=>{var l;const t=s.input_type||"",r=((l=s.inspection_point)==null?void 0:l.results[0])||{},a=s.settings||{};if(t==="account"&&r.note){const i=r.note.replace(/[^\d.-]/g,""),g=parseFloat(i);if(isNaN(g))return r.note;const v=a.currency_symbol||"Rp";return new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0,maximumFractionDigits:2}).format(g).replace("Rp",v)}return r.note},ft=I(()=>{if(!u.value.settings||u.value.settings.conclusion.collision!=="yes")return"/images/icons/aman.png";const s=u.value.settings.conclusion.collision_severity;return s==="moderate"?"/images/icons/beruntun.png":s==="heavy"?"/images/icons/berat.png":"/images/icons/ringan.png"}),yt=I(()=>{if(!u.value.settings||u.value.settings.conclusion.collision!=="yes")return"Bebas Tabrak";const s=u.value.settings.conclusion.collision_severity;return s==="moderate"?"Tabrak Beruntun":s==="heavy"?"Tabrak Berat":"Tabrak Ringan"}),xt=I(()=>{if(!u.value.settings||u.value.settings.conclusion.collision!=="yes")return"#28a745";const s=u.value.settings.conclusion.collision_severity;return s==="moderate"?"#fd7e14":s==="heavy"?"#dc3545":"#ffc107"});return jt(L,s=>{s&&y.value.length===0&&(ze(),y.value.length>0&&(k.value=0,G(0)))}),(s,t)=>{var r,a,l,i,g,v,p,w,_,W,V;return n(),o("div",Pt,[e("div",Nt,[s.$page.props.flash.success?(n(),o("div",Bt,[e("div",Et,[t[4]||(t[4]=e("svg",{class:"w-5 h-5 text-green-400 mr-2",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"})],-1)),e("span",null,d(s.$page.props.flash.success),1)])])):h("",!0),s.$page.props.flash.error?(n(),o("div",Lt,[e("div",St,[t[5]||(t[5]=e("svg",{class:"w-5 h-5 text-red-400 mr-2",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})],-1)),e("span",null,d(s.$page.props.flash.error),1)])])):h("",!0),mt.value?(n(),o("div",Rt,[e("div",At,[e("div",Ft,[e("div",$t,[B.value&&Me(B.value.image_path)?(n(),o("img",{key:0,src:E(B.value.image_path),alt:"Foto Utama",class:"w-32 h-32 md:w-48 md:h-48 object-cover rounded-lg border border-gray-300 cursor-pointer hover:opacity-90 transition-opacity",onClick:t[0]||(t[0]=j=>_e(E(B.value.image_path),{type:"cover",name:"Foto Utama Kendaraan"},0))},null,8,zt)):(n(),o("div",Kt,t[6]||(t[6]=[e("span",{class:"text-sm md:text-base"},"Gambar tidak tersedia",-1)])))]),e("div",Ht,[e("h2",Ot,d(u.value.car_name),1)])]),u.value.car_id?(n(),o("div",Yt,[e("table",Gt,[e("tr",Xt,[t[7]||(t[7]=e("td",{class:"p-2 border border-gray-300 font-bold text-gray-700 w-1/3 md:w-1/4"},"ID Order",-1)),e("td",Ut,d(u.value.order_code),1)]),e("tr",Wt,[t[8]||(t[8]=e("td",{class:"p-2 border border-gray-300 font-bold text-gray-700"},"Nomor Polisi",-1)),e("td",Vt,d(u.value.plate_number),1)]),e("tr",null,[t[9]||(t[9]=e("td",{class:"p-2 border border-gray-300 font-bold text-gray-700"},"Merek",-1)),e("td",Zt,d((a=(r=u.value.car)==null?void 0:r.brand)==null?void 0:a.name),1)]),e("tr",qt,[t[10]||(t[10]=e("td",{class:"p-2 border border-gray-300 font-bold text-gray-700"},"Model",-1)),e("td",Jt,d((i=(l=u.value.car)==null?void 0:l.model)==null?void 0:i.name),1)]),e("tr",null,[t[11]||(t[11]=e("td",{class:"p-2 border border-gray-300 font-bold text-gray-700"},"Tipe",-1)),e("td",Qt,d((v=(g=u.value.car)==null?void 0:g.type)==null?void 0:v.name),1)]),e("tr",es,[t[12]||(t[12]=e("td",{class:"p-2 border border-gray-300 font-bold text-gray-700"},"CC",-1)),e("td",ts,d((p=u.value.car)==null?void 0:p.cc),1)]),e("tr",null,[t[13]||(t[13]=e("td",{class:"p-2 border border-gray-300 font-bold text-gray-700"},"Bahan Bakar",-1)),e("td",ss,d((w=u.value.car)==null?void 0:w.fuel_type),1)]),e("tr",os,[t[14]||(t[14]=e("td",{class:"p-2 border border-gray-300 font-bold text-gray-700"},"Transmisi",-1)),e("td",ns,d((_=u.value.car)==null?void 0:_.transmission),1)]),e("tr",null,[t[15]||(t[15]=e("td",{class:"p-2 border border-gray-300 font-bold text-gray-700"},"Periode Model",-1)),e("td",as,d(((W=u.value.car)==null?void 0:W.production_period)||"-"),1)]),e("tr",rs,[t[16]||(t[16]=e("td",{class:"p-2 border border-gray-300 font-bold text-gray-700"},"Tahun Pembuatan",-1)),e("td",ls,d((V=u.value.car)==null?void 0:V.year),1)]),e("tr",is,[t[17]||(t[17]=e("td",{class:"p-2 border border-gray-300 font-bold text-gray-700"},"Warna",-1)),e("td",ds,d(u.value.color),1)]),e("tr",us,[t[18]||(t[18]=e("td",{class:"p-2 border border-gray-300 font-bold text-gray-700"},"No Rangka",-1)),e("td",cs,d(u.value.noka),1)]),e("tr",ms,[t[19]||(t[19]=e("td",{class:"p-2 border border-gray-300 font-bold text-gray-700"},"No Mesin",-1)),e("td",ps,d(u.value.nosin),1)]),e("tr",gs,[t[20]||(t[20]=e("td",{class:"p-2 border border-gray-300 font-bold text-gray-700"},"KM",-1)),e("td",vs,d(u.value.km),1)])])])):h("",!0),u.value.settings?(n(),o("div",hs,[e("div",bs,[e("div",fs,[u.value.settings.conclusion.flooded==="yes"?(n(),o("img",ys)):(n(),o("img",xs)),u.value.settings.conclusion.flooded==="yes"?(n(),o("p",ks," Bekas Banjir ")):(n(),o("p",ws," Bebas Banjir "))])]),e("div",_s,[e("div",js,[u.value.settings.conclusion.collision==="yes"?(n(),o(D,{key:0},[e("img",{src:ft.value,alt:"Tabrak",class:"w-16 h-16 md:w-20 md:h-20"},null,8,Cs),e("p",{style:pe({fontWeight:"bold",fontSize:"14px",color:xt.value,marginTop:"8px"})},d(yt.value),5)],64)):(n(),o(D,{key:1},[t[21]||(t[21]=e("img",{src:"/images/icons/aman.png",alt:"Aman",class:"w-16 h-16 md:w-20 md:h-20"},null,-1)),t[22]||(t[22]=e("p",{class:"font-bold text-sm md:text-base text-green-600 mt-2"}," Bebas Tabrak ",-1))],64))])])])):h("",!0),u.value.notes?(n(),o("div",Ms,[t[23]||(t[23]=e("h3",{class:"text-lg font-bold mb-2 text-gray-800"},"Kesimpulan Inspeksi:",-1)),e("p",Is,[e("div",{innerHTML:u.value.notes||"-"},null,8,Ts)])])):h("",!0)]),t[28]||(t[28]=e("h2",{class:"text-xl md:text-2xl font-bold border-b-2 border-gray-800 pb-2 mb-4 md:mb-6"},"Hasil Inspeksi",-1)),(n(!0),o(D,null,$(ut.value,j=>(n(),o("div",{key:j.component.id,class:N(["section mb-4 md:mb-6",j.component.name==="Foto Kendaraan"?"photo-component":""])},[e("div",Ds,d(j.component.name||"Tanpa Komponen"),1),j.component.name==="Foto Kendaraan"?(n(),o("div",Ps,[(n(!0),o(D,null,$(j.points,b=>{var A;return n(),o("div",{key:b.id},[(n(!0),o(D,null,$((A=b.inspection_point)==null?void 0:A.images,(F,me)=>(n(),o("div",{key:F.id,class:"image-container"},[Me(F.image_path)?(n(),o("img",{key:0,src:E(F.image_path),alt:"Foto Kendaraan",class:"w-24 h-24 md:w-32 md:h-32 object-cover border border-gray-300 rounded-lg cursor-pointer hover:opacity-90 transition-opacity hover:scale-105",onClick:P=>_e(E(F.image_path),b,me)},null,8,Ns)):(n(),o("div",Bs,t[24]||(t[24]=[e("span",null,"Gambar tidak ditemukan",-1)])))]))),128))])}),128))])):(n(!0),o(D,{key:1},$(j.points,b=>{var A,F,me;return n(),o("div",{key:b.id,class:"point ml-3 md:ml-4 py-3 border-b border-gray-100"},[C(b)||U(b)?(n(),o(D,{key:0},[e("span",Es,d(((A=b.inspection_point)==null?void 0:A.name)||"-"),1),e("div",Ls,[C(b)?(n(),o(D,{key:0},[pt(b)?(n(),o("div",Ss,[(n(!0),o(D,null,$(H(b),P=>(n(),o("span",{key:P,class:N(["status-badge",Ie(P)])},d(P.trim()),3))),128)),oe.value&&Xe(b)&&j.component.name!=="Dokumen"?(n(),o("button",{key:0,onClick:P=>Ae(b),class:"ml-2 bg-orange-500 text-white px-2 py-1 rounded text-xs hover:bg-orange-600 transition-colors inline-flex items-center",title:"Tambah Estimasi Perbaikan"},t[25]||(t[25]=[e("svg",{class:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1)]),8,Rs)):h("",!0)])):h("",!0),gt(b)?(n(),o("div",As,d(bt(b)),1)):h("",!0)],64)):h("",!0)]),vt(b)?(n(),o("div",Fs,[(n(!0),o(D,null,$((F=b.inspection_point)==null?void 0:F.images,(P,kt)=>(n(),o("div",{key:P.id,class:"image-container"},[Me(P.image_path)?(n(),o("img",{key:0,src:E(P.image_path),alt:"image",class:"w-16 h-16 md:w-24 md:h-24 object-cover border border-gray-300 rounded-lg cursor-pointer hover:opacity-90 transition-opacity hover:scale-105",onClick:Jo=>_e(E(P.image_path),b,kt)},null,8,$s)):(n(),o("div",zs,t[26]||(t[26]=[e("span",null,"Gambar tidak ditemukan",-1)])))]))),128))])):h("",!0),ht(b)&&Ge(b)?(n(),o("div",Ks,d((me=b.inspection_point)==null?void 0:me.results[0].note),1)):h("",!0)],64)):h("",!0)])}),128))],2))),128)),Ue(It,{estimations:Q.value,"inspection-id":u.value.id,"encrypted-ids":Z.encryptedIds,"can-edit":oe.value,"onUpdate:estimations":Je,"onUpdate:totalCost":Qe},null,8,["estimations","inspection-id","encrypted-ids","can-edit"]),Ze.value?(n(),o("div",Hs,[e("button",{onClick:t[1]||(t[1]=j=>q.value=!0),class:"w-full md:w-auto bg-blue-600 text-white px-4 py-2 md:px-6 md:py-3 rounded-lg shadow hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors duration-200 text-sm md:text-base"}," Setujui Laporan "),t[27]||(t[27]=e("p",{class:"text-xs md:text-sm text-gray-500 mt-2 italic"}," Catatan: Halaman ini hanya simulasi dan mungkin berbeda dengan tampilan file PDF. Silakan periksa lebih detail untuk memastikan tidak ada kesalahan. Jika sudah yakin, silakan setujui untuk proses selanjutnya. ",-1))])):h("",!0)])):(n(),o("div",Os,[t[29]||(t[29]=e("p",{class:"text-base md:text-lg font-semibold text-gray-700"}," Data sudah tidak ada, karena sudah dijadikan PDF. ",-1)),e("a",{href:s.route("inspections.download.approved.pdf",Z.encryptedIds),class:"mt-4 inline-block bg-blue-600 text-white px-4 py-2 md:px-6 md:py-3 rounded-lg shadow-md hover:bg-blue-700 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 text-sm md:text-base"}," Download PDF ",8,Ys)])),q.value?(n(),o("div",Gs,[e("div",Xs,[t[31]||(t[31]=e("h3",{class:"text-lg font-bold mb-3 md:mb-4"},"Konfirmasi Laporan",-1)),t[32]||(t[32]=e("p",{class:"text-gray-700 mb-4 md:mb-6 text-sm md:text-base"}," Apakah Anda yakin semua data sudah sesuai? Setelah disetujui, laporan akan diproses menjadi file PDF. ",-1)),e("div",Us,[e("button",{onClick:t[2]||(t[2]=j=>q.value=!1),class:"bg-gray-300 text-gray-800 px-3 py-1.5 md:px-4 md:py-2 rounded-lg hover:bg-gray-400 text-sm md:text-base"}," Batal "),u.value.file?(n(),o("button",qs,t[30]||(t[30]=[e("span",null,"Laporan sudah di buat",-1)]))):(n(),o("button",{key:0,onClick:ct,class:"bg-sky-600 text-white px-3 py-1.5 md:px-4 md:py-2 rounded-lg hover:bg-sky-700 transition-colors duration-200 text-sm md:text-base",disabled:J.value},[J.value?(n(),o("span",Vs,"Membuat file PDF...")):(n(),o("span",Zs,"Setujui Laporan"))],8,Ws))])])])):h("",!0),se.value&&!L.value?(n(),o("div",{key:5,class:"fixed inset-0 bg-black bg-opacity-95 flex flex-col items-center justify-center z-50",onClick:Te(je,["self"])},[e("div",Js,[e("div",Qs,[e("h3",eo,d(x.value.componentName||"Gambar Inspeksi"),1)]),e("button",{onClick:je,class:"bg-red-600 hover:bg-red-700 text-white rounded-full w-8 h-8 md:w-10 md:h-10 flex items-center justify-center transition-all flex-shrink-0 ml-2 md:ml-4"},t[33]||(t[33]=[e("svg",{class:"w-5 h-5 md:w-6 md:h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),e("div",to,[ne.value?(n(),o("button",{key:0,onClick:re,class:N(["absolute left-2 md:left-4 top-1/2 transform -translate-y-1/2 z-10 bg-black bg-opacity-60 text-white rounded-full w-10 h-10 md:w-12 md:h-12 flex items-center justify-center hover:bg-opacity-80 transition-all hover:scale-110",{"opacity-50":!ne.value}])},t[34]||(t[34]=[e("svg",{class:"w-6 h-6 md:w-8 md:h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)]),2)):h("",!0),e("div",{ref_key:"imageContainer",ref:Ne,class:N(["relative overflow-hidden w-full h-full flex items-center justify-center",{dragging:S.value}]),style:pe({touchAction:m.value>1?"none":"pan-y"}),onTouchstart:Te(at,["stop"]),onTouchmove:rt,onTouchend:lt,onMousedown:ce,onMousemove:Ce,onMouseup:X,onMouseleave:X},[z.value?(n(),o("img",{key:0,ref_key:"imageElement",ref:fe,src:z.value,alt:"Full size image",class:"absolute max-w-none object-contain cursor-grab active:cursor-grabbing",style:pe({transform:`scale(${m.value}) translate(${M.value.x}px, ${M.value.y}px) rotate(${T.value}deg)`,transition:S.value?"none":"transform 0.2s ease",width:R.value.width+"px",height:R.value.height+"px"}),onLoad:it,onClick:t[3]||(t[3]=Te(()=>{},["stop"]))},null,44,so)):(n(),o("div",oo," Gambar tidak dapat dimuat "))],38),ae.value?(n(),o("button",{key:1,onClick:le,class:N(["absolute right-2 md:right-4 top-1/2 transform -translate-y-1/2 z-10 bg-black bg-opacity-60 text-white rounded-full w-10 h-10 md:w-12 md:h-12 flex items-center justify-center hover:bg-opacity-80 transition-all hover:scale-110",{"opacity-50":!ae.value}])},t[35]||(t[35]=[e("svg",{class:"w-6 h-6 md:w-8 md:h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)]),2)):h("",!0)]),e("div",no,[e("div",ao,[e("div",ro,[e("div",lo," Gambar "+d(k.value+1)+" / "+d(y.value.length),1),e("div",io,[e("div",uo,[e("button",{onClick:de,class:N(["bg-gray-800 hover:bg-gray-700 text-white rounded-lg w-7 h-7 md:w-9 md:h-9 flex items-center justify-center transition-colors",{"opacity-50 cursor-not-allowed":m.value<=.5}]),disabled:m.value<=.5,title:"Zoom Out"},t[36]||(t[36]=[e("svg",{class:"w-4 h-4 md:w-5 md:h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20 12H4"})],-1)]),10,co),e("div",mo,[e("span",po,d(Math.round(m.value*100))+"%",1)]),e("button",{onClick:ie,class:N(["bg-gray-800 hover:bg-gray-700 text-white rounded-lg w-7 h-7 md:w-9 md:h-9 flex items-center justify-center transition-colors",{"opacity-50 cursor-not-allowed":m.value>=3}]),disabled:m.value>=3,title:"Zoom In"},t[37]||(t[37]=[e("svg",{class:"w-4 h-4 md:w-5 md:h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1)]),10,go)]),e("div",vo,[e("button",{onClick:He,class:"bg-gray-800 hover:bg-gray-700 text-white rounded-lg w-7 h-7 md:w-9 md:h-9 flex items-center justify-center transition-colors",title:"Putar ke Kiri"},t[38]||(t[38]=[e("svg",{class:"w-4 h-4 md:w-5 md:h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 12a9 9 0 019-9 9.75 9.75 0 017.5 3.5L21 12m0 0l-3.5-3.5M21 12H15"})],-1)])),e("div",ho,[e("span",bo,d(T.value)+"°",1)]),e("button",{onClick:Oe,class:"bg-gray-800 hover:bg-gray-700 text-white rounded-lg w-7 h-7 md:w-9 md:h-9 flex items-center justify-center transition-colors",title:"Putar ke Kanan"},t[39]||(t[39]=[e("svg",{class:"w-4 h-4 md:w-5 md:h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 12a9 9 0 01-9 9 9.75 9.75 0 01-7.5-3.5L3 12m0 0l3.5 3.5M3 12h6"})],-1)]))]),e("button",{onClick:ue,class:"bg-blue-600 hover:bg-blue-700 text-white rounded-lg px-2 py-1 md:px-3 md:py-1.5 text-xs md:text-sm transition-colors whitespace-nowrap",title:"Reset Zoom dan Posisi"}," Reset ")])])]),e("div",fo,[e("div",yo,[e("h4",xo,d(x.value.pointName||"Poin Inspeksi"),1),x.value.status?(n(),o("div",ko,[t[40]||(t[40]=e("span",{class:"text-xs md:text-sm font-medium text-gray-300"},"(",-1)),e("span",{class:N(["px-2 py-0.5 md:py-1 rounded-full text-xs md:text-sm font-semibold",Ie(x.value.status)])},d(x.value.status),3),t[41]||(t[41]=e("span",{class:"text-xs md:text-sm font-medium text-gray-300"},")",-1))])):h("",!0)]),x.value.note?(n(),o("div",wo,[e("div",_o,d(x.value.note),1)])):h("",!0),x.value.relatedInfo?(n(),o("div",jo,[t[42]||(t[42]=e("div",{class:"text-xs font-semibold text-gray-300 mb-1"},"Informasi Terkait:",-1)),(n(!0),o(D,null,$(x.value.relatedInfo,(j,b)=>(n(),o("div",{key:b,class:"text-xs text-gray-200"},[e("span",Co,d(j.name)+":",1),Mt(" "+d(j.value),1)]))),128))])):h("",!0),oe.value&&Le.value?(n(),o("div",Mo,[e("button",{onClick:Fe,class:"w-full bg-orange-600 hover:bg-orange-700 text-white py-2 px-3 rounded-lg transition-colors flex items-center justify-center gap-2"},t[43]||(t[43]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),e("span",{class:"text-sm font-medium"},"Tambah Estimasi Perbaikan",-1)]))])):h("",!0)])])])):h("",!0),Ue(Tt,{showModal:ge.value,estimationData:ve.value,inspectionId:u.value.id,encryptedIds:Z.encryptedIds,onClose:$e,onSaved:et},null,8,["showModal","estimationData","inspectionId","encryptedIds"]),ee.value?(n(),o("div",Io,[te.value==="up"?(n(),o("button",{key:0,onClick:tt,class:"bg-blue-600 hover:bg-blue-700 text-white p-2 md:p-3 rounded-full shadow-lg transition-all duration-300 transform hover:scale-110",title:"Scroll ke atas"},t[44]||(t[44]=[e("svg",{class:"w-4 h-4 md:w-5 md:h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 10l7-7m0 0l7 7m-7-7v18"})],-1)]))):h("",!0),te.value==="down"?(n(),o("button",{key:1,onClick:st,class:"bg-green-600 hover:bg-green-700 text-white p-2 md:p-3 rounded-full shadow-lg transition-all duration-300 transform hover:scale-110",title:"Scroll ke bawah"},t[45]||(t[45]=[e("svg",{class:"w-4 h-4 md:w-5 md:h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 14l-7 7m0 0l-7-7m7 7V4"})],-1)]))):h("",!0)])):h("",!0)]),L.value&&be.value?(n(),o("div",To,[e("div",{class:"mb-4 pb-4 border-b border-gray-200"},[e("div",{class:"flex items-center justify-between"},[t[47]||(t[47]=e("h3",{class:"text-lg font-bold text-gray-800"},"Review Gambar",-1)),e("button",{onClick:Ke,class:"text-gray-500 hover:text-gray-700",title:"Tutup sidebar"},t[46]||(t[46]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))])]),e("div",Do,[e("div",{ref_key:"desktopImageContainer",ref:Be,class:"relative bg-gray-100 rounded-lg overflow-hidden",onMousedown:ce,onMousemove:Ce,onMouseup:X,onMouseleave:X,onWheel:nt},[e("img",{ref_key:"desktopImageElement",ref:ye,src:z.value,alt:"Gambar Preview",class:"w-full h-auto max-h-80 object-contain cursor-grab active:cursor-grabbing",style:pe({transform:`scale(${m.value}) translate(${M.value.x}px, ${M.value.y}px) rotate(${T.value}deg)`,transition:S.value?"none":"transform 0.2s ease",transformOrigin:"center center"}),onLoad:dt},null,44,Po),e("div",No,[e("button",{onClick:re,disabled:!ne.value,class:"bg-black bg-opacity-50 text-white rounded-full w-10 h-10 flex items-center justify-center hover:bg-opacity-70 transition-all disabled:opacity-30 disabled:cursor-not-allowed"},t[48]||(t[48]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)]),8,Bo),e("button",{onClick:le,disabled:!ae.value,class:"bg-black bg-opacity-50 text-white rounded-full w-10 h-10 flex items-center justify-center hover:bg-opacity-70 transition-all disabled:opacity-30 disabled:cursor-not-allowed"},t[49]||(t[49]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)]),8,Eo)])],544),e("div",Lo,[e("div",So,[t[50]||(t[50]=e("span",{class:"text-sm font-medium text-gray-700"},"Zoom",-1)),e("span",Ro,d(Math.round(m.value*100))+"%",1)]),e("div",Ao,[e("button",{onClick:de,disabled:m.value<=.5,class:"flex-1 bg-gray-200 hover:bg-gray-300 text-gray-800 py-2 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed transition-colors"},t[51]||(t[51]=[e("svg",{class:"w-5 h-5 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20 12H4"})],-1)]),8,Fo),e("button",{onClick:ue,class:"flex-1 bg-blue-600 hover:bg-blue-700 text-white py-2 rounded-lg transition-colors"}," Reset "),e("button",{onClick:ie,disabled:m.value>=3,class:"flex-1 bg-gray-200 hover:bg-gray-300 text-gray-800 py-2 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed transition-colors"},t[52]||(t[52]=[e("svg",{class:"w-5 h-5 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1)]),8,$o)]),e("div",zo,[t[53]||(t[53]=e("span",{class:"text-sm font-medium text-gray-700"},"Rotasi",-1)),e("span",Ko,d(T.value)+"°",1)]),e("div",{class:"flex items-center gap-2"},[e("button",{onClick:He,class:"flex-1 bg-gray-200 hover:bg-gray-300 text-gray-800 py-2 rounded-lg transition-colors",title:"Putar ke Kiri"},t[54]||(t[54]=[e("svg",{class:"w-5 h-5 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 12a9 9 0 019-9 9.75 9.75 0 017.5 3.5L21 12m0 0l-3.5-3.5M21 12H15"})],-1)])),e("button",{onClick:Oe,class:"flex-1 bg-gray-200 hover:bg-gray-300 text-gray-800 py-2 rounded-lg transition-colors",title:"Putar ke Kanan"},t[55]||(t[55]=[e("svg",{class:"w-5 h-5 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 12a9 9 0 01-9 9 9.75 9.75 0 01-7.5-3.5L3 12m0 0l3.5 3.5M3 12h6"})],-1)]))])]),e("div",Ho,[e("div",Oo,[e("div",null,[t[56]||(t[56]=e("label",{class:"text-xs font-semibold text-gray-500 uppercase tracking-wide"},"Komponen",-1)),e("p",Yo,d(x.value.componentName||"-"),1)]),e("div",null,[t[57]||(t[57]=e("label",{class:"text-xs font-semibold text-gray-500 uppercase tracking-wide"},"Poin Inspeksi",-1)),e("div",Go,[e("p",Xo,d(x.value.pointName||"-"),1),x.value.status?(n(),o("span",{key:0,class:N(["px-2 py-1 rounded-full text-xs font-semibold",Ie(x.value.status)])},d(x.value.status),3)):h("",!0)])]),x.value.note?(n(),o("div",Uo,[t[58]||(t[58]=e("label",{class:"text-xs font-semibold text-gray-500 uppercase tracking-wide"},"Catatan",-1)),e("p",Wo,d(x.value.note),1)])):h("",!0),oe.value&&Le.value?(n(),o("div",Vo,[e("button",{onClick:Fe,class:"w-full bg-orange-600 hover:bg-orange-700 text-white py-2 px-4 rounded-lg transition-colors flex items-center justify-center gap-2"},t[59]||(t[59]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),e("span",{class:"text-sm font-medium"},"Tambah Estimasi Perbaikan",-1)]))])):h("",!0)])]),e("div",Zo," Gambar "+d(k.value+1)+" dari "+d(y.value.length),1)])])):h("",!0)])}}},sn=Dt(qo,[["__scopeId","data-v-ca805cf3"]]);export{sn as default};
