import{p as ct,r as u,q as _,g as mt,G as gt,c as o,o as a,d as e,b as m,k as $e,t as l,F as D,N as ue,m as $,y as Ie,n as T,a as pt,D as He}from"./vendor-C3sNAm3r.js";import{_ as vt,a as bt}from"./RepairEstimationSection-CuHSVkmV.js";import{_ as yt}from"./app-0h-sH7Ui.js";const ht={class:"flex flex-col lg:grid lg:grid-cols-12 gap-4"},ft={class:"p-4 md:p-6 bg-white rounded-lg shadow-md lg:col-span-7"},xt={key:0,class:"mb-4 p-4 bg-green-100 border border-green-400 text-green-700 rounded"},kt={class:"flex"},wt={key:1,class:"mb-4 p-4 bg-red-100 border border-red-400 text-red-700 rounded"},_t={class:"flex"},Ct={key:2},It={class:"header flex flex-col gap-5 mb-6 mt-2 md:mt-6"},Mt={class:"flex flex-col md:flex-row items-center md:items-start gap-5"},jt={class:"flex-shrink-0"},Dt=["src"],Tt={key:1,class:"w-32 h-32 md:w-48 md:h-48 border border-gray-300 rounded-lg flex items-center justify-center bg-gray-100 text-gray-400"},Bt={class:"text-center md:text-left mt-2 md:mt-8"},Et={class:"text-2xl md:text-3xl font-bold m-0 text-gray-800"},Nt={key:0,class:"car-info"},St={class:"w-full border-collapse border border-gray-300 rounded-lg overflow-hidden text-sm md:text-base"},Lt={class:"bg-gray-50"},At={class:"p-2 border border-gray-300 text-gray-600"},Ft={class:"bg-gray-50"},Rt={class:"p-2 border border-gray-300 text-gray-600"},Pt={class:"p-2 border border-gray-300 text-gray-600"},zt={class:"bg-gray-50"},$t={class:"p-2 border border-gray-300 text-gray-600"},Ht={class:"p-2 border border-gray-300 text-gray-600"},Ot={class:"bg-gray-50"},Kt={class:"p-2 border border-gray-300 text-gray-600"},Yt={class:"p-2 border border-gray-300 text-gray-600"},Gt={class:"bg-gray-50"},Ut={class:"p-2 border border-gray-300 text-gray-600"},Wt={class:"p-2 border border-gray-300 text-gray-600"},qt={class:"bg-gray-50"},Xt={class:"p-2 border border-gray-300 text-gray-600"},Vt={class:"bg-gray-50"},Zt={class:"p-2 border border-gray-300 text-gray-600"},Jt={class:"bg-gray-50"},Qt={class:"p-2 border border-gray-300 text-gray-600"},es={class:"bg-gray-50"},ts={class:"p-2 border border-gray-300 text-gray-600"},ss={class:"bg-gray-50"},os={class:"p-2 border border-gray-300 text-gray-600"},as={key:1,class:"flex flex-col md:flex-row gap-4 mt-4"},ns={class:"flex-1 text-center p-4 bg-gray-50 rounded-lg"},rs={class:"flex flex-col items-center"},ls={key:0,src:"/images/icons/banjir.png",alt:"Banjir",class:"w-16 h-16 md:w-20 md:h-20"},is={key:1,src:"/images/icons/aman.png",alt:"Aman",class:"w-16 h-16 md:w-20 md:h-20"},ds={key:2,class:"font-bold text-sm md:text-base text-red-600 mt-2"},us={key:3,class:"font-bold text-sm md:text-base text-green-600 mt-2"},cs={class:"flex-1 text-center p-4 bg-gray-50 rounded-lg"},ms={class:"flex flex-col items-center"},gs=["src"],ps={key:2,class:"conclusion p-4 bg-gray-50 border-l-4 border-gray-800 rounded-lg mt-4"},vs={class:"m-0 text-gray-600 text-sm md:text-base"},bs=["innerHTML"],ys={class:"component-title bg-gray-100 px-3 py-2 border-l-4 border-gray-800 font-bold rounded-l-lg text-sm md:text-base"},hs={key:0,class:"images flex flex-wrap gap-2 mt-3 md:mt-4"},fs=["src","onClick"],xs={key:1,class:"w-24 h-24 md:w-32 md:h-32 border border-gray-300 rounded-lg flex items-center justify-center bg-gray-100 text-xs text-gray-400"},ks={class:"point-name inline-block font-bold align-top text-gray-700 text-sm md:text-base min-w-[140px] md:min-w-[180px]"},ws={class:"point-content inline-block align-top w-[calc(100%-150px)] md:w-[calc(100%-190px)]"},_s={key:0,class:"status-badges-container"},Cs=["onClick"],Is={key:1,class:"point-note italic text-gray-600 my-1 text-xs md:text-sm"},Ms={key:0,class:"inspection-images flex flex-wrap gap-2 mt-3 md:mt-4"},js=["src","onClick"],Ds={key:1,class:"w-16 h-16 md:w-24 md:h-24 border border-gray-300 rounded-lg flex items-center justify-center bg-gray-100 text-xs text-gray-400"},Ts={key:1,class:"textarea-note italic text-gray-600 my-2 text-xs md:text-sm"},Bs={key:0,class:"mt-4 md:mt-6 mb-4 md:mb-6"},Es={key:3,class:"flex flex-col items-center justify-center h-64 md:h-96 text-center p-4"},Ns=["href"],Ss={key:4,class:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50"},Ls={class:"bg-white p-4 md:p-6 rounded-lg shadow-xl w-11/12 md:w-96 max-w-sm mx-4"},As={class:"flex justify-end space-x-3 md:space-x-4"},Fs=["disabled"],Rs={key:0},Ps={key:1},zs={key:1,class:"bg-indigo-600 text-white px-3 py-1.5 md:px-4 md:py-2 rounded-lg hover:bg-indigo-700 transition-colors duration-200 cursor-not-allowed text-sm md:text-base"},$s={class:"absolute top-0 left-0 right-0 bg-black bg-opacity-90 text-white p-3 md:p-4 flex items-center justify-between z-20"},Hs={class:"flex-1 text-center"},Os={class:"text-base md:text-lg font-bold truncate max-w-[70vw] mx-auto"},Ks={class:"relative w-full h-full flex items-center justify-center p-2 md:p-4 pt-12 md:pt-16 pb-32 md:pb-40"},Ys=["src"],Gs={key:1,class:"text-white text-base md:text-lg"},Us={class:"absolute bottom-0 left-0 right-0 bg-black bg-opacity-90 z-20 max-h-[60vh] overflow-y-auto"},Ws={class:"p-2 md:p-3 border-b border-gray-700 sticky top-0 bg-black bg-opacity-90"},qs={class:"flex items-center justify-between"},Xs={class:"text-xs md:text-sm font-medium text-gray-300"},Vs={class:"flex items-center gap-2 md:gap-3"},Zs={class:"flex items-center gap-1 md:gap-2"},Js=["disabled"],Qs={class:"w-12 md:w-16 text-center"},eo={class:"text-xs md:text-sm font-medium text-white"},to=["disabled"],so={class:"p-3 md:p-4"},oo={class:"flex flex-col md:flex-row md:items-center gap-1 md:gap-2 mb-1 md:mb-2"},ao={class:"text-sm md:text-base font-semibold text-white truncate"},no={key:0,class:"flex items-center flex-shrink-0"},ro={key:0,class:"mt-1 md:mt-2 mb-2"},lo={class:"text-xs md:text-sm text-gray-200 italic break-words leading-relaxed"},io={key:1,class:"mt-2 pt-2 border-t border-gray-700"},uo={key:6,class:"fixed bottom-4 md:bottom-6 right-4 md:right-6 flex flex-col gap-2 z-40"},co={key:0,class:"hidden lg:block lg:col-span-5 bg-white rounded-lg shadow-md p-4 overflow-y-auto h-[calc(100vh-2rem)] sticky top-4"},mo={class:"space-y-4"},go=["src"],po={class:"absolute inset-x-0 top-1/2 transform -translate-y-1/2 flex justify-between px-2"},vo=["disabled"],bo=["disabled"],yo={class:"bg-gray-50 rounded-lg p-3"},ho={class:"flex items-center justify-between mb-2"},fo={class:"text-sm font-medium text-gray-900"},xo={class:"flex items-center gap-2"},ko=["disabled"],wo=["disabled"],_o={class:"bg-gray-50 rounded-lg p-4"},Co={class:"space-y-3"},Io={class:"text-sm font-medium text-gray-900 mt-1"},Mo={class:"flex items-center gap-2 mt-1"},jo={class:"text-sm font-medium text-gray-900 flex-1"},Do={key:0},To={class:"text-sm text-gray-700 italic mt-1"},Bo={key:1,class:"pt-3 border-t border-gray-200"},Eo={class:"text-center text-sm text-gray-500"},No={__name:"ReviewPDF",props:{inspection:{type:Object,required:!0},menu_points:{type:Array,default:()=>[]},coverImage:{type:Object,default:null},encryptedIds:Object,repairEstimations:{type:Array,default:()=>[]},totalRepairCost:{type:Number,default:0}},setup(q){const C=q,Oe=ct(),X=u(!1),V=u(!1),Z=u(C.repairEstimations),Me=u(C.totalRepairCost),ce=u(!1),me=u(null),J=u(!1),Q=u(""),ge=u(0),H=u(null),ee=u(!1),F=u(""),b=u(0),v=u([]),c=u(1),pe=u(null),N=u(!1),je=u(window.innerWidth>=1024),y=u({pointName:"",componentName:"",status:"",note:""}),De=u(null),ve=u(null),Te=u(null),be=u(null),R=u(!1),ye=u({x:0,y:0}),h=u({x:0,y:0}),S=u({width:0,height:0}),P=_(()=>{var s;return((s=Oe.props.global)==null?void 0:s.has_roles)||[]});_(()=>P.value.includes("quality_control")||P.value.includes("qc"));const te=_(()=>(P.value.includes("quality_control")||P.value.includes("qc"))&&r.value.status==="pending_review"),Ke=_(()=>(P.value.includes("quality_control")||P.value.includes("qc"))&&r.value.status==="pending_review"),Be=_(()=>{const s=v.value[b.value];return s!=null&&s.pointData?ze(s.pointData):!1}),r=u(C.inspection),he=u(C.menu_points),B=u(C.coverImage),Ye=async()=>{if(r.value.status==="in_progress")try{const s=await pt.get(route("inspections.detail",C.encryptedIds));r.value=s.data.inspection,he.value=s.data.menu_points,B.value=s.data.coverImage,Z.value=s.data.repairEstimations||[],Me.value=s.data.totalRepairCost||0}catch(s){console.error("Polling gagal:",s)}},Ee=()=>{je.value=window.innerWidth>=1024};mt(()=>{setInterval(Ye,5e3);const s=()=>{const t=window.scrollY;t>ge.value?Q.value="down":t<ge.value&&(Q.value="up"),ge.value=t,t>200?(J.value=!0,H.value&&clearTimeout(H.value),H.value=setTimeout(()=>{J.value=!1},2e3)):J.value=!1};return window.addEventListener("scroll",s),window.addEventListener("resize",Ee),window.addEventListener("keydown",Ne),()=>{window.removeEventListener("scroll",s),window.removeEventListener("resize",Ee),window.removeEventListener("keydown",Ne),H.value&&clearTimeout(H.value)}});const Ne=s=>{if(N.value)switch(s.key){case"ArrowLeft":s.preventDefault(),ae();break;case"ArrowRight":s.preventDefault(),ne();break;case"Escape":s.preventDefault(),Re();break;case"+":case"=":s.preventDefault(),re();break;case"-":s.preventDefault(),le();break;case"0":s.preventDefault(),ie();break}else if(ee.value)switch(s.key){case"ArrowLeft":s.preventDefault(),ae();break;case"ArrowRight":s.preventDefault(),ne();break;case"Escape":s.preventDefault(),xe();break;case"+":case"=":s.preventDefault(),re();break;case"-":s.preventDefault(),le();break;case"0":s.preventDefault(),ie();break}},Ge=s=>{Z.value=s},Ue=s=>{Me.value=s},Se=s=>{var t;me.value={part_name:((t=s.inspection_point)==null?void 0:t.name)||"",repair_description:"",urgency:"segera",status:"perlu",estimated_cost:0,notes:""},ce.value=!0},Le=()=>{const s=v.value[b.value];s!=null&&s.pointData&&Se(s.pointData)},Ae=()=>{ce.value=!1,me.value=null},We=s=>{Z.value.push(s),Ae()},qe=()=>{window.scrollTo({top:0,behavior:"smooth"})},Xe=()=>{window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"})},fe=(s,t=null,n=0)=>{Fe();const i=v.value.findIndex(d=>d.url===s||d.pointData===t&&d.imageIndex===n);i!==-1?(b.value=i,O(i)):(b.value=v.value.length,v.value.push({url:s,pointData:t,imageIndex:n}),O(b.value)),je.value?(pe.value=s,N.value=!0):ee.value=!0,c.value=1,h.value={x:0,y:0},S.value={width:0,height:0}},Fe=()=>{v.value=[],B.value&&B.value.image_path&&v.value.push({url:E(B.value.image_path),type:"cover",pointName:"Foto Utama Kendaraan",componentName:"Cover",pointData:{type:"cover",name:"Foto Utama Kendaraan"}}),C.menu_points.forEach(s=>{var k,w,I,M,U,W,x;const t=((k=s.inspection_point)==null?void 0:k.images)||[],n=((I=(w=s.inspection_point)==null?void 0:w.component)==null?void 0:I.name)||"Tanpa Komponen",i=((M=s.inspection_point)==null?void 0:M.name)||"Unknown",p=z(s).join(", ")||"",f=((x=(W=(U=s.inspection_point)==null?void 0:U.results)==null?void 0:W[0])==null?void 0:x.note)||"";t.forEach((g,L)=>{g.image_path&&v.value.push({url:E(g.image_path),pointData:s,imageIndex:L,pointName:i,componentName:n,status:p,note:f})})})},O=s=>{if(s<0||s>=v.value.length)return;const t=v.value[s];F.value=t.url,y.value={pointName:t.pointName||"Gambar Inspeksi",componentName:t.componentName||"",status:t.status||"",note:t.note||""}},xe=()=>{ee.value=!1,F.value="",b.value=0,v.value=[],c.value=1,h.value={x:0,y:0}},Re=()=>{N.value=!1,pe.value=null,F.value="",b.value=0,v.value=[],c.value=1,h.value={x:0,y:0}},se=_(()=>b.value>0),oe=_(()=>b.value<v.value.length-1),ae=()=>{se.value&&(b.value--,O(b.value),c.value=1,h.value={x:0,y:0})},ne=()=>{oe.value&&(b.value++,O(b.value),c.value=1,h.value={x:0,y:0})},re=()=>{c.value<3&&(c.value=Math.min(c.value+.25,3))},le=()=>{c.value>.5&&(c.value=Math.max(c.value-.25,.5))},ie=()=>{c.value=1,h.value={x:0,y:0}},Ve=s=>{s.preventDefault();const t=s.deltaY>0?-.1:.1;c.value=Math.max(.5,Math.min(3,c.value+t))},ke=s=>{if(c.value<=1)return;R.value=!0;const t=s.type.includes("mouse")?s.clientX:s.touches[0].clientX,n=s.type.includes("mouse")?s.clientY:s.touches[0].clientY;ye.value={x:t-h.value.x,y:n-h.value.y},s.preventDefault()},we=s=>{var M;if(!R.value)return;const t=s.type.includes("mouse")?s.clientX:s.touches[0].clientX,n=s.type.includes("mouse")?s.clientY:s.touches[0].clientY,i=t-ye.value.x,d=n-ye.value.y,p=(M=N.value?Te.value:De.value)==null?void 0:M.getBoundingClientRect();if(!p)return;const f=S.value.width*c.value,k=S.value.height*c.value,w=Math.max(0,(f-p.width)/2),I=Math.max(0,(k-p.height)/2);h.value={x:Math.max(-w,Math.min(w,i)),y:Math.max(-I,Math.min(I,d))},s.preventDefault()},K=()=>{R.value=!1},Ze=()=>{He(()=>{if(ve.value){const s=ve.value;S.value={width:s.naturalWidth,height:s.naturalHeight}}})},Je=()=>{He(()=>{if(be.value){const s=be.value;S.value={width:s.naturalWidth,height:s.naturalHeight}}})},Qe=_(()=>{if(!he.value)return[];const s=new Map;he.value.forEach(n=>{var p;const i=(p=n.inspection_point)==null?void 0:p.component,d=(i==null?void 0:i.id)||0;s.has(d)||s.set(d,{component:i||{id:0,name:"Tanpa Komponen",order:9999},points:[]}),s.get(d).points.push(n)});const t=Array.from(s.values()).sort((n,i)=>n.component.order===i.component.order?new Date(n.component.created_at)-new Date(i.component.created_at):(n.component.order||9999)-(i.component.order||9999));return t.forEach(n=>{n.points.sort((i,d)=>i.order===d.order?new Date(i.created_at)-new Date(d.created_at):(i.order||9999)-(d.order||9999))}),t}),et=()=>{V.value=!0,setTimeout(()=>{window.location.href=route("inspections.download.pdf",C.encryptedIds),V.value=!1,X.value=!1},2e3)},tt=_(()=>{const s=C.menu_points.some(n=>Y(n)||G(n)),t=C.coverImage&&C.coverImage.image_path;return s||t}),_e=s=>s&&s.length>0,E=s=>`/${s}`,Y=s=>{var t;return((t=s.inspection_point)==null?void 0:t.results)&&s.inspection_point.results.length>0},G=s=>{var t;return((t=s.inspection_point)==null?void 0:t.images)&&s.inspection_point.images.length>0},Pe=s=>Y(s)&&s.inspection_point.results[0].note,z=s=>{var n,i;if(!Y(s))return[];const t=(i=(n=s.inspection_point)==null?void 0:n.results[0])==null?void 0:i.status;return t?Array.isArray(t)?t:typeof t=="string"&&t.includes(",")?t.split(",").map(d=>d.trim()).filter(d=>d.length>0):[t]:[]},st=s=>{const t=s.input_type||"",n=z(s);return["radio","imageTOradio"].includes(t)&&n.length>0},ot=s=>{const t=s.input_type||"";return["text","number","date","textarea"].includes(t)&&Pe(s)},at=s=>{var i,d,p;const t=s.input_type||"",n=s.settings||{};if((i=s.inspection_point)!=null&&i.results[0],t==="image"&&G(s)||t==="imageTOradio"&&G(s))return!0;if(t==="radio"){const f=z(s);for(const k of f)if((((p=(((d=n.radios)==null?void 0:d.find(M=>M.value===k))||{}).settings)==null?void 0:p.show_image_upload)||!1)&&G(s))return!0}return!1},nt=s=>{var i,d,p;const t=s.settings||{};(i=s.inspection_point)!=null&&i.results[0];const n=z(s);for(const f of n)if((p=(((d=t.radios)==null?void 0:d.find(w=>w.value===f))||{}).settings)!=null&&p.show_textarea)return!0;return!1},Ce=s=>{if(!s)return"status-warning";const t=String(s).toLowerCase().trim();return["normal","ada","baik","good","ok"].includes(t)?"status-good":["tidak normal","tidak ada","rusak","bad","not ok","rusak","repaired"].includes(t)?"status-bad":"status-warning"},ze=s=>z(s).some(n=>{const i=String(n).toLowerCase().trim();return!["normal","ada","baik","good","ok"].includes(i)}),rt=s=>{var d;const t=s.input_type||"",n=((d=s.inspection_point)==null?void 0:d.results[0])||{},i=s.settings||{};if(t==="account"&&n.note){const p=n.note.replace(/[^\d.-]/g,""),f=parseFloat(p);if(isNaN(f))return n.note;const k=i.currency_symbol||"Rp";return new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0,maximumFractionDigits:2}).format(f).replace("Rp",k)}return n.note},lt=_(()=>{if(!r.value.settings||r.value.settings.conclusion.collision!=="yes")return"/images/icons/aman.png";const s=r.value.settings.conclusion.collision_severity;return s==="moderate"?"/images/icons/beruntun.png":s==="heavy"?"/images/icons/berat.png":"/images/icons/ringan.png"}),it=_(()=>{if(!r.value.settings||r.value.settings.conclusion.collision!=="yes")return"Bebas Tabrak";const s=r.value.settings.conclusion.collision_severity;return s==="moderate"?"Tabrak Beruntun":s==="heavy"?"Tabrak Berat":"Tabrak Ringan"}),dt=_(()=>{if(!r.value.settings||r.value.settings.conclusion.collision!=="yes")return"#28a745";const s=r.value.settings.conclusion.collision_severity;return s==="moderate"?"#fd7e14":s==="heavy"?"#dc3545":"#ffc107"});return gt(N,s=>{s&&v.value.length===0&&(Fe(),v.value.length>0&&(b.value=0,O(0)))}),(s,t)=>{var n,i,d,p,f,k,w,I,M,U,W;return a(),o("div",ht,[e("div",ft,[s.$page.props.flash.success?(a(),o("div",xt,[e("div",kt,[t[4]||(t[4]=e("svg",{class:"w-5 h-5 text-green-400 mr-2",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"})],-1)),e("span",null,l(s.$page.props.flash.success),1)])])):m("",!0),s.$page.props.flash.error?(a(),o("div",wt,[e("div",_t,[t[5]||(t[5]=e("svg",{class:"w-5 h-5 text-red-400 mr-2",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})],-1)),e("span",null,l(s.$page.props.flash.error),1)])])):m("",!0),tt.value?(a(),o("div",Ct,[e("div",It,[e("div",Mt,[e("div",jt,[B.value&&_e(B.value.image_path)?(a(),o("img",{key:0,src:E(B.value.image_path),alt:"Foto Utama",class:"w-32 h-32 md:w-48 md:h-48 object-cover rounded-lg border border-gray-300 cursor-pointer hover:opacity-90 transition-opacity",onClick:t[0]||(t[0]=x=>fe(E(B.value.image_path),{type:"cover",name:"Foto Utama Kendaraan"},0))},null,8,Dt)):(a(),o("div",Tt,t[6]||(t[6]=[e("span",{class:"text-sm md:text-base"},"Gambar tidak tersedia",-1)])))]),e("div",Bt,[e("h2",Et,l(r.value.car_name),1)])]),r.value.car_id?(a(),o("div",Nt,[e("table",St,[e("tr",Lt,[t[7]||(t[7]=e("td",{class:"p-2 border border-gray-300 font-bold text-gray-700 w-1/3 md:w-1/4"},"ID Order",-1)),e("td",At,l(r.value.order_code),1)]),e("tr",Ft,[t[8]||(t[8]=e("td",{class:"p-2 border border-gray-300 font-bold text-gray-700"},"Nomor Polisi",-1)),e("td",Rt,l(r.value.plate_number),1)]),e("tr",null,[t[9]||(t[9]=e("td",{class:"p-2 border border-gray-300 font-bold text-gray-700"},"Merek",-1)),e("td",Pt,l((i=(n=r.value.car)==null?void 0:n.brand)==null?void 0:i.name),1)]),e("tr",zt,[t[10]||(t[10]=e("td",{class:"p-2 border border-gray-300 font-bold text-gray-700"},"Model",-1)),e("td",$t,l((p=(d=r.value.car)==null?void 0:d.model)==null?void 0:p.name),1)]),e("tr",null,[t[11]||(t[11]=e("td",{class:"p-2 border border-gray-300 font-bold text-gray-700"},"Tipe",-1)),e("td",Ht,l((k=(f=r.value.car)==null?void 0:f.type)==null?void 0:k.name),1)]),e("tr",Ot,[t[12]||(t[12]=e("td",{class:"p-2 border border-gray-300 font-bold text-gray-700"},"CC",-1)),e("td",Kt,l((w=r.value.car)==null?void 0:w.cc),1)]),e("tr",null,[t[13]||(t[13]=e("td",{class:"p-2 border border-gray-300 font-bold text-gray-700"},"Bahan Bakar",-1)),e("td",Yt,l((I=r.value.car)==null?void 0:I.fuel_type),1)]),e("tr",Gt,[t[14]||(t[14]=e("td",{class:"p-2 border border-gray-300 font-bold text-gray-700"},"Transmisi",-1)),e("td",Ut,l((M=r.value.car)==null?void 0:M.transmission),1)]),e("tr",null,[t[15]||(t[15]=e("td",{class:"p-2 border border-gray-300 font-bold text-gray-700"},"Periode Model",-1)),e("td",Wt,l(((U=r.value.car)==null?void 0:U.production_period)||"-"),1)]),e("tr",qt,[t[16]||(t[16]=e("td",{class:"p-2 border border-gray-300 font-bold text-gray-700"},"Tahun Pembuatan",-1)),e("td",Xt,l((W=r.value.car)==null?void 0:W.year),1)]),e("tr",Vt,[t[17]||(t[17]=e("td",{class:"p-2 border border-gray-300 font-bold text-gray-700"},"Warna",-1)),e("td",Zt,l(r.value.color),1)]),e("tr",Jt,[t[18]||(t[18]=e("td",{class:"p-2 border border-gray-300 font-bold text-gray-700"},"No Rangka",-1)),e("td",Qt,l(r.value.noka),1)]),e("tr",es,[t[19]||(t[19]=e("td",{class:"p-2 border border-gray-300 font-bold text-gray-700"},"No Mesin",-1)),e("td",ts,l(r.value.nosin),1)]),e("tr",ss,[t[20]||(t[20]=e("td",{class:"p-2 border border-gray-300 font-bold text-gray-700"},"KM",-1)),e("td",os,l(r.value.km),1)])])])):m("",!0),r.value.settings?(a(),o("div",as,[e("div",ns,[e("div",rs,[r.value.settings.conclusion.flooded==="yes"?(a(),o("img",ls)):(a(),o("img",is)),r.value.settings.conclusion.flooded==="yes"?(a(),o("p",ds," Bekas Banjir ")):(a(),o("p",us," Bebas Banjir "))])]),e("div",cs,[e("div",ms,[r.value.settings.conclusion.collision==="yes"?(a(),o(D,{key:0},[e("img",{src:lt.value,alt:"Tabrak",class:"w-16 h-16 md:w-20 md:h-20"},null,8,gs),e("p",{style:ue({fontWeight:"bold",fontSize:"14px",color:dt.value,marginTop:"8px"})},l(it.value),5)],64)):(a(),o(D,{key:1},[t[21]||(t[21]=e("img",{src:"/images/icons/aman.png",alt:"Aman",class:"w-16 h-16 md:w-20 md:h-20"},null,-1)),t[22]||(t[22]=e("p",{class:"font-bold text-sm md:text-base text-green-600 mt-2"}," Bebas Tabrak ",-1))],64))])])])):m("",!0),r.value.notes?(a(),o("div",ps,[t[23]||(t[23]=e("h3",{class:"text-lg font-bold mb-2 text-gray-800"},"Kesimpulan Inspeksi:",-1)),e("p",vs,[e("div",{innerHTML:r.value.notes||"-"},null,8,bs)])])):m("",!0)]),t[28]||(t[28]=e("h2",{class:"text-xl md:text-2xl font-bold border-b-2 border-gray-800 pb-2 mb-4 md:mb-6"},"Hasil Inspeksi",-1)),(a(!0),o(D,null,$(Qe.value,x=>(a(),o("div",{key:x.component.id,class:T(["section mb-4 md:mb-6",x.component.name==="Foto Kendaraan"?"photo-component":""])},[e("div",ys,l(x.component.name||"Tanpa Komponen"),1),x.component.name==="Foto Kendaraan"?(a(),o("div",hs,[(a(!0),o(D,null,$(x.points,g=>{var L;return a(),o("div",{key:g.id},[(a(!0),o(D,null,$((L=g.inspection_point)==null?void 0:L.images,(A,de)=>(a(),o("div",{key:A.id,class:"image-container"},[_e(A.image_path)?(a(),o("img",{key:0,src:E(A.image_path),alt:"Foto Kendaraan",class:"w-24 h-24 md:w-32 md:h-32 object-cover border border-gray-300 rounded-lg cursor-pointer hover:opacity-90 transition-opacity hover:scale-105",onClick:j=>fe(E(A.image_path),g,de)},null,8,fs)):(a(),o("div",xs,t[24]||(t[24]=[e("span",null,"Gambar tidak ditemukan",-1)])))]))),128))])}),128))])):(a(!0),o(D,{key:1},$(x.points,g=>{var L,A,de;return a(),o("div",{key:g.id,class:"point ml-3 md:ml-4 py-3 border-b border-gray-100"},[Y(g)||G(g)?(a(),o(D,{key:0},[e("span",ks,l(((L=g.inspection_point)==null?void 0:L.name)||"-"),1),e("div",ws,[Y(g)?(a(),o(D,{key:0},[st(g)?(a(),o("div",_s,[(a(!0),o(D,null,$(z(g),j=>(a(),o("span",{key:j,class:T(["status-badge",Ce(j)])},l(j.trim()),3))),128)),te.value&&ze(g)&&x.component.name!=="Dokumen"?(a(),o("button",{key:0,onClick:j=>Se(g),class:"ml-2 bg-orange-500 text-white px-2 py-1 rounded text-xs hover:bg-orange-600 transition-colors inline-flex items-center",title:"Tambah Estimasi Perbaikan"},t[25]||(t[25]=[e("svg",{class:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1)]),8,Cs)):m("",!0)])):m("",!0),ot(g)?(a(),o("div",Is,l(rt(g)),1)):m("",!0)],64)):m("",!0)]),at(g)?(a(),o("div",Ms,[(a(!0),o(D,null,$((A=g.inspection_point)==null?void 0:A.images,(j,ut)=>(a(),o("div",{key:j.id,class:"image-container"},[_e(j.image_path)?(a(),o("img",{key:0,src:E(j.image_path),alt:"image",class:"w-16 h-16 md:w-24 md:h-24 object-cover border border-gray-300 rounded-lg cursor-pointer hover:opacity-90 transition-opacity hover:scale-105",onClick:So=>fe(E(j.image_path),g,ut)},null,8,js)):(a(),o("div",Ds,t[26]||(t[26]=[e("span",null,"Gambar tidak ditemukan",-1)])))]))),128))])):m("",!0),nt(g)&&Pe(g)?(a(),o("div",Ts,l((de=g.inspection_point)==null?void 0:de.results[0].note),1)):m("",!0)],64)):m("",!0)])}),128))],2))),128)),$e(vt,{estimations:Z.value,"inspection-id":r.value.id,"encrypted-ids":q.encryptedIds,"can-edit":te.value,"onUpdate:estimations":Ge,"onUpdate:totalCost":Ue},null,8,["estimations","inspection-id","encrypted-ids","can-edit"]),Ke.value?(a(),o("div",Bs,[e("button",{onClick:t[1]||(t[1]=x=>X.value=!0),class:"w-full md:w-auto bg-blue-600 text-white px-4 py-2 md:px-6 md:py-3 rounded-lg shadow hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors duration-200 text-sm md:text-base"}," Setujui Laporan "),t[27]||(t[27]=e("p",{class:"text-xs md:text-sm text-gray-500 mt-2 italic"}," Catatan: Halaman ini hanya simulasi dan mungkin berbeda dengan tampilan file PDF. Silakan periksa lebih detail untuk memastikan tidak ada kesalahan. Jika sudah yakin, silakan setujui untuk proses selanjutnya. ",-1))])):m("",!0)])):(a(),o("div",Es,[t[29]||(t[29]=e("p",{class:"text-base md:text-lg font-semibold text-gray-700"}," Data sudah tidak ada, karena sudah dijadikan PDF. ",-1)),e("a",{href:s.route("inspections.download.approved.pdf",q.encryptedIds),class:"mt-4 inline-block bg-blue-600 text-white px-4 py-2 md:px-6 md:py-3 rounded-lg shadow-md hover:bg-blue-700 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 text-sm md:text-base"}," Download PDF ",8,Ns)])),X.value?(a(),o("div",Ss,[e("div",Ls,[t[31]||(t[31]=e("h3",{class:"text-lg font-bold mb-3 md:mb-4"},"Konfirmasi Laporan",-1)),t[32]||(t[32]=e("p",{class:"text-gray-700 mb-4 md:mb-6 text-sm md:text-base"}," Apakah Anda yakin semua data sudah sesuai? Setelah disetujui, laporan akan diproses menjadi file PDF. ",-1)),e("div",As,[e("button",{onClick:t[2]||(t[2]=x=>X.value=!1),class:"bg-gray-300 text-gray-800 px-3 py-1.5 md:px-4 md:py-2 rounded-lg hover:bg-gray-400 text-sm md:text-base"}," Batal "),r.value.file?(a(),o("button",zs,t[30]||(t[30]=[e("span",null,"Laporan sudah di buat",-1)]))):(a(),o("button",{key:0,onClick:et,class:"bg-sky-600 text-white px-3 py-1.5 md:px-4 md:py-2 rounded-lg hover:bg-sky-700 transition-colors duration-200 text-sm md:text-base",disabled:V.value},[V.value?(a(),o("span",Rs,"Membuat file PDF...")):(a(),o("span",Ps,"Setujui Laporan"))],8,Fs))])])])):m("",!0),ee.value&&!N.value?(a(),o("div",{key:5,class:"fixed inset-0 bg-black bg-opacity-95 flex flex-col items-center justify-center z-50",onClick:Ie(xe,["self"])},[e("div",$s,[e("div",Hs,[e("h3",Os,l(y.value.componentName||"Gambar Inspeksi"),1)]),e("button",{onClick:xe,class:"bg-red-600 hover:bg-red-700 text-white rounded-full w-8 h-8 md:w-10 md:h-10 flex items-center justify-center transition-all flex-shrink-0 ml-2 md:ml-4"},t[33]||(t[33]=[e("svg",{class:"w-5 h-5 md:w-6 md:h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),e("div",Ks,[se.value?(a(),o("button",{key:0,onClick:ae,class:T(["absolute left-2 md:left-4 top-1/2 transform -translate-y-1/2 z-10 bg-black bg-opacity-60 text-white rounded-full w-10 h-10 md:w-12 md:h-12 flex items-center justify-center hover:bg-opacity-80 transition-all hover:scale-110",{"opacity-50":!se.value}])},t[34]||(t[34]=[e("svg",{class:"w-6 h-6 md:w-8 md:h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)]),2)):m("",!0),e("div",{ref_key:"imageContainer",ref:De,class:T(["relative overflow-hidden w-full h-full flex items-center justify-center",{dragging:R.value}]),style:ue({touchAction:c.value>1?"none":"pan-y"}),onTouchstart:Ie(ke,["stop"]),onTouchmove:we,onTouchend:K,onMousedown:ke,onMousemove:we,onMouseup:K,onMouseleave:K},[F.value?(a(),o("img",{key:0,ref_key:"imageElement",ref:ve,src:F.value,alt:"Full size image",class:"absolute max-w-none object-contain cursor-grab active:cursor-grabbing",style:ue({transform:`scale(${c.value}) translate(${h.value.x}px, ${h.value.y}px)`,transition:R.value?"none":"transform 0.2s ease",width:S.value.width+"px",height:S.value.height+"px"}),onLoad:Ze,onClick:t[3]||(t[3]=Ie(()=>{},["stop"]))},null,44,Ys)):(a(),o("div",Gs," Gambar tidak dapat dimuat "))],38),oe.value?(a(),o("button",{key:1,onClick:ne,class:T(["absolute right-2 md:right-4 top-1/2 transform -translate-y-1/2 z-10 bg-black bg-opacity-60 text-white rounded-full w-10 h-10 md:w-12 md:h-12 flex items-center justify-center hover:bg-opacity-80 transition-all hover:scale-110",{"opacity-50":!oe.value}])},t[35]||(t[35]=[e("svg",{class:"w-6 h-6 md:w-8 md:h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)]),2)):m("",!0)]),e("div",Us,[e("div",Ws,[e("div",qs,[e("div",Xs," Gambar "+l(b.value+1)+" / "+l(v.value.length),1),e("div",Vs,[e("div",Zs,[e("button",{onClick:le,class:T(["bg-gray-800 hover:bg-gray-700 text-white rounded-lg w-7 h-7 md:w-9 md:h-9 flex items-center justify-center transition-colors",{"opacity-50 cursor-not-allowed":c.value<=.5}]),disabled:c.value<=.5,title:"Zoom Out"},t[36]||(t[36]=[e("svg",{class:"w-4 h-4 md:w-5 md:h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20 12H4"})],-1)]),10,Js),e("div",Qs,[e("span",eo,l(Math.round(c.value*100))+"%",1)]),e("button",{onClick:re,class:T(["bg-gray-800 hover:bg-gray-700 text-white rounded-lg w-7 h-7 md:w-9 md:h-9 flex items-center justify-center transition-colors",{"opacity-50 cursor-not-allowed":c.value>=3}]),disabled:c.value>=3,title:"Zoom In"},t[37]||(t[37]=[e("svg",{class:"w-4 h-4 md:w-5 md:h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1)]),10,to)]),e("button",{onClick:ie,class:"bg-blue-600 hover:bg-blue-700 text-white rounded-lg px-2 py-1 md:px-3 md:py-1.5 text-xs md:text-sm transition-colors whitespace-nowrap",title:"Reset Zoom dan Posisi"}," Reset ")])])]),e("div",so,[e("div",oo,[e("h4",ao,l(y.value.pointName||"Poin Inspeksi"),1),y.value.status?(a(),o("div",no,[t[38]||(t[38]=e("span",{class:"text-xs md:text-sm font-medium text-gray-300"},"(",-1)),e("span",{class:T(["px-2 py-0.5 md:py-1 rounded-full text-xs md:text-sm font-semibold",Ce(y.value.status)])},l(y.value.status),3),t[39]||(t[39]=e("span",{class:"text-xs md:text-sm font-medium text-gray-300"},")",-1))])):m("",!0)]),y.value.note?(a(),o("div",ro,[e("div",lo,l(y.value.note),1)])):m("",!0),te.value&&Be.value?(a(),o("div",io,[e("button",{onClick:Le,class:"w-full bg-orange-600 hover:bg-orange-700 text-white py-2 px-3 rounded-lg transition-colors flex items-center justify-center gap-2"},t[40]||(t[40]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),e("span",{class:"text-sm font-medium"},"Tambah Estimasi Perbaikan",-1)]))])):m("",!0)])])])):m("",!0),$e(bt,{showModal:ce.value,estimationData:me.value,inspectionId:r.value.id,encryptedIds:q.encryptedIds,onClose:Ae,onSaved:We},null,8,["showModal","estimationData","inspectionId","encryptedIds"]),J.value?(a(),o("div",uo,[Q.value==="up"?(a(),o("button",{key:0,onClick:qe,class:"bg-blue-600 hover:bg-blue-700 text-white p-2 md:p-3 rounded-full shadow-lg transition-all duration-300 transform hover:scale-110",title:"Scroll ke atas"},t[41]||(t[41]=[e("svg",{class:"w-4 h-4 md:w-5 md:h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 10l7-7m0 0l7 7m-7-7v18"})],-1)]))):m("",!0),Q.value==="down"?(a(),o("button",{key:1,onClick:Xe,class:"bg-green-600 hover:bg-green-700 text-white p-2 md:p-3 rounded-full shadow-lg transition-all duration-300 transform hover:scale-110",title:"Scroll ke bawah"},t[42]||(t[42]=[e("svg",{class:"w-4 h-4 md:w-5 md:h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 14l-7 7m0 0l-7-7m7 7V4"})],-1)]))):m("",!0)])):m("",!0)]),N.value&&pe.value?(a(),o("div",co,[e("div",{class:"mb-4 pb-4 border-b border-gray-200"},[e("div",{class:"flex items-center justify-between"},[t[44]||(t[44]=e("h3",{class:"text-lg font-bold text-gray-800"},"Review Gambar",-1)),e("button",{onClick:Re,class:"text-gray-500 hover:text-gray-700",title:"Tutup sidebar"},t[43]||(t[43]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))])]),e("div",mo,[e("div",{ref_key:"desktopImageContainer",ref:Te,class:"relative bg-gray-100 rounded-lg overflow-hidden",onMousedown:ke,onMousemove:we,onMouseup:K,onMouseleave:K,onWheel:Ve},[e("img",{ref_key:"desktopImageElement",ref:be,src:F.value,alt:"Gambar Preview",class:"w-full h-auto max-h-80 object-contain cursor-grab active:cursor-grabbing",style:ue({transform:`scale(${c.value}) translate(${h.value.x}px, ${h.value.y}px)`,transition:R.value?"none":"transform 0.2s ease",transformOrigin:"center center"}),onLoad:Je},null,44,go),e("div",po,[e("button",{onClick:ae,disabled:!se.value,class:"bg-black bg-opacity-50 text-white rounded-full w-10 h-10 flex items-center justify-center hover:bg-opacity-70 transition-all disabled:opacity-30 disabled:cursor-not-allowed"},t[45]||(t[45]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)]),8,vo),e("button",{onClick:ne,disabled:!oe.value,class:"bg-black bg-opacity-50 text-white rounded-full w-10 h-10 flex items-center justify-center hover:bg-opacity-70 transition-all disabled:opacity-30 disabled:cursor-not-allowed"},t[46]||(t[46]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)]),8,bo)])],544),e("div",yo,[e("div",ho,[t[47]||(t[47]=e("span",{class:"text-sm font-medium text-gray-700"},"Zoom",-1)),e("span",fo,l(Math.round(c.value*100))+"%",1)]),e("div",xo,[e("button",{onClick:le,disabled:c.value<=.5,class:"flex-1 bg-gray-200 hover:bg-gray-300 text-gray-800 py-2 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed transition-colors"},t[48]||(t[48]=[e("svg",{class:"w-5 h-5 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20 12H4"})],-1)]),8,ko),e("button",{onClick:ie,class:"flex-1 bg-blue-600 hover:bg-blue-700 text-white py-2 rounded-lg transition-colors"}," Reset "),e("button",{onClick:re,disabled:c.value>=3,class:"flex-1 bg-gray-200 hover:bg-gray-300 text-gray-800 py-2 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed transition-colors"},t[49]||(t[49]=[e("svg",{class:"w-5 h-5 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1)]),8,wo)])]),e("div",_o,[e("div",Co,[e("div",null,[t[50]||(t[50]=e("label",{class:"text-xs font-semibold text-gray-500 uppercase tracking-wide"},"Komponen",-1)),e("p",Io,l(y.value.componentName||"-"),1)]),e("div",null,[t[51]||(t[51]=e("label",{class:"text-xs font-semibold text-gray-500 uppercase tracking-wide"},"Poin Inspeksi",-1)),e("div",Mo,[e("p",jo,l(y.value.pointName||"-"),1),y.value.status?(a(),o("span",{key:0,class:T(["px-2 py-1 rounded-full text-xs font-semibold",Ce(y.value.status)])},l(y.value.status),3)):m("",!0)])]),y.value.note?(a(),o("div",Do,[t[52]||(t[52]=e("label",{class:"text-xs font-semibold text-gray-500 uppercase tracking-wide"},"Catatan",-1)),e("p",To,l(y.value.note),1)])):m("",!0),te.value&&Be.value?(a(),o("div",Bo,[e("button",{onClick:Le,class:"w-full bg-orange-600 hover:bg-orange-700 text-white py-2 px-4 rounded-lg transition-colors flex items-center justify-center gap-2"},t[53]||(t[53]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),e("span",{class:"text-sm font-medium"},"Tambah Estimasi Perbaikan",-1)]))])):m("",!0)])]),e("div",Eo," Gambar "+l(b.value+1)+" dari "+l(v.value.length),1)])])):m("",!0)])}}},Ro=yt(No,[["__scopeId","data-v-d98188e8"]]);export{Ro as default};
