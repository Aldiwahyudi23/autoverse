import{q as I,c as i,o as l,d as e,f as S,b as x,n as A,t as b,r as C,g as U,G as H,H as re,z as D,A as M,u as g,F as N,m as Z,I as W,e as Y,x as de,y as ue,k as T,p as me,j as z,w as L,v as ce,S as F,W as X}from"./vendor-C3sNAm3r.js";import{A as pe}from"./AppLayout-BZjHom3l.js";import{_ as ve}from"./CardCustomer-B7h2Sxuz.js";import{d as ge}from"./debounce-BAMeIouG.js";import{_ as xe}from"./app-0h-sH7Ui.js";import{r as fe,C as be}from"./car-aFd-KKsg.js";import{r as ye}from"./ClipboardDocumentListIcon-B8h86qNq.js";const he={key:0,class:"space-y-2"},_e={class:"flex justify-between items-center"},we={class:"flex justify-between items-center"},ke={key:0,class:"flex justify-between items-center"},Ce={key:1,class:"flex justify-between items-center"},$e={class:"text-xs text-gray-700 font-mono"},Ie={key:2,class:"flex justify-between items-center"},je={class:"text-xs text-gray-700"},Se={key:3,class:"flex justify-between items-center"},De={class:"text-xs text-gray-700"},Ae={key:1},Me={__name:"CardTransaction",props:{transaction:{type:Object,default:null},showEditButton:{type:Boolean,default:!0}},emits:["edit"],setup(o){const w=o,y={pending:"Menunggu Pembayaran",paid:"Sudah Dibayar",failed:"Gagal",refunded:"Dikembalikan",expired:"Kadaluarsa"},c={cash:"Cash",transfer:"Transfer",debit_card:"Kartu Debit",credit_card:"Kartu Kredit",qris:"QRIS"},_=I(()=>{var t;return((t=w.transaction)==null?void 0:t.status)==="paid"}),p=I(()=>{var t;return((t=w.transaction)==null?void 0:t.status)==="pending"}),u=I(()=>{var t;return((t=w.transaction)==null?void 0:t.status)==="failed"}),v=I(()=>!_.value&&!p.value&&!u.value),f=t=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(t);return(t,m)=>(l(),i("div",{class:A(["p-3 rounded border",{"bg-green-50 border-green-200":_.value,"bg-red-50 border-red-200":u.value,"bg-yellow-50 border-yellow-200":p.value}])},[m[7]||(m[7]=e("div",{class:"flex justify-between items-center mb-2"},[e("h4",{class:"text-sm font-medium text-gray-700 flex items-center"},[e("svg",{class:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z"})]),S(" Pembayaran ")])],-1)),o.transaction?(l(),i("div",he,[e("div",_e,[m[0]||(m[0]=e("span",{class:"text-xs font-medium text-gray-600"},"Status:",-1)),e("span",{class:A([{"text-green-600 font-semibold":_.value,"text-yellow-600 font-semibold":p.value,"text-red-600 font-semibold":u.value,"text-gray-600 font-semibold":v.value},"text-xs"])},b(y[o.transaction.status]),3)]),e("div",we,[m[1]||(m[1]=e("span",{class:"text-xs font-medium text-gray-600"},"Nominal:",-1)),e("span",{class:A([{"text-green-700 font-semibold":_.value,"text-yellow-700 font-semibold":p.value,"text-red-700 font-semibold":u.value},"text-xs"])},b(f(o.transaction.amount)),3)]),o.transaction.payment_method?(l(),i("div",ke,[m[2]||(m[2]=e("span",{class:"text-xs font-medium text-gray-600"},"Metode:",-1)),e("span",{class:A([{"text-green-700":_.value,"text-yellow-700":p.value,"text-red-700":u.value},"text-xs"])},b(c[o.transaction.payment_method]||o.transaction.payment_method),3)])):x("",!0),o.transaction.invoice_number?(l(),i("div",Ce,[m[3]||(m[3]=e("span",{class:"text-xs font-medium text-gray-600"},"Invoice:",-1)),e("span",$e,b(o.transaction.invoice_number),1)])):x("",!0),o.transaction.payment_date?(l(),i("div",Ie,[m[4]||(m[4]=e("span",{class:"text-xs font-medium text-gray-600"},"Tanggal:",-1)),e("span",je,b(new Date(o.transaction.payment_date).toLocaleDateString("id-ID")),1)])):x("",!0),o.transaction.payer&&o.transaction.payer.name?(l(),i("div",Se,[m[5]||(m[5]=e("span",{class:"text-xs font-medium text-gray-600"},"Dibayar oleh:",-1)),e("span",De,b(o.transaction.payer.name),1)])):x("",!0)])):(l(),i("div",Ae,m[6]||(m[6]=[e("p",{class:"text-xs text-yellow-700"},"Data transaksi belum tersedia",-1)])))],2))}},Te={class:"space-y-4"},Ve={class:"relative"},Be={key:0,class:"absolute z-10 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg max-h-60 overflow-y-auto"},Pe=["onClick"],Le={class:"font-medium text-sm"},Oe={class:"text-xs text-gray-500"},Fe={key:0},ze={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Ne={key:0,class:"text-xs text-red-600 mt-1"},Ue={class:"relative"},qe={key:0,class:"text-xs text-red-600 mt-1"},He={class:"md:col-span-2"},Ee={key:1,class:"p-3 bg-blue-50 border border-blue-200 rounded-md"},Re={class:"flex justify-between items-start"},Ke={class:"text-sm text-gray-700"},We={class:"text-xs text-gray-600"},Ge={class:"text-xs text-gray-600"},Je={__name:"CustomerForm",props:{formData:{type:Object,required:!0},existingCustomer:{type:Object,default:null},existingSeller:{type:Object,default:null}},emits:["update:form","customer-selected","update:errors"],setup(o,{emit:w}){const y=w,c=o,_=C(""),p=C([]),u=C(!1),v=C(null),f=C({customer_name:"",customer_phone:""}),t=C({customer_id:"",customer_name:"",customer_phone:"",customer_email:"",customer_address:""});U(()=>{var n;c.existingCustomer?(t.value={customer_id:c.existingCustomer.id,customer_name:c.existingCustomer.name,customer_phone:((n=c.existingCustomer.phone)==null?void 0:n.replace("62",""))||"",customer_email:c.existingCustomer.email||"",customer_address:c.existingCustomer.address||""},v.value=c.existingCustomer):t.value={...c.formData}}),H(t,n=>{y("update:form",n)},{deep:!0});const m=ge(async()=>{if(!_.value.trim()){p.value=[];return}try{const n=await fetch(`/customers/search?search=${encodeURIComponent(_.value)}`);n.ok&&(p.value=await n.json())}catch(n){console.error("Error searching customers:",n),p.value=[]}},300),P=n=>{var a;v.value=n,t.value={customer_id:n.id,customer_name:n.name,customer_phone:((a=n.phone)==null?void 0:a.replace("62",""))||"",customer_email:n.email||"",customer_address:n.address||""},n.sellers&&n.sellers.length>0&&y("customer-selected",{customer:n,sellers:n.sellers}),u.value=!1,_.value=""},h=()=>{v.value=null,t.value={customer_id:"",customer_name:"",customer_phone:"",customer_email:"",customer_address:""}},$=n=>{n.target.closest(".relative")||(u.value=!1)};U(()=>{document.addEventListener("click",$)}),re(()=>{document.removeEventListener("click",$)});const V=()=>{t.value.customer_name.trim()?t.value.customer_name.trim().length<3?f.value.customer_name="Nama customer minimal 3 karakter":f.value.customer_name="":f.value.customer_name="Nama customer wajib diisi"},k=()=>{const n=t.value.customer_phone.trim();n?/^\d{9,14}$/.test(n)?f.value.customer_phone="":f.value.customer_phone="Nomor WhatsApp harus 9-14 digit angka":f.value.customer_phone="Nomor WhatsApp wajib diisi"};return(n,a)=>(l(),i("div",Te,[e("div",null,[a[7]||(a[7]=e("label",{class:"block text-xs font-medium text-gray-600 mb-1"}," Pilih Customer yang sudah ada (opsional) ",-1)),e("div",Ve,[D(e("input",{"onUpdate:modelValue":a[0]||(a[0]=d=>_.value=d),onInput:a[1]||(a[1]=(...d)=>g(m)&&g(m)(...d)),onFocus:a[2]||(a[2]=d=>u.value=!0),type:"text",placeholder:"Cari customer...",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm"},null,544),[[M,_.value]]),u.value&&p.value.length>0?(l(),i("div",Be,[(l(!0),i(N,null,Z(p.value,d=>(l(),i("div",{key:d.id,onClick:B=>P(d),class:"px-3 py-2 hover:bg-blue-50 cursor-pointer border-b border-gray-100 last:border-b-0"},[e("div",Le,b(d.name),1),e("div",Oe,b(d.phone)+" • "+b(d.email),1)],8,Pe))),128))])):x("",!0)]),a[8]||(a[8]=e("p",{class:"text-xs text-gray-500 mt-1"}," Kosongkan jika ingin membuat customer baru ",-1))]),v.value?x("",!0):(l(),i("div",Fe,[a[14]||(a[14]=e("h4",{class:"text-sm font-medium text-gray-700 mb-3 border-b pb-2"}," Data Customer Baru ",-1)),e("div",ze,[e("div",null,[a[9]||(a[9]=e("label",{class:"block text-xs font-medium text-gray-600 mb-1"}," Nama Customer * ",-1)),D(e("input",{"onUpdate:modelValue":a[3]||(a[3]=d=>t.value.customer_name=d),onBlur:V,type:"text",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm",placeholder:"Nama lengkap customer"},null,544),[[M,t.value.customer_name]]),f.value.customer_name?(l(),i("p",Ne,b(f.value.customer_name),1)):x("",!0)]),e("div",null,[a[11]||(a[11]=e("label",{class:"block text-xs font-medium text-gray-600 mb-1"}," Nomor WhatsApp * ",-1)),e("div",Ue,[a[10]||(a[10]=e("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[e("span",{class:"text-gray-500 text-sm"},"+62")],-1)),D(e("input",{"onUpdate:modelValue":a[4]||(a[4]=d=>t.value.customer_phone=d),onBlur:k,type:"tel",required:"",class:"w-full pl-10 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm",placeholder:"8123456789"},null,544),[[M,t.value.customer_phone]])]),f.value.customer_phone?(l(),i("p",qe,b(f.value.customer_phone),1)):x("",!0)]),e("div",null,[a[12]||(a[12]=e("label",{class:"block text-xs font-medium text-gray-600 mb-1"}," Email ",-1)),D(e("input",{"onUpdate:modelValue":a[5]||(a[5]=d=>t.value.customer_email=d),type:"email",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm",placeholder:"customer@email.com"},null,512),[[M,t.value.customer_email]])]),e("div",He,[a[13]||(a[13]=e("label",{class:"block text-xs font-medium text-gray-600 mb-1"}," Alamat ",-1)),D(e("textarea",{"onUpdate:modelValue":a[6]||(a[6]=d=>t.value.customer_address=d),rows:"3",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm",placeholder:"Alamat lengkap customer"},null,512),[[M,t.value.customer_address]])])])])),v.value?(l(),i("div",Ee,[e("div",Re,[e("div",null,[a[15]||(a[15]=e("h5",{class:"text-sm font-semibold text-blue-800"},"Customer terpilih:",-1)),e("p",Ke,b(v.value.name),1),e("p",We,b(v.value.phone),1),e("p",Ge,b(v.value.email),1)]),e("button",{onClick:h,type:"button",class:"text-xs text-red-600 hover:text-red-800"}," Ubah ")])])):x("",!0)]))}},Qe={key:0,class:"space-y-4"},Ye={class:"space-y-4"},Xe=["disabled"],Ze=["value","disabled"],et={key:0,class:"text-xs text-gray-500"},tt={key:0,class:"text-xs text-gray-500 mt-1"},st={key:0,class:"text-xs text-red-600 mt-1"},nt={class:"flex"},at=["disabled"],ot={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},lt={key:0,class:"text-xs text-red-600 mt-1"},it={class:"relative"},rt={key:0,class:"text-xs text-red-600 mt-1"},dt={__name:"SellerForm",props:{formData:{type:Object,required:!0},showForm:{type:Boolean,default:!1},existingSeller:{type:Object,default:null}},emits:["update:form","update:errors"],setup(o,{emit:w}){const y=w,c=o,_=C([]),p=C(!1),u=C({seller_inspection_area:"",seller_inspection_address:"",seller_link_maps:"",seller_unit_holder_name:"",seller_unit_holder_phone:"",seller_settings:{}}),v=C({seller_inspection_address:"",seller_link_maps:"",seller_unit_holder_name:"",seller_unit_holder_phone:""}),f=async()=>{try{p.value=!0;const k=await fetch("/api/regions/active-with-teams");if(k.ok){const n=await k.json();_.value=n.regions||[]}else console.error("Failed to fetch regions")}catch(k){console.error("Error fetching regions:",k)}finally{p.value=!1}};U(()=>{var k;f(),c.existingSeller?u.value={seller_inspection_area:c.existingSeller.inspection_area||"",seller_inspection_address:c.existingSeller.inspection_address||"",seller_link_maps:c.existingSeller.link_maps||"",seller_unit_holder_name:c.existingSeller.unit_holder_name||"",seller_unit_holder_phone:((k=c.existingSeller.unit_holder_phone)==null?void 0:k.replace("62",""))||"",seller_settings:c.existingSeller.settings||{}}:u.value={...c.formData}}),H(u,k=>{y("update:form",k)},{deep:!0});const t=()=>{navigator.geolocation?navigator.geolocation.getCurrentPosition(k=>{const{latitude:n,longitude:a}=k.coords,d=`https://www.google.com/maps?q=${n},${a}`;u.value.seller_link_maps=d,m(n,a)},k=>{alert("Gagal mendapatkan lokasi: "+k.message)}):alert("Browser tidak mendukung geolocation")},m=async(k,n)=>{try{const d=await(await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${k}&lon=${n}`)).json();if(d.address&&(u.value.seller_inspection_area||(u.value.seller_inspection_area=d.address.city||d.address.town||d.address.village||""),!u.value.seller_inspection_address)){const B=[];d.address.road&&B.push(d.address.road),d.address.suburb&&B.push(d.address.suburb),d.address.city_district&&B.push(d.address.city_district),d.address.city&&B.push(d.address.city),d.address.state&&B.push(d.address.state),u.value.seller_inspection_address=B.join(", ")}}catch(a){console.error("Error reverse geocoding:",a)}},P=()=>{if(u.value.seller_link_maps&&u.value.seller_link_maps.includes("google.com/maps"))window.open(u.value.seller_link_maps,"_blank","noopener,noreferrer");else if(u.value.seller_inspection_address){const k=encodeURIComponent(u.value.seller_inspection_address);window.open(`https://www.google.com/maps/search/?api=1&query=${k}`,"_blank","noopener,noreferrer")}},h=()=>{u.value.seller_inspection_address.trim()?u.value.seller_inspection_address.trim().length<5?v.value.seller_inspection_address="Alamat inspeksi minimal 5 karakter":v.value.seller_inspection_address="":v.value.seller_inspection_address="Alamat inspeksi wajib diisi"},$=()=>{u.value.seller_unit_holder_name.trim()?u.value.seller_unit_holder_name.trim().length<3?v.value.seller_unit_holder_name="Nama penanggung jawab minimal 3 karakter":v.value.seller_unit_holder_name="":v.value.seller_unit_holder_name="Nama penanggung jawab wajib diisi"},V=()=>{const k=u.value.seller_unit_holder_phone.trim();k?/^\d{9,14}$/.test(k)?v.value.seller_unit_holder_phone="":v.value.seller_unit_holder_phone="Nomor WhatsApp harus 9-14 digit angka":v.value.seller_unit_holder_phone="Nomor WhatsApp wajib diisi"};return(k,n)=>o.showForm?(l(),i("div",Qe,[n[14]||(n[14]=e("h4",{class:"text-sm font-medium text-gray-700 mb-3 border-b pb-2"}," Data Lokasi Inspeksi & Penanggung Jawab ",-1)),e("div",Ye,[e("div",null,[n[6]||(n[6]=e("label",{class:"block text-xs font-medium text-gray-600 mb-1"}," Area Inspeksi * ",-1)),D(e("select",{"onUpdate:modelValue":n[0]||(n[0]=a=>u.value.seller_inspection_area=a),required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm",disabled:p.value},[n[5]||(n[5]=e("option",{value:"",disabled:""},"Pilih Area Inspeksi",-1)),(l(!0),i(N,null,Z(_.value,a=>(l(),i("option",{key:a.id,value:a.name,disabled:!a.has_active_team,class:A({"text-gray-400":!a.has_active_team})},[S(b(a.name)+" ",1),a.has_active_team?x("",!0):(l(),i("span",et,"(Tidak tersedia)"))],10,Ze))),128))],8,Xe),[[W,u.value.seller_inspection_area]]),p.value?(l(),i("p",tt,"Memuat data area...")):x("",!0)]),e("div",null,[n[7]||(n[7]=e("label",{class:"block text-xs font-medium text-gray-600 mb-1"}," Alamat Lengkap Inspeksi * ",-1)),D(e("textarea",{"onUpdate:modelValue":n[1]||(n[1]=a=>u.value.seller_inspection_address=a),onBlur:h,rows:"3",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm",placeholder:"Alamat lengkap lokasi inspeksi"},null,544),[[M,u.value.seller_inspection_address]]),v.value.seller_inspection_address?(l(),i("p",st,b(v.value.seller_inspection_address),1)):x("",!0)]),e("div",null,[e("div",{class:"flex justify-between items-center mb-1"},[n[9]||(n[9]=e("label",{class:"block text-xs font-medium text-gray-600"}," Link Google Maps ",-1)),e("button",{type:"button",onClick:t,class:"text-xs text-blue-600 hover:text-blue-800 flex items-center",title:"Ambil lokasi saat ini"},n[8]||(n[8]=[e("svg",{class:"h-3 w-3 mr-1",fill:"currentColor",viewBox:"0 0 24 24"},[e("path",{d:"M12 8c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4zm8.94 3A8.994 8.994 0 0013 3.06V1h-2v2.06A8.994 8.994 0 003.06 11H1v2h2.06A8.994 8.994 0 0011 20.94V23h2v-2.06A8.994 8.994 0 0020.94 13H23v-2h-2.06zM12 19c-3.87 0-7-3.13-7-7s3.13-7 7-7 7 3.13 7 7-3.13 7-7 7z"})],-1),S(" Lokasi Saat Ini ")]))]),e("div",nt,[D(e("input",{"onUpdate:modelValue":n[2]||(n[2]=a=>u.value.seller_link_maps=a),type:"text",placeholder:"https://maps.google.com/?q=...",class:"flex-1 px-3 py-2 border border-gray-300 rounded-l-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm"},null,512),[[M,u.value.seller_link_maps]]),e("button",{type:"button",onClick:P,class:"px-3 py-2 bg-blue-500 text-white rounded-r-md hover:bg-blue-600 text-sm",disabled:!u.value.seller_link_maps,title:"Cari di Maps"},n[10]||(n[10]=[e("svg",{class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})],-1)]),8,at)])]),e("div",ot,[e("div",null,[n[11]||(n[11]=e("label",{class:"block text-xs font-medium text-gray-600 mb-1"}," Nama Penanggung Jawab * ",-1)),D(e("input",{"onUpdate:modelValue":n[3]||(n[3]=a=>u.value.seller_unit_holder_name=a),onBlur:$,type:"text",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm",placeholder:"Nama orang yang memegang unit"},null,544),[[M,u.value.seller_unit_holder_name]]),v.value.seller_unit_holder_name?(l(),i("p",lt,b(v.value.seller_unit_holder_name),1)):x("",!0)]),e("div",null,[n[13]||(n[13]=e("label",{class:"block text-xs font-medium text-gray-600 mb-1"}," Nomor WhatsApp Penanggung Jawab * ",-1)),e("div",it,[n[12]||(n[12]=e("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[e("span",{class:"text-gray-500 text-sm"},"+62")],-1)),D(e("input",{"onUpdate:modelValue":n[4]||(n[4]=a=>u.value.seller_unit_holder_phone=a),onBlur:V,type:"tel",required:"",class:"w-full pl-10 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm",placeholder:"8123456789"},null,544),[[M,u.value.seller_unit_holder_phone]])]),v.value.seller_unit_holder_phone?(l(),i("p",rt,b(v.value.seller_unit_holder_phone),1)):x("",!0)])])])])):x("",!0)}},ut={class:"space-y-4"},mt={class:"space-y-4"},ct={key:0},pt={__name:"TransactionForm",props:{formData:{type:Object,required:!0},existingTransaction:{type:Object,default:null}},emits:["update:form"],setup(o,{emit:w}){const y=w,c=o,_=C(""),p=C({transaction_amount:"",transaction_payment_method:"",transaction_status:"pending",transaction_payment_date:new Date().toISOString().split("T")[0],transaction_notes:""});U(()=>{if(c.existingTransaction){const f=parseFloat(c.existingTransaction.amount)||0;p.value={transaction_amount:f,transaction_payment_method:c.existingTransaction.payment_method||"",transaction_status:c.existingTransaction.status||"pending",transaction_payment_date:c.existingTransaction.payment_date?new Date(c.existingTransaction.payment_date).toISOString().split("T")[0]:new Date().toISOString().split("T")[0],transaction_notes:c.existingTransaction.notes||""},_.value=u(f)}else p.value={...c.formData}});const u=f=>{if(!f)return"";const t=String(f).replace(/\D/g,""),m=parseInt(t,10);return isNaN(m)?"":new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(m)},v=f=>{const t=f.target.value.replace(/\D/g,"");p.value.transaction_amount=t,_.value=u(t)};return H(p,f=>{y("update:form",f)},{deep:!0}),(f,t)=>(l(),i("div",ut,[t[12]||(t[12]=e("h4",{class:"text-sm font-medium text-gray-700 mb-3 border-b pb-2"}," Data Pembayaran ",-1)),e("div",mt,[e("div",null,[t[5]||(t[5]=e("label",{class:"block text-xs font-medium text-gray-600 mb-1"}," Nominal Pembayaran * ",-1)),D(e("input",{"onUpdate:modelValue":t[0]||(t[0]=m=>_.value=m),onInput:v,type:"text",required:"",placeholder:"Contoh: 250000",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm"},null,544),[[M,_.value]])]),e("div",null,[t[7]||(t[7]=e("label",{class:"block text-xs font-medium text-gray-600 mb-1"}," Metode Pembayaran * ",-1)),D(e("select",{"onUpdate:modelValue":t[1]||(t[1]=m=>p.value.transaction_payment_method=m),required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm"},t[6]||(t[6]=[Y('<option value="">Pilih Metode</option><option value="cash">Cash</option><option value="transfer">Transfer</option><option value="debit_card">Kartu Debit</option><option value="credit_card">Kartu Kredit</option><option value="qris">QRIS</option>',6)]),512),[[W,p.value.transaction_payment_method]])]),e("div",null,[t[9]||(t[9]=e("label",{class:"block text-xs font-medium text-gray-600 mb-1"}," Status * ",-1)),D(e("select",{"onUpdate:modelValue":t[2]||(t[2]=m=>p.value.transaction_status=m),required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm"},t[8]||(t[8]=[Y('<option value="pending">Menunggu Pembayaran</option><option value="paid">Sudah Dibayar</option><option value="failed">Gagal</option><option value="refunded">Dikembalikan</option><option value="expired">Kadaluarsa</option>',5)]),512),[[W,p.value.transaction_status]])]),p.value.transaction_status==="paid"?(l(),i("div",ct,[t[10]||(t[10]=e("label",{class:"block text-xs font-medium text-gray-600 mb-1"}," Tanggal Pembayaran ",-1)),D(e("input",{"onUpdate:modelValue":t[3]||(t[3]=m=>p.value.transaction_payment_date=m),type:"date",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm"},null,512),[[M,p.value.transaction_payment_date]])])):x("",!0),e("div",null,[t[11]||(t[11]=e("label",{class:"block text-xs font-medium text-gray-600 mb-1"}," Catatan ",-1)),D(e("textarea",{"onUpdate:modelValue":t[4]||(t[4]=m=>p.value.transaction_notes=m),rows:"2",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm",placeholder:"Catatan tambahan..."},null,512),[[M,p.value.transaction_notes]])])])]))}},vt={key:0,class:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50 p-4"},gt={class:"bg-white p-6 rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] overflow-y-auto"},xt={class:"flex justify-between items-center mb-6 pb-4 border-b"},ft={class:"text-lg font-bold"},bt={class:"flex items-center mb-4"},yt={key:0},ht={class:"flex items-center mb-4"},_t={class:"flex items-center mb-4"},wt={key:1,class:"p-3 bg-red-50 border border-red-200 rounded-md"},kt={key:0,class:"text-sm text-red-600"},Ct={key:1,class:"text-sm text-red-600"},$t={class:"flex justify-end space-x-3 pt-6 border-t"},It=["disabled"],jt=["disabled"],St={__name:"AllDataModal",props:{show:{type:Boolean,required:!0},inspectionId:{type:String,required:!0},existingCustomer:{type:Object,default:null},existingSeller:{type:Object,default:null},existingTransaction:{type:Object,default:null}},emits:["close","saved"],setup(o,{emit:w}){const y=o,c=w;C(!1);const _=C(""),p=C(1),u=C(!1),v=C({}),f=C({}),t=de({customer_id:"",customer_name:"",customer_phone:"",customer_email:"",customer_address:"",seller_inspection_area:"",seller_inspection_address:"",seller_link_maps:"",seller_unit_holder_name:"",seller_unit_holder_phone:"",seller_settings:{},transaction_amount:"",transaction_payment_method:"",transaction_status:"pending",transaction_payment_date:new Date().toISOString().split("T")[0],transaction_notes:""}),m=I(()=>!(!t.customer_name||!t.customer_phone||Object.values(v.value).some(n=>n)||u.value&&(!t.seller_inspection_area||!t.seller_inspection_address||!t.seller_unit_holder_name||!t.seller_unit_holder_phone||Object.values(f.value).some(n=>n))||!t.transaction_amount||!t.transaction_payment_method||!t.transaction_status));U(()=>{var n,a;y.existingCustomer&&(t.customer_id=y.existingCustomer.id,t.customer_name=y.existingCustomer.name,t.customer_phone=((n=y.existingCustomer.phone)==null?void 0:n.replace("62",""))||"",t.customer_email=y.existingCustomer.email||"",t.customer_address=y.existingCustomer.address||"",u.value=!0,p.value=3),y.existingSeller&&(t.seller_inspection_area=y.existingSeller.inspection_area||"",t.seller_inspection_address=y.existingSeller.inspection_address||"",t.seller_link_maps=y.existingSeller.link_maps||"",t.seller_unit_holder_name=y.existingSeller.unit_holder_name||"",t.seller_unit_holder_phone=((a=y.existingSeller.unit_holder_phone)==null?void 0:a.replace("62",""))||"",t.seller_settings=y.existingSeller.settings||{}),y.existingTransaction&&(t.transaction_amount=y.existingTransaction.amount||"",t.transaction_payment_method=y.existingTransaction.payment_method||"",t.transaction_status=y.existingTransaction.status||"pending",t.transaction_payment_date=y.existingTransaction.payment_date?new Date(y.existingTransaction.payment_date).toISOString().split("T")[0]:new Date().toISOString().split("T")[0],t.transaction_notes=y.existingTransaction.notes||"")}),H([()=>t.customer_name,()=>t.customer_phone],([n,a])=>{n&&a?(u.value=!0,p.value=2):(u.value=!1,p.value=1)});const P=n=>{var a;if(n.sellers&&n.sellers.length>0){const d=n.sellers[0];t.seller_inspection_area=d.inspection_area||"",t.seller_inspection_address=d.inspection_address||"",t.seller_link_maps=d.link_maps||"",t.seller_unit_holder_name=d.unit_holder_name||"",t.seller_unit_holder_phone=((a=d.unit_holder_phone)==null?void 0:a.replace("62",""))||"",t.seller_settings=d.settings||{}}u.value=!0,p.value=2},h=n=>{Object.assign(t,n)},$=n=>{Object.assign(t,n)},V=n=>{Object.assign(t,n)},k=()=>{if(!m.value){_.value="Harap lengkapi semua field yang wajib diisi";return}const n={...t.data(),customer_phone:t.customer_phone.startsWith("62")?t.customer_phone:"62"+t.customer_phone.replace(/^0/,""),seller_unit_holder_phone:t.seller_unit_holder_phone.startsWith("62")?t.seller_unit_holder_phone:"62"+t.seller_unit_holder_phone.replace(/^0/,""),transaction_amount:parseInt(t.transaction_amount,10)};t.post(`/inspections-data/${y.inspectionId}/store-all-data`,n,{preserveScroll:!0,onSuccess:()=>{c("close"),c("saved")},onError:a=>{_.value=Object.values(a)[0]||"Gagal menyimpan data"}})};return(n,a)=>o.show?(l(),i("div",vt,[e("div",gt,[e("div",xt,[e("h3",ft,b(o.existingCustomer?"Edit Data Inspeksi":"Tambah Data Inspeksi"),1),e("button",{onClick:a[0]||(a[0]=d=>n.$emit("close")),class:"text-gray-500 hover:text-gray-700"},a[4]||(a[4]=[e("svg",{class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),e("form",{onSubmit:ue(k,["prevent"]),class:"space-y-8"},[e("div",null,[e("div",bt,[e("div",{class:A(["w-6 h-6 rounded-full flex items-center justify-center text-xs font-medium",p.value>=1?"bg-blue-600 text-white":"bg-gray-200 text-gray-600"])}," 1 ",2),a[5]||(a[5]=e("h4",{class:"ml-3 text-sm font-medium text-gray-700"},"Data Customer",-1))]),T(Je,{"form-data":{customer_id:g(t).customer_id,customer_name:g(t).customer_name,customer_phone:g(t).customer_phone,customer_email:g(t).customer_email,customer_address:g(t).customer_address},"existing-customer":o.existingCustomer,"existing-seller":o.existingSeller,"onUpdate:form":h,onCustomerSelected:P,"onUpdate:errors":a[1]||(a[1]=d=>v.value=d)},null,8,["form-data","existing-customer","existing-seller"])]),u.value?(l(),i("div",yt,[e("div",ht,[e("div",{class:A(["w-6 h-6 rounded-full flex items-center justify-center text-xs font-medium",p.value>=2?"bg-blue-600 text-white":"bg-gray-200 text-gray-600"])}," 2 ",2),a[6]||(a[6]=e("h4",{class:"ml-3 text-sm font-medium text-gray-700"},"Lokasi & Penanggung Jawab",-1))]),T(dt,{"form-data":{seller_inspection_area:g(t).seller_inspection_area,seller_inspection_address:g(t).seller_inspection_address,seller_link_maps:g(t).seller_link_maps,seller_unit_holder_name:g(t).seller_unit_holder_name,seller_unit_holder_phone:g(t).seller_unit_holder_phone,seller_settings:g(t).seller_settings},"show-form":u.value,"existing-seller":o.existingSeller,"onUpdate:form":$,"onUpdate:errors":a[2]||(a[2]=d=>f.value=d)},null,8,["form-data","show-form","existing-seller"])])):x("",!0),e("div",null,[e("div",_t,[e("div",{class:A(["w-6 h-6 rounded-full flex items-center justify-center text-xs font-medium",p.value>=3?"bg-blue-600 text-white":"bg-gray-200 text-gray-600"])}," 3 ",2),a[7]||(a[7]=e("h4",{class:"ml-3 text-sm font-medium text-gray-700"},"Pembayaran",-1))]),T(pt,{"form-data":{transaction_amount:g(t).transaction_amount,transaction_payment_method:g(t).transaction_payment_method,transaction_status:g(t).transaction_status,transaction_payment_date:g(t).transaction_payment_date,transaction_notes:g(t).transaction_notes},"existing-transaction":o.existingTransaction,"onUpdate:form":V},null,8,["form-data","existing-transaction"])]),g(t).hasErrors||_.value?(l(),i("div",wt,[_.value?(l(),i("p",kt,b(_.value),1)):g(t).errors?(l(),i("p",Ct,b(Object.values(g(t).errors)[0]),1)):x("",!0)])):x("",!0),e("div",$t,[e("button",{type:"button",onClick:a[3]||(a[3]=d=>n.$emit("close")),disabled:g(t).processing,class:"px-4 py-2 bg-gray-300 text-gray-700 rounded-md text-sm hover:bg-gray-400 disabled:opacity-50"}," Batal ",8,It),e("button",{type:"submit",disabled:g(t).processing||!m.value,class:"px-4 py-2 bg-blue-600 text-white rounded-md text-sm hover:bg-blue-700 disabled:opacity-50"},b(g(t).processing?"Menyimpan...":"Simpan Semua Data"),9,jt)])],32)])])):x("",!0)}},Dt={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6"},At={class:"bg-white rounded-xl shadow-md overflow-hidden border border-gray-200"},Mt={class:"p-4 flex justify-between items-start"},Tt={class:"flex items-center mb-1"},Vt={class:"text-sm font-semibold text-blue-700 ml-7 -mt-1"},Bt={class:"px-4 py-3 bg-gray-50 border-t border-gray-100"},Pt={class:"flex items-center"},Lt={key:0,class:"mr-2"},Ot=["src"],Ft={class:"text-sm font-medium text-gray-800"},zt={key:0},Nt={class:"text-gray-600"},Ut={key:1},qt={class:"flex items-center justify-between mt-2"},Ht={class:"flex items-center"},Et={class:"text-sm font-bold text-gray-900"},Rt={class:"px-4 py-3 bg-white border-t border-gray-100"},Kt={class:"flex justify-between items-center mb-3"},Wt={class:"px-4 py-3 bg-white border-t border-gray-100"},Gt={key:0,class:"p-2 bg-blue-50 border border-blue-200 rounded"},Jt={class:"flex items-center justify-between"},Qt={class:"text-sm font-semibold text-blue-800"},Yt={key:0,class:"text-xs text-blue-700"},Xt=["href"],Zt={key:1,class:"p-2 bg-yellow-50 border border-yellow-200 rounded"},es={key:0,class:"px-4 py-2 bg-white border-t border-gray-100"},ts={class:"text-sm text-gray-800"},ss={class:"px-4 py-3 bg-gray-50 border-t border-gray-100"},ns={class:"flex items-center mb-1"},as={class:"text-sm font-semibold text-gray-800 ml-7 -mt-1"},os={key:0,class:"mt-3 mb-3"},ls={class:"text-sm font-semibold text-gray-800 ml-7 -mt-1 flex items-center"},is={class:"bg-blue-100 text-blue-800 px-2 py-1 rounded-md font-mono"},rs={class:"mt-3"},ds={class:"text-sm text-gray-800"},us=["innerHTML"],ms={class:"p-4 flex gap-2"},cs={key:0},ps={key:1},vs=["disabled"],gs={key:0},xs={key:1},fs=["href","disabled"],bs={key:0},ys={key:1},hs={key:1,class:"flex-1 flex items-center justify-center px-3 py-2 bg-gray-200 text-gray-600 font-medium rounded-md text-sm"},_s=["disabled"],ws=["href","disabled"],ks={key:0},Cs={key:1},$s={key:0},Is={key:1},js={key:1,class:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50"},Ss={class:"bg-white p-6 rounded-lg shadow-xl w-96"},Ds={class:"flex justify-end space-x-4"},As=["disabled"],Ms={key:0,class:"flex items-center"},Ts={key:1},Vs={key:2,class:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50"},Bs={class:"bg-white p-6 rounded-lg shadow-xl w-96"},Ps={class:"flex justify-end space-x-4 mt-6"},Ls=["disabled"],Os={class:"relative max-w-4xl max-h-full p-4"},Fs=["src"],zs={__name:"Review",props:{inspection:{type:Object,required:!0},encryptedIds:Object,transaction:Object,coverImage:Object||null},setup(o){var Q;const w=o,c=((Q=me().props.global)==null?void 0:Q.roles)||[],_=I(()=>c.includes("Admin")||c.includes("coordinator"));I(()=>c.includes("coordinator"));const p=I(()=>c.includes("admin_plann"));I(()=>c.includes("Admin"));const u=I(()=>c.includes("admin_plann")?"Admin AutoInspeksi":c.includes("coordinator")?"Koordinator AutoInspeksi":c.includes("inspector")?"Inspektor AutoInspeksi":c.includes("quality_control")?"QC AutoInspeksi":"Staff AutoInspeksi"),v=C(!1),f=C(!1),t=C(!1),m=C(!1),P=C(""),h=C(!1),$=C(null),V=C(w.coverImage),k=r=>r&&r.length>0,n=r=>`/${r}`,a=I(()=>w.inspection.customer_id!==null),d=I(()=>w.transaction!==null),B=I(()=>{var r;return((r=w.transaction)==null?void 0:r.status)==="paid"});I(()=>{var r;return((r=w.transaction)==null?void 0:r.status)==="pending"});const ee=I(()=>{var r;return((r=w.inspection)==null?void 0:r.status)==="rejected"});I(()=>{var r;return((r=w.inspection)==null?void 0:r.status)==="completed"});const te=I(()=>{var r;return((r=w.inspection)==null?void 0:r.status)==="cancelled"});I(()=>{var r;return((r=w.inspection)==null?void 0:r.status)==="pending"});const E=I(()=>ee.value||te.value),O=I(()=>{var r;return d.value&&B.value&&((r=w.transaction)==null?void 0:r.amount)>0}),R=I(()=>a.value&&d.value&&B.value),se=I(()=>!a.value&&!d.value?"Tambah Data":a.value&&!d.value?"Tambah Pembayaran":!a.value&&d.value?"Tambahkan Data Customer":"Perbaharui Data"),ne=r=>{switch(r){case"draft":return"Dibuat";case"in_progress":return"Dalam Proses";case"pending":return"Menunggu";case"pending_review":return"Menunggu Review";case"approved":return"Disetujui";case"rejected":return"Ditolak";case"revision":return"Revisi";case"completed":return"Selesai";case"cancelled":return"Dibatalkan";default:return r}},K=()=>{t.value=!0},q=(r,s)=>{h.value=!0,$.value=s,X.visit(r,{onFinish:()=>{h.value=!1,$.value=null}})},G=r=>{h.value=!0,$.value="download",setTimeout(()=>{h.value=!1,$.value=null},1500)},ae=async r=>{try{await navigator.clipboard.writeText(r),alert(`ID Inspeksi "${r}" berhasil disalin!`)}catch(s){console.error("Gagal menyalin teks: ",s),oe(r)}},oe=r=>{const s=document.createElement("textarea");s.value=r,s.style.position="fixed",s.style.left="-999999px",s.style.top="-999999px",document.body.appendChild(s),s.focus(),s.select();try{const j=document.execCommand("copy");alert(j?`ID Inspeksi "${r}" berhasil disalin!`:"Gagal menyalin ID Inspeksi.")}catch(j){console.error("Fallback pun gagal: ",j),alert("Browser tidak mendukung aksi salin.")}finally{document.body.removeChild(s)}},le=()=>{X.reload()},ie=()=>{alert("Fitur pengiriman email masih dalam pengembangan"),f.value=!1},J=I(()=>w.inspection.customer&&w.inspection.customer.sellers&&(w.inspection.customer.sellers.find(r=>r.inspection_id===w.inspection.id)||w.inspection.customer.sellers[0])||null);return(r,s)=>(l(),z(pe,null,{default:L(()=>[T(g(ce),{title:"Review Inspeksi"}),e("div",Dt,[s[41]||(s[41]=e("h3",{class:"text-xl md:text-3xl font-bold text-gray-900 mb-6 text-center"}," Inspeksi yang Harus Diselesaikan ",-1)),e("div",At,[e("div",Mt,[e("div",null,[e("div",Tt,[T(g(fe),{class:"h-5 w-5 text-blue-500 mr-2"}),s[17]||(s[17]=e("span",{class:"text-sm font-medium text-gray-600"},"Jadwal",-1))]),e("p",Vt,b(new Date(o.inspection.inspection_date).toLocaleDateString("id-ID",{weekday:"short",year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})),1)]),T(g(F),{href:r.route("inspection.log",o.encryptedIds),class:"text-xs font-semibold text-indigo-600 hover:underline"},{default:L(()=>s[18]||(s[18]=[S(" Lihat Log ")])),_:1,__:[18]},8,["href"])]),e("div",Bt,[e("div",Pt,[V.value&&k(V.value.image_path)?(l(),i("div",Lt,[e("img",{src:n(V.value.image_path),alt:"Cover Image",class:"h-20 w-20 object-cover rounded cursor-pointer hover:opacity-80 transition-opacity",onClick:s[0]||(s[0]=j=>m.value=!0)},null,8,Ot)])):(l(),z(g(be),{key:1,class:"h-5 w-5 text-gray-500 mr-2"})),e("div",Ft,[o.inspection.car?(l(),i("div",zt,[S(b(`${o.inspection.car.brand.name} ${o.inspection.car.model.name} ${o.inspection.car.type.name} ${(o.inspection.car.cc/1e3).toFixed(1)} ${o.inspection.car.transmission} ${o.inspection.car.year}`)+" ",1),e("span",Nt,"("+b(o.inspection.car.fuel_type)+")",1)])):(l(),i("div",Ut,b(o.inspection.car_name),1))])]),e("div",qt,[e("div",Ht,[s[19]||(s[19]=e("span",{class:"text-xs font-semibold uppercase tracking-wide text-gray-500 mr-2"},"NO POLISI:",-1)),e("span",Et,b(o.inspection.plate_number),1)]),o.inspection.status==="draft"&&_.value||p.value?(l(),z(g(F),{key:0,href:r.route("coordinator.inspections.show",o.encryptedIds),class:"text-xs font-semibold text-indigo-600 hover:underline"},{default:L(()=>s[20]||(s[20]=[S(" Alihkan Tugas ")])),_:1,__:[20]},8,["href"])):x("",!0)])]),e("div",Rt,[e("div",Kt,[s[21]||(s[21]=e("h4",{class:"text-sm font-medium text-gray-700"},"Informasi Customer & Pembayaran ",-1)),!R.value&&!E.value?(l(),i("button",{key:0,onClick:K,class:"text-xs bg-blue-100 text-blue-700 px-2 py-1 rounded hover:bg-blue-200"},b(se.value),1)):x("",!0)]),T(ve,{customer:o.inspection.customer,seller:J.value,"show-edit-button":!E.value&&!R.value,inspection:o.inspection,"user-role":u.value,onEdit:K},null,8,["customer","seller","show-edit-button","inspection","user-role"]),T(Me,{transaction:o.transaction,"show-edit-button":!E.value&&!R.value,onEdit:K},null,8,["transaction","show-edit-button"])]),e("div",Wt,[s[24]||(s[24]=e("div",{class:"flex justify-between items-center mb-3"},[e("h4",{class:"text-sm font-medium text-gray-700"},"Informasi Inspektor")],-1)),o.inspection.user?(l(),i("div",Gt,[e("div",Jt,[e("div",null,[e("p",Qt,b(o.inspection.user.name),1),o.inspection.user.numberPhone?(l(),i("p",Yt,b(o.inspection.user.numberPhone),1)):x("",!0)]),o.inspection.user.numberPhone?(l(),i("a",{key:0,href:`https://wa.me/62${o.inspection.user.numberPhone.replace(/^0/,"")}`,target:"_blank",class:"text-blue-600 hover:text-blue-800 ml-2",title:"Hubungi via WhatsApp"},s[22]||(s[22]=[e("svg",{class:"w-6 h-6",fill:"currentColor",viewBox:"0 0 24 24"},[e("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c 0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893A11.821 11.821 0 0020.864 3.488"})],-1)]),8,Xt)):x("",!0)])])):(l(),i("div",Zt,s[23]||(s[23]=[e("p",{class:"text-xs text-yellow-700"},"Inspektor belum ditugaskan",-1)])))]),o.inspection.category?(l(),i("div",es,[s[25]||(s[25]=e("p",{class:"text-xs font-medium text-gray-500 tracking-wide"}," Kategori Inspeksi ",-1)),e("p",ts,b(o.inspection.category.name),1)])):x("",!0),e("div",ss,[e("div",ns,[T(g(ye),{class:"h-5 w-5 text-green-500 mr-2"}),s[26]||(s[26]=e("span",{class:"text-sm font-medium text-gray-600"},"Status",-1))]),e("p",as,b(ne(o.inspection.status)),1),(o.inspection.status==="approved"||o.inspection.status==="completed")&&o.inspection.file&&O.value?(l(),i("div",os,[s[28]||(s[28]=e("div",{class:"flex items-center mb-1"},[e("svg",{class:"h-5 w-5 text-blue-500 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})]),e("span",{class:"text-sm font-medium text-gray-600"},"ID Inspeksi (Untuk Buka File)")],-1)),e("p",ls,[e("span",is,b(o.inspection.code),1),e("button",{onClick:s[1]||(s[1]=j=>ae(o.inspection.code)),class:"ml-2 text-blue-500 hover:text-blue-700",title:"Salin ID"},s[27]||(s[27]=[e("svg",{class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3"})],-1)]))])])):x("",!0),e("div",rs,[s[29]||(s[29]=e("p",{class:"text-xs font-medium text-gray-500 uppercase tracking-wide"}," Catatan ",-1)),e("p",ds,[e("div",{innerHTML:o.inspection.notes||"-"},null,8,us)])])]),e("div",ms,[o.inspection.status==="in_progress"?(l(),z(g(F),{key:0,href:r.route("inspections.review.pdf",o.encryptedIds),disabled:h.value,onClick:s[2]||(s[2]=j=>q(r.route("inspections.review.pdf",o.encryptedIds),"lihat_laporan")),class:A(["flex-1 inline-flex items-center justify-center px-3 py-2 bg-gradient-to-r from-indigo-700 to-sky-600 shadow-lg text-white font-medium rounded-md text-sm transition-colors hover:from-indigo-800 hover:to-sky-700",{"opacity-50 cursor-not-allowed":h.value&&$.value==="lihat_laporan"}])},{default:L(()=>[h.value&&$.value==="lihat_laporan"?(l(),i("span",cs,s[30]||(s[30]=[e("svg",{class:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),S(" Memuat Halaman... ")]))):(l(),i("span",ps,"Lihat Proses Inspeksi"))]),_:1},8,["href","disabled","class"])):x("",!0),o.inspection.status==="pending_review"?(l(),i(N,{key:1},[e("button",{onClick:s[3]||(s[3]=j=>v.value=!0),class:"flex-2 px-3 py-2 bg-yellow-500 text-white font-medium rounded-md text-sm transition-colors hover:bg-yellow-600",disabled:h.value}," Revisi ",8,vs),T(g(F),{href:r.route("inspections.review.pdf",o.encryptedIds),disabled:h.value,onClick:s[4]||(s[4]=j=>q(r.route("inspections.review.pdf",o.encryptedIds),"lihat_laporan")),class:A(["flex-1 inline-flex items-center justify-center px-3 py-2 bg-gradient-to-r from-indigo-700 to-sky-600 shadow-lg text-white font-medium rounded-md text-sm transition-colors hover:from-indigo-800 hover:to-sky-700",{"opacity-50 cursor-not-allowed":h.value&&$.value==="lihat_laporan"}])},{default:L(()=>[h.value&&$.value==="lihat_laporan"?(l(),i("span",gs,s[31]||(s[31]=[e("svg",{class:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),S(" Memuat Laporan... ")]))):(l(),i("span",xs,"Lihat Laporan PDF"))]),_:1},8,["href","disabled","class"])],64)):o.inspection.status==="approved"&&o.inspection.file?(l(),i(N,{key:2},[O.value?(l(),i("a",{key:0,href:r.route("inspections.download.approved.pdf",o.encryptedIds),onClick:s[5]||(s[5]=j=>G(r.route("inspections.download.approved.pdf",o.encryptedIds))),class:A(["flex-1 inline-flex items-center justify-center px-3 py-2 bg-blue-600 text-white font-medium rounded-md text-sm transition-colors hover:bg-blue-700",{"opacity-50 cursor-not-allowed":h.value&&$.value==="download"}]),disabled:h.value,download:""},[h.value&&$.value==="download"?(l(),i("span",bs,s[32]||(s[32]=[e("svg",{class:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),S(" Sedang di download... ")]))):(l(),i("span",ys,s[33]||(s[33]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 inline-block mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),S(" PDF ")])))],10,fs)):(l(),i("div",hs,s[34]||(s[34]=[e("span",{class:"text-xs"},"Transaksi belum selesai",-1)]))),T(g(F),{href:r.route("inspections.whatsapp",o.encryptedIds),class:"flex-1 inline-flex items-center justify-center px-3 py-2 bg-green-600 text-white font-medium rounded-md text-sm transition-colors hover:bg-green-700"},{default:L(()=>s[35]||(s[35]=[e("svg",{class:"w-5 h-5 mr-2",fill:"currentColor",viewBox:"0 0 24 24"},[e("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893A11.821 11.821 0 0020.864 3.488"})],-1),S(" WhatsApp ")])),_:1,__:[35]},8,["href"]),e("button",{onClick:s[6]||(s[6]=j=>f.value=!0),class:"flex-1 inline-flex items-center justify-center px-3 py-2 bg-teal-500 text-white font-medium rounded-md text-sm transition-colors hover:bg-teal-600",disabled:h.value},s[36]||(s[36]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-4 h-4 mr-2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M21.75 6.75v10.5a2.25 2.25 0 0 1-2.25 2.25h-15a2.25 2.25 0 0 1-2.25 2.25V6.75m19.5 0A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25m19.5 0v.243a2.25 2.25 0 0 1-1.07 1.916l-7.5 4.615a2.25 2.25 0 0 1-2.36 0L3.32 8.91a2.25 2.25 0 0 1-1.07-1.916V6.75"})],-1),S(" Email ")]),8,_s)],64)):x("",!0),o.inspection.status==="completed"&&o.inspection.file&&_.value?(l(),i("a",{key:3,href:O.value?r.route("inspections.download.approved.pdf",o.encryptedIds):null,onClick:s[7]||(s[7]=j=>O.value&&G(r.route("inspections.download.approved.pdf",o.encryptedIds))),class:A(["flex-1 inline-flex items-center justify-center px-3 py-2 font-medium rounded-md text-sm transition-colors",[O.value?"bg-blue-600 text-white hover:bg-blue-700":"bg-gray-300 text-gray-500 cursor-not-allowed"]]),disabled:!O.value||h.value&&$.value==="download"},[h.value&&$.value==="download"?(l(),i("span",ks,s[37]||(s[37]=[e("svg",{class:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),S(" Sedang diunduh... ")]))):(l(),i("span",Cs,[O.value?(l(),i(N,{key:0},[s[38]||(s[38]=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 inline-block mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)),s[39]||(s[39]=S(" Download PDF "))],64)):(l(),i(N,{key:1},[S(" PDF tersedia — selesaikan transaksi untuk mengunduh ")],64))]))],10,ws)):x("",!0)]),o.inspection.status==="approved"&&o.inspection.file?(l(),z(g(F),{key:1,href:r.route("inspections.review.pdf",o.encryptedIds),disabled:h.value,onClick:s[8]||(s[8]=j=>q(r.route("inspections.review.pdf",o.encryptedIds),"lihat_laporan")),class:A(["inline-flex items-center justify-center w-full px-3 py-2 bg-gradient-to-r from-indigo-700 to-sky-600 shadow-lg text-white font-medium rounded-md text-sm transition-colors hover:from-indigo-800 hover:to-sky-700",{"opacity-50 cursor-not-allowed":h.value&&$.value==="lihat_laporan"}])},{default:L(()=>[h.value&&$.value==="lihat_laporan"?(l(),i("span",$s,s[40]||(s[40]=[e("svg",{class:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),S(" Memuat Laporan... ")]))):(l(),i("span",Is,"Lihat Laporan"))]),_:1},8,["href","disabled","class"])):x("",!0)])]),t.value?(l(),z(St,{key:0,show:t.value,"inspection-id":o.encryptedIds,"existing-customer":o.inspection.customer,"existing-seller":J.value,"existing-transaction":o.transaction,onClose:s[9]||(s[9]=j=>t.value=!1),onReopen:s[10]||(s[10]=j=>t.value=!0),onSaved:le},null,8,["show","inspection-id","existing-customer","existing-seller","existing-transaction"])):x("",!0),v.value?(l(),i("div",js,[e("div",Ss,[s[43]||(s[43]=e("h3",{class:"text-lg font-bold mb-4"},"Konfirmasi Revisi",-1)),s[44]||(s[44]=e("p",{class:"text-gray-700 mb-2"}," Apakah Anda yakin ingin revisi pada laporan ini? ",-1)),s[45]||(s[45]=e("p",{class:"text-gray-700 mb-4"},"Setelah ini akan masuk ke halaman Inspeksi.",-1)),e("div",Ds,[e("button",{onClick:s[11]||(s[11]=j=>v.value=!1),disabled:h.value,class:"bg-gray-300 text-gray-800 px-4 py-2 rounded-md hover:bg-gray-400"}," Batal ",8,As),T(g(F),{href:r.route("inspections.revisi",o.encryptedIds),disabled:h.value,onClick:s[12]||(s[12]=j=>q(r.route("inspections.revisi",o.encryptedIds),"revisi")),class:A(["bg-yellow-500 text-white px-4 py-2 rounded-md hover:bg-yellow-600",{"opacity-50 cursor-not-allowed":h.value&&$.value==="revisi"}])},{default:L(()=>[h.value&&$.value==="revisi"?(l(),i("span",Ms,s[42]||(s[42]=[e("svg",{class:"animate-spin h-5 w-5 text-white mr-2",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),S(" Memproses... ")]))):(l(),i("span",Ts,"Ya, Revisi"))]),_:1},8,["href","disabled","class"])])])])):x("",!0),f.value?(l(),i("div",Vs,[e("div",Bs,[s[46]||(s[46]=e("h3",{class:"text-lg font-bold mb-4"},"Kirim Laporan Via Email",-1)),s[47]||(s[47]=e("p",{class:"text-gray-700 mb-2"}," Masukkan alamat email tujuan: ",-1)),D(e("input",{type:"email","onUpdate:modelValue":s[13]||(s[13]=j=>P.value=j),class:"w-full px-3 py-2 border rounded-md focus:ring-indigo-500 focus:border-indigo-500",placeholder:"contoh@email.com"},null,512),[[M,P.value]]),e("div",Ps,[e("button",{onClick:s[14]||(s[14]=j=>f.value=!1),disabled:h.value,class:"bg-gray-300 text-gray-800 px-4 py-2 rounded-md hover:bg-gray-400"}," Batal ",8,Ls),e("button",{onClick:ie,disabled:!0,class:"bg-teal-500 text-white px-4 py-2 rounded-md hover:bg-teal-600 opacity-50 cursor-not-allowed"}," Masih dalam pengembangan ")])])])):x("",!0),m.value?(l(),i("div",{key:3,class:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50",onClick:s[16]||(s[16]=j=>m.value=!1)},[e("div",Os,[e("img",{src:n(V.value.image_path),alt:"Full Cover Image",class:"max-w-full max-h-full object-contain"},null,8,Fs),e("button",{onClick:s[15]||(s[15]=j=>m.value=!1),class:"absolute top-2 right-2 text-white bg-black bg-opacity-50 rounded-full p-2 hover:bg-opacity-75"},s[48]||(s[48]=[e("svg",{class:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))])])):x("",!0)]),_:1}))}},Ws=xe(zs,[["__scopeId","data-v-43c94dd1"]]);export{Ws as default};
