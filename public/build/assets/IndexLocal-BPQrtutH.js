import{x as oa,r as y,g as nt,q as se,H as wt,G as be,c as l,o as n,d as e,b as c,k as Ve,z as Pe,A as ct,n as re,t as z,F as Ee,m as De,f as Ue,u as ae,e as ia,y as gt,w as Fe,L as Ke,D as Lt,M as Rt,j as Ne,a as Nt,l as aa,T as pt,N as Pt,p as xa,O as sa,J as st,B as wa,S as ka,I as Bt,W as Dt}from"./vendor-CUNG9NG6.js";import{l as la}from"./lodash-CeUj5J-L.js";import{_ as Ia}from"./PrimaryButton-h2qnLbgr.js";import{_ as _a}from"./ActionMessage-C19FCsLq.js";import{F as Ca}from"./fuse-Ch1WBRTM.js";import{_ as He}from"./app-BThIPAAf.js";import{_ as ra}from"./InputNumber-BM446ncS.js";const Sa={class:"bg-gray-50 shadow-lg rounded-xl overflow-hidden border border-gray-100"},$a={key:0,class:"p-4 space-y-2"},Aa={class:"space-y-2 pb-2 border-b border-gray-100 last:border-0 last:pb-0"},Va={class:"flex items-center space-x-2"},Ta={key:0,class:"text-xs text-red-500 font-normal ml-2"},Ma={key:1,class:"text-xs text-red-500 font-normal ml-2"},Ea={key:2,class:"text-xs text-green-500 font-normal ml-2"},Ua={class:"space-y-2 pb-2 border-b border-gray-100 last:border-0 last:pb-0"},Na={class:"grid grid-cols-1 sm:grid-cols-3 gap-3"},Da={class:"col-span-2 flex space-x-3"},Pa={class:"mt-3 p-3 bg-blue-50 border border-blue-200 rounded-lg"},La={class:"flex items-start"},Ra={class:"text-sm text-blue-700"},ja={class:"mt-1"},Ba={key:0,class:"inline-flex items-center px-2 py-1 rounded bg-blue-100 text-blue-800 text-xs font-medium mr-2"},Fa={key:1,class:"inline-flex items-center px-2 py-1 rounded bg-green-100 text-green-800 text-xs font-medium mr-2"},Oa={key:2,class:"inline-flex items-center px-2 py-1 rounded bg-green-100 text-green-800 text-xs font-medium"},za={key:3,class:"text-blue-600"},qa={class:"space-y-2 pb-2 border-b border-gray-100 last:border-0 last:pb-0"},Ka={class:"relative"},Ha={key:0,class:"absolute right-3 top-3"},Ga={key:1,class:"mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-60 overflow-y-auto"},Wa={key:0},Ya=["onMousedown"],Za={class:"font-medium text-gray-900"},Ja={class:"text-sm text-gray-500"},Xa={key:1,class:"p-4 text-sm text-gray-500 text-center"},Qa={key:0,class:"text-xs text-red-500 font-normal ml-2"},es={key:0,class:"mt-3 p-3 bg-yellow-50 border border-yellow-200 rounded-md"},ts={key:1,class:"mb-6 p-4 bg-gray-50 rounded-lg border border-gray-200"},as={key:0,class:"mb-4"},ss=["innerHTML"],ns={key:1},os={class:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3"},is=["onClick"],ls=["src","alt"],rs={key:0,class:"absolute inset-0 bg-black bg-opacity-50 opacity-0 group-hover:opacity-100 transition-opacity rounded-lg flex items-center justify-center p-2"},us={class:"text-white text-xs text-center"},ds={key:2,class:"text-center py-4 text-gray-500 text-sm"},cs={class:"relative max-w-4xl max-h-full w-full h-full flex items-center justify-center"},gs=["src","alt"],ps={key:2,class:"absolute bottom-4 left-1/2 transform -translate-x-1/2 text-white bg-black bg-opacity-50 px-3 py-1 rounded-full text-sm"},ms={key:3,class:"absolute bottom-4 left-4 text-white bg-black bg-opacity-50 px-3 py-1 rounded text-sm max-w-md"},vs={key:0,class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},fs={__name:"VehicleDetails",props:{inspection:{type:Object,default:null},CarDetail:Array,allInspections:{type:Array,default:()=>[]}},emits:["update-vehicle","update:validation","update:hasUnsavedChanges","update:vehicle-type"],setup(a,{emit:ne}){var i,m,d,P,G,me;const t=a,S=ne,g=oa({plate_number:((i=t.inspection)==null?void 0:i.plate_number)||"",car_id:((m=t.inspection)==null?void 0:m.car_id)||null,car_name:((d=t.inspection)==null?void 0:d.car_name)||""}),A=y(((P=t.inspection)==null?void 0:P.plate_number)||""),b=y(((G=t.inspection)==null?void 0:G.car_id)||null),$=y(((me=t.inspection)==null?void 0:me.car_name)||""),_=y(""),j=y(""),k=y(""),D=y(null),T=y({rear_door:!1}),ee=y(!1),f=y(""),p=y(""),M=y(g.car_name),K=y(!1),E=y(!1),H=y([]),Z=y(null),F=y([]),I=y(!1),L=y(0);nt(()=>{var v,u,J,w,te;if(O((v=t.inspection)==null?void 0:v.plate_number),(u=t.inspection)!=null&&u.car_id&&((J=t.CarDetail)==null?void 0:J.length)>0){const ye=t.CarDetail.find(ke=>ke.id===t.inspection.car_id);ye&&ce(ye)}else!((w=t.inspection)!=null&&w.car_id)&&((te=t.inspection)!=null&&te.car_name)&&(M.value=t.inspection.car_name,g.car_id=null);window.addEventListener("keydown",Te),de(),S("update:hasUnsavedChanges",U.value),S("update:validation",N.value)}),wt(()=>{window.removeEventListener("keydown",Te)});const de=()=>{try{const v=localStorage.getItem("vehicle_features");if(v){const u=JSON.parse(v);T.value.rear_door=u.rear_door||!1,u.pick_up?D.value="pick_up":u.box?D.value="box":D.value=null}else T.value.rear_door=!1,D.value=null;x()}catch(v){console.error("Error loading vehicle type from localStorage:",v),T.value.rear_door=!1,D.value=null,x()}},C=()=>{T.value.rear_door=!T.value.rear_door,s()},h=v=>{D.value===v?D.value=null:D.value=v,s()},s=()=>{try{const v={rear_door:T.value.rear_door,pick_up:D.value==="pick_up",box:D.value==="box"};localStorage.setItem("vehicle_features",JSON.stringify(v)),x(),console.log("Vehicle features saved to localStorage:",v)}catch(v){console.error("Error saving vehicle type to localStorage:",v)}},x=()=>{const v={rear_door:T.value.rear_door,pick_up:D.value==="pick_up",box:D.value==="box"};S("update:vehicle-type",v)},O=v=>{if(!v){_.value="",j.value="",k.value="";return}const u=v.toUpperCase().trim(),J=u.match(/^([A-Z]{1,2})?([0-9]{1,4})?([A-Z]{1,3})?$/);if(J)_.value=J[1]||"",j.value=J[2]||"",k.value=J[3]||"";else{let w="area",te="",ye="",ke="";for(const Ie of u)w==="area"&&/[A-Z]/.test(Ie)?te+=Ie:w==="area"&&/[0-9]/.test(Ie)?(w="number",ye+=Ie):w==="number"&&/[0-9]/.test(Ie)?ye+=Ie:w==="number"&&/[A-Z]/.test(Ie)?(w="suffix",ke+=Ie):w==="suffix"&&/[A-Z]/.test(Ie)&&(ke+=Ie);_.value=te,j.value=ye,k.value=ke}ue()},ue=()=>{const v=`${_.value}${j.value}${k.value}`;g.plate_number=v,Me()},Y=v=>{v==="area"?_.value=_.value.toUpperCase().replace(/[^A-Z]/g,""):v==="number"?j.value=j.value.replace(/[^0-9]/g,""):v==="suffix"&&(k.value=k.value.toUpperCase().replace(/[^A-Z]/g,"")),ue()},W=se(()=>{const v=g.plate_number;return/^[A-Z]{1,2}\d{1,4}[A-Z]{0,3}$/.test(v)}),ie=se(()=>!M.value||M.value.trim()===""),pe=se(()=>g.plate_number.length>0&&!W.value?"Format plat nomor tidak valid.":null),N=se(()=>{const v=!g.plate_number||g.plate_number.trim()==="",u=!M.value||M.value.trim()==="";return v||u||!W.value||ee.value}),U=se(()=>{const v=g.plate_number!==A.value,u=g.car_id!==b.value||M.value!==$.value;return v||u}),R=se(()=>U.value&&!N.value),q=v=>{var J,w,te;if(!v)return"";const u=[];return(J=v.brand)!=null&&J.name&&u.push(v.brand.name),(w=v.model)!=null&&w.name&&u.push(v.model.name),(te=v.type)!=null&&te.name&&u.push(v.type.name),v.cc&&u.push((v.cc/1e3).toFixed(1)),v.transmission&&u.push(v.transmission),v.year&&u.push(v.year.toString()),v.fuel_type&&u.push(v.fuel_type),v.production_period&&u.push(`(${v.production_period})`),u.join(" ")},Q=la.debounce(()=>{if(!M.value.trim()){H.value=[],K.value=!1;return}E.value=!0;try{const v=M.value.trim();if(t.CarDetail&&t.CarDetail.length>0){const u=t.CarDetail.map(te=>({...te,formattedName:q(te)})),w=new Ca(u,{keys:["formattedName","brand.name","model.name","type.name"],threshold:.6,findAllMatches:!0,includeScore:!0,shouldSort:!0}).search(v).slice(0,10);H.value=w.map(te=>te.item)}else H.value=[];K.value=!0}finally{E.value=!1}},300),oe=()=>{if(g.car_id&&(g.car_id=null,Z.value=null,F.value=[]),!M.value.trim()){H.value=[],K.value=!1;return}Q()},ve=()=>{setTimeout(()=>{K.value=!1,!g.car_id&&M.value&&(g.car_name=M.value,Me())},200)},ce=async v=>{Z.value=v,M.value=q(v),g.car_id=v.id,g.car_name=q(v),K.value=!1,Q.cancel(),await _e(v.id),Me(),S("update:hasUnsavedChanges",U.value),S("update:validation",N.value)},$e=v=>!v||!v.file_path?"":`/storage/${v.file_path}`,_e=async v=>{try{const u=await fetch(`/api/cars/${v}/images`);if(u.ok){const J=await u.json();F.value=Array.isArray(J)?J:[]}else F.value=[]}catch(u){console.error("Error loading car images:",u),F.value=[]}},fe=v=>{L.value=v,I.value=!0,document.body.style.overflow="hidden"},Se=()=>{I.value=!1,document.body.style.overflow=""},Ae=()=>{L.value=(L.value+1)%F.value.length},we=()=>{L.value=(L.value-1+F.value.length)%F.value.length},Te=v=>{if(I.value)switch(v.key){case"Escape":Se();break;case"ArrowRight":Ae();break;case"ArrowLeft":we();break}},Me=()=>{const v={plate_number:g.plate_number,car_id:g.car_id,car_name:g.car_name};S("update-vehicle",v)},Oe=()=>{t.inspection&&g.post(route("inspections.updateVehicleDetails",{inspection:t.inspection.id}),{preserveScroll:!0,onSuccess:()=>{A.value=g.plate_number,b.value=g.car_id,$.value=g.car_name,S("update:hasUnsavedChanges",!1),console.log("Data berhasil disimpan!")},onError:v=>{console.error("Gagal menyimpan data:",v)}})};return be([()=>g.plate_number,()=>g.car_name],v=>{f.value="",ee.value=!1,p.value="";const u=v[0];if(u&&u.length>=6){const J=t.allInspections.filter(w=>{var te;return w.plate_number===u&&w.id!==((te=t.inspection)==null?void 0:te.id)});if(J.length>0){const w=["draft","in_progress","pending","pending_review","revision"],te=J.find(ye=>w.includes(ye.status));if(te)ee.value=!0,f.value=`Nomor plat ini sedang dalam proses inspeksi dengan status: ${te.status.replace(/_/g," ").toUpperCase()}.`;else{const ye=J.filter(ke=>["approved","rejected","completed","cancelled"].includes(ke.status));if(ye.length>0){ye.sort((Ie,je)=>new Date(je.created_at)-new Date(Ie.created_at));const ke=ye[0];if(ke.car_id){const Ie=t.CarDetail.find(je=>je.id===ke.car_id);Ie&&ce(Ie)}else ke.car_name&&(M.value=ke.car_name,g.car_name=ke.car_name,g.car_id=null);p.value=`Nomor plat ini sudah pernah diperiksa ${ye.length} kali sebelumnya.`}}}}S("update:hasUnsavedChanges",U.value),S("update:validation",N.value)},{deep:!0}),be([()=>T.value.rear_door,()=>D.value],()=>{s()}),be(()=>{var v;return(v=t.inspection)==null?void 0:v.car_id},v=>{var u,J;if(v!==g.car_id)if(g.car_id=v,v&&((u=t.CarDetail)==null?void 0:u.length)>0){const w=t.CarDetail.find(te=>te.id===v);w&&ce(w)}else!v&&((J=t.inspection)!=null&&J.car_name)&&(M.value=t.inspection.car_name,g.car_name=t.inspection.car_name,g.car_id=null)}),be(()=>{var v;return(v=t.inspection)==null?void 0:v.car_name},v=>{v&&v!==M.value&&(M.value=v)}),(v,u)=>{var J;return n(),l("div",Sa,[u[27]||(u[27]=e("div",{class:"bg-indigo-200 px-6 py-2 border-b flex items-center justify-between"},[e("h4",{class:"text-base font-semibold text-indigo-700"}," Detail Kendaraan ")],-1)),a.inspection?(n(),l("div",$a,[e("div",Aa,[u[11]||(u[11]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"}," Nomor Plat Kendaraan ",-1)),e("div",Va,[Pe(e("input",{"onUpdate:modelValue":u[0]||(u[0]=w=>_.value=w),type:"text",placeholder:"Contoh: B",class:re(["w-1/4 rounded-lg border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm text-center transition duration-150",{"border-red-500 focus:border-red-500":!W.value||ee.value}]),onInput:u[1]||(u[1]=w=>Y("area")),maxlength:"2"},null,34),[[ct,_.value]]),Pe(e("input",{"onUpdate:modelValue":u[2]||(u[2]=w=>j.value=w),type:"tel",pattern:"[0-9]*",placeholder:"1234",class:re(["w-2/4 rounded-lg border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm text-center transition duration-150",{"border-red-500 focus:border-red-500":!W.value||ee.value}]),onInput:u[3]||(u[3]=w=>Y("number")),maxlength:"4"},null,34),[[ct,j.value]]),Pe(e("input",{"onUpdate:modelValue":u[4]||(u[4]=w=>k.value=w),type:"text",placeholder:"ABC",class:re(["w-1/4 rounded-lg border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm text-center transition duration-150",{"border-red-500 focus:border-red-500":!W.value||ee.value}]),onInput:u[5]||(u[5]=w=>Y("suffix")),maxlength:"3"},null,34),[[ct,k.value]])]),pe.value?(n(),l("span",Ta,z(pe.value),1)):c("",!0),f.value?(n(),l("span",Ma,z(f.value),1)):c("",!0),p.value?(n(),l("span",Ea,z(p.value),1)):c("",!0)]),e("div",Ua,[u[15]||(u[15]=e("label",{class:"block text-sm font-medium text-gray-700 mb-3"}," Jenis Kendaraan ",-1)),e("div",Na,[e("div",{class:re(["w-full px-4 py-3 border-2 rounded-lg text-center transition-all duration-200 whitespace-nowrap text-sm font-medium cursor-pointer",{"border-indigo-500 bg-indigo-50 text-indigo-700 shadow-sm":T.value.rear_door,"border-gray-300 text-gray-700 hover:bg-gray-50 hover:border-gray-400":!T.value.rear_door}]),onClick:C},u[12]||(u[12]=[e("span",null,"Pintu Belakang",-1)]),2),e("div",Da,[e("div",{class:re(["flex-1 px-4 py-3 border-2 rounded-lg text-center transition-all duration-200 whitespace-nowrap text-sm font-medium cursor-pointer",{"border-indigo-500 bg-indigo-50 text-indigo-700 shadow-sm":D.value==="pick_up","border-gray-300 text-gray-700 hover:bg-gray-50 hover:border-gray-400":D.value!=="pick_up"}]),onClick:u[6]||(u[6]=w=>h("pick_up"))}," Pick Up ",2),e("div",{class:re(["flex-1 px-4 py-3 border-2 rounded-lg text-center transition-all duration-200 whitespace-nowrap text-sm font-medium cursor-pointer",{"border-indigo-500 bg-indigo-50 text-indigo-700 shadow-sm":D.value==="box","border-gray-300 text-gray-700 hover:bg-gray-50 hover:border-gray-400":D.value!=="box"}]),onClick:u[7]||(u[7]=w=>h("box"))}," Box ",2)])]),e("div",Pa,[e("div",La,[u[14]||(u[14]=e("svg",{class:"w-4 h-4 text-blue-600 mt-0.5 mr-2 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z","clip-rule":"evenodd"})],-1)),e("div",Ra,[u[13]||(u[13]=e("p",{class:"font-medium"},"Status Kendaraan:",-1)),e("p",ja,[T.value.rear_door?(n(),l("span",Ba," ✓ Mobil Pada Umum nya yang memiliki Pintu Belakang ")):c("",!0),D.value==="pick_up"?(n(),l("span",Fa," ✓ Pick Up ")):c("",!0),D.value==="box"?(n(),l("span",Oa," ✓ Box ")):c("",!0),!T.value.rear_door&&!D.value?(n(),l("span",za," Pilih jenis kendaraan agar point bisa menyesuaikan dengan tipe kendaraan anda ")):c("",!0)])])])])]),e("div",qa,[u[18]||(u[18]=e("label",{class:"block text-sm font-medium text-gray-700"}," Nama Mobil ",-1)),e("div",Ka,[Pe(e("input",{"onUpdate:modelValue":u[8]||(u[8]=w=>M.value=w),type:"text",placeholder:"Cari atau ketik nama mobil...",class:re(["block w-full rounded-lg border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm transition duration-150",{"border-red-500 focus:border-red-500":ie.value}]),onInput:oe,onFocus:u[9]||(u[9]=w=>K.value=!0),onBlur:ve},null,34),[[ct,M.value]]),E.value?(n(),l("div",Ha,u[16]||(u[16]=[e("svg",{class:"animate-spin h-5 w-5 text-gray-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)]))):c("",!0),K.value?(n(),l("div",Ga,[H.value.length>0?(n(),l("div",Wa,[(n(!0),l(Ee,null,De(H.value,w=>(n(),l("div",{key:w.id,class:"px-4 py-3 hover:bg-gray-50 cursor-pointer border-b border-gray-100 last:border-b-0",onMousedown:te=>ce(w)},[e("div",Za,z(q(w)),1),e("div",Ja,z(w.year)+" • "+z(w.cc)+"cc • "+z(w.transmission)+" • "+z(w.fuel_type),1)],40,Ya))),128))])):(n(),l("div",Xa,u[17]||(u[17]=[Ue(" Tidak ada data mobil yang cocok. "),e("br",null,null,-1),Ue(" Silakan input manual dengan format: "),e("br",null,null,-1),e("span",{class:"font-medium text-gray-800"},"Toyota Avanza 1.5 G AT Bensin 2019",-1)])))])):c("",!0)]),ie.value?(n(),l("span",Qa,"Nama mobil tidak boleh kosong.")):c("",!0)]),!ae(g).car_id&&M.value&&!K.value?(n(),l("div",es,u[19]||(u[19]=[ia('<div class="flex items-start" data-v-f5fe3b58><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-yellow-600 mt-0.5 mr-2 flex-shrink-0" fill="none" viewBox="0 0 24 24" stroke="currentColor" data-v-f5fe3b58><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" data-v-f5fe3b58></path></svg><div data-v-f5fe3b58><p class="text-yellow-800 font-medium mb-1" data-v-f5fe3b58>Informasi Penting</p><p class="text-yellow-700 text-sm mb-2" data-v-f5fe3b58> Anda memasukkan nama mobil secara manual. Data detail mobil (spesifikasi, gambar, deskripsi) <span class="font-semibold" data-v-f5fe3b58>tidak akan tersedia</span> dalam laporan inspeksi. </p><p class="text-yellow-700 text-sm mb-2" data-v-f5fe3b58> Untuk laporan yang lengkap dengan semua detail mobil, silakan pilih mobil dari hasil pencarian. </p><p class="text-yellow-700 text-sm" data-v-f5fe3b58> Jika tidak ingin mengubah data mobil dan anda tidak sengaja sudah menghapus atau edit, <span class="font-semibold" data-v-f5fe3b58>jangan klik tombol &quot;Perbarui Detail Kendaraan&quot;</span>. Sebagai gantinya, <span class="font-semibold" data-v-f5fe3b58>refresh halaman</span> untuk kembali ke data awal. </p></div></div>',1)]))):c("",!0),ae(g).car_id&&Z.value?(n(),l("div",ts,[Z.value.description?(n(),l("div",as,[u[20]||(u[20]=e("h3",{class:"text-sm font-medium text-gray-700 mb-2"},"Deskripsi:",-1)),e("div",{class:"prose prose-sm max-w-none text-gray-600",innerHTML:Z.value.description},null,8,ss)])):c("",!0),F.value.length>0?(n(),l("div",ns,[u[21]||(u[21]=e("h3",{class:"text-sm font-medium text-gray-700 mb-3"},"Gambar Mobil:",-1)),e("div",os,[(n(!0),l(Ee,null,De(F.value,(w,te)=>(n(),l("div",{key:w.id||te,class:"relative group cursor-pointer",onClick:ye=>fe(te)},[e("img",{src:$e(w),alt:w.name||"Car Image",class:"w-full h-24 object-cover rounded-lg border border-gray-200 transition-transform duration-200 group-hover:scale-105"},null,8,ls),w.note?(n(),l("div",rs,[e("p",us,z(w.note),1)])):c("",!0)],8,is))),128))])])):(n(),l("div",ds," Tidak ada gambar tersedia untuk mobil ini "))])):c("",!0),I.value?(n(),l("div",{key:2,class:"fixed inset-0 bg-black bg-opacity-90 z-50 flex items-center justify-center p-4",onClick:Se},[e("div",cs,[e("button",{onClick:Se,class:"absolute top-4 right-4 z-10 text-white bg-black bg-opacity-50 rounded-full p-2 hover:bg-opacity-70 transition-colors"},u[22]||(u[22]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])),F.value.length>1?(n(),l("button",{key:0,onClick:gt(we,["stop"]),class:"absolute left-4 z-10 text-white bg-black bg-opacity-50 rounded-full p-3 hover:bg-opacity-70 transition-colors"},u[23]||(u[23]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)]))):c("",!0),F.value.length>1?(n(),l("button",{key:1,onClick:gt(Ae,["stop"]),class:"absolute right-4 z-10 text-white bg-black bg-opacity-50 rounded-full p-3 hover:bg-opacity-70 transition-colors"},u[24]||(u[24]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)]))):c("",!0),e("img",{src:$e(F.value[L.value]),alt:"Car Image "+(L.value+1),class:"max-w-full max-h-full object-contain",onClick:u[10]||(u[10]=gt(()=>{},["stop"]))},null,8,gs),F.value.length>1?(n(),l("div",ps,z(L.value+1)+" / "+z(F.value.length),1)):c("",!0),(J=F.value[L.value])!=null&&J.note?(n(),l("div",ms,z(F.value[L.value].note),1)):c("",!0)])])):c("",!0),Ve(Ia,{type:"button",onClick:Oe,class:"w-full inline-flex items-center justify-center px-6 py-3 border border-transparent text-base font-medium rounded-md shadow-sm bg-gradient-to-r from-indigo-700 to-sky-600 shadow-lg text-white focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition duration-150 ease-in-out disabled:opacity-50 disabled:cursor-not-allowed",disabled:!R.value},{default:Fe(()=>[ae(g).processing?(n(),l("svg",vs,u[25]||(u[25]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):c("",!0),e("span",null,z(ae(g).processing?"Mengirim...":"Perbarui Detail Kendaraan"),1),Ve(_a,{on:ae(g).recentlySuccessful,class:"me-3 text-sm text-green-600 font-medium"},{default:Fe(()=>u[26]||(u[26]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 inline-block mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1),Ue(" Tersimpan. ")])),_:1,__:[26]},8,["on"])]),_:1},8,["disabled"])])):c("",!0)])}}},hs=He(fs,[["__scopeId","data-v-f5fe3b58"]]),bs={class:"mt-1"},ys=["value","required","minlength","maxlength","allowSpace","placeholder"],xs={key:0,class:"mt-2 text-sm text-red-600"},ua={__name:"InputText",props:{modelValue:String,required:Boolean,minLength:[String,Number],maxLength:[String,Number],pattern:String,placeholder:String,error:String,pointId:[String,Number],textTransform:{type:String,default:"none"},allowSpace:{type:Boolean,default:!0}},emits:["update:modelValue","save"],setup(a,{emit:ne}){const t=a,S=ne,g=se(()=>{if(!t.modelValue)return"";let b=t.modelValue;switch(t.allowSpace||(b=b.replace(/\s+/g,"")),t.textTransform){case"uppercase":return b.toUpperCase();case"lowercase":return b.toLowerCase();case"capitalize":return b.replace(/\b\w/g,$=>$.toUpperCase());default:return b}}),A=b=>{let $=b.target.value;switch(t.allowSpace||($=$.replace(/\s+/g,"")),t.textTransform){case"uppercase":$=$.toUpperCase();break;case"lowercase":$=$.toLowerCase();break;case"capitalize":$=$.replace(/\b\w/g,_=>_.toUpperCase());break}S("update:modelValue",$),S("save",t.pointId)};return(b,$)=>(n(),l("div",bs,[e("input",{value:g.value,onInput:A,type:"text",required:a.required,minlength:a.minLength,maxlength:a.maxLength,allowSpace:a.allowSpace,placeholder:a.placeholder,class:re(["block w-full rounded-lg border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm transition duration-150",{uppercase:a.textTransform==="uppercase",lowercase:a.textTransform==="lowercase",capitalize:a.textTransform==="capitalize"}])},null,42,ys),a.error?(n(),l("p",xs,z(a.error),1)):c("",!0)]))}},ws={class:"mt-1"},ks=["value","required","min","max"],Is={key:0,class:"mt-2 text-sm text-red-600"},da={__name:"InputDate",props:{modelValue:String,required:Boolean,minDate:String,maxDate:String,error:String,pointId:[String,Number]},emits:["update:modelValue","save"],setup(a,{emit:ne}){const t=a,S=ne,g=A=>{S("update:modelValue",A.target.value),S("save",t.pointId)};return(A,b)=>(n(),l("div",ws,[e("input",{value:a.modelValue,onChange:g,type:"date",required:a.required,min:a.minDate,max:a.maxDate,class:"block w-full rounded-lg border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm transition duration-150"},null,40,ks),a.error?(n(),l("p",Is,z(a.error),1)):c("",!0)]))}},_s={class:"mt-1"},Cs=["value","required","placeholder"],Ss={key:0,class:"mt-2 text-sm text-red-600"},ca={__name:"InputAccount",props:{modelValue:[String,Number],required:Boolean,placeholder:String,error:String,pointId:[String,Number],settings:{type:Object,default:()=>({currency_symbol:"Rp",thousands_separator:",",min_value:0,max_value:1e9})}},emits:["update:modelValue","save"],setup(a,{emit:ne}){const t=a,S=ne,g=y(""),A=se(()=>{var k,D,T,ee;return{currency_symbol:((k=t.settings)==null?void 0:k.currency_symbol)||"Rp",thousands_separator:((D=t.settings)==null?void 0:D.thousands_separator)||",",min_value:((T=t.settings)==null?void 0:T.min_value)!==void 0?Number(t.settings.min_value):0,max_value:((ee=t.settings)==null?void 0:ee.max_value)!==void 0?Number(t.settings.max_value):1e9}}),b=k=>{if(k==null||k==="")return"";const D=Number(k);if(isNaN(D))return"";let T=D.toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:0});return A.value.thousands_separator!==","&&(T=T.replace(/,/g,A.value.thousands_separator)),T},$=k=>k?k.replace(/[^\d]/g,""):"",_=se(()=>g.value?`${A.value.currency_symbol} ${b(g.value)}`:""),j=k=>{let D=$(k.target.value),T=Number(D);A.value.min_value!==void 0&&T<A.value.min_value&&(D=A.value.min_value.toString()),A.value.max_value!==void 0&&T>A.value.max_value&&(D=A.value.max_value.toString()),g.value=D,S("update:modelValue",D),S("save",t.pointId)};return be(()=>t.modelValue,k=>{k!=null&&(g.value=k.toString())},{immediate:!0}),(k,D)=>(n(),l("div",_s,[e("input",{value:_.value,onInput:j,type:"text",required:a.required,placeholder:a.placeholder,class:re(["block w-full rounded-lg border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm transition duration-150",a.error?"border-red-300":"border-gray-300"])},null,42,Cs),a.error?(n(),l("p",Ss,z(a.error),1)):c("",!0)]))}},$s={class:"mt-1 space-y-3"},As={key:0,class:"space-y-2"},Vs={class:"flex flex-wrap gap-2"},Ts=["onClick"],Ms=["value","required","minlength","maxlength","placeholder"],Es={class:"flex justify-between items-center mt-1"},Us={class:"text-xs text-gray-500"},Ns={key:0,class:"text-xs text-red-600"},ga={__name:"InputTextarea",props:{modelValue:String,required:Boolean,minLength:[String,Number],maxLength:[String,Number],placeholder:String,error:String,pointId:[String,Number],inspectionId:[String,Number],settings:Object},emits:["update:modelValue","save"],setup(a,{emit:ne}){const t=a,S=ne,g=y([]),A=y(""),b=k=>g.value.some(D=>D.value===k),$=k=>{b(k.value)?g.value=g.value.filter(f=>f.value!==k.value):g.value.push(k);const T=[...g.value.map(f=>f.value)];A.value.trim()&&T.push(A.value.trim());const ee=T.join(", ");S("update:modelValue",ee),S("save",{pointId:t.pointId,inspectionId:t.inspectionId,notes:ee})},_=k=>{const D=k.target.value;S("update:modelValue",D),S("save",{pointId:t.pointId,inspectionId:t.inspectionId,notes:D}),j(D)},j=k=>{var f,p,M,K;if(!k){g.value=[],A.value="";return}const D=k.split(",").map(E=>E.trim()).filter(E=>E),T=((p=(f=t.settings)==null?void 0:f.damage_options)==null?void 0:p.map(E=>E.value))||[];g.value=((K=(M=t.settings)==null?void 0:M.damage_options)==null?void 0:K.filter(E=>D.includes(E.value)))||[];const ee=D.filter(E=>!T.includes(E));A.value=ee.join(", ")};return be(()=>t.modelValue,k=>{k!=null&&j(k)},{immediate:!0}),be(()=>{var k;return(k=t.settings)==null?void 0:k.damage_options},(k,D)=>{if(k!==D){const T=k?k.map(M=>M.value):[];g.value=g.value.filter(M=>T.includes(M.value));const f=[...g.value.map(M=>M.value)];A.value.trim()&&f.push(A.value.trim());const p=f.filter(M=>M).join(", ");S("update:modelValue",p),S("save",{pointId:t.pointId,inspectionId:t.inspectionId,notes:p})}},{deep:!0,immediate:!1}),(k,D)=>{var T,ee,f;return n(),l("div",$s,[(T=a.settings)!=null&&T.enable_damage&&((ee=a.settings)!=null&&ee.damage_options)?(n(),l("div",As,[D[0]||(D[0]=e("h4",{class:"text-sm font-medium text-gray-700"},"Pilih Kerusakan:",-1)),e("div",Vs,[(n(!0),l(Ee,null,De(a.settings.damage_options,(p,M)=>(n(),l("button",{key:M,type:"button",onClick:K=>$(p),class:re(["px-3 py-1.5 rounded-md text-sm font-medium transition-colors border",{"border-indigo-500 bg-indigo-100 text-indigo-700":b(p.value),"border-gray-300 bg-white text-gray-700 hover:bg-gray-50":!b(p.value)}])},z(p.label),11,Ts))),128))])])):c("",!0),e("div",null,[e("textarea",{value:a.modelValue,onInput:_,required:a.required,minlength:a.minLength,maxlength:a.maxLength,placeholder:a.placeholder,class:"block w-full rounded-lg border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm transition duration-150",rows:"4"},null,40,Ms),e("div",Es,[e("span",Us,z(((f=a.modelValue)==null?void 0:f.length)||0)+"/"+z(a.maxLength||400),1),a.error?(n(),l("p",Ns,z(a.error),1)):c("",!0)])])])}}},Ds={class:"mt-1"},Ps=["value","required"],Ls={key:0,class:"mt-2 text-sm text-red-600"},Rs={__name:"InputSelect",props:{modelValue:String,required:Boolean,error:String,pointId:[String,Number]},emits:["update:modelValue","save"],setup(a,{emit:ne}){const t=a,S=ne,g=A=>{S("update:modelValue",A.target.value),S("save",t.pointId)};return(A,b)=>(n(),l("div",Ds,[e("select",{value:a.modelValue,onChange:g,required:a.required,class:"block w-full rounded-lg border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm transition duration-150"},b[0]||(b[0]=[e("option",{value:"",disabled:""},"Select status",-1),e("option",{value:"good"},"Good",-1),e("option",{value:"bad"},"Bad",-1),e("option",{value:"na"},"N/A",-1)]),40,Ps),a.error?(n(),l("p",Ls,z(a.error),1)):c("",!0)]))}},js=He(Rs,[["__scopeId","data-v-1b6c0201"]]),Bs={key:0,class:"fixed inset-0 z-[60] flex items-center justify-center bg-black bg-opacity-50 backdrop-blur-sm"},Fs={class:"bg-white rounded-xl p-8 w-full max-w-sm mx-auto shadow-2xl transform transition-all duration-300 scale-100 opacity-100"},Os={class:"text-xs text-gray-500 mt-2 text-center"},zs={class:"flex flex-row space-x-4 mb-6"},qs={class:"mt-4 text-right"},Ks={__name:"ImageSourceOptionsModal",props:{show:{type:Boolean,default:!1},settings:{type:Object,default:()=>({max_files:1,allowed_types:["jpg","png","jpeg"],camera_aspect_ratio:"3:4",enable_flash:!0,enable_camera_switch:!0,max_size:2048})}},emits:["close","open-webcam","trigger-gallery"],setup(a){return(ne,t)=>a.show?(n(),l("div",Bs,[e("div",Fs,[t[7]||(t[7]=e("h3",{class:"text-xl font-bold text-gray-800 mb-2 text-center"},"Pilih Sumber Gambar",-1)),e("p",Os,[t[3]||(t[3]=Ue("Ambil Foto Maksimal: ")),e("b",null,z(a.settings.max_files),1),t[4]||(t[4]=Ue(" Dengan Rasio & Ukuran: ")),e("b",null,z(a.settings.camera_aspect_ratio),1)]),e("div",zs,[e("button",{onClick:t[0]||(t[0]=S=>ne.$emit("open-webcam")),class:"flex-1 flex flex-col items-center justify-center p-4 border border-gray-200 rounded-lg text-gray-700 hover:bg-blue-50 hover:border-blue-400 hover:text-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-all duration-200 ease-in-out transform hover:scale-105"},t[5]||(t[5]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-8 w-8 mb-2 text-gray-500 hover:text-blue-600 transition-colors",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})],-1),e("span",{class:"text-sm font-medium"},"Ambil Foto",-1)])),e("button",{onClick:t[1]||(t[1]=S=>ne.$emit("trigger-gallery")),class:"flex-1 flex flex-col items-center justify-center p-4 border border-gray-200 rounded-lg text-gray-700 hover:bg-indigo-50 hover:border-indigo-400 hover:text-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 transition-all duration-200 ease-in-out transform hover:scale-105"},t[6]||(t[6]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-8 w-8 mb-2 text-gray-500 hover:text-indigo-600 transition-colors",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1),e("span",{class:"text-sm font-medium"},"Galeri",-1)]))]),e("div",qs,[e("button",{onClick:t[2]||(t[2]=S=>ne.$emit("close")),class:"px-5 py-2 text-sm font-medium text-gray-600 bg-gray-100 rounded-lg hover:bg-gray-200 hover:text-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-300 focus:ring-offset-2 transition-colors duration-200 ease-in-out"}," Batal ")])])])):c("",!0)}},Hs={key:0,class:"fixed inset-0 bg-black bg-opacity-95 z-50 flex flex-col items-center justify-center"},Gs={class:"w-full h-full flex flex-col"},Ws={class:"flex justify-between items-center p-4 bg-black bg-opacity-70 text-white shadow-md"},Ys=["disabled"],Zs={class:"text-lg font-semibold"},Js={class:"flex items-center gap-2"},Xs=["disabled"],Qs={key:0,class:"px-4 py-2 bg-indigo-900 text-white"},en={class:"flex justify-between items-center text-sm"},tn={class:"w-full bg-gray-700 rounded-full h-2 mt-1"},an={class:"flex-1 flex items-center justify-center overflow-hidden relative"},sn=["src"],nn={key:1,class:"absolute bottom-4 left-1/2 transform -translate-x-1/2 flex gap-3"},on=["disabled"],ln=["disabled"],rn={key:2,class:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center"},un={key:3,class:"absolute inset-0 bg-red-500 bg-opacity-80 flex flex-col items-center justify-center text-white"},dn=["disabled"],cn=["disabled"],gn=["disabled"],pn={class:"flex flex-col gap-3 p-4 bg-black bg-opacity-70 shadow-inner"},mn={class:"flex justify-between items-center w-full"},vn=["disabled"],fn={key:1,class:"flex-1"},hn=["disabled"],bn={class:"flex gap-3 w-full"},yn={key:1,class:"flex-1 px-4 py-3 bg-gradient-to-r from-indigo-700 to-sky-600 rounded-lg cursor-not-allowed flex items-center justify-center font-medium opacity-75",disabled:""},xn={class:"flex items-center gap-2"},wn={key:0,class:"text-center"},kn={__name:"PreviewModal",props:{show:Boolean,images:{type:Array,default:()=>[]},initialIndex:{type:Number,default:0},allowMultiple:Boolean,maxFiles:Number,isUploading:Boolean,aspectRatio:Number,point:Object,uploadProgress:{type:Number,default:0},currentUpload:{type:Number,default:0},totalUpload:{type:Number,default:0}},emits:["close","saveImages","removePreviewImage","triggerAddMorePhotos","update:images","retryImage"],setup(a,{emit:ne}){const t=a,S=ne,g=y(0),A=y([]),b=se(()=>A.value.length>0?A.value[g.value]:null);be(()=>t.images,K=>{A.value=K.map(E=>({...E,rotation:E.isNew&&E.rotation||0})),K.length===0&&t.show&&T()},{deep:!0,immediate:!0}),be(()=>t.show,K=>{K&&t.images.length>0&&(g.value=t.initialIndex)}),be(()=>t.uploadProgress,K=>{K===100&&console.log("Upload completed")});const $=K=>K.preview||(K.image_path?`/${K.image_path}`:""),_=K=>{if(b.value&&b.value.isNew&&!t.isUploading){const E=b.value.rotation||0;let H;K==="left"?H=E-90:H=E+90,H=(H%360+360)%360,A.value[g.value].rotation=H,S("update:images",A.value)}},j=()=>{t.isUploading||(g.value=g.value<A.value.length-1?g.value+1:0)},k=()=>{t.isUploading||(g.value=g.value>0?g.value-1:A.value.length-1)},D=()=>{t.isUploading||S("saveImages",A.value)},T=()=>{t.isUploading||S("close")},ee=()=>{if(b.value&&!t.isUploading){const K=b.value,E=A.value.findIndex(H=>H.isNew&&K.isNew&&H.preview===K.preview||!H.isNew&&!K.isNew&&H.id===K.id);E!==-1&&(S("removePreviewImage",K),A.value.splice(E,1),S("update:images",A.value)),g.value>=A.value.length&&(g.value=Math.max(0,A.value.length-1)),A.value.length===0&&S("close")}},f=()=>{t.isUploading||S("triggerAddMorePhotos")},p=()=>{b.value&&!t.isUploading&&S("retryImage",b.value)},M=K=>{K.key==="Escape"&&!t.isUploading&&T()};return nt(()=>{document.addEventListener("keydown",M)}),wt(()=>{document.removeEventListener("keydown",M)}),(K,E)=>{var H;return a.show?(n(),l("div",Hs,[e("div",Gs,[e("div",Ws,[e("button",{onClick:T,class:"p-2 rounded-full hover:bg-white hover:bg-opacity-20 transition-colors",disabled:a.isUploading},E[2]||(E[2]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]),8,Ys),e("div",Zs,z(((H=a.point)==null?void 0:H.name)||"Preview")+" ("+z(g.value+1)+"/"+z(A.value.length)+") ",1),e("div",Js,[b.value&&b.value.isNew?(n(),l("button",{key:0,onClick:ee,class:"p-2 rounded-full hover:bg-white hover:bg-opacity-20 transition-colors","aria-label":"Remove new image",disabled:a.isUploading},E[3]||(E[3]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)]),8,Xs)):c("",!0)])]),a.isUploading?(n(),l("div",Qs,[e("div",en,[e("span",null,"Mengupload: "+z(a.currentUpload)+"/"+z(a.totalUpload),1),e("span",null,z(a.uploadProgress)+"%",1)]),e("div",tn,[e("div",{class:"bg-gradient-to-r from-indigo-500 to-sky-400 h-2 rounded-full progress-bar",style:Ke({width:a.uploadProgress+"%"})},null,4)])])):c("",!0),e("div",an,[e("div",{class:"relative w-full max-w-full",style:Ke({paddingTop:a.aspectRatio?100/a.aspectRatio+"%":"75%"})},[b.value?(n(),l("img",{key:0,src:$(b.value),class:"absolute inset-0 w-full h-full object-contain transition-transform duration-300 ease-in-out bg-black",style:Ke({transform:`rotate(${b.value.rotation}deg)`})},null,12,sn)):c("",!0),b.value&&b.value.isNew&&!b.value.isUploading&&!b.value.isFailed?(n(),l("div",nn,[e("button",{onClick:E[0]||(E[0]=Z=>_("left")),class:"p-3 bg-black bg-opacity-60 text-white rounded-full hover:bg-opacity-80 transition-colors",disabled:a.isUploading,title:"Putar ke kiri"},E[4]||(E[4]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 12a9 9 0 1018 0 9 9 0 00-18 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l3-3m0 0l3 3m-3-3v9",transform:"rotate(180 12 12)"})],-1)]),8,on),e("button",{onClick:E[1]||(E[1]=Z=>_("right")),class:"p-3 bg-black bg-opacity-60 text-white rounded-full hover:bg-opacity-80 transition-colors",disabled:a.isUploading,title:"Putar ke kanan"},E[5]||(E[5]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 12a9 9 0 1018 0 9 9 0 00-18 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l3-3m0 0l3 3m-3-3v9"})],-1)]),8,ln)])):c("",!0),b.value&&b.value.isUploading?(n(),l("div",rn,E[6]||(E[6]=[e("div",{class:"text-center text-white"},[e("div",{class:"w-12 h-12 border-4 border-white border-t-transparent rounded-full animate-spin mx-auto mb-2"}),e("p",{class:"text-sm"},"Mengupload...")],-1)]))):c("",!0),b.value&&b.value.isFailed?(n(),l("div",un,[E[7]||(E[7]=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-12 w-12 mb-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1)),E[8]||(E[8]=e("p",{class:"text-lg font-medium mb-2"},"Upload Gagal",-1)),e("button",{onClick:p,class:"px-4 py-2 bg-white text-red-600 rounded-lg font-medium hover:bg-gray-100 transition-colors",disabled:a.isUploading}," Coba Lagi ",8,dn)])):c("",!0)],4),A.value.length>1&&!a.isUploading?(n(),l("button",{key:0,onClick:k,class:"absolute left-4 p-3 bg-black bg-opacity-50 text-white rounded-full hover:bg-opacity-70 transition-colors",disabled:a.isUploading},E[9]||(E[9]=[e("svg",{xmlns:"http://www.w3.org2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)]),8,cn)):c("",!0),A.value.length>1&&!a.isUploading?(n(),l("button",{key:1,onClick:j,class:"absolute right-4 p-3 bg-black bg-opacity-50 text-white rounded-full hover:bg-opacity-70 transition-colors",disabled:a.isUploading},E[10]||(E[10]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)]),8,gn)):c("",!0)]),e("div",pn,[e("div",mn,[b.value&&!b.value.isNew?(n(),l("button",{key:0,onClick:ee,class:"px-3 py-2 rounded-lg text-white font-medium flex items-center gap-1 transition-colors hover:text-red-400",disabled:a.isUploading},E[11]||(E[11]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.095 21H7.905a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1),Ue(" Hapus Foto ")]),8,vn)):(n(),l("div",fn)),a.allowMultiple&&A.value.length<a.maxFiles&&!a.isUploading?(n(),l("button",{key:2,onClick:f,class:"px-3 py-2 rounded-lg text-white font-medium flex items-center gap-1 transition-colors hover:text-indigo-400",disabled:a.isUploading},E[12]||(E[12]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),Ue(" Tambah Foto ")]),8,hn)):c("",!0)]),e("div",bn,[a.isUploading?(n(),l("button",yn,[e("div",xn,[E[13]||(E[13]=e("div",{class:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"},null,-1)),e("span",null,"Mengupload... "+z(a.uploadProgress)+"%",1)])])):(n(),l("button",{key:0,onClick:D,class:"flex-1 px-4 py-3 rounded-lg bg-gradient-to-r from-indigo-700 to-sky-600 shadow-lg text-white transition-colors font-medium hover:from-indigo-600 hover:to-sky-500"}," Simpan & Upload "))]),a.isUploading?(n(),l("div",wn,E[14]||(E[14]=[e("p",{class:"text-xs text-blue-300"}," Modal akan tertutup otomatis. Upload terus berjalan di background. ",-1)]))):c("",!0)])])])):c("",!0)}}},In=He(kn,[["__scopeId","data-v-0e4bb6d9"]]),_n={key:0,class:"fixed inset-0 z-40 p-0 webcam-modal-container"},Cn={class:"webcam-content-box"},Sn={class:"webcam-header"},$n={class:"inspection-point-name"},An={class:"camera-quality-indicator"},Vn={class:"quality-badge"},Tn={key:1,class:"auto-focus-indicator"},Mn={key:2,class:"error-overlay"},En={class:"error-content"},Un={class:"error-message"},Nn={class:"webcam-footer"},Dn={class:"camera-controls"},Pn=["disabled"],Ln={class:"camera-icon-container"},Rn={key:0,class:"camera-spinner"},jn={key:1,class:"camera-shutter"},Bn=["disabled"],Fn={__name:"WebCamRTC",props:{show:Boolean,aspectRatio:{type:Number,default:4/3},settings:{type:Object,default:()=>({enable_flash:!0,enable_camera_switch:!0,max_size:2048})},point:Object,cameraQuality:{type:String}},emits:["close","photoCaptured"],setup(a,{emit:ne}){const t=a,S=ne,g=y(null),A=y(null);let b=null,$=null;const _=y("environment"),j=y(null),k=y([]),D=y(!1),T=y(!1),ee=y(!1),f=y(!1),p=y(!1),M=y(null),K=y(null),E=y(!1),H=y(!0),Z=y({}),F=se(()=>({aspectRatio:`${t.aspectRatio} / 1`,maxWidth:"100%",maxHeight:"70vh",margin:"0 auto"})),I=async()=>{b&&b.getTracks().forEach(N=>N.stop()),M.value=null,p.value=!0;try{const N=L();console.log("Mencoba inisialisasi kamera dengan:",N),b=await navigator.mediaDevices.getUserMedia({video:N,audio:!1}),$=b.getVideoTracks()[0],g.value.srcObject=b,await new Promise((U,R)=>{g.value.onloadedmetadata=U,g.value.onerror=R,setTimeout(U,1e3)}),await g.value.play(),await s(),de(),setTimeout(async()=>{try{await C()}catch(U){console.warn("Gagal mendapatkan daftar perangkat:",U)}},500),p.value=!1,console.log("Kamera berhasil diinisialisasi")}catch(N){if(console.error("Error mengakses kamera: ",N),!b)try{console.log("Mencoba fallback berdasarkan kualitas kamera...");let U,R,q,Q;switch(t.cameraQuality){case"SD":U=1280,R=720,q=640,Q=480;break;case"HD":U=1920,R=1080,q=1280,Q=720;break;case"4K":U=3840,R=2160,q=1920,Q=1080;break;default:U=1920,R=1080,q=1280,Q=720}const oe={video:{facingMode:_.value,width:{min:q,ideal:U},height:{min:Q,ideal:R}}};b=await navigator.mediaDevices.getUserMedia(oe),$=b.getVideoTracks()[0],g.value.srcObject=b,await g.value.play(),p.value=!1,console.log("Fallback berhasil dengan kualitas:",t.cameraQuality)}catch(U){console.error("Fallback juga gagal:",U),M.value=h(U),p.value=!1}}},L=()=>{let N,U,R,q,Q,oe;switch(t.cameraQuality){case"SD":N=1280,U=720,R=1280,q=720,Q=640,oe=480;break;case"HD":N=1920,U=1080,R=1920,q=1080,Q=1280,oe=720;break;case"4K":N=3840,U=2160,R=3840,q=2160,Q=1920,oe=1080;break;default:N=1920,U=1080,R=1920,q=1080,Q=1280,oe=720}return{facingMode:{ideal:"environment"},width:{ideal:N,max:R,min:Q},height:{ideal:U,max:q,min:oe},focusMode:{ideal:["continuous","single-shot","manual"]},exposureMode:{ideal:["continuous","manual"]},whiteBalanceMode:{ideal:["continuous","manual"]}}},de=async()=>{if($)try{const N=$.getCapabilities();K.value=N;const U=N.focusMode&&(N.focusMode.includes("continuous")||N.focusMode.includes("single-shot")),R=N.exposureMode&&N.exposureMode.includes("continuous");if(U||R){const q={};U&&(q.focusMode="continuous"),R&&(q.exposureMode="continuous",q.exposureCompensation={ideal:0}),Object.keys(q).length>0&&(await $.applyConstraints({advanced:[q]}),console.log("Auto-focus/exposure diaktifkan"))}T.value=!!N.torch||!!N.fillLightMode}catch(N){console.warn("Tidak bisa mengatur auto-focus/exposure:",N)}},C=async()=>{try{(await navigator.mediaDevices.getUserMedia({video:!0})).getTracks().forEach(R=>R.stop());const U=await navigator.mediaDevices.enumerateDevices();if(k.value=U.filter(R=>R.kind==="videoinput"),D.value=k.value.length>1,!j.value&&k.value.length>0){const R=k.value.find(q=>q.label.toLowerCase().includes("back")||q.label.toLowerCase().includes("rear")||q.label.toLowerCase().includes("environment"));j.value=R?R.deviceId:k.value[0].deviceId}}catch(N){console.warn("Error getting camera devices:",N)}},h=N=>{switch(N.name){case"NotAllowedError":return"Izin akses kamera ditolak. Silakan izinkan akses kamera di pengaturan browser.";case"NotFoundError":return"Tidak ada kamera yang ditemukan.";case"NotSupportedError":return"Browser tidak mendukung akses kamera.";case"NotReadableError":return"Kamera sedang digunakan oleh aplikasi lain.";case"OverconstrainedError":return"Perangkat tidak mendukung pengaturan kamera yang diminta.";default:return`Tidak dapat mengakses kamera: ${N.message}`}},s=()=>{var N,U;if($)try{const R=$.getCapabilities();K.value=R,T.value=!!R.torch||!!R.fillLightMode,console.log("Kamera mendukung:",{maxRes:`${((N=R.width)==null?void 0:N.max)||"N/A"}x${((U=R.height)==null?void 0:U.max)||"N/A"}`,torch:R.torch,focusModes:R.focusMode,exposureModes:R.exposureMode})}catch(R){console.warn("Tidak bisa mendapatkan kemampuan kamera:",R)}},x=async()=>{if(!(!$||!T.value))try{_.value==="environment"?(await $.applyConstraints({advanced:[{torch:!ee.value}]}),ee.value=!ee.value):(console.log("Flash tidak didukung untuk kamera depan"),ee.value=!1)}catch(N){console.error("Gagal mengontrol flash:",N),ee.value=!1}},O=async()=>{if(!D.value||p.value)return;p.value=!0,b&&b.getTracks().forEach(q=>q.stop());const U=(k.value.findIndex(q=>q.deviceId===j.value)+1)%k.value.length;j.value=k.value[U].deviceId;const R=k.value[U];_.value=R.label.toLowerCase().includes("front")?"user":"environment",await I()},ue=async N=>{if(!g.value||!$)return;const U=N.currentTarget.getBoundingClientRect(),R=N.type.includes("mouse")?N.clientX-U.left:N.touches[0].clientX-U.left,q=N.type.includes("mouse")?N.clientY-U.top:N.touches[0].clientY-U.top;E.value=!0,Z.value={left:`${R-40}px`,top:`${q-40}px`},setTimeout(()=>{E.value=!1},1e3);try{const Q=$.getCapabilities();if(Q.focusMode&&Q.focusMode.includes("manual")){const oe=R/U.width,ve=q/U.height;Q.focusDistance&&Q.pan&&Q.tilt&&await $.applyConstraints({advanced:[{focusMode:"manual",focusDistance:.3,pointsOfInterest:[{x:oe,y:ve}]}]})}else Q.focusMode&&Q.focusMode.includes("single-shot")&&await $.applyConstraints({advanced:[{focusMode:"single-shot"}]})}catch(Q){console.warn("Penyesuaian fokus tidak didukung:",Q)}},Y=async()=>{var N,U;if(!(f.value||!g.value||!A.value)){f.value=!0;try{const R=g.value,q=A.value;await new Promise(we=>setTimeout(we,100));const Q=R.videoWidth,oe=R.videoHeight;let ve,ce,$e,_e;Q/oe>t.aspectRatio?(ce=oe,ve=oe*t.aspectRatio,$e=(Q-ve)/2,_e=0):(ve=Q,ce=Q/t.aspectRatio,$e=0,_e=(oe-ce)/2),q.width=ve,q.height=ce,q.getContext("2d").drawImage(R,$e,_e,ve,ce,0,0,ve,ce);const Se=Math.min(.95,.7+Q*oe/(3840*2160)*.25),Ae=await new Promise(we=>{q.toBlob(we,"image/jpeg",Se)});if(Ae)if(Ae.size/1024>t.settings.max_size){const we=await W(Ae,t.settings.max_size),Te=`inspeksi_${((N=t.point)==null?void 0:N.name)||"foto"}_${Date.now()}.jpg`,Me=new File([we],Te,{type:"image/jpeg",lastModified:Date.now()});S("photoCaptured",Me)}else{const we=`inspeksi_${((U=t.point)==null?void 0:U.name)||"foto"}_${Date.now()}.jpg`,Te=new File([Ae],we,{type:"image/jpeg",lastModified:Date.now()});S("photoCaptured",Te)}}catch(R){console.error("Error mengambil foto:",R)}finally{f.value=!1}}},W=async(N,U)=>new Promise(R=>{const q=new Image;q.onload=()=>{const Q=document.createElement("canvas");let oe=q.width,ve=q.height;const ce=1920;(oe>ce||ve>ce)&&(oe>ve?(ve=ve*ce/oe,oe=ce):(oe=oe*ce/ve,ve=ce)),Q.width=oe,Q.height=ve,Q.getContext("2d").drawImage(q,0,0,oe,ve);let _e=.9;const fe=()=>{Q.toBlob(Se=>{Se.size/1024<=U||_e<=.3?R(Se):(_e-=.1,fe())},"image/jpeg",_e)};fe()},q.src=URL.createObjectURL(N)}),ie=()=>{b&&b.getTracks().forEach(N=>N.stop()),S("close")},pe=async()=>{M.value=null,await I()};return be(()=>t.show,async N=>{N?(await Lt(),await I()):b&&b.getTracks().forEach(U=>U.stop())}),wt(()=>{b&&b.getTracks().forEach(N=>N.stop())}),(N,U)=>{var R;return a.show?(n(),l("div",_n,[e("div",Cn,[e("div",Sn,[e("div",$n,z(((R=a.point)==null?void 0:R.name)||"Camera"),1),e("div",An,[e("span",Vn,z(a.cameraQuality),1)]),e("button",{onClick:ie,class:"p-2 rounded-full text-white hover:bg-gray-700 transition-colors"},U[0]||(U[0]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),e("div",{class:"webcam-video-container",style:Ke(F.value),onTouchstart:ue,onClick:ue},[e("video",{ref_key:"webcamVideo",ref:g,autoplay:"",playsinline:"",class:"webcam-video"},null,512),e("canvas",{ref_key:"webcamCanvas",ref:A,class:"hidden"},null,512),E.value?(n(),l("div",{key:0,class:"focus-indicator",style:Ke(Z.value)},U[1]||(U[1]=[e("div",{class:"focus-ring"},null,-1)]),4)):c("",!0),H.value&&!E.value?(n(),l("div",Tn,U[2]||(U[2]=[e("div",{class:"auto-focus-ring"},null,-1)]))):c("",!0),M.value?(n(),l("div",Mn,[e("div",En,[U[3]||(U[3]=e("div",{class:"error-icon"},"⚠️",-1)),U[4]||(U[4]=e("h3",{class:"error-title"},"Gagal Mengakses Kamera",-1)),e("p",Un,z(M.value),1),e("button",{onClick:pe,class:"retry-button"}," Coba Lagi ")])])):c("",!0)],36),e("div",Nn,[e("div",Dn,[a.settings.enable_flash&&T.value?(n(),l("button",{key:0,onClick:x,class:re(["control-button flash-button",{active:ee.value}])},U[5]||(U[5]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})],-1)]),2)):c("",!0),e("button",{onClick:Y,class:"capture-button",disabled:f.value||p.value},[e("div",Ln,[f.value?(n(),l("div",Rn)):(n(),l("div",jn))])],8,Pn),a.settings.enable_camera_switch&&D.value?(n(),l("button",{key:1,onClick:O,class:"control-button switch-button",disabled:p.value},U[6]||(U[6]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"})],-1)]),8,Bn)):c("",!0)])])])])):c("",!0)}}},On=He(Fn,[["__scopeId","data-v-472cc13f"]]),zn={key:0,class:"fixed inset-0 z-40 p-0 webcam-modal-container"},qn={class:"webcam-content-box"},Kn={class:"webcam-header"},Hn={class:"rounded-full text-white hover:bg-gray-700 transition-colors"},Gn={class:"inspection-point-name"},Wn={key:0,class:"screen-flash-overlay"},Yn={key:2,class:"zoom-controls"},Zn=["max"],Jn={class:"webcam-footer"},Xn={class:"camera-controls"},Qn=["disabled"],eo={class:"camera-icon-container"},to={key:0,class:"camera-spinner"},ao={key:1,class:"camera-body"},so={__name:"WebcamModal",props:{show:Boolean,aspectRatio:Number,settings:Object,point:Object},emits:["close","photoCaptured"],setup(a,{emit:ne}){const t=a,S=ne,g=y(null),A=y(null);let b=null,$=null;const _=y("environment"),j=y(!1),k=y(!1),D=y(!1),T=y(!1),ee=y(!1),f=y({}),p=y(!1),M=y(1),K=y(1),E=y(!1),H=se(()=>{var Y;return((Y=t.settings)==null?void 0:Y.max_size)||2048}),Z=se(()=>t.aspectRatio?{aspectRatio:`${t.aspectRatio} / 1`,maxWidth:"100%",maxHeight:"70vh",margin:"0 auto"}:{}),F=se(()=>{if(!t.aspectRatio)return{};const Y=t.aspectRatio,W=Y>1?80:60,ie=Y>1?80/Y:60*Y;return{width:`${W}%`,height:`${ie}%`}}),I=async()=>{b&&b.getTracks().forEach(Y=>Y.stop());try{const Y={facingMode:_.value,width:{ideal:4096},height:{ideal:2160},aspectRatio:{ideal:t.aspectRatio||1.3333333333333333},frameRate:{ideal:30},advanced:[{focusMode:"continuous"},{exposureMode:"continuous"},{whiteBalanceMode:"continuous"}]};b=await navigator.mediaDevices.getUserMedia({video:Y,audio:!1}),$=b.getVideoTracks()[0],g.value.srcObject=b,g.value.onloadedmetadata=async()=>{await de(),await g.value.play()}}catch(Y){console.error("Error accessing camera: ",Y),alert("Failed to access camera. Please allow camera permission."),S("close")}},L=()=>{b&&b.getTracks().forEach(Y=>Y.stop()),S("close")},de=async()=>{if($)try{const Y=await navigator.mediaDevices.enumerateDevices();j.value=Y.filter(ie=>ie.kind==="videoinput").length>1;const W=$.getCapabilities();W.zoom?(E.value=!0,K.value=W.zoom.max,console.log(`Zoom supported. Max zoom: ${K.value}`)):(E.value=!1,console.warn("Zoom is not supported by this camera.")),k.value=W.torch||W.fillLightMode&&W.fillLightMode.includes("torch")}catch(Y){console.error("Error checking camera capabilities:",Y)}},C=async Y=>{if(!$)return;const W=g.value.getBoundingClientRect(),ie=Y.clientX-W.left,pe=Y.clientY-W.top;ee.value=!0,f.value={left:`${ie}px`,top:`${pe}px`,transform:"translate(-50%, -50%)"};try{if($.getCapabilities().pointsOfInterest){const U=ie/W.width,R=pe/W.height;await $.applyConstraints({advanced:[{focusMode:"manual",pointsOfInterest:[{x:U,y:R}]}]})}else console.warn("Manual focus with point of interest is not supported.")}catch(N){console.warn("Manual focus failed:",N)}setTimeout(()=>{ee.value=!1,$.getCapabilities().focusMode.includes("continuous")&&$.applyConstraints({advanced:[{focusMode:"continuous"}]})},1e3)},h=async Y=>{if(!$||!E.value)return;const W=Math.min(Math.max(Y,1),K.value);M.value=W;try{await $.applyConstraints({advanced:[{zoom:W}]})}catch(ie){console.error("Failed to set zoom:",ie)}},s=async()=>{if(!(!$||!k.value))try{_.value==="user"?(D.value=!D.value,T.value=D.value):(await $.applyConstraints({advanced:[{torch:!D.value}]}),D.value=!D.value)}catch(Y){console.error("Flash toggle failed:",Y)}},x=async()=>{j.value&&(_.value=_.value==="environment"?"user":"environment",b&&b.getTracks().forEach(Y=>Y.stop()),await I())},O=async Y=>new Promise(W=>{const ie=H.value*1024;if(Y.size<=ie){W(Y);return}const pe=new Image,N=new FileReader;N.onload=U=>{pe.onload=()=>{const R=document.createElement("canvas"),q=R.getContext("2d"),Q=Math.sqrt(ie/Y.size);R.width=pe.width*Q,R.height=pe.height*Q,q.drawImage(pe,0,0,R.width,R.height);let oe=.9;const ve=()=>{R.toBlob(ce=>{ce.size>ie&&oe>.1?(oe-=.1,ve()):W(ce)},"image/jpeg",oe)};ve()},pe.src=U.target.result},N.readAsDataURL(Y)}),ue=async()=>{if(!(p.value||!g.value||!A.value)){p.value=!0;try{const Y=g.value,W=A.value,ie=Y.videoWidth,pe=Y.videoHeight;let N,U,R,q;ie/pe>t.aspectRatio?(U=pe,N=pe*t.aspectRatio,R=(ie-N)/2,q=0):(N=ie,U=ie/t.aspectRatio,R=0,q=(pe-U)/2),W.width=N,W.height=U,W.getContext("2d").drawImage(Y,R,q,N,U,0,0,N,U);const oe=await new Promise(ce=>{W.toBlob(ce,"image/jpeg",1)}),ve=await O(oe);if(ve){const ce=new File([ve],`capture_${Date.now()}.jpeg`,{type:"image/jpeg",lastModified:Date.now()});S("photoCaptured",ce),T.value=!0,setTimeout(()=>{T.value=!1},100)}}catch(Y){console.error("Error capturing photo:",Y),alert("Failed to capture photo. Please try again.")}finally{p.value=!1}}};return be(()=>t.show,Y=>{Y?I():L()}),wt(()=>{b&&b.getTracks().forEach(Y=>Y.stop())}),(Y,W)=>{var ie;return a.show?(n(),l("div",zn,[e("div",qn,[e("div",Kn,[e("p",Hn,z(a.settings.camera_aspect_ratio),1),e("div",Gn,z(((ie=a.point)==null?void 0:ie.name)||"Camera"),1),e("button",{onClick:L,class:"p-2 rounded-full text-white hover:bg-gray-700 transition-colors"},W[2]||(W[2]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),e("div",{class:"webcam-video-container",style:Ke(Z.value),onClick:C,onTouchstart:C},[e("video",{ref_key:"webcamVideo",ref:g,autoplay:"",playsinline:"",class:"webcam-video"},null,512),e("canvas",{ref_key:"webcamCanvas",ref:A,class:"hidden"},null,512),T.value?(n(),l("div",Wn)):c("",!0),e("div",{class:"aspect-ratio-guide",style:Ke(F.value)},null,4),ee.value?(n(),l("div",{key:1,class:"focus-indicator",style:Ke(f.value)},W[3]||(W[3]=[e("div",{class:"focus-ring"},null,-1)]),4)):c("",!0),W[4]||(W[4]=e("div",{class:"hd-badge"},[e("span",{class:"hd-text"},"HD")],-1)),E.value?(n(),l("div",Yn,[Pe(e("input",{type:"range",min:"1",max:K.value,step:"0.1","onUpdate:modelValue":W[0]||(W[0]=pe=>M.value=pe),onInput:W[1]||(W[1]=pe=>h(parseFloat(pe.target.value))),class:"zoom-slider"},null,40,Zn),[[ct,M.value]])])):c("",!0)],36),e("div",Jn,[e("div",Xn,[a.settings.enable_flash&&k.value?(n(),l("button",{key:0,onClick:s,class:re(["control-button",{active:D.value,disabled:!k.value}])},W[5]||(W[5]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})],-1)]),2)):c("",!0),e("button",{onClick:ue,class:"capture-button",disabled:p.value},[e("div",eo,[p.value?(n(),l("div",to)):(n(),l("div",ao,W[6]||(W[6]=[e("div",{class:"camera-lens"},null,-1),e("div",{class:"camera-flash"},null,-1)])))])],8,Qn),a.settings.enable_camera_switch&&j.value?(n(),l("button",{key:1,onClick:x,class:"control-button"},W[7]||(W[7]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"})],-1)]))):c("",!0)])])])])):c("",!0)}}},no=He(so,[["__scopeId","data-v-d307c818"]]),oo={__name:"NativeCameraInput",emits:["photoCaptured"],setup(a,{expose:ne,emit:t}){const S=t,g=y(null);ne({openCamera:()=>{var $;($=g.value)==null||$.click()}});const b=async $=>{var j;const _=(j=$.target.files)==null?void 0:j[0];_&&(S("directPhotoCaptured",_),$.target.value="")};return($,_)=>(n(),l("input",{ref_key:"cameraInput",ref:g,type:"file",accept:"image/*",capture:"environment",class:"hidden",onChange:b},null,544))}},io=["accept","multiple","disabled"],lo={class:"text-xs text-gray-500 mb-2"},ro=["disabled"],uo={class:"h-full flex flex-col items-center justify-center p-4 text-center"},co={class:"text-xs text-gray-400 mt-1"},go={key:0,class:"flex items-center gap-4"},po=["src"],mo={key:0,class:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center"},vo=["disabled"],fo={key:1,class:"flex space-x-2 overflow-x-auto pb-2 scrollbar-hide"},ho=["disabled"],bo=["onClick"],yo=["src","onError"],xo={key:0,class:"absolute inset-0 bg-black bg-opacity-30 flex items-center justify-center text-white text-xs font-bold"},wo={key:0},ko={key:1,class:"ml-1"},Io={key:1,class:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center"},_o={key:2,class:"absolute inset-0 bg-red-500 bg-opacity-80 flex flex-col items-center justify-center text-white"},Co={key:2,class:"mt-1 text-xs text-red-600"},So={__name:"InputImage",props:{modelValue:{type:Array,default:()=>[]},error:String,inspectionId:{type:[String,Number],required:!0},pointId:{type:[String,Number],required:!0},settings:{type:Object,default:()=>({max_files:1,allowed_types:["jpg","png","jpeg"],camera_aspect_ratio:"3:4",enable_flash:!0,enable_camera_switch:!0,max_size:2048})},point:Object},emits:["update:modelValue","save","removeImage","uploaded","uploadProgress"],setup(a,{emit:ne}){const t=a,S=ne,g=y(null),A=y(null),b=y(null),$=y(!1),_=y(!1),j=y(!1),k=y([]),D=y(0),T=y(!1),ee=y(!1),f=y(0),p=y(0),M=y(0),K=Rt("imageSourceSetting",y("all")),E=Rt("cameraQualitySetting",y("HP_Native")),H=`inspection-${t.inspectionId}-point-${t.pointId}-backup`,Z=se(()=>Number(t.settings.max_files)>1),F=se(()=>t.settings.allowed_types.map(i=>`.${i}`).join(", ")),I=se(()=>{const i=t.settings.camera_aspect_ratio.split(":");if(i.length===2){const m=parseFloat(i[0]),d=parseFloat(i[1]);if(!isNaN(m)&&!isNaN(d)&&d!==0)return m/d}return 3/4}),L=se(()=>{console.log("🔄 allImages computed called");const i=[],m=new Set;for(const d of t.modelValue){if(!d||typeof d!="object"||d.id&&m.has(d.id))continue;d.id&&m.add(d.id),console.log("📥 Database image:",d),console.log("📥 Type of preview:",typeof d.preview),console.log("📥 Type of public_url:",typeof d.public_url);const P=de(d);i.push({...P,rotation:P.rotation||0,isNew:!1,isUploaded:!0,isUploading:!1,isFailed:!1})}for(const d of k.value)d.id&&m.add(d.id),i.push({...d,isUploading:d.isUploading||!1,isFailed:d.isFailed||!1});return console.log("✅ Final allImages:",i),i}),de=i=>{if(!i||typeof i!="object")return{};const m={...i};return["preview","public_url","original_url","optimized_url"].forEach(P=>{m[P]&&(m[P]=C(m[P]))}),m.image_path&&(m.image_path=m.image_path.replace(/^storage\//,"")),m},C=i=>{if(!i||typeof i!="string")return i;let m=i.replace(/\/storage\/storage\//g,"/storage/");return m=m.replace(/\/\/storage\/storage\//g,"/storage/"),m.startsWith("storage/")&&(m=`/${m}`),!m.startsWith("/")&&!m.startsWith("http")&&(m=`/storage/${m}`),m},h=i=>{if(!i||typeof i!="object")return console.warn("❌ safeImageSrc: image is not object",i),"";const m=s(i);return typeof m!="string"?(console.error("🚨 CRITICAL: getImageSrc returned non-string:",typeof m,m),""):(m&&console.log("✅ safeImageSrc result:",m),m)},s=i=>{if(!i||typeof i!="object")return"";if(console.log("🔍 getImageSrc called with:",i),console.log("🔍 Available fields:",Object.keys(i)),i.preview&&typeof i.preview=="string"){const m=C(i.preview);return console.log("✅ Using preview URL:",m),m}if(i.public_url&&typeof i.public_url=="string"){const m=C(i.public_url);return console.log("✅ Using public_url:",m),m}if(i.original_url&&typeof i.original_url=="string"){const m=C(i.original_url);return console.log("✅ Using original_url:",m),m}if(i.optimized_url&&typeof i.optimized_url=="string"){const m=C(i.optimized_url);return console.log("✅ Using optimized_url:",m),m}if(i.image_path&&typeof i.image_path=="string"){const d=`/storage/${i.image_path.replace(/^\/?storage\//,"")}`;return console.log("✅ Generated from image_path:",d),d}if(i.path&&typeof i.path=="string"){const d=`/storage/${i.path.replace(/^\/?storage\//,"")}`;return console.log("✅ Generated from path:",d),d}return console.warn("⚠️ No valid image source found for:",i),""},x=i=>{console.error("❌ Image load error for:",i),console.error("❌ Attempted URL:",h(i)),ee.value=!0;const m=O(i);if(m&&m!==h(i)){console.log("🔄 Trying fallback URL:",m);const d=event==null?void 0:event.target;d&&(d.src=m)}},O=i=>{if(!i||typeof i!="object")return"";const m=["original_url","optimized_url","public_url","preview"];for(const d of m)if(i[d]&&typeof i[d]=="string")return C(i[d]);return""},ue=()=>{j.value&&(j.value=!1),K.value==="camera"?W():K.value==="gallery"?Y():$.value=!0},Y=()=>{$.value=!1,A.value.click()},W=()=>{var i;$.value=!1,E.value==="HP_Native"?(i=g.value)==null||i.openCamera():_.value=!0},ie=()=>{$.value=!1,L.value.length>0&&(j.value=!0)},pe=()=>{_.value=!1,L.value.length>0&&(j.value=!0)},N=()=>{j.value=!1,T.value||(k.value.forEach(i=>{i.preview&&i.preview.startsWith("blob:")&&URL.revokeObjectURL(i.preview)}),k.value=[])};be(()=>t.modelValue,i=>{var m;console.log("🔄 modelValue updated:",i),i&&i.length>0&&(console.log("📊 First image structure:",JSON.stringify(i[0],null,2)),console.log("🔍 Type of preview:",typeof((m=i[0])==null?void 0:m.preview)))},{deep:!0});const U=i=>new Promise(m=>{const d=new FileReader;d.onload=P=>{const G=new Image;G.onload=()=>{m({file:i,preview:URL.createObjectURL(i),rotation:0,width:G.naturalWidth,height:G.naturalHeight,isNew:!0})},G.onerror=()=>{console.error("Failed to load image for dimensions:",i.name),m({file:i,preview:URL.createObjectURL(i),rotation:0,width:0,height:0,isNew:!0})},G.src=P.target.result},d.readAsDataURL(i)}),R=i=>{const m=i.name.split(".").pop().toLowerCase();return t.settings.allowed_types.includes(m)},q=async i=>{const d=(t.settings.max_size||2048)*1024;return new Promise(P=>{const G=new Image,me=new FileReader;me.onload=v=>{G.onload=()=>{const u=document.createElement("canvas"),J=u.getContext("2d"),w=Math.max(G.width,G.height);u.width=w,u.height=w,J.fillStyle="white",J.fillRect(0,0,w,w);const te=(w-G.width)/2,ye=(w-G.height)/2;J.drawImage(G,te,ye,G.width,G.height);let ke=.9;const Ie=()=>{u.toBlob(je=>{if(je.size>d&&ke>.1)ke-=.1,Ie();else{const Ze=new File([je],i.name,{type:"image/jpeg",lastModified:Date.now()});P(Ze)}},"image/jpeg",ke)};Ie()},G.src=v.target.result},me.readAsDataURL(i)})},Q=async i=>{const m=Array.from(i.target.files);if(!m.length){$.value=!1,L.value.length>0&&(j.value=!0);return}try{const d=m.filter(J=>!R(J));if(d.length>0){const J=d.map(w=>w.name.split(".").pop()).join(", ");alert(`File type not allowed: ${J}. Allowed types: ${t.settings.allowed_types.join(", ")}`),i.target.value="";return}const P=L.value.length,G=t.settings.max_files-P,me=await Promise.all(m.slice(0,G).map(async J=>await q(J))),v=await Promise.all(me.map(U)),u=Z.value?v:v.slice(0,1);Z.value?k.value.push(...u):(k.value.forEach(J=>{J.preview&&J.preview.startsWith("blob:")&&URL.revokeObjectURL(J.preview)}),k.value=u),$.value=!1,u.length>0?(D.value=Math.max(0,L.value.length-u.length),j.value=!0):L.value.length>0&&(j.value=!0),i.target.value=""}catch(d){console.error("Error processing selected images:",d),alert("Failed to process selected images. Please try again."),$.value=!1,L.value.length>0&&(j.value=!0)}},oe=async i=>{const m=L.value.length;if(!Z.value||m<t.settings.max_files)try{const d=await q(i),P=new Image;P.onload=()=>{const G={file:d,preview:URL.createObjectURL(d),rotation:0,width:P.naturalWidth,height:P.naturalHeight,isNew:!0};Z.value?k.value.push(G):(k.value.forEach(me=>{me.preview&&me.preview.startsWith("blob:")&&URL.revokeObjectURL(me.preview)}),k.value=[G]),_.value=!1,$.value=!1,D.value=L.value.length-1,j.value=!0},P.src=URL.createObjectURL(d)}catch(d){console.error("Error processing captured image:",d),alert("Failed to process captured image. Please try again.")}else alert(`Maximum ${t.settings.max_files} files allowed.`),_.value=!1,$.value=!1,L.value.length>0&&(j.value=!0)},ve=async i=>{const m=L.value.length;if(!Z.value||m<t.settings.max_files)try{const d=await q(i),P=new Image;P.onload=async()=>{const G={file:d,preview:URL.createObjectURL(d),rotation:0,width:P.naturalWidth,height:P.naturalHeight,isNew:!0};$.value=!1,await Oe(G)},P.src=URL.createObjectURL(d)}catch(d){console.error("Error processing direct captured image:",d),alert("Failed to process captured image. Please try again.")}else alert(`Maximum ${t.settings.max_files} files allowed.`),$.value=!1,L.value.length>0&&(j.value=!0)},ce=(i=0)=>{D.value=i,j.value=!0},$e=i=>new Promise(m=>{if(i.rotation===0||!b.value){if(!i.isNew&&!i.file){m({file:null,width:i.width,height:i.height,isOriginal:!0});return}m({file:i.file,width:i.width,height:i.height});return}const d=new Image;d.onload=async()=>{try{const P=b.value,G=P.getContext("2d"),me=d.width,v=d.height;let u,J;i.rotation===90||i.rotation===270?(u=v,J=me):(u=me,J=v),P.width=u,P.height=J,G.clearRect(0,0,P.width,P.height),G.translate(P.width/2,P.height/2),G.rotate(i.rotation*Math.PI/180),G.drawImage(d,-me/2,-v/2,me,v),G.setTransform(1,0,0,1,0,0);const w=await new Promise(ke=>{P.toBlob(ke,"image/jpeg",.9)}),te=new File([w],i.file?i.file.name:`rotated_image_${Date.now()}.jpg`,{type:"image/jpeg"}),ye=await q(te);m({file:ye,width:u,height:J})}catch(P){console.error("Error processing rotated image:",P),m({file:i.file,width:i.width,height:i.height})}},d.onerror=()=>{console.error("Failed to load image for rotation processing:",i.preview),m({file:i.file,width:i.width,height:i.height})},d.src=i.preview}),_e=i=>{try{const m={images:i.map(d=>{var P;return{fileName:((P=d.file)==null?void 0:P.name)||`image-${Date.now()}.jpg`,rotation:d.rotation||0,width:d.width||0,height:d.height||0,timestamp:Date.now()}}),inspectionId:t.inspectionId,pointId:t.pointId};localStorage.setItem(H,JSON.stringify(m))}catch(m){console.error("Error saving backup:",m)}},fe=()=>{localStorage.removeItem(H)},Se=async i=>{T.value=!0;const m=[],d=[];if(!t.pointId){alert("Error: Point ID is missing. Cannot upload image."),T.value=!1;return}try{_e(i);for(const P of i){if(!P.isNew&&P.rotation===0&&P.id&&P.image_path){m.push({id:P.id,image_path:P.image_path,width:P.width,height:P.height,rotation:0,preview:P.preview,isUploaded:!0});continue}const{file:G,width:me,height:v,isOriginal:u}=await $e(P);if(u&&!P.isNew){m.push({id:P.id,image_path:P.image_path,width:P.width,height:P.height,rotation:P.rotation||0,preview:P.preview,isUploaded:!0});continue}G&&d.push({file:G,width:me,height:v,rotation:P.rotation||0,originalImage:P})}N(),d.length>0?await Ae(d,m):(S("update:modelValue",m),S("save",t.pointId))}catch(P){console.error("Error during image processing:",P),alert("Terjadi error saat memproses gambar. Data tersimpan secara lokal.")}finally{T.value=!1}},Ae=async(i,m)=>{M.value=i.length,p.value=0,f.value=0;const d=[...m];let P=0;try{for(let G=0;G<i.length;G++){const me=i[G],v=new FormData;v.append("inspection_id",t.inspectionId),v.append("point_id",t.pointId),v.append("images[]",me.file);const u=k.value.findIndex(J=>{var w;return J.preview===((w=me.originalImage)==null?void 0:w.preview)});u!==-1&&(k.value[u].isUploading=!0,k.value[u].isFailed=!1);try{const w=(await Nt.post(route("inspections.upload-image"),v,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:te=>{if(te.total){const ye=Math.round(te.loaded*100/te.total);f.value=Math.round((G+te.loaded/te.total)/i.length*100),p.value=G+1}}})).data.images;if(w&&w.length>0){const te=w[0];if(d.push({id:te.image_id,image_path:te.path,width:te.width||me.width||0,height:te.height||me.height||0,rotation:me.rotation||0,preview:te.public_url,isUploaded:!0}),u!==-1){const ye=k.value.splice(u,1)[0];ye.preview&&ye.preview.startsWith("blob:")&&URL.revokeObjectURL(ye.preview)}P++}}catch(J){console.error(`Error uploading image ${G+1}:`,J),u!==-1&&(k.value[u].isUploading=!1,k.value[u].isFailed=!0)}}P>0&&(S("update:modelValue",d),S("save",t.pointId),S("uploaded",{pointId:t.pointId,images:d,newImagesCount:P})),P===i.length&&fe(),console.log(`✅ Successfully uploaded ${P}/${i.length} images`)}catch(G){console.error("Error in upload process:",G),i.forEach(me=>{const v=k.value.findIndex(u=>{var J;return u.preview===((J=me.originalImage)==null?void 0:J.preview)});v!==-1&&(k.value[v].isUploading=!1,k.value[v].isFailed=!0)})}finally{f.value=0,p.value=0,M.value=0,T.value=!1}},we=async i=>{if(!i||!i.file){console.error("No file to retry upload");return}T.value=!0;const m=[...t.modelValue];try{const d=new FormData;d.append("inspection_id",t.inspectionId),d.append("point_id",t.pointId),d.append("images[]",i.file);const P=k.value.findIndex(v=>v.preview===i.preview);P!==-1&&(k.value[P].isUploading=!0,k.value[P].isFailed=!1);const me=(await Nt.post(route("inspections.upload-image"),d,{headers:{"Content-Type":"multipart/form-data"}})).data.images;if(me&&me.length>0){const v=me[0];if(m.push({id:v.image_id,image_path:v.path,width:v.width||i.width||0,height:v.height||i.height||0,rotation:i.rotation||0,preview:v.public_url,isUploaded:!0}),P!==-1){const J=k.value.splice(P,1)[0];J.preview&&J.preview.startsWith("blob:")&&URL.revokeObjectURL(J.preview)}S("update:modelValue",m),S("save",t.pointId),S("uploaded",{pointId:t.pointId,images:m,newImagesCount:1}),k.value.some(J=>J.isFailed)||fe(),console.log("✅ Successfully retried upload for 1 image")}}catch(d){console.error("Error retrying upload:",d),previewIndex!==-1&&(k.value[previewIndex].isUploading=!1,k.value[previewIndex].isFailed=!0)}finally{T.value=!1}},Te=i=>{if(i){if(i.id&&!i.isNew)Me(i);else{const m=k.value.findIndex(d=>d.preview&&d.preview===i.preview&&d.isNew||d.id&&d.id===i.id);if(m!==-1){const d=k.value.splice(m,1)[0];d.preview&&d.preview.startsWith("blob:")&&URL.revokeObjectURL(d.preview)}S("update:modelValue",t.modelValue.filter(d=>!(d.id&&d.id===i.id)&&!(d.preview&&d.preview===i.preview)))}D.value>=L.value.length&&(D.value=Math.max(0,L.value.length-1)),L.value.length===0&&N()}},Me=async i=>{var d,P;if(i.id||i.image_path)try{await Nt.delete(route("inspections.delete-image"),{data:{image_id:i.id,image_path:i.image_path}})}catch(G){console.error("Error deleting image from server:",G),(P=(d=G.response)==null?void 0:d.data)!=null&&P.message?alert(`Failed to delete image from server: ${G.response.data.message}`):alert(`Failed to delete image from server: ${G.message}`);return}i.preview&&i.preview.startsWith("blob:")&&URL.revokeObjectURL(i.preview);const m=t.modelValue.filter(G=>G.id!==i.id);S("update:modelValue",m),k.value=k.value.filter(G=>G.isNew&&i.isNew?G.preview!==i.preview:G.id!==i.id),S("removeImage",{image:i}),j.value&&L.value.length===0?N():j.value&&D.value>=L.value.length&&(D.value=Math.max(0,L.value.length-1))},Oe=async i=>{if(T.value=!0,!t.pointId){alert("Error: Point ID is missing. Cannot upload image."),T.value=!1;return}try{const{file:m,width:d,height:P}=await $e(i);if(!m)throw new Error("Failed to process image");const G=new FormData;G.append("inspection_id",t.inspectionId),G.append("point_id",t.pointId),G.append("images[]",m);const v=(await Nt.post(route("inspections.upload-image"),G,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:u=>{u.total&&(f.value=Math.round(u.loaded*100/u.total))}})).data.images;if(v&&v.length>0){const u=v[0],J={id:u.image_id,image_path:u.path,width:u.width||d||0,height:u.height||P||0,rotation:i.rotation||0,preview:u.public_url,isUploaded:!0},w=[...t.modelValue,J];S("update:modelValue",w),S("save",t.pointId),S("uploaded",{pointId:t.pointId,images:w,newImagesCount:1}),console.log("✅ Successfully uploaded image directly")}else throw new Error("No image data received from server")}catch(m){console.error("Error uploading image directly:",m),alert("Failed to upload image. Please try again.")}finally{T.value=!1,f.value=0}};return nt(()=>{try{localStorage.getItem(H)&&console.log("Found backup images, ready for recovery if needed")}catch(i){console.error("Error loading backup:",i)}}),(i,m)=>(n(),l("div",null,[e("input",{ref_key:"galleryInput",ref:A,type:"file",accept:F.value,class:"hidden",onChange:Q,multiple:Z.value,disabled:T.value},null,40,io),e("canvas",{ref_key:"processingCanvas",ref:b,class:"hidden"},null,512),e("p",lo,"Foto Maksimal: "+z(a.settings.max_files)+" | Rasio: "+z(a.settings.camera_aspect_ratio),1),L.value.length===0?(n(),l("label",{key:0,onClick:ue,class:re(["block w-full border-2 border-dashed rounded-lg cursor-pointer transition-colors duration-200 h-28",{"border-gray-300 hover:border-indigo-400 bg-gray-50":!0}]),disabled:T.value},[e("div",uo,[m[3]||(m[3]=e("svg",{class:"w-8 h-8 text-gray-400 mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)),m[4]||(m[4]=e("p",{class:"text-sm text-gray-600 font-medium"},"Upload Image",-1)),e("p",co,"Tipe: "+z(F.value),1)])],8,ro)):(n(),l("div",{key:1,class:re(["block w-full rounded-lg transition-colors duration-200 p-2",{"border-2 border-dashed border-indigo-200 bg-indigo-50 h-auto p-2":a.settings.max_files==1,"bg-transparent":a.settings.max_files>1}]),"aria-label":"Image gallery"},[a.settings.max_files===1?(n(),l("div",go,[e("div",{class:"relative flex-shrink-0 w-24 h-24 overflow-hidden rounded-md border border-gray-200 cursor-pointer",onClick:m[1]||(m[1]=d=>ce(0))},[e("img",{src:h(L.value[0]),onError:m[0]||(m[0]=d=>x(L.value[0])),class:"w-full h-full object-cover"},null,40,po),L.value[0].isUploading?(n(),l("div",mo,m[5]||(m[5]=[e("div",{class:"w-6 h-6 border-2 border-white border-t-transparent rounded-full animate-spin"},null,-1)]))):c("",!0)]),e("button",{onClick:m[2]||(m[2]=gt(d=>Me(L.value[0]),["stop"])),type:"button",class:"flex items-center gap-1 text-red-600 font-medium hover:text-red-800 transition-colors",disabled:T.value},m[6]||(m[6]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.095 21H7.905a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1),Ue(" Hapus Foto ")]),8,vo)])):(n(),l("div",fo,[Z.value&&L.value.length<a.settings.max_files?(n(),l("div",{key:0,class:"flex-shrink-0 flex flex-col items-center justify-center p-2 border-2 border-dashed border-gray-300 rounded-lg cursor-pointer hover:border-indigo-500 transition-colors w-24 h-24",onClick:ue,disabled:T.value},m[7]||(m[7]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-8 w-8 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),e("p",{class:"mt-1 text-xs text-gray-600"},"Tambah",-1)]),8,ho)):c("",!0),(n(!0),l(Ee,null,De(L.value,(d,P)=>(n(),l("div",{key:d.id||d.preview||P,class:"relative flex-shrink-0 w-24 h-24 overflow-hidden rounded-md border border-gray-200 cursor-pointer",onClick:G=>d.isFailed?we(d):ce(P)},[e("img",{src:h(d),onError:G=>x(d),class:"w-full h-full object-cover"},null,40,yo),d.isNew||d.rotation!==0?(n(),l("div",xo,[d.isNew?(n(),l("span",wo,"BARU")):c("",!0),d.rotation!==0?(n(),l("span",ko,"ROTASI")):c("",!0)])):c("",!0),d.isUploading?(n(),l("div",Io,m[8]||(m[8]=[e("div",{class:"w-6 h-6 border-2 border-white border-t-transparent rounded-full animate-spin"},null,-1)]))):c("",!0),d.isFailed?(n(),l("div",_o,m[9]||(m[9]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 mb-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1),e("span",{class:"text-xs font-medium"},"Retry",-1)]))):c("",!0)],8,bo))),128))]))],2)),a.error?(n(),l("p",Co,z(a.error),1)):c("",!0),Ve(Ks,{show:$.value,settings:a.settings,onClose:ie,onOpenWebcam:W,onTriggerGallery:Y},null,8,["show","settings"]),ae(E)!=="HD_Std"?(n(),Ne(On,{key:3,show:_.value,"aspect-ratio":I.value,settings:a.settings,point:a.point,"camera-quality":ae(E),onClose:pe,onPhotoCaptured:oe},null,8,["show","aspect-ratio","settings","point","camera-quality"])):c("",!0),ae(E)==="HD_Std"?(n(),Ne(no,{key:4,show:_.value,"aspect-ratio":I.value,settings:a.settings,point:a.point,"camera-quality":ae(E),onClose:pe,onPhotoCaptured:oe},null,8,["show","aspect-ratio","settings","point","camera-quality"])):c("",!0),ae(E)==="HP_Native"?(n(),Ne(oo,{key:5,ref_key:"nativeCamera",ref:g,onDirectPhotoCaptured:ve},null,512)):c("",!0),Ve(In,{show:j.value,images:L.value,point:a.point,"initial-index":D.value,"allow-multiple":Z.value,"max-files":a.settings.max_files,"is-uploading":T.value,"aspect-ratio":I.value,"upload-progress":f.value,"current-upload":p.value,"total-upload":M.value,onClose:N,onSaveImages:Se,onRemovePreviewImage:Te,onTriggerAddMorePhotos:ue,onRetryImage:we},null,8,["show","images","point","initial-index","allow-multiple","max-files","is-uploading","aspect-ratio","upload-progress","current-upload","total-upload"])]))}},Ft=He(So,[["__scopeId","data-v-05bd16fe"]]),$o={key:0,class:"fixed inset-0 z-50 overflow-hidden"},Ao={class:"absolute bottom-0 left-0 right-0 bg-white rounded-t-2xl max-h-[85vh] overflow-hidden flex flex-col"},Vo={class:"px-4 pb-2 border-b border-gray-200"},To={class:"text-lg font-semibold text-gray-900"},Mo={key:0,class:"text-sm text-gray-500 mt-1"},Eo={class:"flex-1 overflow-y-auto p-4"},Uo={key:0,class:"border-t border-gray-200 p-4 bg-gray-50"},No={__name:"BottomSheetModal",props:{show:Boolean,title:String,subtitle:String},setup(a){return(ne,t)=>(n(),Ne(pt,{name:"bottom-sheet"},{default:Fe(()=>[a.show?(n(),l("div",$o,[t[1]||(t[1]=e("div",{class:"absolute inset-0 bg-black bg-opacity-50"},null,-1)),e("div",Ao,[t[0]||(t[0]=e("div",{class:"flex justify-center py-3"},[e("div",{class:"w-12 h-1.5 bg-gray-300 rounded-full"})],-1)),e("div",Vo,[e("h3",To,z(a.title),1),a.subtitle?(n(),l("p",Mo,z(a.subtitle),1)):c("",!0)]),e("div",Eo,[aa(ne.$slots,"default",{},void 0,!0)]),ne.$slots.footer?(n(),l("div",Uo,[aa(ne.$slots,"footer",{},void 0,!0)])):c("",!0)])])):c("",!0)]),_:3}))}},pa=He(No,[["__scopeId","data-v-fd942535"]]),Do={class:"space-y-4"},Po={key:0,class:"mt-2"},Lo={key:1,class:"mt-2"},Ro={key:2,class:"mt-2"},jo={key:3,class:"mt-2"},Bo={key:4,class:"mt-2"},Fo={class:"text-sm font-medium text-gray-700 mb-2"},Oo={key:0,class:"text-red-500"},zo={key:0,class:"text-xs text-red-500"},qo=["type","name","value","checked","onChange"],Ko={key:6,class:"mt-4"},Ho={class:"text-sm font-medium text-gray-700 mb-2"},Go={key:0,class:"text-red-500"},Wo={key:0,class:"text-xs text-red-500"},Yo={key:7,class:"space-y-2"},Zo={key:0,class:"text-red-500"},Jo={key:1,class:"text-xs text-red-500"},Xo={class:"flex gap-2"},Qo=["disabled"],Ot={__name:"RadioOptionModal",props:{show:Boolean,title:String,subtitle:String,name:String,options:{type:Array,default:()=>[]},selectedValue:[String,Array],notesValue:String,imagesValue:{type:Array,default:()=>[]},pointId:[String,Number],inspectionId:[String,Number],showTextarea:{type:Boolean,default:!0},showImageUpload:{type:Boolean,default:!0},selectedPoint:Object,point:Object},emits:["update:selectedValue","update:notesValue","update:imagesValue","close","save","hapus","saveTextarea","saveImage","saveText","saveNumber","saveAccount","saveDate"],setup(a,{emit:ne}){const t=a,S=ne,g=f=>S("hapus",f),A=se(()=>Array.isArray(t.selectedValue)?t.options.find(f=>t.selectedValue.includes(f.value)):t.options.find(f=>f.value===t.selectedValue)),b=se(()=>{if(Array.isArray(t.selectedValue))return t.options.filter(f=>t.selectedValue.includes(f.value));if(t.selectedValue){const f=typeof t.selectedValue=="string"?t.selectedValue.split(",").map(p=>p.trim()):[t.selectedValue];return t.options.filter(p=>f.includes(p.value))}return[]}),$=se(()=>{var f;if(Array.isArray(t.selectedValue))return b.value.some(p=>{var M;return p.multi&&((M=p.settings)==null?void 0:M.show_textarea)});{const p=t.options.find(M=>M.value===t.selectedValue);return(f=p==null?void 0:p.settings)==null?void 0:f.show_textarea}}),_=se(()=>{var f;if(Array.isArray(t.selectedValue))return b.value.some(p=>{var M;return p.multi&&((M=p.settings)==null?void 0:M.show_image_upload)});{const p=t.options.find(M=>M.value===t.selectedValue);return(f=p==null?void 0:p.settings)==null?void 0:f.show_image_upload}}),j=se(()=>{var f;if(Array.isArray(t.selectedValue)){const p=b.value.filter(H=>{var Z;return H.multi&&((Z=H.settings)==null?void 0:Z.show_textarea)});if(p.length===0)return null;const M={...p[0].settings},K=[];p.forEach(H=>{var Z;(Z=H.settings)!=null&&Z.damage_options&&K.push(...H.settings.damage_options)});const E=K.filter((H,Z,F)=>Z===F.findIndex(I=>I.value===H.value));return M.damage_options=E,{...p[0],settings:M}}else{const p=t.options.find(M=>M.value===t.selectedValue);return(f=p==null?void 0:p.settings)!=null&&f.show_textarea?p:null}}),k=se(()=>{var f;if(Array.isArray(t.selectedValue))return b.value.find(p=>{var M;return p.multi&&((M=p.settings)==null?void 0:M.show_image_upload)});{const p=t.options.find(M=>M.value===t.selectedValue);return(f=p==null?void 0:p.settings)!=null&&f.show_image_upload?p:null}});se(()=>b.value.find(f=>{var p;return f.multi&&((p=f.settings)==null?void 0:p.show_textarea)})),se(()=>b.value.find(f=>{var p;return f.multi&&((p=f.settings)==null?void 0:p.show_image_upload)}));const D=f=>Array.isArray(t.selectedValue)?t.selectedValue.includes(f.value):t.selectedValue?(typeof t.selectedValue=="string"?t.selectedValue.split(",").map(M=>M.trim()):[t.selectedValue]).includes(f.value):!1,T=(f,p)=>{let M;if(f.multi){const K=Array.isArray(t.selectedValue)?t.selectedValue:[];p.target.checked?M=[...K,f.value]:M=K.filter(E=>E!==f.value)}else M=f.value;S("update:selectedValue",M)},ee=se(()=>{var p,M,K,E,H,Z,F;if(t.point.input_type==="text"&&(!((p=t.notesValue)!=null&&p.trim())||t.point.settings.min_length&&t.notesValue.length<t.point.settings.min_length||t.point.settings.max_length&&t.notesValue.length>t.point.settings.max_length)||t.point.input_type==="number"&&(!((M=t.notesValue)!=null&&M.trim())||t.point.settings.min&&t.notesValue.length<t.point.settings.min||t.point.settings.max&&t.notesValue.length>t.point.settings.max)||t.point.input_type==="account"&&(!((K=t.notesValue)!=null&&K.trim())||t.point.settings.min_value&&t.notesValue.length<t.point.settings.min_value||t.point.settings.max_value&&t.notesValue.length>t.point.settings.max_value)||t.point.input_type==="date"&&(!((E=t.notesValue)!=null&&E.trim())||t.point.settings.min_date&&t.notesValue.length<t.point.settings.min_date||t.point.settings.max_date&&t.notesValue.length>t.point.settings.max_date))return!1;if(t.point.input_type==="imageTOradio"){if(t.imagesValue.length===0)return!1;const I=t.imagesValue.some(de=>de.status==="error"),L=t.imagesValue.some(de=>de.status==="uploading");if(I||L)return!1}if(t.options.length&&(!t.selectedValue||Array.isArray(t.selectedValue)&&t.selectedValue.length===0))return!1;const f=A.value;if(t.showTextarea&&((H=f==null?void 0:f.settings)!=null&&H.show_textarea)&&(!((Z=t.notesValue)!=null&&Z.trim())||f.settings.min_length&&t.notesValue.length<f.settings.min_length||f.settings.max_length&&t.notesValue.length>f.settings.max_length))return!1;if(t.showImageUpload&&((F=f==null?void 0:f.settings)!=null&&F.show_image_upload)){if(t.imagesValue.length===0||f.settings.max_files&&t.imagesValue.length>f.settings.max_files)return!1;const I=t.imagesValue.some(de=>de.status==="error"),L=t.imagesValue.some(de=>de.status==="uploading");if(I||L)return!1}return!0});return(f,p)=>(n(),Ne(pa,{show:a.show,title:a.title,subtitle:a.subtitle,onClose:p[17]||(p[17]=M=>f.$emit("close"))},{footer:Fe(()=>[a.selectedPoint?(n(),l("button",{key:0,onClick:p[14]||(p[14]=M=>g(a.pointId)),class:"flex items-center justify-center text-red-600 hover:text-red-800 mb-3"},p[19]||(p[19]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6M9 7h6m2-3H7m5 0v3"})],-1),Ue(" Hapus Data ")]))):c("",!0),e("div",Xo,[e("button",{type:"button",onClick:p[15]||(p[15]=M=>f.$emit("close")),class:"flex-1 px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50"}," Batal "),e("button",{type:"button",onClick:p[16]||(p[16]=M=>f.$emit("save")),disabled:!ee.value,class:"flex-1 px-4 py-2 bg-indigo-600 border border-transparent rounded-md shadow-sm text-white hover:bg-indigo-700 disabled:bg-gray-300 disabled:cursor-not-allowed"}," Simpan ",8,Qo)])]),default:Fe(()=>{var M,K,E,H,Z,F,I,L,de,C,h,s,x,O,ue,Y,W,ie,pe,N,U,R,q,Q,oe,ve,ce,$e,_e,fe,Se,Ae,we,Te,Me,Oe;return[e("div",Do,[a.point.input_type==="text"?(n(),l("div",Po,[Ve(ua,{"model-value":a.notesValue,required:(M=a.point.settings)==null?void 0:M.is_required,"min-length":(K=a.point.settings)==null?void 0:K.min_length,"max-length":(E=a.point.settings)==null?void 0:E.max_length,allowSpace:(H=a.point.settings)==null?void 0:H.allow_space,textTransform:(Z=a.point.settings)==null?void 0:Z.text_transform,placeholder:((F=a.point.settings)==null?void 0:F.placeholder)||"Masukan text",error:f.error,"onUpdate:modelValue":p[0]||(p[0]=i=>f.$emit("update:notesValue",i)),onSave:p[1]||(p[1]=i=>f.$emit("saveText",i))},null,8,["model-value","required","min-length","max-length","allowSpace","textTransform","placeholder","error"])])):c("",!0),a.point.input_type==="number"?(n(),l("div",Lo,[Ve(ra,{"model-value":a.notesValue,required:(I=a.point.settings)==null?void 0:I.is_required,min:(L=a.point.settings)==null?void 0:L.min,max:(de=a.point.settings)==null?void 0:de.max,step:((C=a.point.settings)==null?void 0:C.step)||1,placeholder:((h=a.point.settings)==null?void 0:h.placeholder)||"Masukan number",error:f.error,"onUpdate:modelValue":p[2]||(p[2]=i=>f.$emit("update:notesValue",i)),onSave:p[3]||(p[3]=i=>f.$emit("saveNumber",i))},null,8,["model-value","required","min","max","step","placeholder","error"])])):c("",!0),a.point.input_type==="account"?(n(),l("div",Ro,[Ve(ca,{"model-value":a.notesValue,required:(s=a.point.settings)==null?void 0:s.is_required,placeholder:((x=a.point.settings)==null?void 0:x.placeholder)||"Masukkan nilai",error:f.error,"point-id":a.pointId,settings:a.point.settings,"onUpdate:modelValue":p[4]||(p[4]=i=>f.$emit("update:notesValue",i)),onSave:p[5]||(p[5]=i=>f.$emit("saveAccount",i))},null,8,["model-value","required","placeholder","error","point-id","settings"])])):c("",!0),a.point.input_type==="date"?(n(),l("div",jo,[Ve(da,{"model-value":a.notesValue,required:(O=a.point.settings)==null?void 0:O.is_required,"min-date":(ue=a.point.settings)==null?void 0:ue.min_date,"max-date":(Y=a.point.settings)==null?void 0:Y.max_date,error:f.error,"onUpdate:modelValue":p[6]||(p[6]=i=>f.$emit("update:notesValue",i)),onSave:p[7]||(p[7]=i=>f.$emit("saveDate",i))},null,8,["model-value","required","min-date","max-date","error"])])):c("",!0),a.point.input_type==="imageTOradio"?(n(),l("div",Bo,[e("h4",Fo,[(W=a.point.settings)!=null&&W.required?(n(),l("span",Oo,"*")):c("",!0)]),Ve(Ft,{"model-value":a.imagesValue,"point-id":a.pointId,point:a.point.inspection_point,"inspection-id":a.inspectionId,settings:a.point.settings,"onUpdate:modelValue":p[8]||(p[8]=i=>f.$emit("update:imagesValue",i)),onSave:p[9]||(p[9]=i=>f.$emit("saveImage",i))},null,8,["model-value","point-id","point","inspection-id","settings"]),(ie=a.point.settings)!=null&&ie.required&&a.imagesValue.length===0?(n(),l("p",zo," Foto wajib diupload ")):c("",!0)])):c("",!0),a.options.length?(n(),l("div",{key:5,class:re(["grid gap-2 w-full mt-2",`grid-cols-${Math.min(a.options.length,3)}`])},[(n(!0),l(Ee,null,De(a.options,(i,m)=>(n(),l("label",{key:m,class:"cursor-pointer"},[e("input",{type:i.multi?"checkbox":"radio",name:i.multi?`checkbox-${a.name}`:a.name,value:i.value,checked:D(i),onChange:d=>T(i,d),class:"hidden peer"},null,40,qo),e("div",{class:re(["w-full px-4 py-3 border rounded-lg text-center transition-colors whitespace-nowrap text-sm font-medium",{"border-indigo-500 bg-indigo-50 text-indigo-700":D(i),"border-gray-300 text-gray-700 hover:bg-gray-50":!D(i)}])},z(i.label),3)]))),128))],2)):c("",!0),_.value?(n(),l("div",Ko,[e("h4",Ho,[p[18]||(p[18]=Ue(" Upload Foto ")),(N=(pe=k.value)==null?void 0:pe.settings)!=null&&N.required?(n(),l("span",Go,"*")):c("",!0)]),Ve(Ft,{"model-value":a.imagesValue,"point-id":a.pointId,point:a.point,"inspection-id":a.inspectionId,settings:(U=k.value)==null?void 0:U.settings,"onUpdate:modelValue":p[10]||(p[10]=i=>f.$emit("update:imagesValue",i)),onSave:p[11]||(p[11]=i=>f.$emit("saveImage",i))},null,8,["model-value","point-id","point","inspection-id","settings"]),(q=(R=k.value)==null?void 0:R.settings)!=null&&q.required&&a.imagesValue.length===0?(n(),l("p",Wo," Foto wajib diupload ")):c("",!0)])):c("",!0),$.value?(n(),l("div",Yo,[(oe=(Q=j.value)==null?void 0:Q.settings)!=null&&oe.required?(n(),l("span",Zo,"*")):c("",!0),Ve(ga,{"model-value":a.notesValue,"point-id":a.pointId,"inspection-id":a.inspectionId,settings:(ve=j.value)==null?void 0:ve.settings,required:($e=(ce=j.value)==null?void 0:ce.settings)==null?void 0:$e.required,"min-length":(fe=(_e=j.value)==null?void 0:_e.settings)==null?void 0:fe.min_length,"max-length":(Ae=(Se=j.value)==null?void 0:Se.settings)==null?void 0:Ae.max_length,placeholder:((Te=(we=j.value)==null?void 0:we.settings)==null?void 0:Te.placeholder)||"Tambahkan keterangan...","onUpdate:modelValue":p[12]||(p[12]=i=>f.$emit("update:notesValue",i)),onSave:p[13]||(p[13]=i=>f.$emit("saveTextarea",i))},null,8,["model-value","point-id","inspection-id","settings","required","min-length","max-length","placeholder"]),(Oe=(Me=j.value)==null?void 0:Me.settings)!=null&&Oe.required&&!a.notesValue?(n(),l("p",Jo," Keterangan wajib diisi ")):c("",!0)])):c("",!0)])]}),_:1},8,["show","title","subtitle"]))}},ei={class:"mt-2 space-y-2"},ti=["type","name","value","checked","onChange","required"],ai={key:0,class:"p-2 rounded-lg bg-gray-50"},si={key:0,class:"mt-2"},ni={class:"flex gap-2 overflow-x-auto",style:{"scrollbar-width":"none"}},oi=["src"],ii={key:0,class:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center text-white text-xs"},li={key:1,class:"mt-2"},ri={class:"text-sm text-gray-600"},ui={key:2,class:"mt-2 text-sm text-red-600"},di={__name:"InputRadio",props:{modelValue:[String,Array],required:Boolean,error:String,point:Object,pointId:[String,Number],pointName:String,subtitle:String,inspectionId:[String,Number],options:{type:Array,default:()=>[]},selectedPoint:Object,notes:{type:String,default:""},images:{type:Array,default:()=>[]}},emits:["update:modelValue","update:notes","update:images","save","hapus"],setup(a,{emit:ne}){const t=a,S=ne,g=y(t.notes),A=y([...t.images]),b=y(!1),$=y(""),_=y([]),j=y(""),k=y([]);se(()=>t.options.find(I=>I.value===t.modelValue));const D=se(()=>Array.isArray(t.modelValue)?t.options.filter(I=>t.modelValue.includes(I.value)):t.modelValue?[t.options.find(I=>I.value===t.modelValue)].filter(Boolean):[]),T=I=>Array.isArray(t.modelValue)?t.modelValue.includes(I.value):t.modelValue?(typeof t.modelValue=="string"?t.modelValue.split(",").map(de=>de.trim()):[t.modelValue]).includes(I.value):!1,ee=I=>I.settings&&(I.settings.show_textarea||I.settings.show_image_upload);be(()=>t.notes,I=>{g.value=I}),be(()=>t.images,I=>{A.value=[...I]}),be(()=>t.modelValue,I=>{I?j.value=Array.isArray(I)?[...I]:I:j.value=""});const f=(I,L)=>{let de;if(I.multi){const C=Array.isArray(t.modelValue)?t.modelValue:[];L.target.checked?de=[...C,I.value]:de=C.filter(h=>h!==I.value)}else de=I.value;S("update:modelValue",de),ee(I)?M():S("save",{pointId:t.pointId,inspectionId:t.inspectionId,value:de,notes:"",images:[]})},p=I=>I.preview||(I.image_path?`/${I.image_path}`:I),M=()=>{j.value=t.modelValue,$.value=g.value,_.value=[...A.value],k.value=[...A.value],b.value=!0},K=()=>{$.value="",_.value=[],j.value=Array.isArray(t.modelValue)?[...t.modelValue]:t.modelValue,b.value=!1},E=I=>{_.value=I,A.value=[...I],S("update:images",[...I]),S("save",{pointId:t.pointId,inspectionId:t.inspectionId,value:t.modelValue,notes:g.value,images:[...I]})},H=I=>{},Z=()=>{j.value!==t.modelValue&&S("update:modelValue",j.value),g.value=$.value,S("update:notes",$.value),A.value=[..._.value],S("update:images",[..._.value]),S("save",{pointId:t.pointId,inspectionId:t.inspectionId,value:j.value,notes:$.value,images:_.value}),b.value=!1},F=I=>{j.value="",$.value="",_.value=[],g.value="",A.value=[],S("update:modelValue",""),S("update:notes",""),S("update:images",[]),S("hapus",I),b.value=!1};return(I,L)=>{var de;return n(),l("div",ei,[e("div",{class:re(["grid gap-2 w-full mt-2",`grid-cols-${Math.min(a.options.length,3)}`])},[(n(!0),l(Ee,null,De(a.options,(C,h)=>(n(),l("label",{key:h,class:"cursor-pointer"},[e("input",{type:C.multi?"checkbox":"radio",name:C.multi?`checkbox-${a.pointId}`:"radio-"+a.pointId,value:C.value,checked:T(C),onChange:s=>f(C,s),class:"hidden peer",required:a.required&&!C.multi},null,40,ti),e("div",{class:re(["w-full px-4 py-3 border rounded-lg text-center transition-colors whitespace-nowrap text-sm font-medium",{"border-indigo-500 bg-indigo-50 text-indigo-700":T(C),"border-gray-300 text-gray-700 hover:bg-gray-50":!T(C)}])},z(C.label),3)]))),128))],2),a.modelValue&&D.value.length>0&&D.value.some(C=>ee(C))?(n(),l("div",ai,[e("div",{class:"flex justify-between items-start"},[L[4]||(L[4]=e("h4",{class:"text-sm font-medium text-gray-700"},"Detail : ",-1)),e("button",{onClick:M,class:"text-sm text-indigo-600 hover:text-indigo-800"}," Edit ")]),a.images.length>0&&D.value.some(C=>{var h;return(h=C.settings)==null?void 0:h.show_image_upload})?(n(),l("div",si,[e("div",ni,[(n(!0),l(Ee,null,De(a.images,(C,h)=>(n(),l("div",{key:h,class:"relative flex-shrink-0",style:{width:"130px",height:"130px"}},[e("img",{src:p(C),class:"w-full h-full object-cover rounded"},null,8,oi),h===3&&a.images.length>4?(n(),l("span",ii," +"+z(a.images.length-4),1)):c("",!0)]))),128))])])):c("",!0),a.notes&&D.value.some(C=>{var h;return(h=C.settings)==null?void 0:h.show_textarea})?(n(),l("div",li,[e("p",ri,z(a.notes),1)])):c("",!0)])):c("",!0),b.value?(n(),Ne(Ot,{key:(de=a.selectedPoint)==null?void 0:de.id,show:b.value,title:a.pointName||"Detail",subtitle:a.subtitle||"",name:"modal-radio-"+a.pointId,options:a.options,"selected-value":j.value,"notes-value":$.value,"images-value":_.value,"point-id":a.pointId,point:a.point,"inspection-id":a.inspectionId,"selected-point":a.selectedPoint,"onUpdate:selectedValue":L[0]||(L[0]=C=>j.value=C),"onUpdate:notesValue":L[1]||(L[1]=C=>$.value=C),"onUpdate:imagesValue":L[2]||(L[2]=C=>E(C)),onClose:K,onSave:Z,onSaveTextarea:I.handleTextareaSave,onSaveImage:H,onHapus:L[3]||(L[3]=C=>F(a.pointId))},null,8,["show","title","subtitle","name","options","selected-value","notes-value","images-value","point-id","point","inspection-id","selected-point","onSaveTextarea"])):c("",!0),a.error?(n(),l("p",ui,z(a.error),1)):c("",!0)])}}},ci={class:"mt-2 space-y-2"},gi={key:0,class:"flex flex-wrap gap-3"},pi={key:1,class:"p-2"},mi={key:0,class:"mt-2"},vi={class:"flex gap-2 overflow-x-auto scrollbar-hide"},fi=["src"],hi={key:0,class:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center text-white text-xs"},bi=["type","name","value","checked"],yi={key:1,class:"mt-2"},xi={class:"text-sm text-gray-600"},wi={key:3,class:"mt-2 text-sm text-red-600"},ki={__name:"InputImageToRadio",props:{modelValue:[String,Array],required:Boolean,error:String,point:Object,pointId:[String,Number],pointName:String,subtitle:String,inspectionId:[String,Number],options:{type:Array,default:()=>[]},selectedPoint:Object,notes:{type:String,default:""},images:{type:Array,default:()=>[]}},emits:["update:modelValue","update:notes","update:images","save","hapus"],setup(a,{emit:ne}){const t=a,S=ne,g=y(t.notes),A=y([...t.images]),b=y(!1),$=y(""),_=y([]),j=y(""),k=y([]),D=se(()=>{if(Array.isArray(t.modelValue))return t.options.find(F=>t.modelValue.includes(F.value));if(t.modelValue){const F=typeof t.modelValue=="string"?t.modelValue.split(",").map(I=>I.trim()):[t.modelValue];return t.options.find(I=>F.includes(I.value))}return null}),T=se(()=>{if(Array.isArray(t.modelValue))return t.options.filter(F=>t.modelValue.includes(F.value));if(t.modelValue){const F=typeof t.modelValue=="string"?t.modelValue.split(",").map(I=>I.trim()):[t.modelValue];return t.options.filter(I=>F.includes(I.value))}return[]}),ee=se(()=>T.value.some(F=>{var I;return F.multi&&((I=F.settings)==null?void 0:I.show_textarea)}));se(()=>T.value.find(F=>{var I;return F.multi&&((I=F.settings)==null?void 0:I.show_textarea)}));const f=F=>Array.isArray(t.modelValue)?t.modelValue.includes(F.value):t.modelValue?(typeof t.modelValue=="string"?t.modelValue.split(",").map(L=>L.trim()):[t.modelValue]).includes(F.value):!1,p=F=>F.preview||(F.image_path?`/${F.image_path}`:F);be(()=>t.notes,F=>{g.value=F});const M=()=>{j.value=t.modelValue||"",$.value=g.value,_.value=[...A.value],k.value=[...A.value],b.value=!0},K=()=>{$.value="",_.value=[],j.value="",b.value=!1},E=F=>{_.value=F,A.value=[...F],S("update:images",[...F]),S("save",{pointId:t.pointId,inspectionId:t.inspectionId,value:t.modelValue,notes:g.value,images:[...F]})},H=()=>{j.value!==t.modelValue&&S("update:modelValue",j.value),g.value=$.value,S("update:notes",$.value),A.value=[..._.value],S("update:images",[..._.value]),S("save",{pointId:t.pointId,inspectionId:t.inspectionId,value:j.value,notes:$.value,images:_.value}),b.value=!1},Z=F=>{j.value="",$.value="",_.value=[],g.value="",A.value=[],S("update:modelValue",""),S("update:notes",""),S("update:images",[]),S("hapus",F),b.value=!1};return(F,I)=>{var L,de,C;return n(),l("div",ci,[!a.modelValue&&A.value.length===0&&!g.value?(n(),l("div",gi,[e("div",{class:"relative w-28 h-28 border-2 border-dashed rounded-lg flex items-center justify-center cursor-pointer overflow-hidden",onClick:M},I[4]||(I[4]=[e("div",{class:"flex flex-col items-center text-gray-400"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-8 w-8 mb-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})]),e("span",{class:"text-xs font-medium"},"Tambah")],-1)]))])):(n(),l("div",pi,[e("div",{class:"flex justify-between items-start"},[I[5]||(I[5]=e("h4",{class:"text-sm font-medium text-gray-700"},"Detail :",-1)),e("button",{onClick:M,class:"text-sm text-indigo-600 hover:text-indigo-800"}," Edit ")]),A.value.length>0?(n(),l("div",mi,[e("div",vi,[(n(!0),l(Ee,null,De(A.value,(h,s)=>(n(),l("div",{key:s,class:"relative flex-shrink-0",style:{width:"130px",height:"130px"}},[e("img",{src:p(h),class:"w-full h-full object-cover rounded"},null,8,fi),s===3&&A.value.length>4?(n(),l("span",hi," +"+z(A.value.length-4),1)):c("",!0)]))),128))])])):c("",!0),e("div",{class:re(["grid gap-2 w-full mt-2",`grid-cols-${Math.min(a.options.length,3)}`])},[(n(!0),l(Ee,null,De(a.options,(h,s)=>(n(),l("label",{key:s,class:"cursor-pointer"},[e("input",{type:h.multi?"checkbox":"radio",name:h.multi?`checkbox-${a.pointId}`:`radio-${a.pointId}`,value:h.value,checked:f(h),disabled:!0,class:"hidden peer"},null,8,bi),e("div",{class:re(["w-full px-4 py-3 border rounded-lg text-center transition-colors whitespace-nowrap text-sm font-medium",{"border-indigo-500 bg-indigo-50 text-indigo-700":f(h),"border-gray-300 text-gray-700 hover:bg-gray-50":!f(h)}])},z(h.label),3)]))),128))],2),g.value&&((de=(L=D.value)==null?void 0:L.settings)!=null&&de.show_textarea||ee.value)?(n(),l("div",yi,[e("p",xi,z(g.value),1)])):c("",!0)])),b.value?(n(),Ne(Ot,{key:(C=a.selectedPoint)==null?void 0:C.id,show:b.value,title:a.pointName||"Detail",subtitle:a.subtitle||"",name:"modal-radio-"+a.pointId,options:a.options,"selected-value":j.value,"notes-value":$.value,"images-value":_.value,"point-id":a.pointId,point:a.point,"inspection-id":a.inspectionId,"selected-point":a.selectedPoint,"onUpdate:selectedValue":I[0]||(I[0]=h=>j.value=h),"onUpdate:notesValue":I[1]||(I[1]=h=>$.value=h),"onUpdate:imagesValue":I[2]||(I[2]=h=>E(h)),onClose:K,onSave:H,onHapus:I[3]||(I[3]=h=>Z(a.pointId))},null,8,["show","title","subtitle","name","options","selected-value","notes-value","images-value","point-id","point","inspection-id","selected-point"])):c("",!0),a.error?(n(),l("p",wi,z(a.error),1)):c("",!0)])}}},Ii={class:"text-base font-semibold text-indigo-700"},_i={key:0,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},Ci={key:1,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},Si={class:"text-base font-semibold text-indigo-700"},$i={class:"p-4 space-y-4"},Ai={key:0,class:"flex justify-end py-1"},Vi=["onClick"],Ti={key:1,class:"space-y-2"},Mi={class:"flex items-start justify-between"},Ei={class:"flex-1"},Ui={class:"block text-sm font-medium text-gray-900"},Ni={class:"font-bold"},Di={key:0,class:"text-red-500"},Pi={key:1,class:"italic text-xs text-gray-400 ml-2"},Li={key:0,class:"mt-1"},Ri={key:0,class:"inline-flex items-center px-2 py-1 rounded text-xs font-medium bg-green-100 text-green-800"},ji={key:0},Bi={key:1},Fi={key:2},Oi={key:3},zi={key:4},qi={key:0,class:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-green-100 text-green-800"},Ki={key:9,class:"p-3 bg-gray-100 rounded text-sm text-gray-600"},Hi={class:"text-xs mt-1 list-disc list-inside"},Gi={key:0},Wi={key:1},Yi={key:2},Zi={key:3},Ji={key:4},Xi={key:0,class:"text-center py-8 text-gray-500"},Qi={key:0,class:"text-xs text-gray-400"},el={__name:"CategorySection",props:{category:Object,form:Object,head:Object,inspectionId:String,selectedPoint:Object,car:Object},emits:["updateResult","removeImage","hapusPoint"],setup(a,{emit:ne}){const t=a,S=ne,g=Rt("vehicleFeatures",y(null));g.value=JSON.parse(localStorage.getItem("vehicle_features")||"{}"),Pt("vehicleFeatures",g);const A=y(!1),b=y([]),$=y(!0),_=y(null),j=xa(),k={MT:"Manual Transmission (MT)",AT:"Automatic Transmission (AT)",CVT:"Continuously Variable Transmission (CVT)","e-CVT":"Electronic CVT (e-CVT)",DCT:"Dual Clutch Transmission (DCT)",AMT:"Automated Manual Transmission (AMT)",IVT:"Intelligent Variable Transmission (IVT)",SSG:"Seamless Shift Gearbox (SSG)",AGS:"Auto Gear Shift (AGS)",DHT:"Dedicated Hybrid Transmission (DHT)"};nt(()=>{const C=new IntersectionObserver(([h])=>{$.value=h.isIntersecting},{threshold:.1});_.value&&C.observe(_.value),wt(()=>{_.value&&C.unobserve(_.value)})});const D=()=>{A.value=!A.value,A.value||(b.value=[])},T=se(()=>(t.category.points||[]).some(C=>C.is_default===!1)),ee=C=>!C||!Array.isArray(C)?[]:C.map(h=>k[h]||h),f=C=>{var O,ue;const h=C.settings;if(!p(C))return!0;const s=(O=t.car)==null?void 0:O.transmission,x=(ue=t.car)==null?void 0:ue.fuel_type;return!(h.transmission&&Array.isArray(h.transmission)&&h.transmission.length>0&&s&&!h.transmission.includes(s)||h.fuel_type&&h.fuel_type.trim()!==""&&x&&h.fuel_type!==x||h.rear_door&&(!g.value||!g.value.rear_door)||h.pick_up&&(!g.value||!g.value.pick_up)||h.box&&(!g.value||!g.value.box))},p=C=>{const h=C.settings;return!!(h!=null&&h.transmission&&Array.isArray(h.transmission)&&h.transmission.length>0||h!=null&&h.fuel_type&&h.fuel_type.trim()!==""||h!=null&&h.rear_door||h!=null&&h.pick_up||h!=null&&h.box)},M=C=>p(C)&&(A.value||f(C)),K=se(()=>{const C=t.category.points||[],h=[];let s=[];return A.value?t.category.isDamageMenu?C.filter(x=>{var O;return x.is_default||H((O=x.inspection_point)==null?void 0:O.id)||A.value}):C:t.category.isDamageMenu?C.filter(x=>{var ue;const O=(ue=x.inspection_point)==null?void 0:ue.id;return H(O)||x.is_default||b.value.includes(O)}):(C.forEach(x=>{var N;const O=(N=x.inspection_point)==null?void 0:N.id,ue=H(O),Y=b.value.includes(O),ie=!p(x)||f(x);(x.is_default||ue||Y)&&ie?(s.length>0&&(h.push({is_link:!0,count:s.length,hiddenIds:s.map(U=>U.inspection_point.id)}),s.forEach(U=>{b.value.includes(U.inspection_point.id)&&h.push(U)}),s=[]),h.push(x)):(!p(x)||f(x))&&s.push(x)}),s.length>0&&(h.push({is_link:!0,count:s.length,hiddenIds:s.map(x=>x.inspection_point.id)}),s.forEach(x=>{b.value.includes(x.inspection_point.id)&&h.push(x)})),h.filter(x=>{var O,ue;return x.is_link||x.is_default||H((O=x.inspection_point)==null?void 0:O.id)||b.value.includes((ue=x.inspection_point)==null?void 0:ue.id)}))});se(()=>K.value.filter(C=>!C.is_link));const E=C=>{A.value=!1,C.forEach(h=>{b.value.includes(h)||b.value.push(h)})},H=C=>{if(!C)return!1;const h=j.props.existingResults[C]!==void 0,s=j.props.existingImages[C]&&j.props.existingImages[C].length>0,x=t.form.results[C]&&(t.form.results[C].status||t.form.results[C].note),O=t.form.images[C]&&t.form.images[C].length>0;return h||s||x||O},Z=[{value:"good",label:"Good"},{value:"bad",label:"Bad"},{value:"na",label:"N/A"}],F=C=>{var x,O,ue,Y,W,ie,pe,N,U;const h=t.form.results[(x=C.inspection_point)==null?void 0:x.id],s=t.form.images[(O=C.inspection_point)==null?void 0:O.id];if(!h)return!1;switch(C.input_type){case"text":case"number":case"date":case"account":case"textarea":return!!h.note;case"select":case"radio":if(!h.status)return!1;const R=(Y=(ue=C.settings)==null?void 0:ue.radios)==null?void 0:Y.find(Q=>Q.value===h.status);return!(R!=null&&R.settings&&(R.settings.show_textarea&&!((W=h.note)!=null&&W.trim())||R.settings.show_image_upload&&(s==null?void 0:s.length)===0));case"imageTOradio":if((s==null?void 0:s.length)===0||!h.status)return!1;const q=(pe=(ie=C.settings)==null?void 0:ie.radios)==null?void 0:pe.find(Q=>Q.value===h.status);return!(q!=null&&q.settings&&q.settings.show_textarea&&!((N=h.note)!=null&&N.trim()));case"image":return(s==null?void 0:s.length)>0;default:return!!h.status||!!((U=h.note)!=null&&U.trim())}},I=(C,h,s)=>{S("updateResult",{pointId:C,type:s,value:h})},L=C=>{console.log("Save result for point:",C)},de=C=>{S("hapusPoint",C)};return be(()=>t.form.results,C=>{},{deep:!0}),be(()=>t.form.images,C=>{},{deep:!0}),be(()=>t.car,C=>{console.log("Car data updated:",C)},{deep:!0}),be(g,C=>{console.log("Vehicle features updated:",C)},{deep:!0}),(C,h)=>(n(),l(Ee,null,[t.head==="vertical"?(n(),l("div",{key:0,class:re(["px-6 py-2 border-b flex items-center justify-between bg-indigo-200","fixed top-0 left-0 right-0 z-20"])},[e("h4",Ii,z(a.category.name),1),T.value?(n(),l("button",{key:0,onClick:D,class:"text-sm text-indigo-700 hover:underline focus:outline-none"},z(A.value?"Sembunyikan Semua":"Tampilkan Point Lain"),1)):c("",!0)])):c("",!0),e("div",{class:re(["bg-gray-50 shadow-lg rounded-xl overflow-hidden border border-gray-100",t.head==="vertical"?"pt-6":""])},[!$.value&&T.value?(n(),l("button",{key:0,onClick:D,class:"fixed top-3 right-2 z-10 bg-indigo-600 text-white p-2 rounded-full shadow-lg"},[A.value?(n(),l("svg",_i,h[0]||(h[0]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"},null,-1),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.477 0 8.268 2.943 9.542 7-1.274 4.057-5.065 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"},null,-1)]))):(n(),l("svg",Ci,h[1]||(h[1]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.477 0-8.268-2.943-9.542-7a9.956 9.956 0 012.006-3.362M9.88 9.88a3 3 0 104.24 4.24M6.1 6.1l11.8 11.8"},null,-1)])))])):c("",!0),t.head==="horizontal"?(n(),l("div",{key:1,ref_key:"categoryHeader",ref:_,class:"bg-indigo-200 px-6 py-2 border-b flex items-center justify-between"},[e("h4",Si,z(a.category.name),1),T.value?(n(),l("button",{key:0,onClick:D,class:"text-sm text-indigo-700 hover:underline focus:outline-none"},z(A.value?"Sembunyikan":"Tampilkan Point Lain"),1)):c("",!0)],512)):c("",!0),e("div",$i,[(n(!0),l(Ee,null,De(K.value,(s,x)=>{var O,ue,Y,W,ie,pe,N,U,R,q,Q,oe,ve,ce,$e,_e,fe,Se,Ae,we,Te,Me,Oe,i,m,d,P,G,me,v,u,J,w,te,ye,ke,Ie,je,Ze,kt,Je,mt,vt,ft,It,ot,ht,bt,it,Re,Ge,ze,lt,_t,rt,Xe,ut,Qe,et,Ct,St,$t,tt,At,Vt,Tt,Mt,Et,Ut;return n(),l("div",{key:x,class:re(["space-y-2 last:border-0 last:pb-0",s.is_link?"pb-0":"pb-2 border-b border-gray-100"])},[s.is_link?(n(),l("div",Ai,[e("button",{onClick:X=>E(s.hiddenIds),class:"text-sm font-medium text-indigo-600 hover:text-indigo-800 hover:underline focus:outline-none"}," Tampilkan "+z(s.count)+" Point Tersembunyi ",9,Vi)])):(n(),l("div",Ti,[e("div",Mi,[e("div",Ei,[e("label",Ui,[e("span",Ni,z((O=s.inspection_point)==null?void 0:O.name),1),(ue=s.settings)!=null&&ue.is_required?(n(),l("span",Di,"*")):c("",!0),!s.is_default&&!H((Y=s.inspection_point)==null?void 0:Y.id)?(n(),l("span",Pi," (opsional) ")):c("",!0)]),M(s)?(n(),l("div",Li,[p(s)?(n(),l("div",Ri,[(W=s.settings)!=null&&W.transmission?(n(),l("div",ji,z(s.settings.transmission.join(", ")),1)):c("",!0),(ie=s.settings)!=null&&ie.fuel_type?(n(),l("div",Bi,z(s.settings.fuel_type),1)):c("",!0),(pe=s.settings)!=null&&pe.rear_door?(n(),l("div",Fi," Pintu Belakang ")):c("",!0),(N=s.settings)!=null&&N.pick_up?(n(),l("div",Oi," Tipe Pick Up ")):c("",!0),(U=s.settings)!=null&&U.box?(n(),l("div",zi," Memiliki Box ")):c("",!0)])):c("",!0)])):c("",!0)]),F(s)?(n(),l("span",qi," ✓ ")):c("",!0)]),s.input_type==="text"&&f(s)?(n(),Ne(ua,{key:0,modelValue:a.form.results[(R=s.inspection_point)==null?void 0:R.id].note,"onUpdate:modelValue":[X=>{var V;return a.form.results[(V=s.inspection_point)==null?void 0:V.id].note=X},X=>{var V;return I((V=s.inspection_point)==null?void 0:V.id,X,"note")}],required:(q=s.settings)==null?void 0:q.is_required,"min-length":(Q=s.settings)==null?void 0:Q.min_length,"max-length":(oe=s.settings)==null?void 0:oe.max_length,allowSpace:(ve=s.settings)==null?void 0:ve.allow_space,textTransform:(ce=s.settings)==null?void 0:ce.text_transform,placeholder:(($e=s.settings)==null?void 0:$e.placeholder)||"Masukan text",error:a.form.errors[`results.${(_e=s.inspection_point)==null?void 0:_e.id}.note`],onSave:X=>{var V;return L((V=s.inspection_point)==null?void 0:V.id)}},null,8,["modelValue","onUpdate:modelValue","required","min-length","max-length","allowSpace","textTransform","placeholder","error","onSave"])):c("",!0),s.input_type==="number"&&f(s)?(n(),Ne(ra,{key:1,modelValue:a.form.results[(fe=s.inspection_point)==null?void 0:fe.id].note,"onUpdate:modelValue":[X=>{var V;return a.form.results[(V=s.inspection_point)==null?void 0:V.id].note=X},X=>{var V;return I((V=s.inspection_point)==null?void 0:V.id,X,"note")}],required:(Se=s.settings)==null?void 0:Se.is_required,min:(Ae=s.settings)==null?void 0:Ae.min,max:(we=s.settings)==null?void 0:we.max,step:((Te=s.settings)==null?void 0:Te.step)||1,placeholder:((Me=s.settings)==null?void 0:Me.placeholder)||"Masukan number",error:a.form.errors[`results.${(Oe=s.inspection_point)==null?void 0:Oe.id}.note`],onSave:X=>{var V;return L((V=s.inspection_point)==null?void 0:V.id)}},null,8,["modelValue","onUpdate:modelValue","required","min","max","step","placeholder","error","onSave"])):c("",!0),s.input_type==="account"&&f(s)?(n(),Ne(ca,{key:2,modelValue:a.form.results[(i=s.inspection_point)==null?void 0:i.id].note,"onUpdate:modelValue":[X=>{var V;return a.form.results[(V=s.inspection_point)==null?void 0:V.id].note=X},X=>{var V;return I((V=s.inspection_point)==null?void 0:V.id,X,"note")}],required:(m=s.settings)==null?void 0:m.is_required,placeholder:((d=s.settings)==null?void 0:d.placeholder)||"Masukkan nilai",error:a.form.errors[`results.${(P=s.inspection_point)==null?void 0:P.id}.note`],"point-id":(G=s.inspection_point)==null?void 0:G.id,settings:s.settings,onSave:X=>{var V;return L((V=s.inspection_point)==null?void 0:V.id)}},null,8,["modelValue","onUpdate:modelValue","required","placeholder","error","point-id","settings","onSave"])):c("",!0),s.input_type==="date"&&f(s)?(n(),Ne(da,{key:3,modelValue:a.form.results[(me=s.inspection_point)==null?void 0:me.id].note,"onUpdate:modelValue":[X=>{var V;return a.form.results[(V=s.inspection_point)==null?void 0:V.id].note=X},X=>{var V;return I((V=s.inspection_point)==null?void 0:V.id,X,"note")}],required:(v=s.settings)==null?void 0:v.is_required,"min-date":(u=s.settings)==null?void 0:u.min_date,"max-date":(J=s.settings)==null?void 0:J.max_date,error:a.form.errors[`results.${(w=s.inspection_point)==null?void 0:w.id}.note`],onSave:X=>{var V;return L((V=s.inspection_point)==null?void 0:V.id)}},null,8,["modelValue","onUpdate:modelValue","required","min-date","max-date","error","onSave"])):c("",!0),s.input_type==="textarea"&&f(s)?(n(),Ne(ga,{key:4,modelValue:a.form.results[(te=s.inspection_point)==null?void 0:te.id].note,"onUpdate:modelValue":[X=>{var V;return a.form.results[(V=s.inspection_point)==null?void 0:V.id].note=X},X=>{var V;return I((V=s.inspection_point)==null?void 0:V.id,X,"note")}],required:(ye=s.settings)==null?void 0:ye.is_required,"min-length":(ke=s.settings)==null?void 0:ke.min_length,"max-length":(Ie=s.settings)==null?void 0:Ie.max_length,placeholder:((je=s.settings)==null?void 0:je.placeholder)||"Masukkan teks di sini",settings:s.settings,error:a.form.errors[`results.${(Ze=s.inspection_point)==null?void 0:Ze.id}.note`],onSave:X=>{var V;return L((V=s.inspection_point)==null?void 0:V.id)}},null,8,["modelValue","onUpdate:modelValue","required","min-length","max-length","placeholder","settings","error","onSave"])):c("",!0),s.input_type==="radio"&&f(s)?(n(),Ne(di,{key:5,modelValue:a.form.results[(kt=s.inspection_point)==null?void 0:kt.id].status,"onUpdate:modelValue":[X=>{var V;return a.form.results[(V=s.inspection_point)==null?void 0:V.id].status=X},X=>{var V;return I((V=s.inspection_point)==null?void 0:V.id,X,"status")}],notes:a.form.results[(Je=s.inspection_point)==null?void 0:Je.id].note,images:a.form.images[(mt=s.inspection_point)==null?void 0:mt.id],required:(vt=s.settings)==null?void 0:vt.is_required,"point-id":(ft=s.inspection_point)==null?void 0:ft.id,point:s.inspection_point,"inspection-id":a.inspectionId,settings:s.settings,"point-name":(It=s.inspection_point)==null?void 0:It.name,subtitle:(ot=s.inspection_point)==null?void 0:ot.description,"selected-point":s.inspection_point??null,options:((ht=s.settings)==null?void 0:ht.radios)||Z,error:a.form.errors[`results.${(bt=s.inspection_point)==null?void 0:bt.id}.status`],"onUpdate:notes":X=>{var V;return a.form.results[(V=s.inspection_point)==null?void 0:V.id].note=X},"onUpdate:images":X=>{var V;return a.form.images[(V=s.inspection_point)==null?void 0:V.id]=X},onSave:X=>{var V;return L((V=s.inspection_point)==null?void 0:V.id)},onHapus:X=>{var V;return de((V=s.inspection_point)==null?void 0:V.id)}},null,8,["modelValue","onUpdate:modelValue","notes","images","required","point-id","point","inspection-id","settings","point-name","subtitle","selected-point","options","error","onUpdate:notes","onUpdate:images","onSave","onHapus"])):c("",!0),s.input_type==="imageTOradio"&&f(s)?(n(),Ne(ki,{key:6,modelValue:a.form.results[(it=s.inspection_point)==null?void 0:it.id].status,"onUpdate:modelValue":[X=>{var V;return a.form.results[(V=s.inspection_point)==null?void 0:V.id].status=X},X=>{var V;return I((V=s.inspection_point)==null?void 0:V.id,X,"status")}],notes:a.form.results[(Re=s.inspection_point)==null?void 0:Re.id].note,images:a.form.images[(Ge=s.inspection_point)==null?void 0:Ge.id],required:(ze=s.settings)==null?void 0:ze.is_required,"point-id":(lt=s.inspection_point)==null?void 0:lt.id,"inspection-id":a.inspectionId,settings:s.settings,"point-name":(_t=s.inspection_point)==null?void 0:_t.name,subtitle:(rt=s.inspection_point)==null?void 0:rt.description,point:s,"selected-point":s.inspection_point??null,options:((Xe=s.settings)==null?void 0:Xe.radios)||Z,error:a.form.errors[`results.${(ut=s.inspection_point)==null?void 0:ut.id}.status`],"onUpdate:notes":X=>{var V;return a.form.results[(V=s.inspection_point)==null?void 0:V.id].note=X},"onUpdate:images":X=>{var V;return a.form.images[(V=s.inspection_point)==null?void 0:V.id]=X},onSave:X=>{var V;return L((V=s.inspection_point)==null?void 0:V.id)},onHapus:X=>{var V;return de((V=s.inspection_point)==null?void 0:V.id)}},null,8,["modelValue","onUpdate:modelValue","notes","images","required","point-id","inspection-id","settings","point-name","subtitle","point","selected-point","options","error","onUpdate:notes","onUpdate:images","onSave","onHapus"])):c("",!0),s.input_type==="image"&&f(s)?(n(),Ne(Ft,{key:7,modelValue:a.form.images[(Qe=s.inspection_point)==null?void 0:Qe.id],"onUpdate:modelValue":X=>{var V;return a.form.images[(V=s.inspection_point)==null?void 0:V.id]=X},error:a.form.errors[`images.${(et=s.inspection_point)==null?void 0:et.id}`],"inspection-id":a.inspectionId,"point-id":(Ct=s.inspection_point)==null?void 0:Ct.id,point:s.inspection_point,"point-name":(St=s.inspection_point)==null?void 0:St.name,settings:s.settings,"onUpdate:notes":X=>{var V;return a.form.results[(V=s.inspection_point)==null?void 0:V.id].note=X},"onUpdate:status":X=>{var V;return a.form.results[(V=s.inspection_point)==null?void 0:V.id].status=X}},null,8,["modelValue","onUpdate:modelValue","error","inspection-id","point-id","point","point-name","settings","onUpdate:notes","onUpdate:status"])):c("",!0),s.input_type==="select"&&f(s)?(n(),Ne(js,{key:8,modelValue:a.form.results[($t=s.inspection_point)==null?void 0:$t.id].status,"onUpdate:modelValue":[X=>{var V;return a.form.results[(V=s.inspection_point)==null?void 0:V.id].status=X},X=>{var V;return I((V=s.inspection_point)==null?void 0:V.id,X,"status")}],required:(tt=s.settings)==null?void 0:tt.is_required,error:a.form.errors[`results.${(At=s.inspection_point)==null?void 0:At.id}.status`],onSave:X=>{var V;return L((V=s.inspection_point)==null?void 0:V.id)}},null,8,["modelValue","onUpdate:modelValue","required","error","onSave"])):c("",!0),!f(s)&&p(s)?(n(),l("div",Ki,[h[2]||(h[2]=e("p",{class:"font-medium"},"Tidak tersedia untuk kendaraan ini",-1)),h[3]||(h[3]=e("p",{class:"text-xs mt-1"},"Point ini hanya tersedia untuk:",-1)),e("ul",Hi,[(Vt=s.settings)!=null&&Vt.transmission?(n(),l("li",Gi," Transmisi: "+z(ee(s.settings.transmission).join(", ")),1)):c("",!0),(Tt=s.settings)!=null&&Tt.fuel_type?(n(),l("li",Wi," Bahan bakar: "+z(s.settings.fuel_type),1)):c("",!0),(Mt=s.settings)!=null&&Mt.rear_door?(n(),l("li",Yi,"Kendaraan dengan pintu belakang")):c("",!0),(Et=s.settings)!=null&&Et.pick_up?(n(),l("li",Zi,"Tipe pick up")):c("",!0),(Ut=s.settings)!=null&&Ut.box?(n(),l("li",Ji,"Kendaraan dengan box")):c("",!0)])])):c("",!0)]))],2)}),128)),K.value.filter(s=>!s.is_link).length===0?(n(),l("div",Xi,[h[4]||(h[4]=e("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9.172 16.172a4 4 0 015.656 0M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)),h[5]||(h[5]=e("p",{class:"mt-2 text-sm"},"Tidak ada data untuk ditampilkan",-1)),a.category.isDamageMenu?(n(),l("p",Qi,' Tambahkan data melalui tombol "+" di pojok kanan bawah ')):c("",!0)])):c("",!0)])],2)],64))}},tl=He(el,[["__scopeId","data-v-704b9892"]]),al={class:"bg-gray-50 shadow-lg rounded-xl overflow-hidden border border-gray-100"},sl={class:"p-4 space-y-4-6"},nl={class:"grid grid-cols-2 sm:grid-cols-2 md:grid-cols-3 gap-2 w-full"},ol=["value"],il={class:"p-4 space-y-4-6"},ll={class:"grid grid-cols-2 sm:grid-cols-2 md:grid-cols-3 gap-2 w-full"},rl=["value"],ul={key:0,class:"p-4 space-y-4 bg-blue-50 rounded-lg border border-blue-200"},dl={class:"grid grid-cols-2 sm:grid-cols-2 md:grid-cols-3 gap-2 w-full"},cl=["value"],gl={class:"p-4 space-y-2"},pl={class:"flex items-center justify-between mb-2"},ml={key:0,class:"mb-4 p-4 bg-white border border-gray-200 rounded-lg shadow-lg"},vl={class:"flex items-center justify-between mb-3"},fl={class:"grid grid-cols-1 md:grid-cols-2 gap-3 max-h-60 overflow-y-auto"},hl=["onClick"],bl={class:"text-sm font-medium text-gray-800 mb-1"},yl={class:"text-xs text-gray-600 line-clamp-2"},xl={class:"flex flex-wrap gap-1 mb-2 p-2 bg-gray-100 rounded-md"},wl={key:0,class:"text-xs text-gray-500 mb-2 bg-gray-50 p-2 rounded border"},kl={key:0,class:"font-bold mx-1 bg-indigo-100 text-indigo-700 px-2 py-1 rounded"},Il={key:1,class:"italic mx-1 bg-indigo-100 text-indigo-700 px-2 py-1 rounded"},_l={key:2,class:"underline mx-1 bg-indigo-100 text-indigo-700 px-2 py-1 rounded"},Cl={__name:"ConclusionSection",props:{inspectionId:{type:Number,required:!0},inspection:{type:Object,required:!0},form:{type:Object,required:!0}},emits:["updateConclusion"],setup(a,{emit:ne}){const t=a,S=ne,g=y(null),A=y(!1),b=y(!1),$=sa({bold:!1,italic:!1,underline:!1}),_=sa({flooded:"",collision:"",collision_severity:"",notes:""}),j=y([{id:1,name:"Kendaraan Normal",description:"Template untuk kendaraan dalam kondisi normal tanpa masalah signifikan (Ringkas)",content:`<p><strong>A. HASIL INSPEKSI:</strong></p>
- Kondisi kendaraan secara umum: <b>BAIK</b><br>
- Tidak ditemukan indikasi kerusakan signifikan<br>
- Semua sistem berfungsi dengan normal<br>`},{id:2,name:"Kendaraan Bekas Tabrakan Ringan",description:"Template untuk kendaraan dengan riwayat tabrakan ringan (Lengkap A, C, B)",content:`<p><strong>A. HASIL INSPEKSI:</strong></p>
- Kendaraan memiliki riwayat tabrakan dengan tingkat kerusakan: <b>RINGAN</b><br>
- Area yang terdampak: PERLU DIISI<br>
- Perbaikan yang dilakukan: PERLU DIISI<br>

<p><strong>C. ESTIMASI PERBAIKAN DAN PERAWATAN:</strong></p>
<p>* PERBAIKAN & PENGGANTIAN PART DALAM WAKTU DEKAT/ SEGERA:</p>
- PERLU DIISI<br>
- Estimasi Biaya: PERLU DIISI
<p>* PERBAIKAN & PENGGANTIAN PART TENGGANG WAKTU MINIMAL 6 BULAN S/D 1 TAHUN KE DEPAN:</p>
- PERLU DIISI<br>
- Estimasi Biaya: PERLU DIISI
<p><em>Note: Estimasi perbaikan bisa lebih murah/lebih mahal. Opsional tergantung lokasi/daerah dan ketersediaan spare part.</em></p>`},{id:3,name:"Kendaraan Bekas Banjir",description:"Template untuk kendaraan dengan riwayat terkena banjir (Lengkap A, C, B)",content:`<p><strong>A. HASIL INSPEKSI:</strong></p>
- Kendaraan memiliki riwayat terkena banjir<br>
- Tingkat paparan air: PERLU DIISI<br>
- Komponen yang terdampak: PERLU DIISI<br>

<p><strong>C. ESTIMASI PERBAIKAN DAN PERAWATAN:</strong></p>
<p>* PERBAIKAN & PENGGANTIAN PART DALAM WAKTU DEKAT/ SEGERA:</p>
- PERLU DIISI<br>
- Estimasi Biaya: PERLU DIISI
<p>* PERBAIKAN & PENGGANTIAN PART TENGGANG WAKTU MINIMAL 6 BULAN S/D 1 TAHUN KE DEPAN:</p>
- PERLU DIISI<br>
- Estimasi Biaya: PERLU DIISI
<p><em>Note: Estimasi perbaikan bisa lebih murah/lebih mahal. Opsional tergantung lokasi/daerah dan ketersediaan spare part.</em></p>`},{id:4,name:"Kendaraan dengan Multiple Issues",description:"Template untuk kendaraan dengan beberapa masalah umum (Lengkap A, C, B)",content:`<p><strong>A. HASIL INSPEKSI:</strong></p>
- Kondisi umum kendaraan: PERLU DIISI<br>
- Masalah utama yang ditemukan: PERLU DIISI<br>
- Komponen yang perlu perhatian: PERLU DIISI<br>
- Status Tabrak/Banjir: PERLU DIISI<br>

<p><strong>C. ESTIMASI PERBAIKAN DAN PERAWATAN:</strong></p>
<p>* PERBAIKAN & PENGGANTIAN PART DALAM WAKTU DEKAT/ SEGERA:</p>
- PERLU DIISI<br>
- Estimasi Biaya: PERLU DIISI
<p>* PERBAIKAN & PENGGANTIAN PART TENGGANG WAKTU MINIMAL 6 BULAN S/D 1 TAHUN KE DEPAN:</p>
- PERLU DIISI<br>
- Estimasi Biaya: PERLU DIISI
<p><em>Note: Estimasi perbaikan bisa lebih murah/lebih mahal. Opsional tergantung lokasi/daerah dan ketersediaan spare part.</em></p>`},{id:5,name:"Template Singkat",description:"Template ringkas untuk kesimpulan cepat (Ringkas)",content:`<p><strong>A. HASIL INSPEKSI:</strong></p>
- Status Keseluruhan Kendaraan: PERLU DIISI<br>
- Catatan Utama: PERLU DIISI<br>
- Status Tabrak/Banjir: PERLU DIISI`},{id:6,name:"Template Teknis Detail",description:"Template detail untuk laporan teknis lengkap (Lengkap A, C, B)",content:`<p><strong>A. LAPORAN HASIL INSPEKSI TEKNIS:</strong></p>
- Tanggal Inspeksi: PERLU DIISI<br>
- Kondisi Mesin: PERLU DIISI<br>
- Kondisi Transmisi: PERLU DIISI<br>
- Kondisi Suspensi: PERLU DIISI<br>
- Kondisi Rem: PERLU DIISI<br>
- Kondisi Body: PERLU DIISI<br>
- Kondisi Interior: PERLU DIISI<br>
- Kesimpulan Akhir: PERLU DIISI

<p><strong>C. ESTIMASI PERBAIKAN DAN PERAWATAN:</strong></p>
<p>* PERBAIKAN & PENGGANTIAN PART DALAM WAKTU DEKAT/ SEGERA:</p>
- PERLU DIISI<br>
- Estimasi Biaya: PERLU DIISI
<p>* PERBAIKAN & PENGGANTIAN PART TENGGANG WAKTU MINIMAL 6 BULAN S/D 1 TAHUN KE DEPAN:</p>
- PERLU DIISI<br>
- Estimasi Biaya: PERLU DIISI
<p><em>Note: Estimasi perbaikan bisa lebih murah/lebih mahal. Opsional tergantung lokasi/daerah dan ketersediaan spare part.</em></p>`}]);y(["{PLATE_NUMBER}","{CAR_NAME}","{INSPECTION_DATE}","{DAMAGED_AREA}","{REPAIR_DETAILS}","{WATER_LEVEL}","{AFFECTED_COMPONENTS}","{OVERALL_CONDITION}","{MAIN_ISSUES}","{ATTENTION_NEEDED}","{REPAIR_COST_ESTIMATE}","{RECOMMENDATION}","{OVERALL_STATUS}","{ADDITIONAL_NOTES}","{ENGINE_CONDITION}","{TRANSMISSION_CONDITION}","{SUSPENSION_CONDITION}","{BRAKE_CONDITION}","{BODY_CONDITION}","{INTERIOR_CONDITION}","{FINAL_CONCLUSION}"]);const k=s=>{if(!s)return{};if(typeof s=="string")try{return JSON.parse(s)||{}}catch(x){return console.error("Error parsing settings JSON:",x),{}}return typeof s=="object"&&s!==null?s:{}};se(()=>k(t.inspection.settings).conclusion||{});const D=[{value:"yes",label:"Ya"},{value:"no",label:"Tidak"}],T=[{value:"yes",label:"Ya"},{value:"no",label:"Tidak"}],ee=[{value:"light",label:"Ringan"},{value:"heavy",label:"Berat"}];nt(()=>{p(),Lt(()=>{f(),E()})});const f=()=>{g.value&&_.notes&&(g.value.innerHTML=_.notes)},p=()=>{const x=k(t.inspection.settings).conclusion||{},O=t.form.conclusion||{};_.flooded=O.flooded||x.flooded||"",_.collision=O.collision||x.collision||"",_.collision_severity=O.collision_severity||x.collision_severity||"",_.notes=O.notes||t.inspection.notes||""},M=s=>{if(!g.value)return;let x=s.content;x=x.replace(/{PLATE_NUMBER}/g,t.inspection.plate_number||"[NOMOR_PLAT]").replace(/{CAR_NAME}/g,t.inspection.car_name||"[NAMA_MOBIL]").replace(/{INSPECTION_DATE}/g,new Date().toLocaleDateString("id-ID")).replace(/{FLOOD_STATUS}/g,_.flooded==="yes"?"Pernah terkena banjir":"Tidak pernah terkena banjir").replace(/{COLLISION_STATUS}/g,_.collision==="yes"?"Pernah mengalami tabrakan":"Tidak pernah mengalami tabrakan"),g.value.innerHTML=x,_.notes=x,b.value=!1,Lt(()=>{g.value.focus(),h()})},K=()=>{g.value&&(g.value.innerHTML="",_.notes="",h())},E=()=>{if(!g.value)return;const s=window.getSelection();s.rangeCount===0||s.isCollapsed||($.bold=document.queryCommandState("bold"),$.italic=document.queryCommandState("italic"),$.underline=document.queryCommandState("underline"))},H=s=>{if(!g.value)return;g.value.focus();const x=$[s];switch(s){case"bold":document.execCommand("bold",!1,!x);break;case"italic":document.execCommand("italic",!1,!x);break;case"underline":document.execCommand("underline",!1,!x);break}setTimeout(()=>{E(),Z()},10)},Z=la.debounce(()=>{g.value&&(_.notes=g.value.innerHTML,h())},200),F=s=>{s.preventDefault(),document.execCommand("insertParagraph",!1,null)},I=s=>{s.preventDefault();const x=(s.clipboardData||window.clipboardData).getData("text/plain");document.execCommand("insertText",!1,x)},L=()=>{A.value=!0},de=()=>{A.value=!1,g.value&&(_.notes=g.value.innerHTML,h())},C=()=>{h()},h=()=>{const s={flooded:_.flooded,collision:_.collision,collision_severity:_.collision==="yes"?_.collision_severity:null,notes:_.notes};S("updateConclusion",s)};return be(()=>t.form.conclusion,s=>{s&&(_.flooded=s.flooded!==void 0?s.flooded:_.flooded,_.collision=s.collision!==void 0?s.collision:_.collision,_.collision_severity=s.collision_severity!==void 0?s.collision_severity:_.collision_severity,_.notes=s.notes!==void 0?s.notes:_.notes,g.value&&s.notes!==void 0&&g.value.innerHTML!==s.notes&&(g.value.innerHTML=s.notes))},{deep:!0,immediate:!0}),be([()=>_.flooded,()=>_.collision,()=>_.collision_severity,()=>_.notes],()=>{h()},{deep:!0}),(s,x)=>(n(),l("div",al,[x[21]||(x[21]=e("div",{class:"bg-indigo-200 px-6 py-2 border-b flex items-center justify-between"},[e("h4",{class:"text-base font-semibold text-indigo-700"}," Detail Kendaraan ")],-1)),e("div",sl,[x[10]||(x[10]=e("label",{class:"block text-sm font-medium text-gray-700 mb-3"},[Ue(" Apakah kendaraan pernah terkena banjir? "),e("span",{class:"text-red-500"},"*")],-1)),e("div",nl,[(n(),l(Ee,null,De(D,O=>e("label",{key:O.value,class:"cursor-pointer"},[Pe(e("input",{type:"radio","onUpdate:modelValue":x[0]||(x[0]=ue=>_.flooded=ue),value:O.value,class:"hidden peer",onChange:C},null,40,ol),[[st,_.flooded]]),e("div",{class:re(["w-full px-4 py-3 border rounded-lg text-center transition-all duration-200 ease-in-out whitespace-nowrap text-sm font-medium",{"border-indigo-500 bg-indigo-50 text-indigo-700 shadow-sm scale-[0.98]":_.flooded===O.value,"border-gray-300 text-gray-700 hover:bg-gray-50 hover:border-gray-400":_.flooded!==O.value}])},z(O.label),3)])),64))])]),e("div",il,[x[12]||(x[12]=e("label",{class:"block text-sm font-medium text-gray-700 mb-3"},[Ue(" Apakah kendaraan pernah mengalami tabrakan? "),e("span",{class:"text-red-500"},"*")],-1)),e("div",ll,[(n(),l(Ee,null,De(T,O=>e("label",{key:O.value,class:"cursor-pointer"},[Pe(e("input",{type:"radio","onUpdate:modelValue":x[1]||(x[1]=ue=>_.collision=ue),value:O.value,class:"hidden peer",onChange:C},null,40,rl),[[st,_.collision]]),e("div",{class:re(["w-full px-4 py-3 border rounded-lg text-center transition-all duration-200 ease-in-out whitespace-nowrap text-sm font-medium",{"border-indigo-500 bg-indigo-50 text-indigo-700 shadow-sm scale-[0.98]":_.collision===O.value,"border-gray-300 text-gray-700 hover:bg-gray-50 hover:border-gray-400":_.collision!==O.value}])},z(O.label),3)])),64))]),Ve(pt,{"enter-active-class":"transition-all duration-300 ease-out","enter-from-class":"opacity-0 transform -translate-y-2","enter-to-class":"opacity-100 transform translate-y-0","leave-active-class":"transition-all duration-200 ease-in","leave-from-class":"opacity-100 transform translate-y-0","leave-to-class":"opacity-0 transform -translate-y-2"},{default:Fe(()=>[_.collision==="yes"?(n(),l("div",ul,[x[11]||(x[11]=e("label",{class:"block text-sm font-medium text-gray-700 mb-3"},[Ue("Tingkat kerusakan: "),e("span",{class:"text-red-500"},"*")],-1)),e("div",dl,[(n(),l(Ee,null,De(ee,O=>e("label",{key:O.value,class:"cursor-pointer"},[Pe(e("input",{type:"radio","onUpdate:modelValue":x[2]||(x[2]=ue=>_.collision_severity=ue),value:O.value,class:"hidden peer",onChange:C},null,40,cl),[[st,_.collision_severity]]),e("div",{class:re(["w-full px-4 py-3 border rounded-lg text-center transition-all duration-200 ease-in-out whitespace-nowrap text-sm font-medium",{"border-blue-500 bg-blue-100 text-blue-700 shadow-sm scale-[0.98]":_.collision_severity===O.value,"border-gray-300 text-gray-700 hover:bg-white hover:border-gray-400":_.collision_severity!==O.value}])},z(O.label),3)])),64))])])):c("",!0)]),_:1})]),e("div",gl,[e("div",pl,[x[14]||(x[14]=e("label",{class:"block text-sm font-medium text-gray-700"},"Catatan Kesimpulan",-1)),e("button",{type:"button",onClick:x[3]||(x[3]=O=>b.value=!b.value),class:"flex items-center gap-2 px-3 py-2 text-sm bg-green-100 text-green-700 rounded-lg hover:bg-green-200 transition-all duration-200"},x[13]||(x[13]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})],-1),Ue(" Template ")]))]),Ve(pt,{"enter-active-class":"transition-all duration-200 ease-out","enter-from-class":"opacity-0 transform scale-95","enter-to-class":"opacity-100 transform scale-100","leave-active-class":"transition-all duration-150 ease-in","leave-from-class":"opacity-100 transform scale-100","leave-to-class":"opacity-0 transform scale-95"},{default:Fe(()=>[b.value?(n(),l("div",ml,[e("div",vl,[x[16]||(x[16]=e("h5",{class:"text-sm font-semibold text-gray-700"},"Pilih Template Kesimpulan",-1)),e("button",{onClick:x[4]||(x[4]=O=>b.value=!1),class:"text-gray-400 hover:text-gray-600"},x[15]||(x[15]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),e("div",fl,[(n(!0),l(Ee,null,De(j.value,O=>(n(),l("button",{key:O.id,onClick:ue=>M(O),class:"p-3 text-left border border-gray-200 rounded-lg hover:border-indigo-300 hover:bg-indigo-50 transition-all duration-150"},[e("div",bl,z(O.name),1),e("div",yl,z(O.description),1)],8,hl))),128))])])):c("",!0)]),_:1}),e("div",xl,[e("button",{type:"button",onClick:x[5]||(x[5]=O=>H("bold")),class:re(["p-2 rounded transition-all duration-150 ease-in-out font-medium",$.bold?"bg-indigo-500 text-white shadow-sm":"hover:bg-gray-200 hover:shadow-sm"]),title:"Bold"},x[17]||(x[17]=[e("strong",null,"B",-1)]),2),e("button",{type:"button",onClick:x[6]||(x[6]=O=>H("italic")),class:re(["p-2 rounded transition-all duration-150 ease-in-out font-medium",$.italic?"bg-indigo-500 text-white shadow-sm":"hover:bg-gray-200 hover:shadow-sm"]),title:"Italic"},x[18]||(x[18]=[e("em",null,"I",-1)]),2),e("button",{type:"button",onClick:x[7]||(x[7]=O=>H("underline")),class:re(["p-2 rounded transition-all duration-150 ease-in-out font-medium",$.underline?"bg-indigo-500 text-white shadow-sm":"hover:bg-gray-200 hover:shadow-sm"]),title:"Underline"},x[19]||(x[19]=[e("u",null,"U",-1)]),2),e("button",{type:"button",onClick:x[8]||(x[8]=O=>K()),class:"p-2 rounded transition-all duration-150 ease-in-out hover:bg-gray-200 hover:shadow-sm ml-2",title:"Clear Template"}," 🗑️ Clear ")]),Ve(pt,{"enter-active-class":"transition-all duration-200 ease-out","enter-from-class":"opacity-0 transform -translate-y-1","enter-to-class":"opacity-100 transform translate-y-0","leave-active-class":"transition-all duration-150 ease-in","leave-from-class":"opacity-100 transform translate-y-0","leave-to-class":"opacity-0 transform -translate-y-1"},{default:Fe(()=>[Object.values($).some(O=>O)?(n(),l("div",wl,[x[20]||(x[20]=Ue(" Format aktif: ")),$.bold?(n(),l("span",kl,"Bold")):c("",!0),$.italic?(n(),l("span",Il,"Italic")):c("",!0),$.underline?(n(),l("span",_l,"Underline")):c("",!0)])):c("",!0)]),_:1}),e("div",{ref_key:"editorRef",ref:g,contenteditable:"true",class:re(["w-full min-h-[120px] p-3 rounded-md border border-gray-300 shadow-sm transition-all duration-200 ease-in-out prose max-w-none",{"bg-white border-gray-300":!A.value,"bg-blue-50 border-indigo-500 ring-2 ring-indigo-200":A.value}]),onInput:x[9]||(x[9]=(...O)=>ae(Z)&&ae(Z)(...O)),onBlur:de,onFocus:L,onKeydown:wa(F,["enter"]),onPaste:I,onMouseup:E,onKeyup:E,placeholder:"Tambahkan catatan kesimpulan inspeksi di sini..."},null,34)])]))}},Sl=He(Cl,[["__scopeId","data-v-6b429a8f"]]);function na(a,ne){const t=y({x:ne.x,y:ne.y}),S=y(!1),g=y(null),A=y(!1),b=y({x:0,y:0});nt(()=>{const T=localStorage.getItem(a);if(T)try{t.value=JSON.parse(T)}catch(ee){console.error("Error parsing saved position:",ee)}});const $=T=>{T.type.includes("touch")?(b.value.x=T.touches[0].clientX,b.value.y=T.touches[0].clientY):(b.value.x=T.clientX,b.value.y=T.clientY),g.value=setTimeout(()=>{A.value=!0,S.value=!0,console.log("Long press activated - drag mode ON")},900)},_=()=>{g.value&&(clearTimeout(g.value),g.value=null),A.value=!1};return{pos:t,dragging:S,startLongPress:$,cancelLongPress:_,onDrag:T=>{if(!S.value||!A.value)return;T.preventDefault();let ee,f;T.type.includes("touch")?(ee=T.touches[0].clientX,f=T.touches[0].clientY):(ee=T.clientX,f=T.clientY),t.value.x=ee-24,t.value.y=f-24},stopDrag:()=>{if(S.value&&A.value){console.log("Drag stopped - saving position"),S.value=!1,A.value=!1;try{localStorage.setItem(a,JSON.stringify(t.value))}catch(T){console.error("Error saving position:",T)}}_()},handleClick:T=>!S.value&&!A.value?(console.log("Regular click detected"),!0):(console.log("Click ignored - part of drag operation"),!1)}}const $l={class:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100"},Al={key:0,class:"fixed inset-0 bg-black bg-opacity-40 z-30 pointer-events-none transition-opacity duration-200"},Vl={key:0,xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",viewBox:"0 0 20 20",fill:"currentColor","stroke-width":"2"},Tl={key:1,xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",viewBox:"0 0 20 20",fill:"currentColor","stroke-width":"2"},Ml={class:"flex items-center px-4"},El={class:"flex"},Ul={key:0,class:"ml-2 inline-flex items-center justify-center w-5 h-5 text-xs rounded-full bg-green-500 text-white"},Nl=["onClick","data-category"],Dl={key:0,class:"ml-2 inline-flex items-center justify-center w-5 h-5 text-xs rounded-full bg-green-500 text-white"},Pl={key:0,class:"ml-2 inline-flex items-center justify-center w-5 h-5 text-xs rounded-full bg-green-500 text-white"},Ll={key:3,class:"fixed inset-0 z-30"},Rl={class:"mt-2 space-y-2"},jl={key:0,class:"ml-2 inline-flex items-center justify-center w-5 h-5 text-xs rounded-full bg-green-500 text-white"},Bl=["onClick"],Fl={key:0,class:"ml-2 inline-flex items-center justify-center w-5 h-5 text-xs rounded-full bg-green-500 text-white"},Ol={key:0,class:"ml-2 inline-flex items-center justify-center w-5 h-5 text-xs rounded-full bg-green-500 text-white"},zl={key:0,class:"fixed top-4 left-1/2 transform -translate-x-1/2 bg-green-400 text-white px-4 py-2 rounded shadow-lg z-50"},ql={class:"relative overflow-hidden"},Kl={key:"vehicle"},Hl={key:"conclusion"},Gl={key:1},Wl=["disabled"],Yl={key:0,class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},Zl={class:"space-y-4"},Jl={class:"relative"},Xl={class:"max-h-64 overflow-y-auto"},Ql={key:0,class:"text-center py-4 text-gray-500"},er=["onClick"],tr={class:"font-medium text-gray-900"},ar={class:"text-sm text-gray-500"},sr={class:"text-xs text-gray-400 mt-1"},nr={key:0,class:"text-xs text-green-600 mt-1"},or={key:3,class:"fixed bottom-20 left-1/2 transform -translate-x-1/2 bg-gray-800 text-white px-6 py-3 rounded-lg shadow-lg z-50 text-center"},ir={class:"p-4 space-y-6"},lr={class:"flex items-center justify-between"},rr=["aria-checked"],ur={class:"space-y-2"},dr={class:"space-y-2"},cr={class:"space-y-2"},gr={class:"flex space-x-4"},pr={class:"flex items-center"},mr={class:"flex items-center"},vr={key:0,class:"space-y-2"},fr={class:"flex space-x-4"},hr={class:"flex items-center"},br={class:"flex items-center"},yr={key:1,class:"space-y-2"},xr={__name:"IndexLocal",props:{inspection:Object,inspectionId:Object,category:Object,car:Object,appMenus:Array,damagePoints:Array,existingResults:Object,existingImages:Object,CarDetail:Array,allInspections:Array},setup(a){var Kt,Ht,Gt,Wt,Yt,Zt,Jt,Xt,Qt,ea;const ne=r=>{if(!r)return{};if(typeof r=="string")try{return JSON.parse(r)||{}}catch(o){return console.error("Error parsing settings JSON:",o),{}}return typeof r=="object"&&r!==null?r:{}},t=a,S=se(()=>`inspection_data_${t.inspection.id}`),g=se(()=>`swipe_toggle_${t.inspection.id}`),A=se(()=>`image_source_${t.inspection.id}`),b=se(()=>`active_category_${t.inspection.id}`),$=()=>{try{const r=localStorage.getItem(S.value);return r?JSON.parse(r):{}}catch(r){return console.error("Error reading local storage:",r),{}}},_=r=>{try{localStorage.setItem(S.value,JSON.stringify(r))}catch(o){console.error("Error writing to local storage:",o)}},j=()=>{try{localStorage.removeItem(S.value),localStorage.removeItem(g.value),localStorage.removeItem(A.value),localStorage.removeItem(b.value)}catch(r){console.error("Error clearing local storage:",r)}},k=()=>{try{const r=localStorage.getItem(g.value);return r?JSON.parse(r):!0}catch(r){return console.error("Error reading swipe toggle state:",r),!0}},D=r=>{try{localStorage.setItem(g.value,JSON.stringify(r))}catch(o){console.error("Error writing swipe toggle state:",o)}},T=()=>{try{return localStorage.getItem(A.value)||"all"}catch(r){return console.error("Error reading image source setting:",r),"all"}},ee=r=>{try{localStorage.setItem(A.value,r)}catch(o){console.error("Error writing image source setting:",o)}},f=se(()=>`camera_quality_${t.inspection.id}`),p=()=>{try{return localStorage.getItem(f.value)||"HP_Native"}catch(r){return console.error("Error reading camera quality setting:",r),"HP_Native"}},M=r=>{try{localStorage.setItem(f.value,r)}catch(o){console.error("Error writing camera quality setting:",o)}},K=()=>{try{return localStorage.getItem(b.value)||m.value[0]}catch(r){return console.error("Error reading active category:",r),m.value[0]}},E=r=>{try{localStorage.setItem(b.value,r)}catch(o){console.error("Error writing active category:",o)}},H=y(((Ht=(Kt=t.category)==null?void 0:Kt.settings)==null?void 0:Ht.menu_model)||"horizontal"),Z=y(((Wt=(Gt=t.category)==null?void 0:Gt.settings)==null?void 0:Wt.position)||"top"),F=y(!1),I=y(!1),{pos:L,dragging:de,startLongPress:C,cancelLongPress:h,onDrag:s,stopDrag:x,handleClick:O}=na("toggleMenuButtonPos",{x:window.innerWidth-80,y:20}),ue=r=>{O(r)&&Y()},Y=()=>{F.value=!F.value},W=()=>{F.value=!1},ie=r=>r?"bg-gradient-to-r from-indigo-700 to-sky-600 text-white":"bg-gray-50 hover:bg-gray-100 text-gray-700",{pos:pe,dragging:N,startLongPress:U,cancelLongPress:R,onDrag:q,stopDrag:Q,handleClick:oe}=na("damageButtonPos",{x:window.innerWidth-80,y:window.innerHeight-80}),ve=r=>{oe(r)&&(ce.value=!0)},ce=y(!1),$e=y(!1),_e=y(""),fe=y(null),Se=y(""),Ae=y(""),we=y(""),Te=y(!1),Me=y(null),Oe=(r,o)=>{Te.value=!0,Me.value=o,Dt.visit(r,{onFinish:()=>{Te.value=!1,Me.value=null}})},i=se(()=>t.appMenus.some(r=>r.input_type==="damage")),m=se(()=>["vehicle",...t.appMenus.map(r=>String(r.id)),"conclusion"]),d=y(m.value[0]),P=y(0),G=se(()=>{if(d.value==="vehicle"||d.value==="conclusion")return null;const r=t.appMenus.find(o=>String(o.id)===d.value);return r?{...r,points:me(r.menu_point,r.input_type==="damage")}:null}),me=(r,o)=>o?(r||[]).filter(ge=>{const le=ge.inspection_point_id;return vt(le)}):r||[],v=y({plate_number:t.inspection.plate_number,car_id:t.inspection.car_id,car_name:t.inspection.car_name}),u=y({notes:t.inspection.overall_note||"",flooded:((Zt=(Yt=ne(t.inspection.settings))==null?void 0:Yt.conclusion)==null?void 0:Zt.flooded)||null,collision:((Xt=(Jt=ne(t.inspection.settings))==null?void 0:Jt.conclusion)==null?void 0:Xt.collision)||null,collision_severity:((ea=(Qt=ne(t.inspection.settings))==null?void 0:Qt.conclusion)==null?void 0:ea.collision_severity)||null}),w=oa((()=>{const r=[...t.appMenus.flatMap(We=>We.menu_point||[]),...t.damagePoints||[]],o={},ge={};r.forEach(We=>{const qe=We.inspection_point_id,Be=t.existingResults[qe];o[qe]={status:(Be==null?void 0:Be.status)||"",note:(Be==null?void 0:Be.note)||""},ge[qe]=t.existingImages[qe]||[]});const le=$(),he={...o,...le.results||{}},xe={...ge,...le.images||{}},Le={...v.value,...le.vehicleDetails||{}},Ce=le.overall_note!==void 0?le.overall_note:t.inspection.overall_note||"";return{inspection_id:t.inspection.id,results:he,images:xe,overall_note:Ce,plate_number:Le.plate_number,car_id:Le.car_id,car_name:Le.car_name}})());be(w,r=>{_({results:r.results,images:r.images,overall_note:r.overall_note,vehicleDetails:v.value,conclusion:u.value})},{deep:!0}),be(v,r=>{w.plate_number=r.plate_number,w.car_id=r.car_id,w.car_name=r.car_name},{deep:!0}),be(u,r=>{w.overall_note=r.notes},{deep:!0});const te=Rt("vehicleFeatures",y(null));te.value=JSON.parse(localStorage.getItem("vehicle_features")||"{}"),Pt("vehicleFeatures",te);const ye=r=>{var he,xe;const o=r.settings;if(!ke(r))return!0;const ge=(he=t.car)==null?void 0:he.transmission,le=(xe=t.car)==null?void 0:xe.fuel_type;return!(o.transmission&&Array.isArray(o.transmission)&&o.transmission.length>0&&ge&&!o.transmission.includes(ge)||o.fuel_type&&o.fuel_type.trim()!==""&&le&&o.fuel_type!==le||o.rear_door&&(!te.value||!te.value.rear_door)||o.pick_up&&(!te.value||!te.value.pick_up)||o.box&&(!te.value||!te.value.box))},ke=r=>{const o=r.settings;return!!(o!=null&&o.transmission&&Array.isArray(o.transmission)&&o.transmission.length>0||o!=null&&o.fuel_type&&o.fuel_type.trim()!==""||o!=null&&o.rear_door||o!=null&&o.pick_up||o!=null&&o.box)},Ie=y(!1),je=r=>{Ie.value=r},Ze=y(!1),kt=r=>{Ze.value=r},Je=se(()=>{var he;const r=v.value.plate_number&&/^[A-Z]{1,2}\d{1,4}[A-Z]{0,3}$/.test(v.value.plate_number),o=!!((he=v.value.car_name)!=null&&he.trim()),ge=!Ze.value,le=!Ie.value;return r&&o&&ge&&le}),mt=se(()=>{if(!_e.value.trim())return t.damagePoints||[];const r=_e.value.toLowerCase().trim();return(t.damagePoints||[]).filter(o=>{var ge,le,he,xe,Le;return((le=(ge=o.inspection_point)==null?void 0:ge.name)==null?void 0:le.toLowerCase().includes(r))||((xe=(he=o.inspection_point)==null?void 0:he.description)==null?void 0:xe.toLowerCase().includes(r))||((Le=ft(o))==null?void 0:Le.toLowerCase().includes(r))})}),vt=r=>{const o=w.results[r]&&(w.results[r].status||w.results[r].note),ge=w.images[r]&&w.images[r].length>0;return o||ge},ft=r=>{var o;return((o=r.inspection_point.component)==null?void 0:o.name)||"Komponen Tidak Diketahui"},It=r=>w.results[r]||null,ot=()=>{var xe;const r=u.value,o=!!r.flooded,ge=!!r.collision,le=r.collision==="yes"?!!r.collision_severity:!0,he=!!((xe=r.notes)!=null&&xe.trim());return o&&ge&&le&&he},ht=se(()=>({flooded:u.value.flooded||null,collision:u.value.collision||null,collision_severity:u.value.collision_severity||null,note:u.value.notes||null,isComplete:ot()})),bt=se(()=>{const r=Je.value,o=t.appMenus.every(le=>it(le)),ge=ot();return r&&o&&ge}),it=r=>r.input_type==="damage"?!0:r.id==="conclusion"?ot():r.id==="vehicle"?Je.value:(me(r.menu_point,!1)||[]).filter(le=>le.is_default&&ye(le)).every(le=>{var Ce,We,qe,Be,yt,xt;const he=w.results[le.inspection_point_id],xe=w.images[le.inspection_point_id];if(!he)return!1;const Le=ne(le.settings);switch(le.input_type){case"text":case"number":case"date":case"account":case"textarea":return!!((Ce=he.note)!=null&&Ce.trim());case"select":case"radio":if(!he.status)return!1;const Ye=(We=Le.radios)==null?void 0:We.find(at=>at.value===he.status);return!(Ye!=null&&Ye.settings&&(Ye.settings.show_textarea&&!((qe=he.note)!=null&&qe.trim())||Ye.settings.show_image_upload&&(xe==null?void 0:xe.length)===0));case"imageTOradio":if((xe==null?void 0:xe.length)===0||!he.status)return!1;const B=(Be=Le.radios)==null?void 0:Be.find(at=>at.value===he.status);return!(B!=null&&B.settings&&B.settings.show_textarea&&B.settings.required&&!((yt=he.note)!=null&&yt.trim()));case"image":return(xe==null?void 0:xe.length)>0;default:return!!he.status||!!((xt=he.note)!=null&&xt.trim())}}),Re=y(!0),Ge=y(T()),ze=y(p()),lt=y(!1),_t=()=>{console.log("Opening settings modal"),lt.value=!0},rt=()=>{console.log("Closing settings modal"),lt.value=!1},Xe=y(null),ut=y([]),Qe=y(0),et=y(!1);Pt("imageSourceSetting",Ge),Pt("cameraQualitySetting",ze);const Ct=()=>{Re.value=!Re.value,D(Re.value)},St=()=>{ee(Ge.value),console.log("Image source setting updated to:",Ge.value)},$t=()=>{M(ze.value),console.log("Camera quality setting updated to:",ze.value)},tt=()=>{Xe.value&&Lt(()=>{const r=Xe.value.querySelector(`[data-category="${d.value}"]`);if(!r)return;const o=Xe.value,ge=o.clientWidth,le=r.offsetLeft,he=r.clientWidth,xe=le-ge/2+he/2;o.scrollTo({left:xe,behavior:"smooth"})})},At=()=>Qe.value===0?(Qe.value=1,et.value=!0,setTimeout(()=>{Qe.value=0,et.value=!1},2e3),window.history.pushState(null,null,window.location.href),!1):(Qe.value=0,et.value=!1,Dt.visit(route("job.index")),!0),Vt=()=>{window.history.state===null&&window.history.replaceState({isBackButtonControlled:!0},""),window.history.pushState({isBackButtonControlled:!0},""),window.addEventListener("popstate",r=>{r.state&&r.state.isBackButtonControlled&&(r.preventDefault(),At())})},Tt=r=>{fe.value=r;const o=r.inspection_point_id,ge=w.results[o]||{};Se.value=ge.status||"",Ae.value=ge.note||"",ce.value=!1,$e.value=!0},Mt=r=>{fe.value&&(w.images[fe.value.inspection_point_id]=r)},Et=()=>{if(fe.value){const r=fe.value.inspection_point_id;w.results[r]={...w.results[r],status:Se.value,note:Ae.value},we.value="Data berhasil disimpan di lokal!",setTimeout(()=>we.value="",1e3)}jt()},Ut=({pointId:r,type:o,value:ge})=>{var le;(le=w.results[r])!=null&&le.hasOwnProperty(o)&&(w.results[r][o]=ge)},X=async r=>{if(r&&confirm("Apakah kamu yakin ingin menghapus data ini?")){try{await Dt.post(route("inspections.delete-result"),{inspection_id:t.inspection.id,point_id:r},{preserveScroll:!0,preserveState:!0,onSuccess:()=>{w.results[r]&&(w.results[r]={status:"",note:""}),w.images[r]&&(w.images[r]=[]),we.value="Data berhasil dihapus!",setTimeout(()=>we.value="",1e3)},onError:o=>{console.error("Error menghapus hasil:",o)}})}catch(o){console.error("Error menghapus hasil:",o)}jt()}},V=r=>{Object.assign(v.value,r),je(!0)},ma=r=>{console.log("Save car details locally:",r)},va=r=>{console.log("Received conclusion data from child:",r),u.value={...u.value,...r},w.overall_note=r.notes||"",console.log("Conclusion state updated:",u.value)},fa=()=>{if(!bt.value){alert("Harap lengkapi semua menu inspeksi termasuk kesimpulan sebelum submit final");return}if(!confirm("Apakah Anda yakin ingin mengirim semua data inspeksi? Data lokal akan dihapus setelah berhasil dikirim."))return;I.value=!0;const r={...w.data(),overall_note:u.value.notes,conclusion:{notes:u.value.notes,flooded:u.value.flooded,collision:u.value.collision,collision_severity:u.value.collision_severity}};Dt.post(route("inspections.final-submit-local",{id:t.inspection.id}),r,{preserveScroll:!0,onSuccess:()=>{j()},onError:o=>{console.error("Kesalahan pengiriman:",o),I.value=!1}})},ha=({pointId:r,imageId:o})=>{w.images[r]&&(w.images[r]=w.images[r].filter(ge=>ge.id!==o))},zt=()=>{ce.value=!1,_e.value=""},jt=()=>{$e.value=!1,fe.value=null,Se.value="",Ae.value=""},ba=()=>{},dt=r=>{d.value=r,E(r),tt()},qt=r=>{let o=P.value+r;o>=0&&o<m.value.length&&(d.value=m.value[o],tt())},ya=()=>{let r=0,o=0,ge=null;const le=Ce=>{Re.value&&(r=Ce.changedTouches[0].screenX)},he=Ce=>{Re.value&&(o=Ce.changedTouches[0].screenX,xe())},xe=()=>{if(!Re.value)return;const Ce=250;o<r-Ce?qt(1):o>r+Ce&&qt(-1)},Le=()=>{const Ce=document.querySelector(".relative.overflow-hidden");return Ce&&(Ce.addEventListener("touchstart",le,{passive:!0}),Ce.addEventListener("touchend",he,{passive:!0})),()=>{Ce&&(Ce.removeEventListener("touchstart",le),Ce.removeEventListener("touchend",he))}};return ge=Le(),be(Re,Ce=>{ge&&ge(),Ce&&(ge=Le())}),()=>{ge&&ge()}};return be(d,(r,o)=>{tt()}),be(d,r=>{P.value=m.value.indexOf(r)}),be(ze,r=>{$t()}),nt(()=>{const r=$();if(Re.value=k(),Ge.value=T(),ze.value=p(),r.vehicleDetails&&(Object.assign(v.value,r.vehicleDetails),w.plate_number=r.vehicleDetails.plate_number,w.car_id=r.vehicleDetails.car_id,w.car_name=r.vehicleDetails.car_name),r.conclusion)console.log("Loading conclusion from localStorage:",r.conclusion),Object.assign(u.value,r.conclusion),w.overall_note=r.conclusion.notes||"";else{const le=ne(t.inspection.settings).conclusion||{};u.value={notes:t.inspection.notes||"",flooded:le.flooded||"",collision:le.collision||"",collision_severity:le.collision_severity||""},w.overall_note=t.inspection.notes||""}r.results&&Object.assign(w.results,r.results),r.images&&Object.assign(w.images,r.images);const o=K();m.value.includes(o)?d.value=o:(d.value=m.value[0],E(m.value[0])),ya(),Vt(),setTimeout(()=>{tt()},100)}),(r,o)=>{var ge,le,he,xe,Le,Ce,We,qe,Be,yt,xt,Ye;return n(),l("div",$l,[ae(N)||ae(de)?(n(),l("div",Al)):c("",!0),H.value==="vertical"?(n(),l("button",{key:1,onMousedown:o[0]||(o[0]=(...B)=>ae(C)&&ae(C)(...B)),onMouseup:o[1]||(o[1]=(...B)=>ae(x)&&ae(x)(...B)),onMouseleave:o[2]||(o[2]=(...B)=>ae(h)&&ae(h)(...B)),onMousemove:o[3]||(o[3]=(...B)=>ae(s)&&ae(s)(...B)),onTouchstart:o[4]||(o[4]=(...B)=>ae(C)&&ae(C)(...B)),onTouchend:o[5]||(o[5]=(...B)=>ae(x)&&ae(x)(...B)),onTouchmove:o[6]||(o[6]=(...B)=>ae(s)&&ae(s)(...B)),onClick:ue,class:"fixed z-40 p-4 bg-gradient-to-r from-indigo-700 to-sky-600 text-white border shadow-lg rounded-full hover:shadow-xl transition",style:Ke({left:ae(L).x+"px",top:ae(L).y+"px"}),"aria-label":"Toggle vertical menu"},[F.value?(n(),l("svg",Tl,o[31]||(o[31]=[e("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"},null,-1)]))):(n(),l("svg",Vl,o[30]||(o[30]=[e("path",{"fill-rule":"evenodd",d:"M3 5h14v2H3V5zm0 4h10v2H3V9zm0 4h6v2H3v-2z","clip-rule":"evenodd"},null,-1)])))],36)):c("",!0),H.value==="horizontal"?(n(),l("div",{key:2,class:re(["z-10 bg-white shadow-sm",{"sticky top-0 mb-2":Z.value==="top","fixed bottom-0 left-0 right-0":Z.value==="bottom"}])},[e("div",Ml,[e("div",{class:"flex-shrink-0"},[e("button",{onClick:_t,class:"p-2 rounded-full text-gray-600 hover:text-gray-800 hover:bg-gray-100 transition-colors duration-200",title:"Pengaturan"},o[32]||(o[32]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})],-1)]))]),e("div",{ref_key:"menuContainer",ref:Xe,class:"flex-1 overflow-x-auto scrollbar-hide py-3 ml-2 space-x-2 menu-container",onScroll:ba},[e("div",El,[e("button",{ref_key:"menuItems",ref:ut,onClick:o[7]||(o[7]=B=>dt("vehicle")),class:re(["flex-shrink-0 px-4 py-2 rounded-full text-sm font-medium whitespace-nowrap transition-colors duration-200 menu-item",{"bg-gradient-to-r from-indigo-700 to-sky-600 shadow-lg text-white":d.value==="vehicle","bg-gray-100 text-gray-700 hover:bg-gray-200":d.value!=="vehicle"}]),"data-category":"vehicle"},[o[33]||(o[33]=Ue(" Detail Kendaraan ")),Je.value?(n(),l("span",Ul," ✓ ")):c("",!0)],2),(n(!0),l(Ee,null,De(a.appMenus,B=>(n(),l("button",{key:B.id,ref_for:!0,ref_key:"menuItems",ref:ut,onClick:at=>dt(String(B.id)),class:re(["flex-shrink-0 px-4 py-2 rounded-full text-sm font-medium whitespace-nowrap transition-colors duration-200 menu-item",{"bg-gradient-to-r from-indigo-700 to-sky-600 shadow-lg text-white":d.value===String(B.id),"bg-gray-100 text-gray-700 hover:bg-gray-200":d.value!==String(B.id)}]),"data-category":String(B.id)},[Ue(z(B.name)+" ",1),it(B)?(n(),l("span",Dl," ✓ ")):c("",!0)],10,Nl))),128)),e("button",{ref_key:"menuItems",ref:ut,onClick:o[8]||(o[8]=B=>dt("conclusion")),class:re(["flex-shrink-0 px-4 py-2 rounded-full text-sm font-medium whitespace-nowrap transition-colors duration-200 menu-item",{"bg-gradient-to-r from-indigo-700 to-sky-600 shadow-lg text-white":d.value==="conclusion","bg-gray-100 text-gray-700 hover:bg-gray-200":d.value!=="conclusion"}]),"data-category":"conclusion"},[o[34]||(o[34]=Ue(" Kesimpulan ")),ht.value.isComplete?(n(),l("span",Pl," ✓ ")):c("",!0)],2)])],544)])],2)):c("",!0),H.value==="vertical"&&F.value?(n(),l("div",Ll,[e("div",{class:"absolute inset-0 bg-black bg-opacity-30",onClick:W}),e("div",{class:re(["absolute z-40 w-60 bg-white rounded-xl shadow-xl p-2 max-h-[75vh] overflow-y-auto",{"top-16 right-4":Z.value==="top-right","top-16 left-4":Z.value==="top-left","bottom-16 right-4":Z.value==="bottom-right","bottom-16 left-4":Z.value==="bottom-left"}])},[e("div",{class:"flex items-center justify-between px-2 py-1 border-b"},[o[35]||(o[35]=e("div",{class:"text-sm font-semibold"},"Pilih Menu",-1)),e("button",{onClick:W,class:"text-xs text-gray-500 hover:text-gray-700"},"Tutup")]),e("div",Rl,[e("button",{onClick:o[9]||(o[9]=B=>{dt("vehicle"),W()}),class:re([ie(d.value==="vehicle"),"w-full flex items-center justify-between px-3 py-2 rounded-md text-sm"])},[o[36]||(o[36]=e("span",null,"Detail Kendaraan",-1)),Je.value?(n(),l("span",jl,"✓")):c("",!0)],2),(n(!0),l(Ee,null,De(a.appMenus,B=>(n(),l("button",{key:`vmenu-${B.id}`,onClick:()=>{dt(String(B.id)),W()},class:re([ie(d.value===String(B.id)),"w-full flex items-center justify-between px-3 py-2 rounded-md text-sm"])},[e("span",null,z(B.name),1),it(B)?(n(),l("span",Fl,"✓")):c("",!0)],10,Bl))),128)),e("button",{onClick:o[10]||(o[10]=B=>{dt("conclusion"),W()}),class:re([ie(d.value==="conclusion"),"w-full flex items-center justify-between px-3 py-2 rounded-md text-sm"])},[o[37]||(o[37]=e("span",null,"Kesimpulan",-1)),ht.value.isComplete?(n(),l("span",Ol,"✓")):c("",!0)],2)])],2)])):c("",!0),e("div",{class:re(["max-w-7xl mx-auto px-2 sm:px-4 lg:px-6 py-1",{"pb-4 pt-1":Z.value==="top","pb-20 pt-4":Z.value==="bottom","pb-4 pt-4":H.value==="vertical"}])},[Ve(pt,{name:"fade"},{default:Fe(()=>[we.value?(n(),l("div",zl,z(we.value),1)):c("",!0)]),_:1}),e("div",ql,[Ve(pt,{name:"category-slide",mode:"out-in"},{default:Fe(()=>[d.value==="vehicle"?(n(),l("div",Kl,[Ve(hs,{inspection:a.inspection,CarDetail:a.CarDetail,allInspections:t.allInspections,onUpdateVehicle:V,onSaveCarDetails:ma,"onUpdate:validation":kt,"onUpdate:hasUnsavedChanges":je},null,8,["inspection","CarDetail","allInspections"])])):G.value&&d.value!=="conclusion"?(n(),l("div",{key:G.value.id},[Ve(tl,{category:G.value,"inspection-id":a.inspection.id,car:t.car,form:ae(w),head:H.value,onUpdateResult:Ut,onHapusPoint:X,onRemoveImage:ha},null,8,["category","inspection-id","car","form","head"])])):d.value==="conclusion"?(n(),l("div",Hl,[Ve(Sl,{form:{conclusion:u.value},"inspection-id":a.inspection.id,inspection:a.inspection,settings:a.inspection.settings||{},onUpdateConclusion:va},null,8,["form","inspection-id","inspection","settings"])])):c("",!0)]),_:1})]),d.value==="conclusion"?(n(),l("div",{key:0,class:re(["flex justify-end gap-4 mt-2 p-4 bg-white rounded-xl shadow-md",{"mb-4":Z.value==="top","mb-20":Z.value==="bottom"}])},[Ve(ae(ka),{href:r.route("inspections.pending",a.inspectionId),as:"button",type:"button",disabled:Te.value&&Me.value==="pending",onClick:o[11]||(o[11]=gt(B=>Oe(r.route("inspections.pending",a.inspectionId),"pending"),["prevent"])),class:"inline-flex items-center justify-center px-3 py-1.5 text-sm font-medium rounded-md shadow-sm bg-yellow-500 text-white hover:bg-yellow-600 transition disabled:opacity-50 disabled:cursor-not-allowed"},{default:Fe(()=>[Te.value&&Me.value==="pending"?(n(),l(Ee,{key:0},[o[38]||(o[38]=e("svg",{class:"animate-spin h-4 w-4 text-white mr-2",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)),o[39]||(o[39]=e("span",null,"Memproses...",-1))],64)):(n(),l("span",Gl,"Tunda"))]),_:1},8,["href","disabled"]),e("button",{type:"button",onClick:fa,disabled:!bt.value||I.value,class:"w-full inline-flex items-center justify-center px-6 py-3 border border-transparent text-base font-medium rounded-md shadow-sm bg-gradient-to-r from-indigo-700 to-sky-600 shadow-lg text-white focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition duration-150 ease-in-out disabled:opacity-50 disabled:cursor-not-allowed"},[I.value?(n(),l("svg",Yl,o[40]||(o[40]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):c("",!0),e("span",null,z(I.value?"Mengirim...":"Final Kirim Inspeksi"),1)],8,Wl)],2)):c("",!0),i.value?(n(),l("button",{key:1,onMousedown:o[12]||(o[12]=(...B)=>ae(U)&&ae(U)(...B)),onMouseup:o[13]||(o[13]=(...B)=>ae(Q)&&ae(Q)(...B)),onMouseleave:o[14]||(o[14]=(...B)=>ae(R)&&ae(R)(...B)),onMousemove:o[15]||(o[15]=(...B)=>ae(q)&&ae(q)(...B)),onTouchstart:o[16]||(o[16]=(...B)=>ae(U)&&ae(U)(...B)),onTouchend:o[17]||(o[17]=(...B)=>ae(Q)&&ae(Q)(...B)),onTouchmove:o[18]||(o[18]=(...B)=>ae(q)&&ae(q)(...B)),onClick:ve,class:"fixed z-5 p-4 bg-gradient-to-r from-indigo-700 to-sky-600 text-white rounded-full shadow-lg",style:Ke({left:ae(pe).x+"px",top:ae(pe).y+"px"})},o[41]||(o[41]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 4v16m8-8H4"})],-1)]),36)):c("",!0),Ve(pa,{show:ce.value,title:"Cari Point Inspeksi",subtitle:"Pilih point inspeksi untuk ditambahkan",onClose:zt},{default:Fe(()=>[e("button",{onClick:zt,class:"absolute top-4 right-4 text-gray-400 hover:text-gray-600 transition-colors z-10"},o[42]||(o[42]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])),e("div",Zl,[e("div",Jl,[Pe(e("input",{"onUpdate:modelValue":o[19]||(o[19]=B=>_e.value=B),type:"text",placeholder:"Cari point inspeksi...",class:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"},null,512),[[ct,_e.value]]),o[43]||(o[43]=e("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[e("svg",{class:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})])],-1))]),e("div",Xl,[mt.value.length===0?(n(),l("div",Ql," Tidak ada point yang ditemukan ")):c("",!0),(n(!0),l(Ee,null,De(mt.value,B=>{var at,ta;return n(),l("button",{key:B.id,onClick:wr=>Tt(B),class:"w-full text-left p-3 border-b border-gray-200 hover:bg-gray-50 transition-colors"},[e("div",tr,z((at=B.inspection_point)==null?void 0:at.name),1),e("div",ar,z((ta=B.inspection_point)==null?void 0:ta.description),1),e("div",sr,z(ft(B)),1),vt(B.inspection_point_id)?(n(),l("div",nr," ✓ Sudah ada data ")):c("",!0)],8,er)}),128))])])]),_:1},8,["show"]),$e.value?(n(),Ne(Ot,{key:(ge=fe.value)==null?void 0:ge.id,show:$e.value,title:((he=(le=fe.value)==null?void 0:le.inspection_point)==null?void 0:he.name)||"Detail Point",subtitle:(Le=(xe=fe.value)==null?void 0:xe.inspection_point)==null?void 0:Le.description,name:`point-${(Ce=fe.value)==null?void 0:Ce.id}`,"inspection-id":a.inspection.id,"point-id":(We=fe.value)==null?void 0:We.inspection_point_id,settings:((qe=fe.value)==null?void 0:qe.settings)||{},options:((yt=(Be=fe.value)==null?void 0:Be.settings)==null?void 0:yt.radios)||[],"selected-Point":fe.value,"selected-value":Se.value,"images-value":ae(w).images[(xt=fe.value)==null?void 0:xt.inspection_point_id],"notes-value":Ae.value,point:fe.value,"existing-data":It((Ye=fe.value)==null?void 0:Ye.inspection_point_id),"onUpdate:selectedValue":o[20]||(o[20]=B=>Se.value=B),"onUpdate:notesValue":o[21]||(o[21]=B=>Ae.value=B),"onUpdate:imagesValue":Mt,onSave:Et,onClose:jt,onHapus:X},null,8,["show","title","subtitle","name","inspection-id","point-id","settings","options","selected-Point","selected-value","images-value","notes-value","point","existing-data"])):c("",!0),et.value?(n(),l("div",or,o[44]||(o[44]=[e("p",{class:"text-sm"},"Tekan sekali lagi untuk keluar dari inspeksi",-1),e("p",{class:"text-xs text-gray-300 mt-1"},"Data inspeksi telah disimpan secara lokal",-1)]))):c("",!0),lt.value?(n(),l("div",{key:4,class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",onClick:rt},[e("div",{class:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4 max-h-[80vh] overflow-y-auto",onClick:o[29]||(o[29]=gt(()=>{},["stop"]))},[e("div",{class:"flex items-center justify-between p-4 border-b"},[o[46]||(o[46]=e("h3",{class:"text-lg font-semibold text-gray-900"},"Pengaturan Inspeksi",-1)),e("button",{onClick:rt,class:"text-gray-400 hover:text-gray-600 transition-colors"},o[45]||(o[45]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),e("div",ir,[e("div",lr,[o[47]||(o[47]=e("div",null,[e("label",{class:"text-sm font-medium text-gray-700"},"Swipe Gesture"),e("p",{class:"text-xs text-gray-500"},"Aktifkan navigasi dengan geser")],-1)),e("button",{onClick:Ct,type:"button",class:re(["relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",Re.value?"bg-indigo-600":"bg-gray-200"]),role:"switch","aria-checked":Re.value},[e("span",{"aria-hidden":"true",class:re(["pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out",Re.value?"translate-x-5":"translate-x-0"])},null,2)],10,rr)]),e("div",ur,[o[49]||(o[49]=e("label",{class:"text-sm font-medium text-gray-700"},"Sumber Gambar",-1)),Pe(e("select",{"onUpdate:modelValue":o[22]||(o[22]=B=>Ge.value=B),onChange:St,class:"w-full text-sm border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"},o[48]||(o[48]=[e("option",{value:"all"},"Tanya",-1),e("option",{value:"camera"},"Kamera",-1),e("option",{value:"gallery"},"Galeri",-1)]),544),[[Bt,Ge.value]])]),e("div",dr,[o[51]||(o[51]=e("label",{class:"text-sm font-medium text-gray-700"},"Kualitas Kamera",-1)),Pe(e("select",{"onUpdate:modelValue":o[23]||(o[23]=B=>ze.value=B),class:"w-full text-sm border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"},o[50]||(o[50]=[ia('<option value="HP_Native" data-v-7c858e33>Kamera HP</option><option value="HD_Std" data-v-7c858e33>HD Std</option><option value="4K" data-v-7c858e33>4K Rtc</option><option value="HD" data-v-7c858e33>HD Rtc</option><option value="SD" data-v-7c858e33>SD Rtc</option>',5)]),512),[[Bt,ze.value]])]),e("div",cr,[o[54]||(o[54]=e("label",{class:"text-sm font-medium text-gray-700"},"Mode Menu",-1)),e("div",gr,[e("label",pr,[Pe(e("input",{type:"radio","onUpdate:modelValue":o[24]||(o[24]=B=>H.value=B),value:"horizontal",class:"text-indigo-600 focus:ring-indigo-500"},null,512),[[st,H.value]]),o[52]||(o[52]=e("span",{class:"ml-2 text-sm text-gray-700"},"Scroll samping",-1))]),e("label",mr,[Pe(e("input",{type:"radio","onUpdate:modelValue":o[25]||(o[25]=B=>H.value=B),value:"vertical",class:"text-indigo-600 focus:ring-indigo-500"},null,512),[[st,H.value]]),o[53]||(o[53]=e("span",{class:"ml-2 text-sm text-gray-700"},"Menu Ngambang",-1))])])]),H.value==="horizontal"?(n(),l("div",vr,[o[57]||(o[57]=e("label",{class:"text-sm font-medium text-gray-700"},"Posisi Menu",-1)),e("div",fr,[e("label",hr,[Pe(e("input",{type:"radio","onUpdate:modelValue":o[26]||(o[26]=B=>Z.value=B),value:"top",class:"text-indigo-600 focus:ring-indigo-500"},null,512),[[st,Z.value]]),o[55]||(o[55]=e("span",{class:"ml-2 text-sm text-gray-700"},"Atas",-1))]),e("label",br,[Pe(e("input",{type:"radio","onUpdate:modelValue":o[27]||(o[27]=B=>Z.value=B),value:"bottom",class:"text-indigo-600 focus:ring-indigo-500"},null,512),[[st,Z.value]]),o[56]||(o[56]=e("span",{class:"ml-2 text-sm text-gray-700"},"Bawah",-1))])])])):c("",!0),H.value==="vertical"?(n(),l("div",yr,[o[59]||(o[59]=e("label",{class:"text-sm font-medium text-gray-700"},"Posisi Menu Vertikal",-1)),Pe(e("select",{"onUpdate:modelValue":o[28]||(o[28]=B=>Z.value=B),class:"w-full text-sm border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"},o[58]||(o[58]=[e("option",{value:"top-right"},"Atas Kanan",-1),e("option",{value:"top-left"},"Atas Kiri",-1),e("option",{value:"bottom-right"},"Bawah Kanan",-1),e("option",{value:"bottom-left"},"Bawah Kiri",-1)]),512),[[Bt,Z.value]])])):c("",!0)]),e("div",{class:"flex justify-end p-4 border-t bg-gray-50"},[e("button",{onClick:rt,class:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2"}," Tutup ")])])])):c("",!0)],2)])}}},Vr=He(xr,[["__scopeId","data-v-7c858e33"]]);export{Vr as default};
