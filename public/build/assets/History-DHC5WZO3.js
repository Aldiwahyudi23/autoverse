import{c as a,o as r,d as e,r as g,q as N,G as T,j as V,w as x,k as o,u as n,v as O,b as F,z as b,A as J,F as y,m as _,t as i,I as j,f as h,S as w,W as f}from"./vendor-g77w9U1W.js";import{A as R}from"./AppLayout-5FWUuRHK.js";import{_ as Y}from"./app-BVNQeIN5.js";import{r as H}from"./XMarkIcon-CovUh5Kb.js";import{r as U,C as P}from"./car-CSEwuOSb.js";import{r as W}from"./ClipboardDocumentListIcon-lqbg6Ce-.js";function Z(c,u){return r(),a("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 3c2.755 0 5.455.232 8.083.678.533.09.917.556.917 1.096v1.044a2.25 2.25 0 0 1-.659 1.591l-5.432 5.432a2.25 2.25 0 0 0-.659 1.591v2.927a2.25 2.25 0 0 1-1.244 2.013L9.75 21v-6.568a2.25 2.25 0 0 0-.659-1.591L3.659 7.409A2.25 2.25 0 0 1 3 5.818V4.774c0-.54.384-1.006.917-1.096A48.32 48.32 0 0 1 12 3Z"})])}function M(c,u){return r(),a("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"})])}const q={class:"w-full px-4 sm:px-6 lg:px-6 py-6"},z={class:"bg-white rounded-lg shadow-md p-3 mb-6"},E={key:0,class:"flex items-center justify-between"},G={class:"relative flex-1"},K={key:1,class:"flex items-center justify-between gap-2"},Q={class:"flex items-center gap-2 flex-1"},X=["value"],ee=["value"],te={key:0,class:"bg-blue-50 border border-blue-200 rounded-md p-3 mb-4"},se={class:"text-sm text-blue-800 flex items-center gap-2"},re={key:1,class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-2"},ae={class:"p-4 flex justify-between items-start"},oe={class:"flex items-center mb-1"},ne={class:"text-sm font-semibold text-blue-700 ml-7 -mt-1"},ie={class:"px-4 py-3 bg-gray-50 border-t border-gray-100"},le={class:"flex items-center"},de={class:"text-sm font-medium text-gray-800"},ce={key:0},ue={class:"text-gray-600"},me={key:1},pe={class:"flex items-center mt-2"},ve={class:"text-sm font-bold text-gray-900"},he={class:"px-4 py-3 bg-gray-50 border-t border-gray-100"},ge={class:"flex items-center mb-1"},xe={class:"text-sm font-semibold text-gray-800 ml-7 -mt-1"},fe={class:"p-4"},be={key:2,class:"text-center py-8 bg-white rounded-lg shadow-md"},ye={class:"text-gray-500"},_e={class:"text-center mt-6"},we={__name:"History",props:{tasks:Array,encryptedIds:Object,filters:Object,availableMonths:Object,currentMonth:Number,currentYear:Number},setup(c){const u=c,D=d=>{switch(d){case"draft":return"Dibuat";case"in_progress":return"Dalam Proses";case"pending":return"Menunggu";case"pending_review":return"Menunggu Review";case"approved":return"Disetujui";case"rejected":return"Ditolak";case"revision":return"Revisi";case"completed":return"Selesai";case"cancelled":return"Dibatalkan";default:return d}},I=()=>"Lihat Detail",m=g(!1),l=g(u.filters.search),p=g(u.filters.month),v=g(u.filters.year),L=[{value:1,name:"Jan"},{value:2,name:"Feb"},{value:3,name:"Mar"},{value:4,name:"Apr"},{value:5,name:"Mei"},{value:6,name:"Jun"},{value:7,name:"Jul"},{value:8,name:"Ags"},{value:9,name:"Sep"},{value:10,name:"Okt"},{value:11,name:"Nov"},{value:12,name:"Des"}],C=N(()=>Object.keys(u.availableMonths||{}).sort((d,s)=>s-d)),$=()=>{f.get(route("inspections.history"),{month:p.value,year:v.value,search:""},{preserveState:!0,replace:!0})};let k=null;const A=()=>{clearTimeout(k),k=setTimeout(()=>{f.get(route("inspections.history"),{search:l.value},{preserveState:!0,replace:!0})},300)},B=()=>{m.value=!0,l.value="",f.get(route("inspections.history"),{search:""},{preserveState:!0,replace:!0})},S=()=>{m.value=!1,l.value="",f.get(route("inspections.history"),{month:p.value,year:v.value,search:""},{preserveState:!0,replace:!0})};return T([p,v],()=>{m.value||$()}),(d,s)=>(r(),V(R,null,{default:x(()=>[o(n(O),{title:"Riwayat Inspeksi"}),e("div",q,[s[8]||(s[8]=e("h3",{class:"text-xl md:text-3xl font-bold text-gray-900 mb-6 text-center"}," Riwayat Inspeksi ",-1)),e("div",z,[m.value?(r(),a("div",E,[e("div",G,[b(e("input",{"onUpdate:modelValue":s[0]||(s[0]=t=>l.value=t),onInput:A,type:"text",placeholder:"Cari berdasarkan plat atau nama mobil...",class:"w-full px-4 py-2 pr-10 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm",autofocus:""},null,544),[[J,l.value]]),e("button",{onClick:S,class:"absolute right-2 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600"},[o(n(H),{class:"h-5 w-5"})])])])):(r(),a("div",K,[e("div",Q,[o(n(Z),{class:"h-4 w-4 text-gray-500 flex-shrink-0"}),b(e("select",{"onUpdate:modelValue":s[1]||(s[1]=t=>p.value=t),class:"px-2 py-1 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-blue-500 text-sm"},[(r(),a(y,null,_(L,t=>e("option",{key:t.value,value:t.value},i(t.name),9,X)),64))],512),[[j,p.value]]),b(e("select",{"onUpdate:modelValue":s[2]||(s[2]=t=>v.value=t),class:"px-2 py-1 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-blue-500 text-sm"},[(r(!0),a(y,null,_(C.value,t=>(r(),a("option",{key:t,value:t},i(t),9,ee))),128))],512),[[j,v.value]])]),e("button",{onClick:B,class:"p-1 text-gray-400 hover:text-gray-600 transition-colors"},[o(n(M),{class:"h-5 w-5"})])]))]),!m.value&&l.value?(r(),a("div",te,[e("p",se,[o(n(M),{class:"h-4 w-4"}),h(' Menampilkan hasil pencarian: "'+i(l.value)+'" ',1),e("button",{onClick:S,class:"text-blue-600 hover:text-blue-800 ml-2"}," Ã— Hapus pencarian ")])])):F("",!0),c.tasks.length>0?(r(),a("div",re,[(r(!0),a(y,null,_(c.tasks,t=>(r(),a("div",{key:t.id,class:"bg-white rounded-xl shadow-md overflow-hidden border border-gray-200 hover:shadow-lg transition"},[e("div",ae,[e("div",null,[e("div",oe,[o(n(U),{class:"h-5 w-5 text-blue-500 mr-2"}),s[3]||(s[3]=e("span",{class:"text-sm font-medium text-gray-600"},"Jadwal",-1))]),e("p",ne,i(new Date(t.inspection_date).toLocaleDateString("id-ID",{weekday:"short",year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})),1)]),o(n(w),{href:d.route("inspection.log",{inspection:c.encryptedIds[t.id]}),class:"text-xs font-semibold text-indigo-600 hover:underline"},{default:x(()=>s[4]||(s[4]=[h(" Lihat Log ")])),_:2,__:[4]},1032,["href"])]),e("div",ie,[e("div",le,[o(n(P),{class:"h-5 w-5 text-gray-500 mr-2"}),e("div",de,[t.car?(r(),a("div",ce,[h(i(`${t.car.brand.name} ${t.car.model.name} ${t.car.type.name} ${(t.car.cc/1e3).toFixed(1)} ${t.car.transmission} ${t.car.year}`)+" ",1),e("span",ue,"("+i(t.car.fuel_type)+")",1)])):(r(),a("div",me,i(t.car_name),1))])]),e("div",pe,[s[5]||(s[5]=e("span",{class:"text-xs font-semibold uppercase tracking-wide text-gray-500 mr-2"},"NO POLISI:",-1)),e("span",ve,i(t.plate_number),1)])]),e("div",he,[e("div",ge,[o(n(W),{class:"h-5 w-5 text-green-500 mr-2"}),s[6]||(s[6]=e("span",{class:"text-sm font-medium text-gray-600"},"Status",-1))]),e("p",xe,i(D(t.status)),1)]),e("div",fe,[o(n(w),{href:d.route("inspections.review",{id:c.encryptedIds[t.id]}),class:"inline-flex items-center justify-center w-full px-3 py-2 bg-gradient-to-r from-indigo-700 to-sky-600 shadow-lg text-white font-medium rounded-md text-sm transition-colors"},{default:x(()=>[h(i(I()),1)]),_:2},1032,["href"])])]))),128))])):(r(),a("div",be,[e("p",ye,i(l.value?"Tidak ditemukan hasil pencarian":"Belum ada riwayat inspeksi untuk periode ini"),1)])),e("div",_e,[o(n(w),{href:d.route("job.index"),class:"inline-block px-4 py-2 text-sm font-medium text-indigo-600 border border-indigo-600 rounded-md hover:bg-blue-50"},{default:x(()=>s[7]||(s[7]=[h(" Kembali ke Tugas ")])),_:1,__:[7]},8,["href"])])])]),_:1}))}},Le=Y(we,[["__scopeId","data-v-9cc37ae1"]]);export{Le as default};
