import{r,q as F,W as N,g as R,D as w,j as q,o as i,w as E,k as W,d as s,c as l,b as d,u as C,v as O,z as Q,A as U,F as j,m as P,t as f,n as G,f as J,y as m}from"./vendor-CUNG9NG6.js";import{d as K}from"./debounce-hB1Swk-4.js";import{A as X}from"./AppLayout-pKphSfVg.js";import"./app-BThIPAAf.js";const Y={class:"w-full px-4 sm:px-6 lg:px-6 py-6"},Z={class:"space-y-4 bg-white rounded-xl shadow-md p-4 relative"},ee={class:"relative mb-4"},te={key:0,class:"space-y-4"},se=["onClick"],oe={class:"text-lg md:text-xl font-semibold text-indigo-700"},ne={key:0,class:"p-2 border-t border-gray-200"},ie={class:"text-gray-700 mb-4"},le={key:0},ae=["onClick"],re=["innerHTML"],de={key:2,class:"mt-4"},ue=["src","onClick"],ce={key:0,class:"mt-2"},ve={class:"space-y-4"},pe={class:"flex justify-between items-start"},fe={class:"font-medium text-gray-800"},ge=["onClick"],he=["innerHTML"],me={key:1,class:"text-gray-600 mt-2"},xe={key:2,class:"mt-2"},ye=["src","onClick"],ke={key:1},_e={key:1,class:"text-center py-12"},be={class:"relative max-w-full max-h-full flex items-center justify-center"},we=["src"],Be={__name:"Bantuan",props:{components:{type:Array,default:()=>[]},filters:{type:Object,default:()=>({})}},setup(V){const x=V,a=r(x.filters.search||""),u=r(null),c=r(null),g=r([]),y=r({}),L=r({}),$=(t,e)=>{e&&(y.value[t]=e)},z=(t,e)=>{e&&(L.value[t]=e)},k=r(!1),_=r(""),v=t=>{if(!t)return"";const e=document.createElement("DIV");return e.innerHTML=t,e.textContent||e.innerText||""},M=(t,e)=>t?t.length<=e?t:t.substring(0,e)+"...":"",b=t=>t.inspection_point&&t.inspection_point.length>0,S=t=>{if(!a.value||!b(t))return t.inspection_point||[];const e=a.value.toLowerCase();return t.inspection_point.filter(o=>o.name.toLowerCase().includes(e)||v(o.description).toLowerCase().includes(e))},h=F(()=>{if(!a.value)return x.components;const t=a.value.toLowerCase();return x.components.filter(e=>{const o=e.name.toLowerCase().includes(t)||v(e.description).toLowerCase().includes(t),n=b(e)&&e.inspection_point.some(p=>p.name.toLowerCase().includes(t)||v(p.description).toLowerCase().includes(t));return o||n})}),D=async t=>{if(u.value===t)u.value=null;else{u.value=t,c.value=null,await w();const e=y.value[t];e&&e.scrollIntoView({behavior:"smooth",block:"start"})}},H=async t=>{if(c.value===t)c.value=null;else{c.value=t,await w();const e=L.value[t];e&&e.scrollIntoView({behavior:"smooth",block:"start"})}},A=t=>{g.value.includes(t)||g.value.push(t)},I=t=>{_.value=t,k.value=!0},B=()=>{k.value=!1,_.value=""},T=K(()=>{N.get("/bantuan",{search:a.value},{preserveState:!0,replace:!0})},300);return R(async()=>{if(a.value&&h.value.length>0){u.value=h.value[0].id,await w();const t=y.value[u.value];t&&t.scrollIntoView({behavior:"smooth",block:"start"})}}),(t,e)=>(i(),q(X,{title:"Pusat Bantuan"},{default:E(()=>[W(C(O),{title:"Pusat Bantuan"}),s("div",Y,[s("div",Z,[e[7]||(e[7]=s("div",{class:"flex justify-between items-center mb-4"},[s("h1",{class:"text-xl md:text-3xl font-bold text-gray-900 text-center flex-grow"}," Pusat Bantuan ")],-1)),s("div",ee,[e[2]||(e[2]=s("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[s("svg",{class:"h-5 w-5 text-gray-400",fill:"currentColor",viewBox:"0 0 20 20"},[s("path",{"fill-rule":"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z","clip-rule":"evenodd"})])],-1)),Q(s("input",{"onUpdate:modelValue":e[0]||(e[0]=o=>a.value=o),type:"text",class:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors",placeholder:"Cari komponen, inspection point, atau deskripsi...",onInput:e[1]||(e[1]=(...o)=>C(T)&&C(T)(...o))},null,544),[[U,a.value]])]),h.value.length>0?(i(),l("div",te,[(i(!0),l(j,null,P(h.value,o=>(i(),l("div",{key:o.id,ref_for:!0,ref:n=>$(o.id,n),class:"bg-white rounded-xl shadow-md overflow-hidden component-item"},[s("div",{class:"p-2 flex justify-between items-center cursor-pointer bg-indigo-50 hover:bg-indigo-100 transition-colors",onClick:n=>D(o.id)},[s("h2",oe,f(o.name),1),(i(),l("svg",{class:G([{"rotate-180":u.value===o.id},"h-5 w-5 text-indigo-600 transform transition-transform"]),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},e[3]||(e[3]=[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)]),2))],8,se),u.value===o.id?(i(),l("div",ne,[s("div",ie,[o.description&&!g.value.includes(o.id)?(i(),l("div",le,[J(f(M(v(o.description),300))+" ",1),v(o.description).length>300?(i(),l("button",{key:0,onClick:m(n=>A(o.id),["stop"]),class:"text-indigo-600 hover:text-indigo-800 text-sm font-medium ml-1"}," Selengkapnya ",8,ae)):d("",!0)])):d("",!0),g.value.includes(o.id)?(i(),l("div",{key:1,class:"prose max-w-none text-gray-700",innerHTML:o.description},null,8,re)):d("",!0),o.file_path?(i(),l("div",de,[s("img",{src:`/storage/${o.file_path}`,alt:"Component Image",class:"w-full h-auto rounded-lg shadow-md cursor-pointer",onClick:m(n=>I(`/storage/${o.file_path}`),["stop"])},null,8,ue)])):d("",!0)]),b(o)?(i(),l("div",ce,[e[4]||(e[4]=s("h3",{class:"text-lg font-medium text-gray-800 mb-2"},"Point:",-1)),s("div",ve,[(i(!0),l(j,null,P(S(o),n=>(i(),l("div",{key:n.id,ref_for:!0,ref:p=>z(n.id,p),class:"bg-gray-50 rounded-lg p-4 border border-gray-200 point-item"},[s("div",pe,[s("h4",fe,f(n.name),1),s("button",{onClick:p=>H(n.id),class:"text-indigo-600 hover:text-indigo-800 text-sm font-medium"},f(c.value===n.id?"Sembunyikan":"Selengkapnya"),9,ge)]),c.value===n.id?(i(),l("div",{key:0,class:"text-gray-600 mt-2 prose max-w-none",innerHTML:n.notes},null,8,he)):(i(),l("div",me,f(M(v(n.description),200)),1)),c.value===n.id&&n.file_path?(i(),l("div",xe,[s("img",{src:`/storage/${n.file_path}`,alt:"Inspection Point Image",class:"w-full h-auto rounded-lg shadow-md cursor-pointer",onClick:m(p=>I(`/storage/${n.file_path}`),["stop"])},null,8,ye)])):d("",!0)]))),128))])])):o.inspection_point&&o.inspection_point.length===0?(i(),l("div",ke,e[5]||(e[5]=[s("p",{class:"text-gray-500 italic"},"Tidak ada inspection points untuk komponen ini.",-1)]))):d("",!0)])):d("",!0)]))),128))])):(i(),l("div",_e,e[6]||(e[6]=[s("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),s("h3",{class:"mt-2 text-lg font-medium text-gray-900"},"Tidak ada hasil ditemukan",-1),s("p",{class:"mt-1 text-gray-500"},"Coba dengan kata kunci pencarian yang berbeda.",-1)])))])]),k.value?(i(),l("div",{key:0,class:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black bg-opacity-90",onClick:B},[s("div",be,[s("button",{onClick:m(B,["stop"]),class:"absolute top-4 right-4 z-10 text-white bg-black bg-opacity-50 rounded-full p-2 hover:bg-opacity-70 transition-colors"},e[8]||(e[8]=[s("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])),s("img",{src:_.value,alt:"Full-screen image",class:"max-w-full max-h-full object-contain"},null,8,we)])])):d("",!0)]),_:1}))}};export{Be as default};
