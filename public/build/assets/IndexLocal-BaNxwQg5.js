import{x as nn,r as k,g as yt,q,H as sn,G as se,c as l,o,d as t,b as d,k as ue,z as _e,A as bt,n as G,t as P,F as ge,m as ye,f as De,u as j,e as yn,y as ht,w as Me,j as Ce,l as Xt,T as lt,L as an,M as Dt,p as xn,N as Qt,D as Ut,J as et,B as kn,O as en,S as wn,I as Mt,W as Nt}from"./vendor-C4AlKu7N.js";import{l as on}from"./lodash-C1lUmwx1.js";import{_ as In}from"./PrimaryButton-DwRCxHZ4.js";import{_ as Sn}from"./ActionMessage-B_Q-_-AF.js";import{F as _n}from"./fuse-Ch1WBRTM.js";import{_ as rt}from"./app-CtsRg-vw.js";import{_ as ln}from"./InputNumber-1xug-n5e.js";const An={class:"bg-gray-50 shadow-lg rounded-xl overflow-hidden border border-gray-100"},Vn={key:0,class:"p-4 space-y-2"},$n={class:"space-y-2 pb-2 border-b border-gray-100 last:border-0 last:pb-0"},Cn={class:"flex items-center space-x-2"},Tn={key:0,class:"text-xs text-red-500 font-normal ml-2"},En={key:1,class:"text-xs text-red-500 font-normal ml-2"},Nn={key:2,class:"text-xs text-green-500 font-normal ml-2"},Dn={class:"space-y-2 pb-2 border-b border-gray-100 last:border-0 last:pb-0"},Pn={class:"grid grid-cols-1 sm:grid-cols-3 gap-3"},Mn={class:"col-span-2 flex space-x-3"},Un={class:"mt-3 p-3 bg-blue-50 border border-blue-200 rounded-lg"},Ln={class:"flex items-start"},Rn={class:"text-sm text-blue-700"},Bn={class:"mt-1"},jn={key:0,class:"inline-flex items-center px-2 py-1 rounded bg-blue-100 text-blue-800 text-xs font-medium mr-2"},On={key:1,class:"inline-flex items-center px-2 py-1 rounded bg-green-100 text-green-800 text-xs font-medium mr-2"},Kn={key:2,class:"inline-flex items-center px-2 py-1 rounded bg-green-100 text-green-800 text-xs font-medium"},qn={key:3,class:"text-blue-600"},Hn={class:"space-y-2 pb-2 border-b border-gray-100 last:border-0 last:pb-0"},zn={class:"relative"},Gn={key:0,class:"absolute right-3 top-3"},Fn={key:1,class:"mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-60 overflow-y-auto"},Wn={key:0},Jn=["onMousedown"],Yn={class:"font-medium text-gray-900"},Zn={class:"text-sm text-gray-500"},Xn={key:1,class:"p-4 text-sm text-gray-500 text-center"},Qn={key:0,class:"text-xs text-red-500 font-normal ml-2"},es={key:0,class:"mt-3 p-3 bg-yellow-50 border border-yellow-200 rounded-md"},ts={key:1,class:"mb-6 p-4 bg-gray-50 rounded-lg border border-gray-200"},ns={key:0,class:"mb-4"},ss=["innerHTML"],as={key:1},os={class:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3"},is=["onClick"],ls=["src","alt"],rs={key:0,class:"absolute inset-0 bg-black bg-opacity-50 opacity-0 group-hover:opacity-100 transition-opacity rounded-lg flex items-center justify-center p-2"},us={class:"text-white text-xs text-center"},ds={key:2,class:"text-center py-4 text-gray-500 text-sm"},cs={class:"relative max-w-4xl max-h-full w-full h-full flex items-center justify-center"},ms=["src","alt"],gs={key:2,class:"absolute bottom-4 left-1/2 transform -translate-x-1/2 text-white bg-black bg-opacity-50 px-3 py-1 rounded-full text-sm"},ps={key:3,class:"absolute bottom-4 left-4 text-white bg-black bg-opacity-50 px-3 py-1 rounded text-sm max-w-md"},vs={key:0,class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},fs={__name:"VehicleDetails",props:{inspection:{type:Object,default:null},CarDetail:Array,allInspections:{type:Array,default:()=>[]}},emits:["update-vehicle","update:validation","update:hasUnsavedChanges","update:vehicle-type"],setup(s,{emit:K}){var B,fe,X,ze,Oe,Ge;const e=s,_=K,g=nn({plate_number:((B=e.inspection)==null?void 0:B.plate_number)||"",car_id:((fe=e.inspection)==null?void 0:fe.car_id)||null,car_name:((X=e.inspection)==null?void 0:X.car_name)||""}),I=k(((ze=e.inspection)==null?void 0:ze.plate_number)||""),$=k(((Oe=e.inspection)==null?void 0:Oe.car_id)||null),N=k(((Ge=e.inspection)==null?void 0:Ge.car_name)||""),x=k(""),M=k(""),C=k(""),V=k(null),A=k({rear_door:!1}),z=k(!1),c=k(""),r=k(""),w=k(g.car_name),J=k(!1),F=k(!1),R=k([]),L=k(null),T=k([]),f=k(!1),U=k(0);yt(()=>{var v,m,ee,y,W;if(E((v=e.inspection)==null?void 0:v.plate_number),(m=e.inspection)!=null&&m.car_id&&((ee=e.CarDetail)==null?void 0:ee.length)>0){const de=e.CarDetail.find(me=>me.id===e.inspection.car_id);de&&ke(de)}else!((y=e.inspection)!=null&&y.car_id)&&((W=e.inspection)!=null&&W.car_name)&&(w.value=e.inspection.car_name,g.car_id=null);window.addEventListener("keydown",Ne),Y(),_("update:hasUnsavedChanges",ae.value),_("update:validation",ce.value)}),sn(()=>{window.removeEventListener("keydown",Ne)});const Y=()=>{try{const v=localStorage.getItem("vehicle_features");if(v){const m=JSON.parse(v);A.value.rear_door=m.rear_door||!1,m.pick_up?V.value="pick_up":m.box?V.value="box":V.value=null}else A.value.rear_door=!1,V.value=null;p()}catch(v){console.error("Error loading vehicle type from localStorage:",v),A.value.rear_door=!1,V.value=null,p()}},h=()=>{A.value.rear_door=!A.value.rear_door,n()},u=v=>{V.value===v?V.value=null:V.value=v,n()},n=()=>{try{const v={rear_door:A.value.rear_door,pick_up:V.value==="pick_up",box:V.value==="box"};localStorage.setItem("vehicle_features",JSON.stringify(v)),p(),console.log("Vehicle features saved to localStorage:",v)}catch(v){console.error("Error saving vehicle type to localStorage:",v)}},p=()=>{const v={rear_door:A.value.rear_door,pick_up:V.value==="pick_up",box:V.value==="box"};_("update:vehicle-type",v)},E=v=>{if(!v){x.value="",M.value="",C.value="";return}const m=v.toUpperCase().trim(),ee=m.match(/^([A-Z]{1,2})?([0-9]{1,4})?([A-Z]{1,3})?$/);if(ee)x.value=ee[1]||"",M.value=ee[2]||"",C.value=ee[3]||"";else{let y="area",W="",de="",me="";for(const le of m)y==="area"&&/[A-Z]/.test(le)?W+=le:y==="area"&&/[0-9]/.test(le)?(y="number",de+=le):y==="number"&&/[0-9]/.test(le)?de+=le:y==="number"&&/[A-Z]/.test(le)?(y="suffix",me+=le):y==="suffix"&&/[A-Z]/.test(le)&&(me+=le);x.value=W,M.value=de,C.value=me}Z()},Z=()=>{const v=`${x.value}${M.value}${C.value}`;g.plate_number=v,Ve()},be=v=>{v==="area"?x.value=x.value.toUpperCase().replace(/[^A-Z]/g,""):v==="number"?M.value=M.value.replace(/[^0-9]/g,""):v==="suffix"&&(C.value=C.value.toUpperCase().replace(/[^A-Z]/g,"")),Z()},ie=q(()=>{const v=g.plate_number;return/^[A-Z]{1,2}\d{1,4}[A-Z]{0,3}$/.test(v)}),pe=q(()=>!w.value||w.value.trim()===""),xe=q(()=>g.plate_number.length>0&&!ie.value?"Format plat nomor tidak valid.":null),ce=q(()=>{const v=!g.plate_number||g.plate_number.trim()==="",m=!w.value||w.value.trim()==="";return v||m||!ie.value||z.value}),ae=q(()=>{const v=g.plate_number!==I.value,m=g.car_id!==$.value||w.value!==N.value;return v||m}),he=q(()=>ae.value&&!ce.value),re=v=>{var ee,y,W;if(!v)return"";const m=[];return(ee=v.brand)!=null&&ee.name&&m.push(v.brand.name),(y=v.model)!=null&&y.name&&m.push(v.model.name),(W=v.type)!=null&&W.name&&m.push(v.type.name),v.cc&&m.push((v.cc/1e3).toFixed(1)),v.transmission&&m.push(v.transmission),v.year&&m.push(v.year.toString()),v.fuel_type&&m.push(v.fuel_type),v.production_period&&m.push(`(${v.production_period})`),m.join(" ")},ve=on.debounce(()=>{if(!w.value.trim()){R.value=[],J.value=!1;return}F.value=!0;try{const v=w.value.trim();if(e.CarDetail&&e.CarDetail.length>0){const m=e.CarDetail.map(W=>({...W,formattedName:re(W)})),y=new _n(m,{keys:["formattedName","brand.name","model.name","type.name"],threshold:.6,findAllMatches:!0,includeScore:!0,shouldSort:!0}).search(v).slice(0,10);R.value=y.map(W=>W.item)}else R.value=[];J.value=!0}finally{F.value=!1}},300),Re=()=>{if(g.car_id&&(g.car_id=null,L.value=null,T.value=[]),!w.value.trim()){R.value=[],J.value=!1;return}ve()},Be=()=>{setTimeout(()=>{J.value=!1,!g.car_id&&w.value&&(g.car_name=w.value,Ve())},200)},ke=async v=>{L.value=v,w.value=re(v),g.car_id=v.id,g.car_name=re(v),J.value=!1,ve.cancel(),await Ee(v.id),Ve(),_("update:hasUnsavedChanges",ae.value),_("update:validation",ce.value)},Te=v=>!v||!v.file_path?"":`/storage/${v.file_path}`,Ee=async v=>{try{const m=await fetch(`/api/cars/${v}/images`);if(m.ok){const ee=await m.json();T.value=Array.isArray(ee)?ee:[]}else T.value=[]}catch(m){console.error("Error loading car images:",m),T.value=[]}},ne=v=>{U.value=v,f.value=!0,document.body.style.overflow="hidden"},we=()=>{f.value=!1,document.body.style.overflow=""},Ae=()=>{U.value=(U.value+1)%T.value.length},Ie=()=>{U.value=(U.value-1+T.value.length)%T.value.length},Ne=v=>{if(f.value)switch(v.key){case"Escape":we();break;case"ArrowRight":Ae();break;case"ArrowLeft":Ie();break}},Ve=()=>{const v={plate_number:g.plate_number,car_id:g.car_id,car_name:g.car_name};_("update-vehicle",v)},je=()=>{e.inspection&&g.post(route("inspections.updateVehicleDetails",{inspection:e.inspection.id}),{preserveScroll:!0,onSuccess:()=>{I.value=g.plate_number,$.value=g.car_id,N.value=g.car_name,_("update:hasUnsavedChanges",!1),console.log("Data berhasil disimpan!")},onError:v=>{console.error("Gagal menyimpan data:",v)}})};return se([()=>g.plate_number,()=>g.car_name],v=>{c.value="",z.value=!1,r.value="";const m=v[0];if(m&&m.length>=6){const ee=e.allInspections.filter(y=>{var W;return y.plate_number===m&&y.id!==((W=e.inspection)==null?void 0:W.id)});if(ee.length>0){const y=["draft","in_progress","pending","pending_review","revision"],W=ee.find(de=>y.includes(de.status));if(W)z.value=!0,c.value=`Nomor plat ini sedang dalam proses inspeksi dengan status: ${W.status.replace(/_/g," ").toUpperCase()}.`;else{const de=ee.filter(me=>["approved","rejected","completed","cancelled"].includes(me.status));if(de.length>0){de.sort((le,Ke)=>new Date(Ke.created_at)-new Date(le.created_at));const me=de[0];if(me.car_id){const le=e.CarDetail.find(Ke=>Ke.id===me.car_id);le&&ke(le)}else me.car_name&&(w.value=me.car_name,g.car_name=me.car_name,g.car_id=null);r.value=`Nomor plat ini sudah pernah diperiksa ${de.length} kali sebelumnya.`}}}}_("update:hasUnsavedChanges",ae.value),_("update:validation",ce.value)},{deep:!0}),se([()=>A.value.rear_door,()=>V.value],()=>{n()}),se(()=>{var v;return(v=e.inspection)==null?void 0:v.car_id},v=>{var m,ee;if(v!==g.car_id)if(g.car_id=v,v&&((m=e.CarDetail)==null?void 0:m.length)>0){const y=e.CarDetail.find(W=>W.id===v);y&&ke(y)}else!v&&((ee=e.inspection)!=null&&ee.car_name)&&(w.value=e.inspection.car_name,g.car_name=e.inspection.car_name,g.car_id=null)}),se(()=>{var v;return(v=e.inspection)==null?void 0:v.car_name},v=>{v&&v!==w.value&&(w.value=v)}),(v,m)=>{var ee;return o(),l("div",An,[m[27]||(m[27]=t("div",{class:"bg-indigo-200 px-6 py-2 border-b flex items-center justify-between"},[t("h4",{class:"text-base font-semibold text-indigo-700"}," Detail Kendaraan ")],-1)),s.inspection?(o(),l("div",Vn,[t("div",$n,[m[11]||(m[11]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"}," Nomor Plat Kendaraan ",-1)),t("div",Cn,[_e(t("input",{"onUpdate:modelValue":m[0]||(m[0]=y=>x.value=y),type:"text",placeholder:"Contoh: B",class:G(["w-1/4 rounded-lg border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm text-center transition duration-150",{"border-red-500 focus:border-red-500":!ie.value||z.value}]),onInput:m[1]||(m[1]=y=>be("area")),maxlength:"2"},null,34),[[bt,x.value]]),_e(t("input",{"onUpdate:modelValue":m[2]||(m[2]=y=>M.value=y),type:"tel",pattern:"[0-9]*",placeholder:"1234",class:G(["w-2/4 rounded-lg border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm text-center transition duration-150",{"border-red-500 focus:border-red-500":!ie.value||z.value}]),onInput:m[3]||(m[3]=y=>be("number")),maxlength:"4"},null,34),[[bt,M.value]]),_e(t("input",{"onUpdate:modelValue":m[4]||(m[4]=y=>C.value=y),type:"text",placeholder:"ABC",class:G(["w-1/4 rounded-lg border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm text-center transition duration-150",{"border-red-500 focus:border-red-500":!ie.value||z.value}]),onInput:m[5]||(m[5]=y=>be("suffix")),maxlength:"3"},null,34),[[bt,C.value]])]),xe.value?(o(),l("span",Tn,P(xe.value),1)):d("",!0),c.value?(o(),l("span",En,P(c.value),1)):d("",!0),r.value?(o(),l("span",Nn,P(r.value),1)):d("",!0)]),t("div",Dn,[m[15]||(m[15]=t("label",{class:"block text-sm font-medium text-gray-700 mb-3"}," Jenis Kendaraan ",-1)),t("div",Pn,[t("div",{class:G(["w-full px-4 py-3 border-2 rounded-lg text-center transition-all duration-200 whitespace-nowrap text-sm font-medium cursor-pointer",{"border-indigo-500 bg-indigo-50 text-indigo-700 shadow-sm":A.value.rear_door,"border-gray-300 text-gray-700 hover:bg-gray-50 hover:border-gray-400":!A.value.rear_door}]),onClick:h},m[12]||(m[12]=[t("span",null,"Pintu Belakang",-1)]),2),t("div",Mn,[t("div",{class:G(["flex-1 px-4 py-3 border-2 rounded-lg text-center transition-all duration-200 whitespace-nowrap text-sm font-medium cursor-pointer",{"border-indigo-500 bg-indigo-50 text-indigo-700 shadow-sm":V.value==="pick_up","border-gray-300 text-gray-700 hover:bg-gray-50 hover:border-gray-400":V.value!=="pick_up"}]),onClick:m[6]||(m[6]=y=>u("pick_up"))}," Pick Up ",2),t("div",{class:G(["flex-1 px-4 py-3 border-2 rounded-lg text-center transition-all duration-200 whitespace-nowrap text-sm font-medium cursor-pointer",{"border-indigo-500 bg-indigo-50 text-indigo-700 shadow-sm":V.value==="box","border-gray-300 text-gray-700 hover:bg-gray-50 hover:border-gray-400":V.value!=="box"}]),onClick:m[7]||(m[7]=y=>u("box"))}," Box ",2)])]),t("div",Un,[t("div",Ln,[m[14]||(m[14]=t("svg",{class:"w-4 h-4 text-blue-600 mt-0.5 mr-2 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20"},[t("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z","clip-rule":"evenodd"})],-1)),t("div",Rn,[m[13]||(m[13]=t("p",{class:"font-medium"},"Status Kendaraan:",-1)),t("p",Bn,[A.value.rear_door?(o(),l("span",jn," âœ“ Mobil Pada Umum nya yang memiliki Pintu Belakang ")):d("",!0),V.value==="pick_up"?(o(),l("span",On," âœ“ Pick Up ")):d("",!0),V.value==="box"?(o(),l("span",Kn," âœ“ Box ")):d("",!0),!A.value.rear_door&&!V.value?(o(),l("span",qn," Pilih jenis kendaraan agar point bisa menyesuaikan dengan tipe kendaraan anda ")):d("",!0)])])])])]),t("div",Hn,[m[18]||(m[18]=t("label",{class:"block text-sm font-medium text-gray-700"}," Nama Mobil ",-1)),t("div",zn,[_e(t("input",{"onUpdate:modelValue":m[8]||(m[8]=y=>w.value=y),type:"text",placeholder:"Cari atau ketik nama mobil...",class:G(["block w-full rounded-lg border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm transition duration-150",{"border-red-500 focus:border-red-500":pe.value}]),onInput:Re,onFocus:m[9]||(m[9]=y=>J.value=!0),onBlur:Be},null,34),[[bt,w.value]]),F.value?(o(),l("div",Gn,m[16]||(m[16]=[t("svg",{class:"animate-spin h-5 w-5 text-gray-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)]))):d("",!0),J.value?(o(),l("div",Fn,[R.value.length>0?(o(),l("div",Wn,[(o(!0),l(ge,null,ye(R.value,y=>(o(),l("div",{key:y.id,class:"px-4 py-3 hover:bg-gray-50 cursor-pointer border-b border-gray-100 last:border-b-0",onMousedown:W=>ke(y)},[t("div",Yn,P(re(y)),1),t("div",Zn,P(y.year)+" â€¢ "+P(y.cc)+"cc â€¢ "+P(y.transmission)+" â€¢ "+P(y.fuel_type),1)],40,Jn))),128))])):(o(),l("div",Xn,m[17]||(m[17]=[De(" Tidak ada data mobil yang cocok. "),t("br",null,null,-1),De(" Silakan input manual dengan format: "),t("br",null,null,-1),t("span",{class:"font-medium text-gray-800"},"Toyota Avanza 1.5 G AT Bensin 2019",-1)])))])):d("",!0)]),pe.value?(o(),l("span",Qn,"Nama mobil tidak boleh kosong.")):d("",!0)]),!j(g).car_id&&w.value&&!J.value?(o(),l("div",es,m[19]||(m[19]=[yn('<div class="flex items-start" data-v-f5fe3b58><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-yellow-600 mt-0.5 mr-2 flex-shrink-0" fill="none" viewBox="0 0 24 24" stroke="currentColor" data-v-f5fe3b58><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" data-v-f5fe3b58></path></svg><div data-v-f5fe3b58><p class="text-yellow-800 font-medium mb-1" data-v-f5fe3b58>Informasi Penting</p><p class="text-yellow-700 text-sm mb-2" data-v-f5fe3b58> Anda memasukkan nama mobil secara manual. Data detail mobil (spesifikasi, gambar, deskripsi) <span class="font-semibold" data-v-f5fe3b58>tidak akan tersedia</span> dalam laporan inspeksi. </p><p class="text-yellow-700 text-sm mb-2" data-v-f5fe3b58> Untuk laporan yang lengkap dengan semua detail mobil, silakan pilih mobil dari hasil pencarian. </p><p class="text-yellow-700 text-sm" data-v-f5fe3b58> Jika tidak ingin mengubah data mobil dan anda tidak sengaja sudah menghapus atau edit, <span class="font-semibold" data-v-f5fe3b58>jangan klik tombol &quot;Perbarui Detail Kendaraan&quot;</span>. Sebagai gantinya, <span class="font-semibold" data-v-f5fe3b58>refresh halaman</span> untuk kembali ke data awal. </p></div></div>',1)]))):d("",!0),j(g).car_id&&L.value?(o(),l("div",ts,[L.value.description?(o(),l("div",ns,[m[20]||(m[20]=t("h3",{class:"text-sm font-medium text-gray-700 mb-2"},"Deskripsi:",-1)),t("div",{class:"prose prose-sm max-w-none text-gray-600",innerHTML:L.value.description},null,8,ss)])):d("",!0),T.value.length>0?(o(),l("div",as,[m[21]||(m[21]=t("h3",{class:"text-sm font-medium text-gray-700 mb-3"},"Gambar Mobil:",-1)),t("div",os,[(o(!0),l(ge,null,ye(T.value,(y,W)=>(o(),l("div",{key:y.id||W,class:"relative group cursor-pointer",onClick:de=>ne(W)},[t("img",{src:Te(y),alt:y.name||"Car Image",class:"w-full h-24 object-cover rounded-lg border border-gray-200 transition-transform duration-200 group-hover:scale-105"},null,8,ls),y.note?(o(),l("div",rs,[t("p",us,P(y.note),1)])):d("",!0)],8,is))),128))])])):(o(),l("div",ds," Tidak ada gambar tersedia untuk mobil ini "))])):d("",!0),f.value?(o(),l("div",{key:2,class:"fixed inset-0 bg-black bg-opacity-90 z-50 flex items-center justify-center p-4",onClick:we},[t("div",cs,[t("button",{onClick:we,class:"absolute top-4 right-4 z-10 text-white bg-black bg-opacity-50 rounded-full p-2 hover:bg-opacity-70 transition-colors"},m[22]||(m[22]=[t("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])),T.value.length>1?(o(),l("button",{key:0,onClick:ht(Ie,["stop"]),class:"absolute left-4 z-10 text-white bg-black bg-opacity-50 rounded-full p-3 hover:bg-opacity-70 transition-colors"},m[23]||(m[23]=[t("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)]))):d("",!0),T.value.length>1?(o(),l("button",{key:1,onClick:ht(Ae,["stop"]),class:"absolute right-4 z-10 text-white bg-black bg-opacity-50 rounded-full p-3 hover:bg-opacity-70 transition-colors"},m[24]||(m[24]=[t("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)]))):d("",!0),t("img",{src:Te(T.value[U.value]),alt:"Car Image "+(U.value+1),class:"max-w-full max-h-full object-contain",onClick:m[10]||(m[10]=ht(()=>{},["stop"]))},null,8,ms),T.value.length>1?(o(),l("div",gs,P(U.value+1)+" / "+P(T.value.length),1)):d("",!0),(ee=T.value[U.value])!=null&&ee.note?(o(),l("div",ps,P(T.value[U.value].note),1)):d("",!0)])])):d("",!0),ue(In,{type:"button",onClick:je,class:"w-full inline-flex items-center justify-center px-6 py-3 border border-transparent text-base font-medium rounded-md shadow-sm bg-gradient-to-r from-indigo-700 to-sky-600 shadow-lg text-white focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition duration-150 ease-in-out disabled:opacity-50 disabled:cursor-not-allowed",disabled:!he.value},{default:Me(()=>[j(g).processing?(o(),l("svg",vs,m[25]||(m[25]=[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):d("",!0),t("span",null,P(j(g).processing?"Mengirim...":"Perbarui Detail Kendaraan"),1),ue(Sn,{on:j(g).recentlySuccessful,class:"me-3 text-sm text-green-600 font-medium"},{default:Me(()=>m[26]||(m[26]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 inline-block mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1),De(" Tersimpan. ")])),_:1,__:[26]},8,["on"])]),_:1},8,["disabled"])])):d("",!0)])}}},bs=rt(fs,[["__scopeId","data-v-f5fe3b58"]]),hs={class:"mt-1"},ys=["value","required","minlength","maxlength","allowSpace","placeholder"],xs={key:0,class:"mt-2 text-sm text-red-600"},rn={__name:"InputText",props:{modelValue:String,required:Boolean,minLength:[String,Number],maxLength:[String,Number],pattern:String,placeholder:String,error:String,pointId:[String,Number],textTransform:{type:String,default:"none"},allowSpace:{type:Boolean,default:!0}},emits:["update:modelValue","save"],setup(s,{emit:K}){const e=s,_=K,g=q(()=>{if(!e.modelValue)return"";let $=e.modelValue;switch(e.allowSpace||($=$.replace(/\s+/g,"")),e.textTransform){case"uppercase":return $.toUpperCase();case"lowercase":return $.toLowerCase();case"capitalize":return $.replace(/\b\w/g,N=>N.toUpperCase());default:return $}}),I=$=>{let N=$.target.value;switch(e.allowSpace||(N=N.replace(/\s+/g,"")),e.textTransform){case"uppercase":N=N.toUpperCase();break;case"lowercase":N=N.toLowerCase();break;case"capitalize":N=N.replace(/\b\w/g,x=>x.toUpperCase());break}_("update:modelValue",N),_("save",e.pointId)};return($,N)=>(o(),l("div",hs,[t("input",{value:g.value,onInput:I,type:"text",required:s.required,minlength:s.minLength,maxlength:s.maxLength,allowSpace:s.allowSpace,placeholder:s.placeholder,class:G(["block w-full rounded-lg border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm transition duration-150",{uppercase:s.textTransform==="uppercase",lowercase:s.textTransform==="lowercase",capitalize:s.textTransform==="capitalize"}])},null,42,ys),s.error?(o(),l("p",xs,P(s.error),1)):d("",!0)]))}},ks={class:"mt-1"},ws=["value","required","min","max"],Is={key:0,class:"mt-2 text-sm text-red-600"},un={__name:"InputDate",props:{modelValue:String,required:Boolean,minDate:String,maxDate:String,error:String,pointId:[String,Number]},emits:["update:modelValue","save"],setup(s,{emit:K}){const e=s,_=K,g=I=>{_("update:modelValue",I.target.value),_("save",e.pointId)};return(I,$)=>(o(),l("div",ks,[t("input",{value:s.modelValue,onChange:g,type:"date",required:s.required,min:s.minDate,max:s.maxDate,class:"block w-full rounded-lg border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm transition duration-150"},null,40,ws),s.error?(o(),l("p",Is,P(s.error),1)):d("",!0)]))}},Ss={class:"mt-1"},_s=["value","required","placeholder"],As={key:0,class:"mt-2 text-sm text-red-600"},dn={__name:"InputAccount",props:{modelValue:[String,Number],required:Boolean,placeholder:String,error:String,pointId:[String,Number],settings:{type:Object,default:()=>({currency_symbol:"Rp",thousands_separator:",",min_value:0,max_value:1e9})}},emits:["update:modelValue","save"],setup(s,{emit:K}){const e=s,_=K,g=k(""),I=q(()=>{var C,V,A,z;return{currency_symbol:((C=e.settings)==null?void 0:C.currency_symbol)||"Rp",thousands_separator:((V=e.settings)==null?void 0:V.thousands_separator)||",",min_value:((A=e.settings)==null?void 0:A.min_value)!==void 0?Number(e.settings.min_value):0,max_value:((z=e.settings)==null?void 0:z.max_value)!==void 0?Number(e.settings.max_value):1e9}}),$=C=>{if(C==null||C==="")return"";const V=Number(C);if(isNaN(V))return"";let A=V.toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:0});return I.value.thousands_separator!==","&&(A=A.replace(/,/g,I.value.thousands_separator)),A},N=C=>C?C.replace(/[^\d]/g,""):"",x=q(()=>g.value?`${I.value.currency_symbol} ${$(g.value)}`:""),M=C=>{let V=N(C.target.value),A=Number(V);I.value.min_value!==void 0&&A<I.value.min_value&&(V=I.value.min_value.toString()),I.value.max_value!==void 0&&A>I.value.max_value&&(V=I.value.max_value.toString()),g.value=V,_("update:modelValue",V),_("save",e.pointId)};return se(()=>e.modelValue,C=>{C!=null&&(g.value=C.toString())},{immediate:!0}),(C,V)=>(o(),l("div",Ss,[t("input",{value:x.value,onInput:M,type:"text",required:s.required,placeholder:s.placeholder,class:G(["block w-full rounded-lg border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm transition duration-150",s.error?"border-red-300":"border-gray-300"])},null,42,_s),s.error?(o(),l("p",As,P(s.error),1)):d("",!0)]))}},Vs={class:"mt-1 space-y-3"},$s={key:0,class:"space-y-2"},Cs={class:"flex flex-wrap gap-2"},Ts=["onClick"],Es=["value","required","minlength","maxlength","placeholder"],Ns={class:"flex justify-between items-center mt-1"},Ds={class:"text-xs text-gray-500"},Ps={key:0,class:"text-xs text-red-600"},cn={__name:"InputTextarea",props:{modelValue:String,required:Boolean,minLength:[String,Number],maxLength:[String,Number],placeholder:String,error:String,pointId:[String,Number],inspectionId:[String,Number],settings:Object},emits:["update:modelValue","save"],setup(s,{emit:K}){const e=s,_=K,g=k([]),I=k(""),$=C=>g.value.some(V=>V.value===C),N=C=>{$(C.value)?g.value=g.value.filter(c=>c.value!==C.value):g.value.push(C);const A=[...g.value.map(c=>c.value)];I.value.trim()&&A.push(I.value.trim());const z=A.join(", ");_("update:modelValue",z),_("save",{pointId:e.pointId,inspectionId:e.inspectionId,notes:z})},x=C=>{const V=C.target.value;_("update:modelValue",V),_("save",{pointId:e.pointId,inspectionId:e.inspectionId,notes:V}),M(V)},M=C=>{var c,r,w,J;if(!C){g.value=[],I.value="";return}const V=C.split(",").map(F=>F.trim()).filter(F=>F),A=((r=(c=e.settings)==null?void 0:c.damage_options)==null?void 0:r.map(F=>F.value))||[];g.value=((J=(w=e.settings)==null?void 0:w.damage_options)==null?void 0:J.filter(F=>V.includes(F.value)))||[];const z=V.filter(F=>!A.includes(F));I.value=z.join(", ")};return se(()=>e.modelValue,C=>{C!=null&&M(C)},{immediate:!0}),se(()=>{var C;return(C=e.settings)==null?void 0:C.damage_options},(C,V)=>{if(C!==V){const A=C?C.map(w=>w.value):[];g.value=g.value.filter(w=>A.includes(w.value));const c=[...g.value.map(w=>w.value)];I.value.trim()&&c.push(I.value.trim());const r=c.filter(w=>w).join(", ");_("update:modelValue",r),_("save",{pointId:e.pointId,inspectionId:e.inspectionId,notes:r})}},{deep:!0,immediate:!1}),(C,V)=>{var A,z,c;return o(),l("div",Vs,[(A=s.settings)!=null&&A.enable_damage&&((z=s.settings)!=null&&z.damage_options)?(o(),l("div",$s,[V[0]||(V[0]=t("h4",{class:"text-sm font-medium text-gray-700"},"Pilih Kerusakan:",-1)),t("div",Cs,[(o(!0),l(ge,null,ye(s.settings.damage_options,(r,w)=>(o(),l("button",{key:w,type:"button",onClick:J=>N(r),class:G(["px-3 py-1.5 rounded-md text-sm font-medium transition-colors border",{"border-indigo-500 bg-indigo-100 text-indigo-700":$(r.value),"border-gray-300 bg-white text-gray-700 hover:bg-gray-50":!$(r.value)}])},P(r.label),11,Ts))),128))])])):d("",!0),t("div",null,[t("textarea",{value:s.modelValue,onInput:x,required:s.required,minlength:s.minLength,maxlength:s.maxLength,placeholder:s.placeholder,class:"block w-full rounded-lg border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm transition duration-150",rows:"4"},null,40,Es),t("div",Ns,[t("span",Ds,P(((c=s.modelValue)==null?void 0:c.length)||0)+"/"+P(s.maxLength||400),1),s.error?(o(),l("p",Ps,P(s.error),1)):d("",!0)])])])}}},Ms={class:"mt-1"},Us=["value","required"],Ls={key:0,class:"mt-2 text-sm text-red-600"},Rs={__name:"InputSelect",props:{modelValue:String,required:Boolean,error:String,pointId:[String,Number]},emits:["update:modelValue","save"],setup(s,{emit:K}){const e=s,_=K,g=I=>{_("update:modelValue",I.target.value),_("save",e.pointId)};return(I,$)=>(o(),l("div",Ms,[t("select",{value:s.modelValue,onChange:g,required:s.required,class:"block w-full rounded-lg border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm transition duration-150"},$[0]||($[0]=[t("option",{value:"",disabled:""},"Select status",-1),t("option",{value:"good"},"Good",-1),t("option",{value:"bad"},"Bad",-1),t("option",{value:"na"},"N/A",-1)]),40,Us),s.error?(o(),l("p",Ls,P(s.error),1)):d("",!0)]))}},Bs=rt(Rs,[["__scopeId","data-v-1b6c0201"]]),js={key:0,class:"fixed inset-0 z-50 flex items-end"},Os={class:"relative w-full bg-white rounded-t-2xl p-5"},Ks={class:"flex justify-around"},qs={__name:"ImageSourceOptionsModal",props:{show:Boolean},setup(s){return(K,e)=>s.show?(o(),l("div",js,[t("div",{class:"absolute inset-0 bg-black/50",onClick:e[0]||(e[0]=_=>K.$emit("close"))}),t("div",Os,[e[6]||(e[6]=t("h3",{class:"text-center font-semibold mb-4"}," Pilih Sumber Foto ",-1)),t("div",Ks,[t("button",{class:"flex flex-col items-center gap-2",onClick:e[1]||(e[1]=_=>K.$emit("camera"))},e[4]||(e[4]=[t("div",{class:"w-14 h-14 rounded-full bg-indigo-100 flex items-center justify-center"}," ðŸ“· ",-1),t("span",{class:"text-sm"},"Kamera",-1)])),t("button",{class:"flex flex-col items-center gap-2",onClick:e[2]||(e[2]=_=>K.$emit("gallery"))},e[5]||(e[5]=[t("div",{class:"w-14 h-14 rounded-full bg-green-100 flex items-center justify-center"}," ðŸ–¼ï¸ ",-1),t("span",{class:"text-sm"},"Galeri",-1)]))]),t("button",{class:"mt-6 w-full text-center text-gray-500 text-sm",onClick:e[3]||(e[3]=_=>K.$emit("close"))}," Batal ")])])):d("",!0)}},Hs={key:0,class:"mt-3"},zs=["src"],Lt={__name:"InputImage",emits:["selected"],setup(s,{emit:K}){const e=K,_=k(null),g=k(null),I=k(!1),$=k(null),N=()=>{I.value=!0},x=()=>{I.value=!1,_.value.click()},M=()=>{I.value=!1,g.value.click()},C=V=>{const A=V.target.files[0];A&&($.value=URL.createObjectURL(A),e("selected",A),V.target.value="")};return(V,A)=>(o(),l("div",null,[t("input",{ref_key:"galleryInput",ref:_,type:"file",accept:"image/*",class:"hidden",onChange:C},null,544),t("input",{ref_key:"cameraInput",ref:g,type:"file",accept:"image/*",capture:"environment",class:"hidden",onChange:C},null,544),t("div",{class:"border-2 border-dashed rounded-lg h-28 flex flex-col items-center justify-center cursor-pointer bg-gray-50",onClick:N},A[1]||(A[1]=[t("span",{class:"text-gray-600 font-medium"},"Upload Foto",-1),t("span",{class:"text-xs text-gray-400"},"Kamera / Galeri",-1)])),$.value?(o(),l("div",Hs,[t("img",{src:$.value,class:"w-32 h-32 object-cover rounded-md border"},null,8,zs)])):d("",!0),ue(qs,{show:I.value,onClose:A[0]||(A[0]=z=>I.value=!1),onCamera:M,onGallery:x},null,8,["show"])]))}},Gs={key:0,class:"fixed inset-0 z-50 overflow-hidden"},Fs={class:"absolute bottom-0 left-0 right-0 bg-white rounded-t-2xl max-h-[85vh] overflow-hidden flex flex-col"},Ws={class:"px-4 pb-2 border-b border-gray-200"},Js={class:"text-lg font-semibold text-gray-900"},Ys={key:0,class:"text-sm text-gray-500 mt-1"},Zs={class:"flex-1 overflow-y-auto p-4"},Xs={key:0,class:"border-t border-gray-200 p-4 bg-gray-50"},Qs={__name:"BottomSheetModal",props:{show:Boolean,title:String,subtitle:String},setup(s){return(K,e)=>(o(),Ce(lt,{name:"bottom-sheet"},{default:Me(()=>[s.show?(o(),l("div",Gs,[e[1]||(e[1]=t("div",{class:"absolute inset-0 bg-black bg-opacity-50"},null,-1)),t("div",Fs,[e[0]||(e[0]=t("div",{class:"flex justify-center py-3"},[t("div",{class:"w-12 h-1.5 bg-gray-300 rounded-full"})],-1)),t("div",Ws,[t("h3",Js,P(s.title),1),s.subtitle?(o(),l("p",Ys,P(s.subtitle),1)):d("",!0)]),t("div",Zs,[Xt(K.$slots,"default",{},void 0,!0)]),K.$slots.footer?(o(),l("div",Xs,[Xt(K.$slots,"footer",{},void 0,!0)])):d("",!0)])])):d("",!0)]),_:3}))}},mn=rt(Qs,[["__scopeId","data-v-fd942535"]]),ea={class:"space-y-4"},ta={key:0,class:"mt-2"},na={key:1,class:"mt-2"},sa={key:2,class:"mt-2"},aa={key:3,class:"mt-2"},oa={key:4,class:"mt-2"},ia={class:"text-sm font-medium text-gray-700 mb-2"},la={key:0,class:"text-red-500"},ra={key:0,class:"text-xs text-red-500"},ua=["type","name","value","checked","onChange"],da={key:6,class:"mt-4"},ca={class:"text-sm font-medium text-gray-700 mb-2"},ma={key:0,class:"text-red-500"},ga={key:0,class:"text-xs text-red-500"},pa={key:7,class:"space-y-2"},va={key:0,class:"text-red-500"},fa={key:1,class:"text-xs text-red-500"},ba={class:"flex gap-2"},ha=["disabled"],Rt={__name:"RadioOptionModal",props:{show:Boolean,title:String,subtitle:String,name:String,options:{type:Array,default:()=>[]},selectedValue:[String,Array],notesValue:String,imagesValue:{type:Array,default:()=>[]},pointId:[String,Number],inspectionId:[String,Number],showTextarea:{type:Boolean,default:!0},showImageUpload:{type:Boolean,default:!0},selectedPoint:Object,point:Object},emits:["update:selectedValue","update:notesValue","update:imagesValue","close","save","hapus","saveTextarea","saveImage","saveText","saveNumber","saveAccount","saveDate"],setup(s,{emit:K}){const e=s,_=K,g=c=>_("hapus",c),I=q(()=>Array.isArray(e.selectedValue)?e.options.find(c=>e.selectedValue.includes(c.value)):e.options.find(c=>c.value===e.selectedValue)),$=q(()=>{if(Array.isArray(e.selectedValue))return e.options.filter(c=>e.selectedValue.includes(c.value));if(e.selectedValue){const c=typeof e.selectedValue=="string"?e.selectedValue.split(",").map(r=>r.trim()):[e.selectedValue];return e.options.filter(r=>c.includes(r.value))}return[]}),N=q(()=>{var c;if(Array.isArray(e.selectedValue))return $.value.some(r=>{var w;return r.multi&&((w=r.settings)==null?void 0:w.show_textarea)});{const r=e.options.find(w=>w.value===e.selectedValue);return(c=r==null?void 0:r.settings)==null?void 0:c.show_textarea}}),x=q(()=>{var c;if(Array.isArray(e.selectedValue))return $.value.some(r=>{var w;return r.multi&&((w=r.settings)==null?void 0:w.show_image_upload)});{const r=e.options.find(w=>w.value===e.selectedValue);return(c=r==null?void 0:r.settings)==null?void 0:c.show_image_upload}}),M=q(()=>{var c;if(Array.isArray(e.selectedValue)){const r=$.value.filter(R=>{var L;return R.multi&&((L=R.settings)==null?void 0:L.show_textarea)});if(r.length===0)return null;const w={...r[0].settings},J=[];r.forEach(R=>{var L;(L=R.settings)!=null&&L.damage_options&&J.push(...R.settings.damage_options)});const F=J.filter((R,L,T)=>L===T.findIndex(f=>f.value===R.value));return w.damage_options=F,{...r[0],settings:w}}else{const r=e.options.find(w=>w.value===e.selectedValue);return(c=r==null?void 0:r.settings)!=null&&c.show_textarea?r:null}}),C=q(()=>{var c;if(Array.isArray(e.selectedValue))return $.value.find(r=>{var w;return r.multi&&((w=r.settings)==null?void 0:w.show_image_upload)});{const r=e.options.find(w=>w.value===e.selectedValue);return(c=r==null?void 0:r.settings)!=null&&c.show_image_upload?r:null}});q(()=>$.value.find(c=>{var r;return c.multi&&((r=c.settings)==null?void 0:r.show_textarea)})),q(()=>$.value.find(c=>{var r;return c.multi&&((r=c.settings)==null?void 0:r.show_image_upload)}));const V=c=>Array.isArray(e.selectedValue)?e.selectedValue.includes(c.value):e.selectedValue?(typeof e.selectedValue=="string"?e.selectedValue.split(",").map(w=>w.trim()):[e.selectedValue]).includes(c.value):!1,A=(c,r)=>{let w;if(c.multi){const J=Array.isArray(e.selectedValue)?e.selectedValue:[];r.target.checked?w=[...J,c.value]:w=J.filter(F=>F!==c.value)}else w=c.value;_("update:selectedValue",w)},z=q(()=>{var r,w,J,F,R,L,T;if(e.point.input_type==="text"&&(!((r=e.notesValue)!=null&&r.trim())||e.point.settings.min_length&&e.notesValue.length<e.point.settings.min_length||e.point.settings.max_length&&e.notesValue.length>e.point.settings.max_length)||e.point.input_type==="number"&&(!((w=e.notesValue)!=null&&w.trim())||e.point.settings.min&&e.notesValue.length<e.point.settings.min||e.point.settings.max&&e.notesValue.length>e.point.settings.max)||e.point.input_type==="account"&&(!((J=e.notesValue)!=null&&J.trim())||e.point.settings.min_value&&e.notesValue.length<e.point.settings.min_value||e.point.settings.max_value&&e.notesValue.length>e.point.settings.max_value)||e.point.input_type==="date"&&(!((F=e.notesValue)!=null&&F.trim())||e.point.settings.min_date&&e.notesValue.length<e.point.settings.min_date||e.point.settings.max_date&&e.notesValue.length>e.point.settings.max_date))return!1;if(e.point.input_type==="imageTOradio"){if(e.imagesValue.length===0)return!1;const f=e.imagesValue.some(Y=>Y.status==="error"),U=e.imagesValue.some(Y=>Y.status==="uploading");if(f||U)return!1}if(e.options.length&&(!e.selectedValue||Array.isArray(e.selectedValue)&&e.selectedValue.length===0))return!1;const c=I.value;if(e.showTextarea&&((R=c==null?void 0:c.settings)!=null&&R.show_textarea)&&(!((L=e.notesValue)!=null&&L.trim())||c.settings.min_length&&e.notesValue.length<c.settings.min_length||c.settings.max_length&&e.notesValue.length>c.settings.max_length))return!1;if(e.showImageUpload&&((T=c==null?void 0:c.settings)!=null&&T.show_image_upload)){if(e.imagesValue.length===0||c.settings.max_files&&e.imagesValue.length>c.settings.max_files)return!1;const f=e.imagesValue.some(Y=>Y.status==="error"),U=e.imagesValue.some(Y=>Y.status==="uploading");if(f||U)return!1}return!0});return(c,r)=>(o(),Ce(mn,{show:s.show,title:s.title,subtitle:s.subtitle,onClose:r[17]||(r[17]=w=>c.$emit("close"))},{footer:Me(()=>[s.selectedPoint?(o(),l("button",{key:0,onClick:r[14]||(r[14]=w=>g(s.pointId)),class:"flex items-center justify-center text-red-600 hover:text-red-800 mb-3"},r[19]||(r[19]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6M9 7h6m2-3H7m5 0v3"})],-1),De(" Hapus Data ")]))):d("",!0),t("div",ba,[t("button",{type:"button",onClick:r[15]||(r[15]=w=>c.$emit("close")),class:"flex-1 px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50"}," Batal "),t("button",{type:"button",onClick:r[16]||(r[16]=w=>c.$emit("save")),disabled:!z.value,class:"flex-1 px-4 py-2 bg-indigo-600 border border-transparent rounded-md shadow-sm text-white hover:bg-indigo-700 disabled:bg-gray-300 disabled:cursor-not-allowed"}," Simpan ",8,ha)])]),default:Me(()=>{var w,J,F,R,L,T,f,U,Y,h,u,n,p,E,Z,be,ie,pe,xe,ce,ae,he,re,ve,Re,Be,ke,Te,Ee,ne,we,Ae,Ie,Ne,Ve,je;return[t("div",ea,[s.point.input_type==="text"?(o(),l("div",ta,[ue(rn,{"model-value":s.notesValue,required:(w=s.point.settings)==null?void 0:w.is_required,"min-length":(J=s.point.settings)==null?void 0:J.min_length,"max-length":(F=s.point.settings)==null?void 0:F.max_length,allowSpace:(R=s.point.settings)==null?void 0:R.allow_space,textTransform:(L=s.point.settings)==null?void 0:L.text_transform,placeholder:((T=s.point.settings)==null?void 0:T.placeholder)||"Masukan text",error:c.error,"onUpdate:modelValue":r[0]||(r[0]=B=>c.$emit("update:notesValue",B)),onSave:r[1]||(r[1]=B=>c.$emit("saveText",B))},null,8,["model-value","required","min-length","max-length","allowSpace","textTransform","placeholder","error"])])):d("",!0),s.point.input_type==="number"?(o(),l("div",na,[ue(ln,{"model-value":s.notesValue,required:(f=s.point.settings)==null?void 0:f.is_required,min:(U=s.point.settings)==null?void 0:U.min,max:(Y=s.point.settings)==null?void 0:Y.max,step:((h=s.point.settings)==null?void 0:h.step)||1,placeholder:((u=s.point.settings)==null?void 0:u.placeholder)||"Masukan number",error:c.error,"onUpdate:modelValue":r[2]||(r[2]=B=>c.$emit("update:notesValue",B)),onSave:r[3]||(r[3]=B=>c.$emit("saveNumber",B))},null,8,["model-value","required","min","max","step","placeholder","error"])])):d("",!0),s.point.input_type==="account"?(o(),l("div",sa,[ue(dn,{"model-value":s.notesValue,required:(n=s.point.settings)==null?void 0:n.is_required,placeholder:((p=s.point.settings)==null?void 0:p.placeholder)||"Masukkan nilai",error:c.error,"point-id":s.pointId,settings:s.point.settings,"onUpdate:modelValue":r[4]||(r[4]=B=>c.$emit("update:notesValue",B)),onSave:r[5]||(r[5]=B=>c.$emit("saveAccount",B))},null,8,["model-value","required","placeholder","error","point-id","settings"])])):d("",!0),s.point.input_type==="date"?(o(),l("div",aa,[ue(un,{"model-value":s.notesValue,required:(E=s.point.settings)==null?void 0:E.is_required,"min-date":(Z=s.point.settings)==null?void 0:Z.min_date,"max-date":(be=s.point.settings)==null?void 0:be.max_date,error:c.error,"onUpdate:modelValue":r[6]||(r[6]=B=>c.$emit("update:notesValue",B)),onSave:r[7]||(r[7]=B=>c.$emit("saveDate",B))},null,8,["model-value","required","min-date","max-date","error"])])):d("",!0),s.point.input_type==="imageTOradio"?(o(),l("div",oa,[t("h4",ia,[(ie=s.point.settings)!=null&&ie.required?(o(),l("span",la,"*")):d("",!0)]),ue(Lt,{"model-value":s.imagesValue,"point-id":s.pointId,point:s.point.inspection_point,"inspection-id":s.inspectionId,settings:s.point.settings,"onUpdate:modelValue":r[8]||(r[8]=B=>c.$emit("update:imagesValue",B)),onSave:r[9]||(r[9]=B=>c.$emit("saveImage",B))},null,8,["model-value","point-id","point","inspection-id","settings"]),(pe=s.point.settings)!=null&&pe.required&&s.imagesValue.length===0?(o(),l("p",ra," Foto wajib diupload ")):d("",!0)])):d("",!0),s.options.length?(o(),l("div",{key:5,class:G(["grid gap-2 w-full mt-2",`grid-cols-${Math.min(s.options.length,3)}`])},[(o(!0),l(ge,null,ye(s.options,(B,fe)=>(o(),l("label",{key:fe,class:"cursor-pointer"},[t("input",{type:B.multi?"checkbox":"radio",name:B.multi?`checkbox-${s.name}`:s.name,value:B.value,checked:V(B),onChange:X=>A(B,X),class:"hidden peer"},null,40,ua),t("div",{class:G(["w-full px-4 py-3 border rounded-lg text-center transition-colors whitespace-nowrap text-sm font-medium",{"border-indigo-500 bg-indigo-50 text-indigo-700":V(B),"border-gray-300 text-gray-700 hover:bg-gray-50":!V(B)}])},P(B.label),3)]))),128))],2)):d("",!0),x.value?(o(),l("div",da,[t("h4",ca,[r[18]||(r[18]=De(" Upload Foto ")),(ce=(xe=C.value)==null?void 0:xe.settings)!=null&&ce.required?(o(),l("span",ma,"*")):d("",!0)]),ue(Lt,{"model-value":s.imagesValue,"point-id":s.pointId,point:s.point,"inspection-id":s.inspectionId,settings:(ae=C.value)==null?void 0:ae.settings,"onUpdate:modelValue":r[10]||(r[10]=B=>c.$emit("update:imagesValue",B)),onSave:r[11]||(r[11]=B=>c.$emit("saveImage",B))},null,8,["model-value","point-id","point","inspection-id","settings"]),(re=(he=C.value)==null?void 0:he.settings)!=null&&re.required&&s.imagesValue.length===0?(o(),l("p",ga," Foto wajib diupload ")):d("",!0)])):d("",!0),N.value?(o(),l("div",pa,[(Re=(ve=M.value)==null?void 0:ve.settings)!=null&&Re.required?(o(),l("span",va,"*")):d("",!0),ue(cn,{"model-value":s.notesValue,"point-id":s.pointId,"inspection-id":s.inspectionId,settings:(Be=M.value)==null?void 0:Be.settings,required:(Te=(ke=M.value)==null?void 0:ke.settings)==null?void 0:Te.required,"min-length":(ne=(Ee=M.value)==null?void 0:Ee.settings)==null?void 0:ne.min_length,"max-length":(Ae=(we=M.value)==null?void 0:we.settings)==null?void 0:Ae.max_length,placeholder:((Ne=(Ie=M.value)==null?void 0:Ie.settings)==null?void 0:Ne.placeholder)||"Tambahkan keterangan...","onUpdate:modelValue":r[12]||(r[12]=B=>c.$emit("update:notesValue",B)),onSave:r[13]||(r[13]=B=>c.$emit("saveTextarea",B))},null,8,["model-value","point-id","inspection-id","settings","required","min-length","max-length","placeholder"]),(je=(Ve=M.value)==null?void 0:Ve.settings)!=null&&je.required&&!s.notesValue?(o(),l("p",fa," Keterangan wajib diisi ")):d("",!0)])):d("",!0)])]}),_:1},8,["show","title","subtitle"]))}},ya={class:"mt-2 space-y-2"},xa=["type","name","value","checked","onChange","required"],ka={key:0,class:"p-2 rounded-lg bg-gray-50"},wa={key:0,class:"mt-2"},Ia={class:"flex gap-2 overflow-x-auto",style:{"scrollbar-width":"none"}},Sa=["src"],_a={key:0,class:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center text-white text-xs"},Aa={key:1,class:"mt-2"},Va={class:"text-sm text-gray-600"},$a={key:2,class:"mt-2 text-sm text-red-600"},Ca={__name:"InputRadio",props:{modelValue:[String,Array],required:Boolean,error:String,point:Object,pointId:[String,Number],pointName:String,subtitle:String,inspectionId:[String,Number],options:{type:Array,default:()=>[]},selectedPoint:Object,notes:{type:String,default:""},images:{type:Array,default:()=>[]}},emits:["update:modelValue","update:notes","update:images","save","hapus"],setup(s,{emit:K}){const e=s,_=K,g=k(e.notes),I=k([...e.images]),$=k(!1),N=k(""),x=k([]),M=k(""),C=k([]);q(()=>e.options.find(f=>f.value===e.modelValue));const V=q(()=>Array.isArray(e.modelValue)?e.options.filter(f=>e.modelValue.includes(f.value)):e.modelValue?[e.options.find(f=>f.value===e.modelValue)].filter(Boolean):[]),A=f=>Array.isArray(e.modelValue)?e.modelValue.includes(f.value):e.modelValue?(typeof e.modelValue=="string"?e.modelValue.split(",").map(Y=>Y.trim()):[e.modelValue]).includes(f.value):!1,z=f=>f.settings&&(f.settings.show_textarea||f.settings.show_image_upload);se(()=>e.notes,f=>{g.value=f}),se(()=>e.images,f=>{I.value=[...f]}),se(()=>e.modelValue,f=>{f?M.value=Array.isArray(f)?[...f]:f:M.value=""});const c=(f,U)=>{let Y;if(f.multi){const h=Array.isArray(e.modelValue)?e.modelValue:[];U.target.checked?Y=[...h,f.value]:Y=h.filter(u=>u!==f.value)}else Y=f.value;_("update:modelValue",Y),z(f)?w():_("save",{pointId:e.pointId,inspectionId:e.inspectionId,value:Y,notes:"",images:[]})},r=f=>f.preview||(f.image_path?`/${f.image_path}`:f),w=()=>{M.value=e.modelValue,N.value=g.value,x.value=[...I.value],C.value=[...I.value],$.value=!0},J=()=>{N.value="",x.value=[],M.value=Array.isArray(e.modelValue)?[...e.modelValue]:e.modelValue,$.value=!1},F=f=>{x.value=f,I.value=[...f],_("update:images",[...f]),_("save",{pointId:e.pointId,inspectionId:e.inspectionId,value:e.modelValue,notes:g.value,images:[...f]})},R=f=>{},L=()=>{M.value!==e.modelValue&&_("update:modelValue",M.value),g.value=N.value,_("update:notes",N.value),I.value=[...x.value],_("update:images",[...x.value]),_("save",{pointId:e.pointId,inspectionId:e.inspectionId,value:M.value,notes:N.value,images:x.value}),$.value=!1},T=f=>{M.value="",N.value="",x.value=[],g.value="",I.value=[],_("update:modelValue",""),_("update:notes",""),_("update:images",[]),_("hapus",f),$.value=!1};return(f,U)=>{var Y;return o(),l("div",ya,[t("div",{class:G(["grid gap-2 w-full mt-2",`grid-cols-${Math.min(s.options.length,3)}`])},[(o(!0),l(ge,null,ye(s.options,(h,u)=>(o(),l("label",{key:u,class:"cursor-pointer"},[t("input",{type:h.multi?"checkbox":"radio",name:h.multi?`checkbox-${s.pointId}`:"radio-"+s.pointId,value:h.value,checked:A(h),onChange:n=>c(h,n),class:"hidden peer",required:s.required&&!h.multi},null,40,xa),t("div",{class:G(["w-full px-4 py-3 border rounded-lg text-center transition-colors whitespace-nowrap text-sm font-medium",{"border-indigo-500 bg-indigo-50 text-indigo-700":A(h),"border-gray-300 text-gray-700 hover:bg-gray-50":!A(h)}])},P(h.label),3)]))),128))],2),s.modelValue&&V.value.length>0&&V.value.some(h=>z(h))?(o(),l("div",ka,[t("div",{class:"flex justify-between items-start"},[U[4]||(U[4]=t("h4",{class:"text-sm font-medium text-gray-700"},"Detail : ",-1)),t("button",{onClick:w,class:"text-sm text-indigo-600 hover:text-indigo-800"}," Edit ")]),s.images.length>0&&V.value.some(h=>{var u;return(u=h.settings)==null?void 0:u.show_image_upload})?(o(),l("div",wa,[t("div",Ia,[(o(!0),l(ge,null,ye(s.images,(h,u)=>(o(),l("div",{key:u,class:"relative flex-shrink-0",style:{width:"130px",height:"130px"}},[t("img",{src:r(h),class:"w-full h-full object-cover rounded"},null,8,Sa),u===3&&s.images.length>4?(o(),l("span",_a," +"+P(s.images.length-4),1)):d("",!0)]))),128))])])):d("",!0),s.notes&&V.value.some(h=>{var u;return(u=h.settings)==null?void 0:u.show_textarea})?(o(),l("div",Aa,[t("p",Va,P(s.notes),1)])):d("",!0)])):d("",!0),$.value?(o(),Ce(Rt,{key:(Y=s.selectedPoint)==null?void 0:Y.id,show:$.value,title:s.pointName||"Detail",subtitle:s.subtitle||"",name:"modal-radio-"+s.pointId,options:s.options,"selected-value":M.value,"notes-value":N.value,"images-value":x.value,"point-id":s.pointId,point:s.point,"inspection-id":s.inspectionId,"selected-point":s.selectedPoint,"onUpdate:selectedValue":U[0]||(U[0]=h=>M.value=h),"onUpdate:notesValue":U[1]||(U[1]=h=>N.value=h),"onUpdate:imagesValue":U[2]||(U[2]=h=>F(h)),onClose:J,onSave:L,onSaveTextarea:f.handleTextareaSave,onSaveImage:R,onHapus:U[3]||(U[3]=h=>T(s.pointId))},null,8,["show","title","subtitle","name","options","selected-value","notes-value","images-value","point-id","point","inspection-id","selected-point","onSaveTextarea"])):d("",!0),s.error?(o(),l("p",$a,P(s.error),1)):d("",!0)])}}},Ta={class:"mt-2 space-y-2"},Ea={key:0,class:"flex flex-wrap gap-3"},Na={key:1,class:"p-2"},Da={key:0,class:"mt-2"},Pa={class:"flex gap-2 overflow-x-auto scrollbar-hide"},Ma=["src"],Ua={key:0,class:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center text-white text-xs"},La=["type","name","value","checked"],Ra={key:1,class:"mt-2"},Ba={class:"text-sm text-gray-600"},ja={key:3,class:"mt-2 text-sm text-red-600"},Oa={__name:"InputImageToRadio",props:{modelValue:[String,Array],required:Boolean,error:String,point:Object,pointId:[String,Number],pointName:String,subtitle:String,inspectionId:[String,Number],options:{type:Array,default:()=>[]},selectedPoint:Object,notes:{type:String,default:""},images:{type:Array,default:()=>[]}},emits:["update:modelValue","update:notes","update:images","save","hapus"],setup(s,{emit:K}){const e=s,_=K,g=k(e.notes),I=k([...e.images]),$=k(!1),N=k(""),x=k([]),M=k(""),C=k([]),V=q(()=>{if(Array.isArray(e.modelValue))return e.options.find(T=>e.modelValue.includes(T.value));if(e.modelValue){const T=typeof e.modelValue=="string"?e.modelValue.split(",").map(f=>f.trim()):[e.modelValue];return e.options.find(f=>T.includes(f.value))}return null}),A=q(()=>{if(Array.isArray(e.modelValue))return e.options.filter(T=>e.modelValue.includes(T.value));if(e.modelValue){const T=typeof e.modelValue=="string"?e.modelValue.split(",").map(f=>f.trim()):[e.modelValue];return e.options.filter(f=>T.includes(f.value))}return[]}),z=q(()=>A.value.some(T=>{var f;return T.multi&&((f=T.settings)==null?void 0:f.show_textarea)}));q(()=>A.value.find(T=>{var f;return T.multi&&((f=T.settings)==null?void 0:f.show_textarea)}));const c=T=>Array.isArray(e.modelValue)?e.modelValue.includes(T.value):e.modelValue?(typeof e.modelValue=="string"?e.modelValue.split(",").map(U=>U.trim()):[e.modelValue]).includes(T.value):!1,r=T=>T.preview||(T.image_path?`/${T.image_path}`:T);se(()=>e.notes,T=>{g.value=T});const w=()=>{M.value=e.modelValue||"",N.value=g.value,x.value=[...I.value],C.value=[...I.value],$.value=!0},J=()=>{N.value="",x.value=[],M.value="",$.value=!1},F=T=>{x.value=T,I.value=[...T],_("update:images",[...T]),_("save",{pointId:e.pointId,inspectionId:e.inspectionId,value:e.modelValue,notes:g.value,images:[...T]})},R=()=>{M.value!==e.modelValue&&_("update:modelValue",M.value),g.value=N.value,_("update:notes",N.value),I.value=[...x.value],_("update:images",[...x.value]),_("save",{pointId:e.pointId,inspectionId:e.inspectionId,value:M.value,notes:N.value,images:x.value}),$.value=!1},L=T=>{M.value="",N.value="",x.value=[],g.value="",I.value=[],_("update:modelValue",""),_("update:notes",""),_("update:images",[]),_("hapus",T),$.value=!1};return(T,f)=>{var U,Y,h;return o(),l("div",Ta,[!s.modelValue&&I.value.length===0&&!g.value?(o(),l("div",Ea,[t("div",{class:"relative w-28 h-28 border-2 border-dashed rounded-lg flex items-center justify-center cursor-pointer overflow-hidden",onClick:w},f[4]||(f[4]=[t("div",{class:"flex flex-col items-center text-gray-400"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-8 w-8 mb-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})]),t("span",{class:"text-xs font-medium"},"Tambah")],-1)]))])):(o(),l("div",Na,[t("div",{class:"flex justify-between items-start"},[f[5]||(f[5]=t("h4",{class:"text-sm font-medium text-gray-700"},"Detail :",-1)),t("button",{onClick:w,class:"text-sm text-indigo-600 hover:text-indigo-800"}," Edit ")]),I.value.length>0?(o(),l("div",Da,[t("div",Pa,[(o(!0),l(ge,null,ye(I.value,(u,n)=>(o(),l("div",{key:n,class:"relative flex-shrink-0",style:{width:"130px",height:"130px"}},[t("img",{src:r(u),class:"w-full h-full object-cover rounded"},null,8,Ma),n===3&&I.value.length>4?(o(),l("span",Ua," +"+P(I.value.length-4),1)):d("",!0)]))),128))])])):d("",!0),t("div",{class:G(["grid gap-2 w-full mt-2",`grid-cols-${Math.min(s.options.length,3)}`])},[(o(!0),l(ge,null,ye(s.options,(u,n)=>(o(),l("label",{key:n,class:"cursor-pointer"},[t("input",{type:u.multi?"checkbox":"radio",name:u.multi?`checkbox-${s.pointId}`:`radio-${s.pointId}`,value:u.value,checked:c(u),disabled:!0,class:"hidden peer"},null,8,La),t("div",{class:G(["w-full px-4 py-3 border rounded-lg text-center transition-colors whitespace-nowrap text-sm font-medium",{"border-indigo-500 bg-indigo-50 text-indigo-700":c(u),"border-gray-300 text-gray-700 hover:bg-gray-50":!c(u)}])},P(u.label),3)]))),128))],2),g.value&&((Y=(U=V.value)==null?void 0:U.settings)!=null&&Y.show_textarea||z.value)?(o(),l("div",Ra,[t("p",Ba,P(g.value),1)])):d("",!0)])),$.value?(o(),Ce(Rt,{key:(h=s.selectedPoint)==null?void 0:h.id,show:$.value,title:s.pointName||"Detail",subtitle:s.subtitle||"",name:"modal-radio-"+s.pointId,options:s.options,"selected-value":M.value,"notes-value":N.value,"images-value":x.value,"point-id":s.pointId,point:s.point,"inspection-id":s.inspectionId,"selected-point":s.selectedPoint,"onUpdate:selectedValue":f[0]||(f[0]=u=>M.value=u),"onUpdate:notesValue":f[1]||(f[1]=u=>N.value=u),"onUpdate:imagesValue":f[2]||(f[2]=u=>F(u)),onClose:J,onSave:R,onHapus:f[3]||(f[3]=u=>L(s.pointId))},null,8,["show","title","subtitle","name","options","selected-value","notes-value","images-value","point-id","point","inspection-id","selected-point"])):d("",!0),s.error?(o(),l("p",ja,P(s.error),1)):d("",!0)])}}},Ka={class:"text-base font-semibold text-indigo-700"},qa={key:0,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},Ha={key:1,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},za={class:"text-base font-semibold text-indigo-700"},Ga={class:"p-4 space-y-4"},Fa={key:0,class:"flex justify-end py-1"},Wa=["onClick"],Ja={key:1,class:"space-y-2"},Ya={class:"flex items-start justify-between"},Za={class:"flex-1"},Xa={class:"block text-sm font-medium text-gray-900"},Qa={class:"font-bold"},eo={key:0,class:"text-red-500"},to={key:1,class:"italic text-xs text-gray-400 ml-2"},no={key:0,class:"mt-1"},so={key:0,class:"inline-flex items-center px-2 py-1 rounded text-xs font-medium bg-green-100 text-green-800"},ao={key:0},oo={key:1},io={key:2},lo={key:3},ro={key:4},uo={key:0,class:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-green-100 text-green-800"},co={key:9,class:"p-3 bg-gray-100 rounded text-sm text-gray-600"},mo={class:"text-xs mt-1 list-disc list-inside"},go={key:0},po={key:1},vo={key:2},fo={key:3},bo={key:4},ho={key:0,class:"text-center py-8 text-gray-500"},yo={key:0,class:"text-xs text-gray-400"},xo={__name:"CategorySection",props:{category:Object,form:Object,head:Object,inspectionId:String,selectedPoint:Object,car:Object},emits:["updateResult","removeImage","hapusPoint"],setup(s,{emit:K}){const e=s,_=K,g=an("vehicleFeatures",k(null));g.value=JSON.parse(localStorage.getItem("vehicle_features")||"{}"),Dt("vehicleFeatures",g);const I=k(!1),$=k([]),N=k(!0),x=k(null),M=xn(),C={MT:"Manual Transmission (MT)",AT:"Automatic Transmission (AT)",CVT:"Continuously Variable Transmission (CVT)","e-CVT":"Electronic CVT (e-CVT)",DCT:"Dual Clutch Transmission (DCT)",AMT:"Automated Manual Transmission (AMT)",IVT:"Intelligent Variable Transmission (IVT)",SSG:"Seamless Shift Gearbox (SSG)",AGS:"Auto Gear Shift (AGS)",DHT:"Dedicated Hybrid Transmission (DHT)"};yt(()=>{const h=new IntersectionObserver(([u])=>{N.value=u.isIntersecting},{threshold:.1});x.value&&h.observe(x.value),sn(()=>{x.value&&h.unobserve(x.value)})});const V=()=>{I.value=!I.value,I.value||($.value=[])},A=q(()=>(e.category.points||[]).some(h=>h.is_default===!1)),z=h=>!h||!Array.isArray(h)?[]:h.map(u=>C[u]||u),c=h=>{var E,Z;const u=h.settings;if(!r(h))return!0;const n=(E=e.car)==null?void 0:E.transmission,p=(Z=e.car)==null?void 0:Z.fuel_type;return!(u.transmission&&Array.isArray(u.transmission)&&u.transmission.length>0&&n&&!u.transmission.includes(n)||u.fuel_type&&u.fuel_type.trim()!==""&&p&&u.fuel_type!==p||u.rear_door&&(!g.value||!g.value.rear_door)||u.pick_up&&(!g.value||!g.value.pick_up)||u.box&&(!g.value||!g.value.box))},r=h=>{const u=h.settings;return!!(u!=null&&u.transmission&&Array.isArray(u.transmission)&&u.transmission.length>0||u!=null&&u.fuel_type&&u.fuel_type.trim()!==""||u!=null&&u.rear_door||u!=null&&u.pick_up||u!=null&&u.box)},w=h=>r(h)&&(I.value||c(h)),J=q(()=>{const h=e.category.points||[],u=[];let n=[];return I.value?e.category.isDamageMenu?h.filter(p=>{var E;return p.is_default||R((E=p.inspection_point)==null?void 0:E.id)||I.value}):h:e.category.isDamageMenu?h.filter(p=>{var Z;const E=(Z=p.inspection_point)==null?void 0:Z.id;return R(E)||p.is_default||$.value.includes(E)}):(h.forEach(p=>{var ce;const E=(ce=p.inspection_point)==null?void 0:ce.id,Z=R(E),be=$.value.includes(E),pe=!r(p)||c(p);(p.is_default||Z||be)&&pe?(n.length>0&&(u.push({is_link:!0,count:n.length,hiddenIds:n.map(ae=>ae.inspection_point.id)}),n.forEach(ae=>{$.value.includes(ae.inspection_point.id)&&u.push(ae)}),n=[]),u.push(p)):(!r(p)||c(p))&&n.push(p)}),n.length>0&&(u.push({is_link:!0,count:n.length,hiddenIds:n.map(p=>p.inspection_point.id)}),n.forEach(p=>{$.value.includes(p.inspection_point.id)&&u.push(p)})),u.filter(p=>{var E,Z;return p.is_link||p.is_default||R((E=p.inspection_point)==null?void 0:E.id)||$.value.includes((Z=p.inspection_point)==null?void 0:Z.id)}))});q(()=>J.value.filter(h=>!h.is_link));const F=h=>{I.value=!1,h.forEach(u=>{$.value.includes(u)||$.value.push(u)})},R=h=>{if(!h)return!1;const u=M.props.existingResults[h]!==void 0,n=M.props.existingImages[h]&&M.props.existingImages[h].length>0,p=e.form.results[h]&&(e.form.results[h].status||e.form.results[h].note),E=e.form.images[h]&&e.form.images[h].length>0;return u||n||p||E},L=[{value:"good",label:"Good"},{value:"bad",label:"Bad"},{value:"na",label:"N/A"}],T=h=>{var p,E,Z,be,ie,pe,xe,ce,ae;const u=e.form.results[(p=h.inspection_point)==null?void 0:p.id],n=e.form.images[(E=h.inspection_point)==null?void 0:E.id];if(!u)return!1;switch(h.input_type){case"text":case"number":case"date":case"account":case"textarea":return!!u.note;case"select":case"radio":if(!u.status)return!1;const he=(be=(Z=h.settings)==null?void 0:Z.radios)==null?void 0:be.find(ve=>ve.value===u.status);return!(he!=null&&he.settings&&(he.settings.show_textarea&&!((ie=u.note)!=null&&ie.trim())||he.settings.show_image_upload&&(n==null?void 0:n.length)===0));case"imageTOradio":if((n==null?void 0:n.length)===0||!u.status)return!1;const re=(xe=(pe=h.settings)==null?void 0:pe.radios)==null?void 0:xe.find(ve=>ve.value===u.status);return!(re!=null&&re.settings&&re.settings.show_textarea&&!((ce=u.note)!=null&&ce.trim()));case"image":return(n==null?void 0:n.length)>0;default:return!!u.status||!!((ae=u.note)!=null&&ae.trim())}},f=(h,u,n)=>{_("updateResult",{pointId:h,type:n,value:u})},U=h=>{console.log("Save result for point:",h)},Y=h=>{_("hapusPoint",h)};return se(()=>e.form.results,h=>{},{deep:!0}),se(()=>e.form.images,h=>{},{deep:!0}),se(()=>e.car,h=>{console.log("Car data updated:",h)},{deep:!0}),se(g,h=>{console.log("Vehicle features updated:",h)},{deep:!0}),(h,u)=>(o(),l(ge,null,[e.head==="vertical"?(o(),l("div",{key:0,class:G(["px-6 py-2 border-b flex items-center justify-between bg-indigo-200","fixed top-0 left-0 right-0 z-20"])},[t("h4",Ka,P(s.category.name),1),A.value?(o(),l("button",{key:0,onClick:V,class:"text-sm text-indigo-700 hover:underline focus:outline-none"},P(I.value?"Sembunyikan Semua":"Tampilkan Point Lain"),1)):d("",!0)])):d("",!0),t("div",{class:G(["bg-gray-50 shadow-lg rounded-xl overflow-hidden border border-gray-100",e.head==="vertical"?"pt-6":""])},[!N.value&&A.value?(o(),l("button",{key:0,onClick:V,class:"fixed top-3 right-2 z-10 bg-indigo-600 text-white p-2 rounded-full shadow-lg"},[I.value?(o(),l("svg",qa,u[0]||(u[0]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"},null,-1),t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.477 0 8.268 2.943 9.542 7-1.274 4.057-5.065 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"},null,-1)]))):(o(),l("svg",Ha,u[1]||(u[1]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.477 0-8.268-2.943-9.542-7a9.956 9.956 0 012.006-3.362M9.88 9.88a3 3 0 104.24 4.24M6.1 6.1l11.8 11.8"},null,-1)])))])):d("",!0),e.head==="horizontal"?(o(),l("div",{key:1,ref_key:"categoryHeader",ref:x,class:"bg-indigo-200 px-6 py-2 border-b flex items-center justify-between"},[t("h4",za,P(s.category.name),1),A.value?(o(),l("button",{key:0,onClick:V,class:"text-sm text-indigo-700 hover:underline focus:outline-none"},P(I.value?"Sembunyikan":"Tampilkan Point Lain"),1)):d("",!0)],512)):d("",!0),t("div",Ga,[(o(!0),l(ge,null,ye(J.value,(n,p)=>{var E,Z,be,ie,pe,xe,ce,ae,he,re,ve,Re,Be,ke,Te,Ee,ne,we,Ae,Ie,Ne,Ve,je,B,fe,X,ze,Oe,Ge,v,m,ee,y,W,de,me,le,Ke,ut,xt,We,dt,ct,mt,kt,tt,gt,pt,nt,$e,qe,Ue,st,wt,at,Je,ot,Ye,Ze,It,St,_t,Xe,At,Vt,$t,Ct,Tt,Et;return o(),l("div",{key:p,class:G(["space-y-2 last:border-0 last:pb-0",n.is_link?"pb-0":"pb-2 border-b border-gray-100"])},[n.is_link?(o(),l("div",Fa,[t("button",{onClick:D=>F(n.hiddenIds),class:"text-sm font-medium text-indigo-600 hover:text-indigo-800 hover:underline focus:outline-none"}," Tampilkan "+P(n.count)+" Point Tersembunyi ",9,Wa)])):(o(),l("div",Ja,[t("div",Ya,[t("div",Za,[t("label",Xa,[t("span",Qa,P((E=n.inspection_point)==null?void 0:E.name),1),(Z=n.settings)!=null&&Z.is_required?(o(),l("span",eo,"*")):d("",!0),!n.is_default&&!R((be=n.inspection_point)==null?void 0:be.id)?(o(),l("span",to," (opsional) ")):d("",!0)]),w(n)?(o(),l("div",no,[r(n)?(o(),l("div",so,[(ie=n.settings)!=null&&ie.transmission?(o(),l("div",ao,P(n.settings.transmission.join(", ")),1)):d("",!0),(pe=n.settings)!=null&&pe.fuel_type?(o(),l("div",oo,P(n.settings.fuel_type),1)):d("",!0),(xe=n.settings)!=null&&xe.rear_door?(o(),l("div",io," Pintu Belakang ")):d("",!0),(ce=n.settings)!=null&&ce.pick_up?(o(),l("div",lo," Tipe Pick Up ")):d("",!0),(ae=n.settings)!=null&&ae.box?(o(),l("div",ro," Memiliki Box ")):d("",!0)])):d("",!0)])):d("",!0)]),T(n)?(o(),l("span",uo," âœ“ ")):d("",!0)]),n.input_type==="text"&&c(n)?(o(),Ce(rn,{key:0,modelValue:s.form.results[(he=n.inspection_point)==null?void 0:he.id].note,"onUpdate:modelValue":[D=>{var b;return s.form.results[(b=n.inspection_point)==null?void 0:b.id].note=D},D=>{var b;return f((b=n.inspection_point)==null?void 0:b.id,D,"note")}],required:(re=n.settings)==null?void 0:re.is_required,"min-length":(ve=n.settings)==null?void 0:ve.min_length,"max-length":(Re=n.settings)==null?void 0:Re.max_length,allowSpace:(Be=n.settings)==null?void 0:Be.allow_space,textTransform:(ke=n.settings)==null?void 0:ke.text_transform,placeholder:((Te=n.settings)==null?void 0:Te.placeholder)||"Masukan text",error:s.form.errors[`results.${(Ee=n.inspection_point)==null?void 0:Ee.id}.note`],onSave:D=>{var b;return U((b=n.inspection_point)==null?void 0:b.id)}},null,8,["modelValue","onUpdate:modelValue","required","min-length","max-length","allowSpace","textTransform","placeholder","error","onSave"])):d("",!0),n.input_type==="number"&&c(n)?(o(),Ce(ln,{key:1,modelValue:s.form.results[(ne=n.inspection_point)==null?void 0:ne.id].note,"onUpdate:modelValue":[D=>{var b;return s.form.results[(b=n.inspection_point)==null?void 0:b.id].note=D},D=>{var b;return f((b=n.inspection_point)==null?void 0:b.id,D,"note")}],required:(we=n.settings)==null?void 0:we.is_required,min:(Ae=n.settings)==null?void 0:Ae.min,max:(Ie=n.settings)==null?void 0:Ie.max,step:((Ne=n.settings)==null?void 0:Ne.step)||1,placeholder:((Ve=n.settings)==null?void 0:Ve.placeholder)||"Masukan number",error:s.form.errors[`results.${(je=n.inspection_point)==null?void 0:je.id}.note`],onSave:D=>{var b;return U((b=n.inspection_point)==null?void 0:b.id)}},null,8,["modelValue","onUpdate:modelValue","required","min","max","step","placeholder","error","onSave"])):d("",!0),n.input_type==="account"&&c(n)?(o(),Ce(dn,{key:2,modelValue:s.form.results[(B=n.inspection_point)==null?void 0:B.id].note,"onUpdate:modelValue":[D=>{var b;return s.form.results[(b=n.inspection_point)==null?void 0:b.id].note=D},D=>{var b;return f((b=n.inspection_point)==null?void 0:b.id,D,"note")}],required:(fe=n.settings)==null?void 0:fe.is_required,placeholder:((X=n.settings)==null?void 0:X.placeholder)||"Masukkan nilai",error:s.form.errors[`results.${(ze=n.inspection_point)==null?void 0:ze.id}.note`],"point-id":(Oe=n.inspection_point)==null?void 0:Oe.id,settings:n.settings,onSave:D=>{var b;return U((b=n.inspection_point)==null?void 0:b.id)}},null,8,["modelValue","onUpdate:modelValue","required","placeholder","error","point-id","settings","onSave"])):d("",!0),n.input_type==="date"&&c(n)?(o(),Ce(un,{key:3,modelValue:s.form.results[(Ge=n.inspection_point)==null?void 0:Ge.id].note,"onUpdate:modelValue":[D=>{var b;return s.form.results[(b=n.inspection_point)==null?void 0:b.id].note=D},D=>{var b;return f((b=n.inspection_point)==null?void 0:b.id,D,"note")}],required:(v=n.settings)==null?void 0:v.is_required,"min-date":(m=n.settings)==null?void 0:m.min_date,"max-date":(ee=n.settings)==null?void 0:ee.max_date,error:s.form.errors[`results.${(y=n.inspection_point)==null?void 0:y.id}.note`],onSave:D=>{var b;return U((b=n.inspection_point)==null?void 0:b.id)}},null,8,["modelValue","onUpdate:modelValue","required","min-date","max-date","error","onSave"])):d("",!0),n.input_type==="textarea"&&c(n)?(o(),Ce(cn,{key:4,modelValue:s.form.results[(W=n.inspection_point)==null?void 0:W.id].note,"onUpdate:modelValue":[D=>{var b;return s.form.results[(b=n.inspection_point)==null?void 0:b.id].note=D},D=>{var b;return f((b=n.inspection_point)==null?void 0:b.id,D,"note")}],required:(de=n.settings)==null?void 0:de.is_required,"min-length":(me=n.settings)==null?void 0:me.min_length,"max-length":(le=n.settings)==null?void 0:le.max_length,placeholder:((Ke=n.settings)==null?void 0:Ke.placeholder)||"Masukkan teks di sini",settings:n.settings,error:s.form.errors[`results.${(ut=n.inspection_point)==null?void 0:ut.id}.note`],onSave:D=>{var b;return U((b=n.inspection_point)==null?void 0:b.id)}},null,8,["modelValue","onUpdate:modelValue","required","min-length","max-length","placeholder","settings","error","onSave"])):d("",!0),n.input_type==="radio"&&c(n)?(o(),Ce(Ca,{key:5,modelValue:s.form.results[(xt=n.inspection_point)==null?void 0:xt.id].status,"onUpdate:modelValue":[D=>{var b;return s.form.results[(b=n.inspection_point)==null?void 0:b.id].status=D},D=>{var b;return f((b=n.inspection_point)==null?void 0:b.id,D,"status")}],notes:s.form.results[(We=n.inspection_point)==null?void 0:We.id].note,images:s.form.images[(dt=n.inspection_point)==null?void 0:dt.id],required:(ct=n.settings)==null?void 0:ct.is_required,"point-id":(mt=n.inspection_point)==null?void 0:mt.id,point:n.inspection_point,"inspection-id":s.inspectionId,settings:n.settings,"point-name":(kt=n.inspection_point)==null?void 0:kt.name,subtitle:(tt=n.inspection_point)==null?void 0:tt.description,"selected-point":n.inspection_point??null,options:((gt=n.settings)==null?void 0:gt.radios)||L,error:s.form.errors[`results.${(pt=n.inspection_point)==null?void 0:pt.id}.status`],"onUpdate:notes":D=>{var b;return s.form.results[(b=n.inspection_point)==null?void 0:b.id].note=D},"onUpdate:images":D=>{var b;return s.form.images[(b=n.inspection_point)==null?void 0:b.id]=D},onSave:D=>{var b;return U((b=n.inspection_point)==null?void 0:b.id)},onHapus:D=>{var b;return Y((b=n.inspection_point)==null?void 0:b.id)}},null,8,["modelValue","onUpdate:modelValue","notes","images","required","point-id","point","inspection-id","settings","point-name","subtitle","selected-point","options","error","onUpdate:notes","onUpdate:images","onSave","onHapus"])):d("",!0),n.input_type==="imageTOradio"&&c(n)?(o(),Ce(Oa,{key:6,modelValue:s.form.results[(nt=n.inspection_point)==null?void 0:nt.id].status,"onUpdate:modelValue":[D=>{var b;return s.form.results[(b=n.inspection_point)==null?void 0:b.id].status=D},D=>{var b;return f((b=n.inspection_point)==null?void 0:b.id,D,"status")}],notes:s.form.results[($e=n.inspection_point)==null?void 0:$e.id].note,images:s.form.images[(qe=n.inspection_point)==null?void 0:qe.id],required:(Ue=n.settings)==null?void 0:Ue.is_required,"point-id":(st=n.inspection_point)==null?void 0:st.id,"inspection-id":s.inspectionId,settings:n.settings,"point-name":(wt=n.inspection_point)==null?void 0:wt.name,subtitle:(at=n.inspection_point)==null?void 0:at.description,point:n,"selected-point":n.inspection_point??null,options:((Je=n.settings)==null?void 0:Je.radios)||L,error:s.form.errors[`results.${(ot=n.inspection_point)==null?void 0:ot.id}.status`],"onUpdate:notes":D=>{var b;return s.form.results[(b=n.inspection_point)==null?void 0:b.id].note=D},"onUpdate:images":D=>{var b;return s.form.images[(b=n.inspection_point)==null?void 0:b.id]=D},onSave:D=>{var b;return U((b=n.inspection_point)==null?void 0:b.id)},onHapus:D=>{var b;return Y((b=n.inspection_point)==null?void 0:b.id)}},null,8,["modelValue","onUpdate:modelValue","notes","images","required","point-id","inspection-id","settings","point-name","subtitle","point","selected-point","options","error","onUpdate:notes","onUpdate:images","onSave","onHapus"])):d("",!0),n.input_type==="image"&&c(n)?(o(),Ce(Lt,{key:7,modelValue:s.form.images[(Ye=n.inspection_point)==null?void 0:Ye.id],"onUpdate:modelValue":D=>{var b;return s.form.images[(b=n.inspection_point)==null?void 0:b.id]=D},error:s.form.errors[`images.${(Ze=n.inspection_point)==null?void 0:Ze.id}`],"inspection-id":s.inspectionId,"point-id":(It=n.inspection_point)==null?void 0:It.id,point:n.inspection_point,"point-name":(St=n.inspection_point)==null?void 0:St.name,settings:n.settings,"onUpdate:notes":D=>{var b;return s.form.results[(b=n.inspection_point)==null?void 0:b.id].note=D},"onUpdate:status":D=>{var b;return s.form.results[(b=n.inspection_point)==null?void 0:b.id].status=D}},null,8,["modelValue","onUpdate:modelValue","error","inspection-id","point-id","point","point-name","settings","onUpdate:notes","onUpdate:status"])):d("",!0),n.input_type==="select"&&c(n)?(o(),Ce(Bs,{key:8,modelValue:s.form.results[(_t=n.inspection_point)==null?void 0:_t.id].status,"onUpdate:modelValue":[D=>{var b;return s.form.results[(b=n.inspection_point)==null?void 0:b.id].status=D},D=>{var b;return f((b=n.inspection_point)==null?void 0:b.id,D,"status")}],required:(Xe=n.settings)==null?void 0:Xe.is_required,error:s.form.errors[`results.${(At=n.inspection_point)==null?void 0:At.id}.status`],onSave:D=>{var b;return U((b=n.inspection_point)==null?void 0:b.id)}},null,8,["modelValue","onUpdate:modelValue","required","error","onSave"])):d("",!0),!c(n)&&r(n)?(o(),l("div",co,[u[2]||(u[2]=t("p",{class:"font-medium"},"Tidak tersedia untuk kendaraan ini",-1)),u[3]||(u[3]=t("p",{class:"text-xs mt-1"},"Point ini hanya tersedia untuk:",-1)),t("ul",mo,[(Vt=n.settings)!=null&&Vt.transmission?(o(),l("li",go," Transmisi: "+P(z(n.settings.transmission).join(", ")),1)):d("",!0),($t=n.settings)!=null&&$t.fuel_type?(o(),l("li",po," Bahan bakar: "+P(n.settings.fuel_type),1)):d("",!0),(Ct=n.settings)!=null&&Ct.rear_door?(o(),l("li",vo,"Kendaraan dengan pintu belakang")):d("",!0),(Tt=n.settings)!=null&&Tt.pick_up?(o(),l("li",fo,"Tipe pick up")):d("",!0),(Et=n.settings)!=null&&Et.box?(o(),l("li",bo,"Kendaraan dengan box")):d("",!0)])])):d("",!0)]))],2)}),128)),J.value.filter(n=>!n.is_link).length===0?(o(),l("div",ho,[u[4]||(u[4]=t("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9.172 16.172a4 4 0 015.656 0M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)),u[5]||(u[5]=t("p",{class:"mt-2 text-sm"},"Tidak ada data untuk ditampilkan",-1)),s.category.isDamageMenu?(o(),l("p",yo,' Tambahkan data melalui tombol "+" di pojok kanan bawah ')):d("",!0)])):d("",!0)])],2)],64))}},ko=rt(xo,[["__scopeId","data-v-704b9892"]]),wo={class:"bg-gray-50 shadow-lg rounded-xl overflow-hidden border border-gray-100"},Io={class:"p-4 space-y-4-6"},So={class:"grid grid-cols-2 sm:grid-cols-2 md:grid-cols-3 gap-2 w-full"},_o=["value"],Ao={class:"p-4 space-y-4-6"},Vo={class:"grid grid-cols-2 sm:grid-cols-2 md:grid-cols-3 gap-2 w-full"},$o=["value"],Co={key:0,class:"p-4 space-y-4 bg-blue-50 rounded-lg border border-blue-200"},To={class:"grid grid-cols-2 sm:grid-cols-2 md:grid-cols-3 gap-2 w-full"},Eo=["value"],No={class:"p-4 space-y-2"},Do={class:"flex items-center justify-between mb-2"},Po={key:0,class:"mb-4 p-4 bg-white border border-gray-200 rounded-lg shadow-lg"},Mo={class:"flex items-center justify-between mb-3"},Uo={class:"grid grid-cols-1 md:grid-cols-2 gap-3 max-h-60 overflow-y-auto"},Lo=["onClick"],Ro={class:"text-sm font-medium text-gray-800 mb-1"},Bo={class:"text-xs text-gray-600 line-clamp-2"},jo={class:"flex flex-wrap gap-1 mb-2 p-2 bg-gray-100 rounded-md"},Oo={key:0,class:"text-xs text-gray-500 mb-2 bg-gray-50 p-2 rounded border"},Ko={key:0,class:"font-bold mx-1 bg-indigo-100 text-indigo-700 px-2 py-1 rounded"},qo={key:1,class:"italic mx-1 bg-indigo-100 text-indigo-700 px-2 py-1 rounded"},Ho={key:2,class:"underline mx-1 bg-indigo-100 text-indigo-700 px-2 py-1 rounded"},zo={__name:"ConclusionSection",props:{inspectionId:{type:Number,required:!0},inspection:{type:Object,required:!0},form:{type:Object,required:!0}},emits:["updateConclusion"],setup(s,{emit:K}){const e=s,_=K,g=k(null),I=k(!1),$=k(!1),N=Qt({bold:!1,italic:!1,underline:!1}),x=Qt({flooded:"",collision:"",collision_severity:"",notes:""}),M=k([{id:1,name:"Kendaraan Normal",description:"Template untuk kendaraan dalam kondisi normal tanpa masalah signifikan (Ringkas)",content:`<p><strong>A. HASIL INSPEKSI:</strong></p>
- Kondisi kendaraan secara umum: <b>BAIK</b><br>
- Tidak ditemukan indikasi kerusakan signifikan<br>
- Semua sistem berfungsi dengan normal<br>`},{id:2,name:"Kendaraan Bekas Tabrakan Ringan",description:"Template untuk kendaraan dengan riwayat tabrakan ringan (Lengkap A, C, B)",content:`<p><strong>A. HASIL INSPEKSI:</strong></p>
- Kendaraan memiliki riwayat tabrakan dengan tingkat kerusakan: <b>RINGAN</b><br>
- Area yang terdampak: PERLU DIISI<br>
- Perbaikan yang dilakukan: PERLU DIISI<br>

<p><strong>C. ESTIMASI PERBAIKAN DAN PERAWATAN:</strong></p>
<p>* PERBAIKAN & PENGGANTIAN PART DALAM WAKTU DEKAT/ SEGERA:</p>
- PERLU DIISI<br>
- Estimasi Biaya: PERLU DIISI
<p>* PERBAIKAN & PENGGANTIAN PART TENGGANG WAKTU MINIMAL 6 BULAN S/D 1 TAHUN KE DEPAN:</p>
- PERLU DIISI<br>
- Estimasi Biaya: PERLU DIISI
<p><em>Note: Estimasi perbaikan bisa lebih murah/lebih mahal. Opsional tergantung lokasi/daerah dan ketersediaan spare part.</em></p>`},{id:3,name:"Kendaraan Bekas Banjir",description:"Template untuk kendaraan dengan riwayat terkena banjir (Lengkap A, C, B)",content:`<p><strong>A. HASIL INSPEKSI:</strong></p>
- Kendaraan memiliki riwayat terkena banjir<br>
- Tingkat paparan air: PERLU DIISI<br>
- Komponen yang terdampak: PERLU DIISI<br>

<p><strong>C. ESTIMASI PERBAIKAN DAN PERAWATAN:</strong></p>
<p>* PERBAIKAN & PENGGANTIAN PART DALAM WAKTU DEKAT/ SEGERA:</p>
- PERLU DIISI<br>
- Estimasi Biaya: PERLU DIISI
<p>* PERBAIKAN & PENGGANTIAN PART TENGGANG WAKTU MINIMAL 6 BULAN S/D 1 TAHUN KE DEPAN:</p>
- PERLU DIISI<br>
- Estimasi Biaya: PERLU DIISI
<p><em>Note: Estimasi perbaikan bisa lebih murah/lebih mahal. Opsional tergantung lokasi/daerah dan ketersediaan spare part.</em></p>`},{id:4,name:"Kendaraan dengan Multiple Issues",description:"Template untuk kendaraan dengan beberapa masalah umum (Lengkap A, C, B)",content:`<p><strong>A. HASIL INSPEKSI:</strong></p>
- Kondisi umum kendaraan: PERLU DIISI<br>
- Masalah utama yang ditemukan: PERLU DIISI<br>
- Komponen yang perlu perhatian: PERLU DIISI<br>
- Status Tabrak/Banjir: PERLU DIISI<br>

<p><strong>C. ESTIMASI PERBAIKAN DAN PERAWATAN:</strong></p>
<p>* PERBAIKAN & PENGGANTIAN PART DALAM WAKTU DEKAT/ SEGERA:</p>
- PERLU DIISI<br>
- Estimasi Biaya: PERLU DIISI
<p>* PERBAIKAN & PENGGANTIAN PART TENGGANG WAKTU MINIMAL 6 BULAN S/D 1 TAHUN KE DEPAN:</p>
- PERLU DIISI<br>
- Estimasi Biaya: PERLU DIISI
<p><em>Note: Estimasi perbaikan bisa lebih murah/lebih mahal. Opsional tergantung lokasi/daerah dan ketersediaan spare part.</em></p>`},{id:5,name:"Template Singkat",description:"Template ringkas untuk kesimpulan cepat (Ringkas)",content:`<p><strong>A. HASIL INSPEKSI:</strong></p>
- Status Keseluruhan Kendaraan: PERLU DIISI<br>
- Catatan Utama: PERLU DIISI<br>
- Status Tabrak/Banjir: PERLU DIISI`},{id:6,name:"Template Teknis Detail",description:"Template detail untuk laporan teknis lengkap (Lengkap A, C, B)",content:`<p><strong>A. LAPORAN HASIL INSPEKSI TEKNIS:</strong></p>
- Tanggal Inspeksi: PERLU DIISI<br>
- Kondisi Mesin: PERLU DIISI<br>
- Kondisi Transmisi: PERLU DIISI<br>
- Kondisi Suspensi: PERLU DIISI<br>
- Kondisi Rem: PERLU DIISI<br>
- Kondisi Body: PERLU DIISI<br>
- Kondisi Interior: PERLU DIISI<br>
- Kesimpulan Akhir: PERLU DIISI

<p><strong>C. ESTIMASI PERBAIKAN DAN PERAWATAN:</strong></p>
<p>* PERBAIKAN & PENGGANTIAN PART DALAM WAKTU DEKAT/ SEGERA:</p>
- PERLU DIISI<br>
- Estimasi Biaya: PERLU DIISI
<p>* PERBAIKAN & PENGGANTIAN PART TENGGANG WAKTU MINIMAL 6 BULAN S/D 1 TAHUN KE DEPAN:</p>
- PERLU DIISI<br>
- Estimasi Biaya: PERLU DIISI
<p><em>Note: Estimasi perbaikan bisa lebih murah/lebih mahal. Opsional tergantung lokasi/daerah dan ketersediaan spare part.</em></p>`}]);k(["{PLATE_NUMBER}","{CAR_NAME}","{INSPECTION_DATE}","{DAMAGED_AREA}","{REPAIR_DETAILS}","{WATER_LEVEL}","{AFFECTED_COMPONENTS}","{OVERALL_CONDITION}","{MAIN_ISSUES}","{ATTENTION_NEEDED}","{REPAIR_COST_ESTIMATE}","{RECOMMENDATION}","{OVERALL_STATUS}","{ADDITIONAL_NOTES}","{ENGINE_CONDITION}","{TRANSMISSION_CONDITION}","{SUSPENSION_CONDITION}","{BRAKE_CONDITION}","{BODY_CONDITION}","{INTERIOR_CONDITION}","{FINAL_CONCLUSION}"]);const C=n=>{if(!n)return{};if(typeof n=="string")try{return JSON.parse(n)||{}}catch(p){return console.error("Error parsing settings JSON:",p),{}}return typeof n=="object"&&n!==null?n:{}};q(()=>C(e.inspection.settings).conclusion||{});const V=[{value:"yes",label:"Ya"},{value:"no",label:"Tidak"}],A=[{value:"yes",label:"Ya"},{value:"no",label:"Tidak"}],z=[{value:"light",label:"Ringan"},{value:"heavy",label:"Berat"}];yt(()=>{r(),Ut(()=>{c(),F()})});const c=()=>{g.value&&x.notes&&(g.value.innerHTML=x.notes)},r=()=>{const p=C(e.inspection.settings).conclusion||{},E=e.form.conclusion||{};x.flooded=E.flooded||p.flooded||"",x.collision=E.collision||p.collision||"",x.collision_severity=E.collision_severity||p.collision_severity||"",x.notes=E.notes||e.inspection.notes||""},w=n=>{if(!g.value)return;let p=n.content;p=p.replace(/{PLATE_NUMBER}/g,e.inspection.plate_number||"[NOMOR_PLAT]").replace(/{CAR_NAME}/g,e.inspection.car_name||"[NAMA_MOBIL]").replace(/{INSPECTION_DATE}/g,new Date().toLocaleDateString("id-ID")).replace(/{FLOOD_STATUS}/g,x.flooded==="yes"?"Pernah terkena banjir":"Tidak pernah terkena banjir").replace(/{COLLISION_STATUS}/g,x.collision==="yes"?"Pernah mengalami tabrakan":"Tidak pernah mengalami tabrakan"),g.value.innerHTML=p,x.notes=p,$.value=!1,Ut(()=>{g.value.focus(),u()})},J=()=>{g.value&&(g.value.innerHTML="",x.notes="",u())},F=()=>{if(!g.value)return;const n=window.getSelection();n.rangeCount===0||n.isCollapsed||(N.bold=document.queryCommandState("bold"),N.italic=document.queryCommandState("italic"),N.underline=document.queryCommandState("underline"))},R=n=>{if(!g.value)return;g.value.focus();const p=N[n];switch(n){case"bold":document.execCommand("bold",!1,!p);break;case"italic":document.execCommand("italic",!1,!p);break;case"underline":document.execCommand("underline",!1,!p);break}setTimeout(()=>{F(),L()},10)},L=on.debounce(()=>{g.value&&(x.notes=g.value.innerHTML,u())},200),T=n=>{n.preventDefault(),document.execCommand("insertParagraph",!1,null)},f=n=>{n.preventDefault();const p=(n.clipboardData||window.clipboardData).getData("text/plain");document.execCommand("insertText",!1,p)},U=()=>{I.value=!0},Y=()=>{I.value=!1,g.value&&(x.notes=g.value.innerHTML,u())},h=()=>{u()},u=()=>{const n={flooded:x.flooded,collision:x.collision,collision_severity:x.collision==="yes"?x.collision_severity:null,notes:x.notes};_("updateConclusion",n)};return se(()=>e.form.conclusion,n=>{n&&(x.flooded=n.flooded!==void 0?n.flooded:x.flooded,x.collision=n.collision!==void 0?n.collision:x.collision,x.collision_severity=n.collision_severity!==void 0?n.collision_severity:x.collision_severity,x.notes=n.notes!==void 0?n.notes:x.notes,g.value&&n.notes!==void 0&&g.value.innerHTML!==n.notes&&(g.value.innerHTML=n.notes))},{deep:!0,immediate:!0}),se([()=>x.flooded,()=>x.collision,()=>x.collision_severity,()=>x.notes],()=>{u()},{deep:!0}),(n,p)=>(o(),l("div",wo,[p[21]||(p[21]=t("div",{class:"bg-indigo-200 px-6 py-2 border-b flex items-center justify-between"},[t("h4",{class:"text-base font-semibold text-indigo-700"}," Detail Kendaraan ")],-1)),t("div",Io,[p[10]||(p[10]=t("label",{class:"block text-sm font-medium text-gray-700 mb-3"},[De(" Apakah kendaraan pernah terkena banjir? "),t("span",{class:"text-red-500"},"*")],-1)),t("div",So,[(o(),l(ge,null,ye(V,E=>t("label",{key:E.value,class:"cursor-pointer"},[_e(t("input",{type:"radio","onUpdate:modelValue":p[0]||(p[0]=Z=>x.flooded=Z),value:E.value,class:"hidden peer",onChange:h},null,40,_o),[[et,x.flooded]]),t("div",{class:G(["w-full px-4 py-3 border rounded-lg text-center transition-all duration-200 ease-in-out whitespace-nowrap text-sm font-medium",{"border-indigo-500 bg-indigo-50 text-indigo-700 shadow-sm scale-[0.98]":x.flooded===E.value,"border-gray-300 text-gray-700 hover:bg-gray-50 hover:border-gray-400":x.flooded!==E.value}])},P(E.label),3)])),64))])]),t("div",Ao,[p[12]||(p[12]=t("label",{class:"block text-sm font-medium text-gray-700 mb-3"},[De(" Apakah kendaraan pernah mengalami tabrakan? "),t("span",{class:"text-red-500"},"*")],-1)),t("div",Vo,[(o(),l(ge,null,ye(A,E=>t("label",{key:E.value,class:"cursor-pointer"},[_e(t("input",{type:"radio","onUpdate:modelValue":p[1]||(p[1]=Z=>x.collision=Z),value:E.value,class:"hidden peer",onChange:h},null,40,$o),[[et,x.collision]]),t("div",{class:G(["w-full px-4 py-3 border rounded-lg text-center transition-all duration-200 ease-in-out whitespace-nowrap text-sm font-medium",{"border-indigo-500 bg-indigo-50 text-indigo-700 shadow-sm scale-[0.98]":x.collision===E.value,"border-gray-300 text-gray-700 hover:bg-gray-50 hover:border-gray-400":x.collision!==E.value}])},P(E.label),3)])),64))]),ue(lt,{"enter-active-class":"transition-all duration-300 ease-out","enter-from-class":"opacity-0 transform -translate-y-2","enter-to-class":"opacity-100 transform translate-y-0","leave-active-class":"transition-all duration-200 ease-in","leave-from-class":"opacity-100 transform translate-y-0","leave-to-class":"opacity-0 transform -translate-y-2"},{default:Me(()=>[x.collision==="yes"?(o(),l("div",Co,[p[11]||(p[11]=t("label",{class:"block text-sm font-medium text-gray-700 mb-3"},[De("Tingkat kerusakan: "),t("span",{class:"text-red-500"},"*")],-1)),t("div",To,[(o(),l(ge,null,ye(z,E=>t("label",{key:E.value,class:"cursor-pointer"},[_e(t("input",{type:"radio","onUpdate:modelValue":p[2]||(p[2]=Z=>x.collision_severity=Z),value:E.value,class:"hidden peer",onChange:h},null,40,Eo),[[et,x.collision_severity]]),t("div",{class:G(["w-full px-4 py-3 border rounded-lg text-center transition-all duration-200 ease-in-out whitespace-nowrap text-sm font-medium",{"border-blue-500 bg-blue-100 text-blue-700 shadow-sm scale-[0.98]":x.collision_severity===E.value,"border-gray-300 text-gray-700 hover:bg-white hover:border-gray-400":x.collision_severity!==E.value}])},P(E.label),3)])),64))])])):d("",!0)]),_:1})]),t("div",No,[t("div",Do,[p[14]||(p[14]=t("label",{class:"block text-sm font-medium text-gray-700"},"Catatan Kesimpulan",-1)),t("button",{type:"button",onClick:p[3]||(p[3]=E=>$.value=!$.value),class:"flex items-center gap-2 px-3 py-2 text-sm bg-green-100 text-green-700 rounded-lg hover:bg-green-200 transition-all duration-200"},p[13]||(p[13]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})],-1),De(" Template ")]))]),ue(lt,{"enter-active-class":"transition-all duration-200 ease-out","enter-from-class":"opacity-0 transform scale-95","enter-to-class":"opacity-100 transform scale-100","leave-active-class":"transition-all duration-150 ease-in","leave-from-class":"opacity-100 transform scale-100","leave-to-class":"opacity-0 transform scale-95"},{default:Me(()=>[$.value?(o(),l("div",Po,[t("div",Mo,[p[16]||(p[16]=t("h5",{class:"text-sm font-semibold text-gray-700"},"Pilih Template Kesimpulan",-1)),t("button",{onClick:p[4]||(p[4]=E=>$.value=!1),class:"text-gray-400 hover:text-gray-600"},p[15]||(p[15]=[t("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),t("div",Uo,[(o(!0),l(ge,null,ye(M.value,E=>(o(),l("button",{key:E.id,onClick:Z=>w(E),class:"p-3 text-left border border-gray-200 rounded-lg hover:border-indigo-300 hover:bg-indigo-50 transition-all duration-150"},[t("div",Ro,P(E.name),1),t("div",Bo,P(E.description),1)],8,Lo))),128))])])):d("",!0)]),_:1}),t("div",jo,[t("button",{type:"button",onClick:p[5]||(p[5]=E=>R("bold")),class:G(["p-2 rounded transition-all duration-150 ease-in-out font-medium",N.bold?"bg-indigo-500 text-white shadow-sm":"hover:bg-gray-200 hover:shadow-sm"]),title:"Bold"},p[17]||(p[17]=[t("strong",null,"B",-1)]),2),t("button",{type:"button",onClick:p[6]||(p[6]=E=>R("italic")),class:G(["p-2 rounded transition-all duration-150 ease-in-out font-medium",N.italic?"bg-indigo-500 text-white shadow-sm":"hover:bg-gray-200 hover:shadow-sm"]),title:"Italic"},p[18]||(p[18]=[t("em",null,"I",-1)]),2),t("button",{type:"button",onClick:p[7]||(p[7]=E=>R("underline")),class:G(["p-2 rounded transition-all duration-150 ease-in-out font-medium",N.underline?"bg-indigo-500 text-white shadow-sm":"hover:bg-gray-200 hover:shadow-sm"]),title:"Underline"},p[19]||(p[19]=[t("u",null,"U",-1)]),2),t("button",{type:"button",onClick:p[8]||(p[8]=E=>J()),class:"p-2 rounded transition-all duration-150 ease-in-out hover:bg-gray-200 hover:shadow-sm ml-2",title:"Clear Template"}," ðŸ—‘ï¸ Clear ")]),ue(lt,{"enter-active-class":"transition-all duration-200 ease-out","enter-from-class":"opacity-0 transform -translate-y-1","enter-to-class":"opacity-100 transform translate-y-0","leave-active-class":"transition-all duration-150 ease-in","leave-from-class":"opacity-100 transform translate-y-0","leave-to-class":"opacity-0 transform -translate-y-1"},{default:Me(()=>[Object.values(N).some(E=>E)?(o(),l("div",Oo,[p[20]||(p[20]=De(" Format aktif: ")),N.bold?(o(),l("span",Ko,"Bold")):d("",!0),N.italic?(o(),l("span",qo,"Italic")):d("",!0),N.underline?(o(),l("span",Ho,"Underline")):d("",!0)])):d("",!0)]),_:1}),t("div",{ref_key:"editorRef",ref:g,contenteditable:"true",class:G(["w-full min-h-[120px] p-3 rounded-md border border-gray-300 shadow-sm transition-all duration-200 ease-in-out prose max-w-none",{"bg-white border-gray-300":!I.value,"bg-blue-50 border-indigo-500 ring-2 ring-indigo-200":I.value}]),onInput:p[9]||(p[9]=(...E)=>j(L)&&j(L)(...E)),onBlur:Y,onFocus:U,onKeydown:kn(T,["enter"]),onPaste:f,onMouseup:F,onKeyup:F,placeholder:"Tambahkan catatan kesimpulan inspeksi di sini..."},null,34)])]))}},Go=rt(zo,[["__scopeId","data-v-6b429a8f"]]);function tn(s,K){const e=k({x:K.x,y:K.y}),_=k(!1),g=k(null),I=k(!1),$=k({x:0,y:0});yt(()=>{const A=localStorage.getItem(s);if(A)try{e.value=JSON.parse(A)}catch(z){console.error("Error parsing saved position:",z)}});const N=A=>{A.type.includes("touch")?($.value.x=A.touches[0].clientX,$.value.y=A.touches[0].clientY):($.value.x=A.clientX,$.value.y=A.clientY),g.value=setTimeout(()=>{I.value=!0,_.value=!0,console.log("Long press activated - drag mode ON")},900)},x=()=>{g.value&&(clearTimeout(g.value),g.value=null),I.value=!1};return{pos:e,dragging:_,startLongPress:N,cancelLongPress:x,onDrag:A=>{if(!_.value||!I.value)return;A.preventDefault();let z,c;A.type.includes("touch")?(z=A.touches[0].clientX,c=A.touches[0].clientY):(z=A.clientX,c=A.clientY),e.value.x=z-24,e.value.y=c-24},stopDrag:()=>{if(_.value&&I.value){console.log("Drag stopped - saving position"),_.value=!1,I.value=!1;try{localStorage.setItem(s,JSON.stringify(e.value))}catch(A){console.error("Error saving position:",A)}}x()},handleClick:A=>!_.value&&!I.value?(console.log("Regular click detected"),!0):(console.log("Click ignored - part of drag operation"),!1)}}const Fo={class:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100"},Wo={key:0,class:"fixed inset-0 bg-black bg-opacity-40 z-30 pointer-events-none transition-opacity duration-200"},Jo={key:0,xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",viewBox:"0 0 20 20",fill:"currentColor","stroke-width":"2"},Yo={key:1,xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",viewBox:"0 0 20 20",fill:"currentColor","stroke-width":"2"},Zo={key:0,class:"ml-2 inline-flex items-center justify-center w-5 h-5 text-xs rounded-full bg-green-500 text-white"},Xo=["onClick","data-category"],Qo={key:0,class:"ml-2 inline-flex items-center justify-center w-5 h-5 text-xs rounded-full bg-green-500 text-white"},ei={key:0,class:"ml-2 inline-flex items-center justify-center w-5 h-5 text-xs rounded-full bg-green-500 text-white"},ti={key:3,class:"fixed inset-0 z-30"},ni={class:"mt-2 space-y-2"},si={key:0,class:"ml-2 inline-flex items-center justify-center w-5 h-5 text-xs rounded-full bg-green-500 text-white"},ai=["onClick"],oi={key:0,class:"ml-2 inline-flex items-center justify-center w-5 h-5 text-xs rounded-full bg-green-500 text-white"},ii={key:0,class:"ml-2 inline-flex items-center justify-center w-5 h-5 text-xs rounded-full bg-green-500 text-white"},li={key:0,class:"fixed top-4 left-1/2 transform -translate-x-1/2 bg-green-400 text-white px-4 py-2 rounded shadow-lg z-50"},ri={class:"relative overflow-hidden"},ui={key:"vehicle"},di={key:"conclusion"},ci={key:1},mi=["disabled"],gi={key:0,class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},pi={class:"space-y-4"},vi={class:"relative"},fi={class:"max-h-64 overflow-y-auto"},bi={key:0,class:"text-center py-4 text-gray-500"},hi=["onClick"],yi={class:"font-medium text-gray-900"},xi={class:"text-sm text-gray-500"},ki={class:"text-xs text-gray-400 mt-1"},wi={key:0,class:"text-xs text-green-600 mt-1"},Ii={key:3,class:"fixed bottom-20 left-1/2 transform -translate-x-1/2 bg-gray-800 text-white px-6 py-3 rounded-lg shadow-lg z-50 text-center"},Si={class:"p-4 space-y-6"},_i={class:"flex items-center justify-between"},Ai=["aria-checked"],Vi={class:"space-y-2"},$i={class:"space-y-2"},Ci={class:"space-y-2"},Ti={class:"flex space-x-4"},Ei={class:"flex items-center"},Ni={class:"flex items-center"},Di={key:0,class:"space-y-2"},Pi={class:"flex space-x-4"},Mi={class:"flex items-center"},Ui={class:"flex items-center"},Li={key:1,class:"space-y-2"},Ri={__name:"IndexLocal",props:{inspection:Object,inspectionId:Object,category:Object,car:Object,appMenus:Array,damagePoints:Array,existingResults:Object,existingImages:Object,CarDetail:Array,allInspections:Array},setup(s){var Ot,Kt,qt,Ht,zt,Gt,Ft,Wt,Jt,Yt;const K=i=>{if(!i)return{};if(typeof i=="string")try{return JSON.parse(i)||{}}catch(a){return console.error("Error parsing settings JSON:",a),{}}return typeof i=="object"&&i!==null?i:{}},e=s,_=q(()=>`inspection_data_${e.inspection.id}`),g=q(()=>`swipe_toggle_${e.inspection.id}`),I=q(()=>`image_source_${e.inspection.id}`),$=q(()=>`active_category_${e.inspection.id}`),N=()=>{try{const i=localStorage.getItem(_.value);return i?JSON.parse(i):{}}catch(i){return console.error("Error reading local storage:",i),{}}},x=i=>{try{localStorage.setItem(_.value,JSON.stringify(i))}catch(a){console.error("Error writing to local storage:",a)}},M=()=>{try{localStorage.removeItem(_.value),localStorage.removeItem(g.value),localStorage.removeItem(I.value),localStorage.removeItem($.value)}catch(i){console.error("Error clearing local storage:",i)}},C=()=>{try{const i=localStorage.getItem(g.value);return i?JSON.parse(i):!0}catch(i){return console.error("Error reading swipe toggle state:",i),!0}},V=i=>{try{localStorage.setItem(g.value,JSON.stringify(i))}catch(a){console.error("Error writing swipe toggle state:",a)}},A=()=>{try{return localStorage.getItem(I.value)||"all"}catch(i){return console.error("Error reading image source setting:",i),"all"}},z=i=>{try{localStorage.setItem(I.value,i)}catch(a){console.error("Error writing image source setting:",a)}},c=q(()=>`camera_quality_${e.inspection.id}`),r=()=>{try{return localStorage.getItem(c.value)||"HD_Std"}catch(i){return console.error("Error reading camera quality setting:",i),"HD_Std"}},w=i=>{try{localStorage.setItem(c.value,i)}catch(a){console.error("Error writing camera quality setting:",a)}},J=()=>{try{return localStorage.getItem($.value)||fe.value[0]}catch(i){return console.error("Error reading active category:",i),fe.value[0]}},F=i=>{try{localStorage.setItem($.value,i)}catch(a){console.error("Error writing active category:",a)}},R=k(((Kt=(Ot=e.category)==null?void 0:Ot.settings)==null?void 0:Kt.menu_model)||"horizontal"),L=k(((Ht=(qt=e.category)==null?void 0:qt.settings)==null?void 0:Ht.position)||"top"),T=k(!1),f=k(!1),{pos:U,dragging:Y,startLongPress:h,cancelLongPress:u,onDrag:n,stopDrag:p,handleClick:E}=tn("toggleMenuButtonPos",{x:window.innerWidth-80,y:20}),Z=i=>{E(i)&&be()},be=()=>{T.value=!T.value},ie=()=>{T.value=!1},pe=i=>i?"bg-gradient-to-r from-indigo-700 to-sky-600 text-white":"bg-gray-50 hover:bg-gray-100 text-gray-700",{pos:xe,dragging:ce,startLongPress:ae,cancelLongPress:he,onDrag:re,stopDrag:ve,handleClick:Re}=tn("damageButtonPos",{x:window.innerWidth-80,y:window.innerHeight-80}),Be=i=>{Re(i)&&(ke.value=!0)},ke=k(!1),Te=k(!1),Ee=k(""),ne=k(null),we=k(""),Ae=k(""),Ie=k(""),Ne=k(!1),Ve=k(null),je=(i,a)=>{Ne.value=!0,Ve.value=a,Nt.visit(i,{onFinish:()=>{Ne.value=!1,Ve.value=null}})},B=q(()=>e.appMenus.some(i=>i.input_type==="damage")),fe=q(()=>["vehicle",...e.appMenus.map(i=>String(i.id)),"conclusion"]),X=k(fe.value[0]),ze=k(0),Oe=q(()=>{if(X.value==="vehicle"||X.value==="conclusion")return null;const i=e.appMenus.find(a=>String(a.id)===X.value);return i?{...i,points:Ge(i.menu_point,i.input_type==="damage")}:null}),Ge=(i,a)=>a?(i||[]).filter(H=>{const O=H.inspection_point_id;return ct(O)}):i||[],v=k({plate_number:e.inspection.plate_number,car_id:e.inspection.car_id,car_name:e.inspection.car_name}),m=k({notes:e.inspection.overall_note||"",flooded:((Gt=(zt=K(e.inspection.settings))==null?void 0:zt.conclusion)==null?void 0:Gt.flooded)||null,collision:((Wt=(Ft=K(e.inspection.settings))==null?void 0:Ft.conclusion)==null?void 0:Wt.collision)||null,collision_severity:((Yt=(Jt=K(e.inspection.settings))==null?void 0:Jt.conclusion)==null?void 0:Yt.collision_severity)||null}),y=nn((()=>{const i=[...e.appMenus.flatMap(He=>He.menu_point||[]),...e.damagePoints||[]],a={},H={};i.forEach(He=>{const Le=He.inspection_point_id,Pe=e.existingResults[Le];a[Le]={status:(Pe==null?void 0:Pe.status)||"",note:(Pe==null?void 0:Pe.note)||""},H[Le]=e.existingImages[Le]||[]});const O=N(),Q={...a,...O.results||{}},te={...H,...O.images||{}},Se={...v.value,...O.vehicleDetails||{}},oe=O.overall_note!==void 0?O.overall_note:e.inspection.overall_note||"";return{inspection_id:e.inspection.id,results:Q,images:te,overall_note:oe,plate_number:Se.plate_number,car_id:Se.car_id,car_name:Se.car_name}})());se(y,i=>{x({results:i.results,images:i.images,overall_note:i.overall_note,vehicleDetails:v.value,conclusion:m.value})},{deep:!0}),se(v,i=>{y.plate_number=i.plate_number,y.car_id=i.car_id,y.car_name=i.car_name},{deep:!0}),se(m,i=>{y.overall_note=i.notes},{deep:!0});const W=an("vehicleFeatures",k(null));W.value=JSON.parse(localStorage.getItem("vehicle_features")||"{}"),Dt("vehicleFeatures",W);const de=i=>{var Q,te;const a=i.settings;if(!me(i))return!0;const H=(Q=e.car)==null?void 0:Q.transmission,O=(te=e.car)==null?void 0:te.fuel_type;return!(a.transmission&&Array.isArray(a.transmission)&&a.transmission.length>0&&H&&!a.transmission.includes(H)||a.fuel_type&&a.fuel_type.trim()!==""&&O&&a.fuel_type!==O||a.rear_door&&(!W.value||!W.value.rear_door)||a.pick_up&&(!W.value||!W.value.pick_up)||a.box&&(!W.value||!W.value.box))},me=i=>{const a=i.settings;return!!(a!=null&&a.transmission&&Array.isArray(a.transmission)&&a.transmission.length>0||a!=null&&a.fuel_type&&a.fuel_type.trim()!==""||a!=null&&a.rear_door||a!=null&&a.pick_up||a!=null&&a.box)},le=k(!1),Ke=i=>{le.value=i},ut=k(!1),xt=i=>{ut.value=i},We=q(()=>{var Q;const i=v.value.plate_number&&/^[A-Z]{1,2}\d{1,4}[A-Z]{0,3}$/.test(v.value.plate_number),a=!!((Q=v.value.car_name)!=null&&Q.trim()),H=!ut.value,O=!le.value;return i&&a&&H&&O}),dt=q(()=>{if(!Ee.value.trim())return e.damagePoints||[];const i=Ee.value.toLowerCase().trim();return(e.damagePoints||[]).filter(a=>{var H,O,Q,te,Se;return((O=(H=a.inspection_point)==null?void 0:H.name)==null?void 0:O.toLowerCase().includes(i))||((te=(Q=a.inspection_point)==null?void 0:Q.description)==null?void 0:te.toLowerCase().includes(i))||((Se=mt(a))==null?void 0:Se.toLowerCase().includes(i))})}),ct=i=>{const a=y.results[i]&&(y.results[i].status||y.results[i].note),H=y.images[i]&&y.images[i].length>0;return a||H},mt=i=>{var a;return((a=i.inspection_point.component)==null?void 0:a.name)||"Komponen Tidak Diketahui"},kt=i=>y.results[i]||null,tt=()=>{var te;const i=m.value,a=!!i.flooded,H=!!i.collision,O=i.collision==="yes"?!!i.collision_severity:!0,Q=!!((te=i.notes)!=null&&te.trim());return a&&H&&O&&Q},gt=q(()=>({flooded:m.value.flooded||null,collision:m.value.collision||null,collision_severity:m.value.collision_severity||null,note:m.value.notes||null,isComplete:tt()})),pt=q(()=>{const i=We.value,a=e.appMenus.every(O=>nt(O)),H=tt();return i&&a&&H}),nt=i=>i.input_type==="damage"?!0:i.id==="conclusion"?tt():i.id==="vehicle"?We.value:(Ge(i.menu_point,!1)||[]).filter(O=>O.is_default&&de(O)).every(O=>{var oe,He,Le,Pe,vt,ft;const Q=y.results[O.inspection_point_id],te=y.images[O.inspection_point_id];if(!Q)return!1;const Se=K(O.settings);switch(O.input_type){case"text":case"number":case"date":case"account":case"textarea":return!!((oe=Q.note)!=null&&oe.trim());case"select":case"radio":if(!Q.status)return!1;const Fe=(He=Se.radios)==null?void 0:He.find(Qe=>Qe.value===Q.status);return!(Fe!=null&&Fe.settings&&(Fe.settings.show_textarea&&!((Le=Q.note)!=null&&Le.trim())||Fe.settings.show_image_upload&&(te==null?void 0:te.length)===0));case"imageTOradio":if((te==null?void 0:te.length)===0||!Q.status)return!1;const S=(Pe=Se.radios)==null?void 0:Pe.find(Qe=>Qe.value===Q.status);return!(S!=null&&S.settings&&S.settings.show_textarea&&S.settings.required&&!((vt=Q.note)!=null&&vt.trim()));case"image":return(te==null?void 0:te.length)>0;default:return!!Q.status||!!((ft=Q.note)!=null&&ft.trim())}}),$e=k(!0),qe=k(A()),Ue=k(r()),st=k(!1),wt=()=>{console.log("Opening settings modal"),st.value=!0},at=()=>{console.log("Closing settings modal"),st.value=!1},Je=k(null),ot=k([]),Ye=k(0),Ze=k(!1);Dt("imageSourceSetting",qe),Dt("cameraQualitySetting",Ue);const It=()=>{$e.value=!$e.value,V($e.value)},St=()=>{z(qe.value),console.log("Image source setting updated to:",qe.value)},_t=()=>{w(Ue.value),console.log("Camera quality setting updated to:",Ue.value)},Xe=()=>{Je.value&&Ut(()=>{const i=Je.value.querySelector(`[data-category="${X.value}"]`);if(!i)return;const a=Je.value,H=a.clientWidth,O=i.offsetLeft,Q=i.clientWidth,te=O-H/2+Q/2;a.scrollTo({left:te,behavior:"smooth"})})},At=()=>Ye.value===0?(Ye.value=1,Ze.value=!0,setTimeout(()=>{Ye.value=0,Ze.value=!1},2e3),window.history.pushState(null,null,window.location.href),!1):(Ye.value=0,Ze.value=!1,Nt.visit(route("job.index")),!0),Vt=()=>{window.history.state===null&&window.history.replaceState({isBackButtonControlled:!0},""),window.history.pushState({isBackButtonControlled:!0},""),window.addEventListener("popstate",i=>{i.state&&i.state.isBackButtonControlled&&(i.preventDefault(),At())})},$t=i=>{ne.value=i;const a=i.inspection_point_id,H=y.results[a]||{};we.value=H.status||"",Ae.value=H.note||"",ke.value=!1,Te.value=!0},Ct=i=>{ne.value&&(y.images[ne.value.inspection_point_id]=i)},Tt=()=>{if(ne.value){const i=ne.value.inspection_point_id;y.results[i]={...y.results[i],status:we.value,note:Ae.value},Ie.value="Data berhasil disimpan di lokal!",setTimeout(()=>Ie.value="",1e3)}Pt()},Et=({pointId:i,type:a,value:H})=>{var O;(O=y.results[i])!=null&&O.hasOwnProperty(a)&&(y.results[i][a]=H)},D=async i=>{if(i&&confirm("Apakah kamu yakin ingin menghapus data ini?")){try{await Nt.post(route("inspections.delete-result"),{inspection_id:e.inspection.id,point_id:i},{preserveScroll:!0,preserveState:!0,onSuccess:()=>{y.results[i]&&(y.results[i]={status:"",note:""}),y.images[i]&&(y.images[i]=[]),Ie.value="Data berhasil dihapus!",setTimeout(()=>Ie.value="",1e3)},onError:a=>{console.error("Error menghapus hasil:",a)}})}catch(a){console.error("Error menghapus hasil:",a)}Pt()}},b=i=>{Object.assign(v.value,i),Ke(!0)},gn=i=>{console.log("Save car details locally:",i)},pn=i=>{console.log("Received conclusion data from child:",i),m.value={...m.value,...i},y.overall_note=i.notes||"",console.log("Conclusion state updated:",m.value)},vn=()=>{if(!pt.value){alert("Harap lengkapi semua menu inspeksi termasuk kesimpulan sebelum submit final");return}if(!confirm("Apakah Anda yakin ingin mengirim semua data inspeksi? Data lokal akan dihapus setelah berhasil dikirim."))return;f.value=!0;const i={...y.data(),overall_note:m.value.notes,conclusion:{notes:m.value.notes,flooded:m.value.flooded,collision:m.value.collision,collision_severity:m.value.collision_severity}};Nt.post(route("inspections.final-submit-local",{id:e.inspection.id}),i,{preserveScroll:!0,onSuccess:()=>{M()},onError:a=>{console.error("Kesalahan pengiriman:",a),f.value=!1}})},fn=({pointId:i,imageId:a})=>{y.images[i]&&(y.images[i]=y.images[i].filter(H=>H.id!==a))},Bt=()=>{ke.value=!1,Ee.value=""},Pt=()=>{Te.value=!1,ne.value=null,we.value="",Ae.value=""},bn=()=>{},it=i=>{X.value=i,F(i),Xe()},jt=i=>{let a=ze.value+i;a>=0&&a<fe.value.length&&(X.value=fe.value[a],Xe())},hn=()=>{let i=0,a=0,H=null;const O=oe=>{$e.value&&(i=oe.changedTouches[0].screenX)},Q=oe=>{$e.value&&(a=oe.changedTouches[0].screenX,te())},te=()=>{if(!$e.value)return;const oe=250;a<i-oe?jt(1):a>i+oe&&jt(-1)},Se=()=>{const oe=document.querySelector(".relative.overflow-hidden");return oe&&(oe.addEventListener("touchstart",O,{passive:!0}),oe.addEventListener("touchend",Q,{passive:!0})),()=>{oe&&(oe.removeEventListener("touchstart",O),oe.removeEventListener("touchend",Q))}};return H=Se(),se($e,oe=>{H&&H(),oe&&(H=Se())}),()=>{H&&H()}};return se(X,(i,a)=>{Xe()}),se(X,i=>{ze.value=fe.value.indexOf(i)}),se(Ue,i=>{_t()}),yt(()=>{const i=N();if($e.value=C(),qe.value=A(),Ue.value=r(),i.vehicleDetails&&(Object.assign(v.value,i.vehicleDetails),y.plate_number=i.vehicleDetails.plate_number,y.car_id=i.vehicleDetails.car_id,y.car_name=i.vehicleDetails.car_name),i.conclusion)console.log("Loading conclusion from localStorage:",i.conclusion),Object.assign(m.value,i.conclusion),y.overall_note=i.conclusion.notes||"";else{const O=K(e.inspection.settings).conclusion||{};m.value={notes:e.inspection.notes||"",flooded:O.flooded||"",collision:O.collision||"",collision_severity:O.collision_severity||""},y.overall_note=e.inspection.notes||""}i.results&&Object.assign(y.results,i.results),i.images&&Object.assign(y.images,i.images);const a=J();fe.value.includes(a)?X.value=a:(X.value=fe.value[0],F(fe.value[0])),hn(),Vt(),setTimeout(()=>{Xe()},100)}),(i,a)=>{var H,O,Q,te,Se,oe,He,Le,Pe,vt,ft,Fe;return o(),l("div",Fo,[j(ce)||j(Y)?(o(),l("div",Wo)):d("",!0),R.value==="vertical"?(o(),l("button",{key:1,onMousedown:a[0]||(a[0]=(...S)=>j(h)&&j(h)(...S)),onMouseup:a[1]||(a[1]=(...S)=>j(p)&&j(p)(...S)),onMouseleave:a[2]||(a[2]=(...S)=>j(u)&&j(u)(...S)),onMousemove:a[3]||(a[3]=(...S)=>j(n)&&j(n)(...S)),onTouchstart:a[4]||(a[4]=(...S)=>j(h)&&j(h)(...S)),onTouchend:a[5]||(a[5]=(...S)=>j(p)&&j(p)(...S)),onTouchmove:a[6]||(a[6]=(...S)=>j(n)&&j(n)(...S)),onClick:Z,class:"fixed z-40 p-4 bg-gradient-to-r from-indigo-700 to-sky-600 text-white border shadow-lg rounded-full hover:shadow-xl transition",style:en({left:j(U).x+"px",top:j(U).y+"px"}),"aria-label":"Toggle vertical menu"},[T.value?(o(),l("svg",Yo,a[31]||(a[31]=[t("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"},null,-1)]))):(o(),l("svg",Jo,a[30]||(a[30]=[t("path",{"fill-rule":"evenodd",d:"M3 5h14v2H3V5zm0 4h10v2H3V9zm0 4h6v2H3v-2z","clip-rule":"evenodd"},null,-1)])))],36)):d("",!0),R.value==="horizontal"?(o(),l("div",{key:2,class:G(["z-10 bg-white shadow-sm",{"sticky top-0 mb-2":L.value==="top","fixed bottom-0 left-0 right-0":L.value==="bottom"}])},[t("div",{ref_key:"menuContainer",ref:Je,class:"flex overflow-x-auto scrollbar-hide py-3 px-4 space-x-2 menu-container",onScroll:bn},[t("button",{onClick:wt,class:"flex-shrink-0 p-2 rounded-full text-gray-600 hover:text-gray-800 hover:bg-gray-100 transition-colors duration-200",title:"Pengaturan"},a[32]||(a[32]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})],-1)])),t("button",{ref_key:"menuItems",ref:ot,onClick:a[7]||(a[7]=S=>it("vehicle")),class:G(["flex-shrink-0 px-4 py-2 rounded-full text-sm font-medium whitespace-nowrap transition-colors duration-200 menu-item",{"bg-gradient-to-r from-indigo-700 to-sky-600 shadow-lg text-white":X.value==="vehicle","bg-gray-100 text-gray-700 hover:bg-gray-200":X.value!=="vehicle"}]),"data-category":"vehicle"},[a[33]||(a[33]=De(" Detail Kendaraan ")),We.value?(o(),l("span",Zo," âœ“ ")):d("",!0)],2),(o(!0),l(ge,null,ye(s.appMenus,S=>(o(),l("button",{key:S.id,ref_for:!0,ref_key:"menuItems",ref:ot,onClick:Qe=>it(String(S.id)),class:G(["flex-shrink-0 px-4 py-2 rounded-full text-sm font-medium whitespace-nowrap transition-colors duration-200 menu-item",{"bg-gradient-to-r from-indigo-700 to-sky-600 shadow-lg text-white":X.value===String(S.id),"bg-gray-100 text-gray-700 hover:bg-gray-200":X.value!==String(S.id)}]),"data-category":String(S.id)},[De(P(S.name)+" ",1),nt(S)?(o(),l("span",Qo," âœ“ ")):d("",!0)],10,Xo))),128)),t("button",{ref_key:"menuItems",ref:ot,onClick:a[8]||(a[8]=S=>it("conclusion")),class:G(["flex-shrink-0 px-4 py-2 rounded-full text-sm font-medium whitespace-nowrap transition-colors duration-200 menu-item",{"bg-gradient-to-r from-indigo-700 to-sky-600 shadow-lg text-white":X.value==="conclusion","bg-gray-100 text-gray-700 hover:bg-gray-200":X.value!=="conclusion"}]),"data-category":"conclusion"},[a[34]||(a[34]=De(" Kesimpulan ")),gt.value.isComplete?(o(),l("span",ei," âœ“ ")):d("",!0)],2)],544)],2)):d("",!0),R.value==="vertical"&&T.value?(o(),l("div",ti,[t("div",{class:"absolute inset-0 bg-black bg-opacity-30",onClick:ie}),t("div",{class:G(["absolute z-40 w-60 bg-white rounded-xl shadow-xl p-2 max-h-[75vh] overflow-y-auto",{"top-16 right-4":L.value==="top-right","top-16 left-4":L.value==="top-left","bottom-16 right-4":L.value==="bottom-right","bottom-16 left-4":L.value==="bottom-left"}])},[t("div",{class:"flex items-center justify-between px-2 py-1 border-b"},[a[35]||(a[35]=t("div",{class:"text-sm font-semibold"},"Pilih Menu",-1)),t("button",{onClick:ie,class:"text-xs text-gray-500 hover:text-gray-700"},"Tutup")]),t("div",ni,[t("button",{onClick:a[9]||(a[9]=S=>{it("vehicle"),ie()}),class:G([pe(X.value==="vehicle"),"w-full flex items-center justify-between px-3 py-2 rounded-md text-sm"])},[a[36]||(a[36]=t("span",null,"Detail Kendaraan",-1)),We.value?(o(),l("span",si,"âœ“")):d("",!0)],2),(o(!0),l(ge,null,ye(s.appMenus,S=>(o(),l("button",{key:`vmenu-${S.id}`,onClick:()=>{it(String(S.id)),ie()},class:G([pe(X.value===String(S.id)),"w-full flex items-center justify-between px-3 py-2 rounded-md text-sm"])},[t("span",null,P(S.name),1),nt(S)?(o(),l("span",oi,"âœ“")):d("",!0)],10,ai))),128)),t("button",{onClick:a[10]||(a[10]=S=>{it("conclusion"),ie()}),class:G([pe(X.value==="conclusion"),"w-full flex items-center justify-between px-3 py-2 rounded-md text-sm"])},[a[37]||(a[37]=t("span",null,"Kesimpulan",-1)),gt.value.isComplete?(o(),l("span",ii,"âœ“")):d("",!0)],2)])],2)])):d("",!0),t("div",{class:G(["max-w-7xl mx-auto px-2 sm:px-4 lg:px-6 py-1",{"pb-4 pt-1":L.value==="top","pb-20 pt-4":L.value==="bottom","pb-4 pt-4":R.value==="vertical"}])},[ue(lt,{name:"fade"},{default:Me(()=>[Ie.value?(o(),l("div",li,P(Ie.value),1)):d("",!0)]),_:1}),t("div",ri,[ue(lt,{name:"category-slide",mode:"out-in"},{default:Me(()=>[X.value==="vehicle"?(o(),l("div",ui,[ue(bs,{inspection:s.inspection,CarDetail:s.CarDetail,allInspections:e.allInspections,onUpdateVehicle:b,onSaveCarDetails:gn,"onUpdate:validation":xt,"onUpdate:hasUnsavedChanges":Ke},null,8,["inspection","CarDetail","allInspections"])])):Oe.value&&X.value!=="conclusion"?(o(),l("div",{key:Oe.value.id},[ue(ko,{category:Oe.value,"inspection-id":s.inspection.id,car:e.car,form:j(y),head:R.value,onUpdateResult:Et,onHapusPoint:D,onRemoveImage:fn},null,8,["category","inspection-id","car","form","head"])])):X.value==="conclusion"?(o(),l("div",di,[ue(Go,{form:{conclusion:m.value},"inspection-id":s.inspection.id,inspection:s.inspection,settings:s.inspection.settings||{},onUpdateConclusion:pn},null,8,["form","inspection-id","inspection","settings"])])):d("",!0)]),_:1})]),X.value==="conclusion"?(o(),l("div",{key:0,class:G(["flex justify-end gap-4 mt-2 p-4 bg-white rounded-xl shadow-md",{"mb-4":L.value==="top","mb-20":L.value==="bottom"}])},[ue(j(wn),{href:i.route("inspections.pending",s.inspectionId),as:"button",type:"button",disabled:Ne.value&&Ve.value==="pending",onClick:a[11]||(a[11]=ht(S=>je(i.route("inspections.pending",s.inspectionId),"pending"),["prevent"])),class:"inline-flex items-center justify-center px-3 py-1.5 text-sm font-medium rounded-md shadow-sm bg-yellow-500 text-white hover:bg-yellow-600 transition disabled:opacity-50 disabled:cursor-not-allowed"},{default:Me(()=>[Ne.value&&Ve.value==="pending"?(o(),l(ge,{key:0},[a[38]||(a[38]=t("svg",{class:"animate-spin h-4 w-4 text-white mr-2",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)),a[39]||(a[39]=t("span",null,"Memproses...",-1))],64)):(o(),l("span",ci,"Tunda"))]),_:1},8,["href","disabled"]),t("button",{type:"button",onClick:vn,disabled:!pt.value||f.value,class:"w-full inline-flex items-center justify-center px-6 py-3 border border-transparent text-base font-medium rounded-md shadow-sm bg-gradient-to-r from-indigo-700 to-sky-600 shadow-lg text-white focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition duration-150 ease-in-out disabled:opacity-50 disabled:cursor-not-allowed"},[f.value?(o(),l("svg",gi,a[40]||(a[40]=[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):d("",!0),t("span",null,P(f.value?"Mengirim...":"Final Kirim Inspeksi"),1)],8,mi)],2)):d("",!0),B.value?(o(),l("button",{key:1,onMousedown:a[12]||(a[12]=(...S)=>j(ae)&&j(ae)(...S)),onMouseup:a[13]||(a[13]=(...S)=>j(ve)&&j(ve)(...S)),onMouseleave:a[14]||(a[14]=(...S)=>j(he)&&j(he)(...S)),onMousemove:a[15]||(a[15]=(...S)=>j(re)&&j(re)(...S)),onTouchstart:a[16]||(a[16]=(...S)=>j(ae)&&j(ae)(...S)),onTouchend:a[17]||(a[17]=(...S)=>j(ve)&&j(ve)(...S)),onTouchmove:a[18]||(a[18]=(...S)=>j(re)&&j(re)(...S)),onClick:Be,class:"fixed z-5 p-4 bg-gradient-to-r from-indigo-700 to-sky-600 text-white rounded-full shadow-lg",style:en({left:j(xe).x+"px",top:j(xe).y+"px"})},a[41]||(a[41]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 4v16m8-8H4"})],-1)]),36)):d("",!0),ue(mn,{show:ke.value,title:"Cari Point Inspeksi",subtitle:"Pilih point inspeksi untuk ditambahkan",onClose:Bt},{default:Me(()=>[t("button",{onClick:Bt,class:"absolute top-4 right-4 text-gray-400 hover:text-gray-600 transition-colors z-10"},a[42]||(a[42]=[t("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])),t("div",pi,[t("div",vi,[_e(t("input",{"onUpdate:modelValue":a[19]||(a[19]=S=>Ee.value=S),type:"text",placeholder:"Cari point inspeksi...",class:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"},null,512),[[bt,Ee.value]]),a[43]||(a[43]=t("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[t("svg",{class:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})])],-1))]),t("div",fi,[dt.value.length===0?(o(),l("div",bi," Tidak ada point yang ditemukan ")):d("",!0),(o(!0),l(ge,null,ye(dt.value,S=>{var Qe,Zt;return o(),l("button",{key:S.id,onClick:Bi=>$t(S),class:"w-full text-left p-3 border-b border-gray-200 hover:bg-gray-50 transition-colors"},[t("div",yi,P((Qe=S.inspection_point)==null?void 0:Qe.name),1),t("div",xi,P((Zt=S.inspection_point)==null?void 0:Zt.description),1),t("div",ki,P(mt(S)),1),ct(S.inspection_point_id)?(o(),l("div",wi," âœ“ Sudah ada data ")):d("",!0)],8,hi)}),128))])])]),_:1},8,["show"]),Te.value?(o(),Ce(Rt,{key:(H=ne.value)==null?void 0:H.id,show:Te.value,title:((Q=(O=ne.value)==null?void 0:O.inspection_point)==null?void 0:Q.name)||"Detail Point",subtitle:(Se=(te=ne.value)==null?void 0:te.inspection_point)==null?void 0:Se.description,name:`point-${(oe=ne.value)==null?void 0:oe.id}`,"inspection-id":s.inspection.id,"point-id":(He=ne.value)==null?void 0:He.inspection_point_id,settings:((Le=ne.value)==null?void 0:Le.settings)||{},options:((vt=(Pe=ne.value)==null?void 0:Pe.settings)==null?void 0:vt.radios)||[],"selected-Point":ne.value,"selected-value":we.value,"images-value":j(y).images[(ft=ne.value)==null?void 0:ft.inspection_point_id],"notes-value":Ae.value,point:ne.value,"existing-data":kt((Fe=ne.value)==null?void 0:Fe.inspection_point_id),"onUpdate:selectedValue":a[20]||(a[20]=S=>we.value=S),"onUpdate:notesValue":a[21]||(a[21]=S=>Ae.value=S),"onUpdate:imagesValue":Ct,onSave:Tt,onClose:Pt,onHapus:D},null,8,["show","title","subtitle","name","inspection-id","point-id","settings","options","selected-Point","selected-value","images-value","notes-value","point","existing-data"])):d("",!0),Ze.value?(o(),l("div",Ii,a[44]||(a[44]=[t("p",{class:"text-sm"},"Tekan sekali lagi untuk keluar dari inspeksi",-1),t("p",{class:"text-xs text-gray-300 mt-1"},"Data inspeksi telah disimpan secara lokal",-1)]))):d("",!0),st.value?(o(),l("div",{key:4,class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",onClick:at},[t("div",{class:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4 max-h-[80vh] overflow-y-auto",onClick:a[29]||(a[29]=ht(()=>{},["stop"]))},[t("div",{class:"flex items-center justify-between p-4 border-b"},[a[46]||(a[46]=t("h3",{class:"text-lg font-semibold text-gray-900"},"Pengaturan Inspeksi",-1)),t("button",{onClick:at,class:"text-gray-400 hover:text-gray-600 transition-colors"},a[45]||(a[45]=[t("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),t("div",Si,[t("div",_i,[a[47]||(a[47]=t("div",null,[t("label",{class:"text-sm font-medium text-gray-700"},"Swipe Gesture"),t("p",{class:"text-xs text-gray-500"},"Aktifkan navigasi dengan geser")],-1)),t("button",{onClick:It,type:"button",class:G(["relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",$e.value?"bg-indigo-600":"bg-gray-200"]),role:"switch","aria-checked":$e.value},[t("span",{"aria-hidden":"true",class:G(["pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out",$e.value?"translate-x-5":"translate-x-0"])},null,2)],10,Ai)]),t("div",Vi,[a[49]||(a[49]=t("label",{class:"text-sm font-medium text-gray-700"},"Sumber Gambar",-1)),_e(t("select",{"onUpdate:modelValue":a[22]||(a[22]=S=>qe.value=S),onChange:St,class:"w-full text-sm border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"},a[48]||(a[48]=[t("option",{value:"all"},"Tanya",-1),t("option",{value:"camera"},"Kamera",-1),t("option",{value:"gallery"},"Galeri",-1)]),544),[[Mt,qe.value]])]),t("div",$i,[a[51]||(a[51]=t("label",{class:"text-sm font-medium text-gray-700"},"Kualitas Kamera",-1)),_e(t("select",{"onUpdate:modelValue":a[23]||(a[23]=S=>Ue.value=S),class:"w-full text-sm border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"},a[50]||(a[50]=[t("option",{value:"HD_Std"},"HD Std",-1),t("option",{value:"4K"},"4K Rtc",-1),t("option",{value:"HD"},"HD Rtc",-1),t("option",{value:"SD"},"SD Rtc",-1)]),512),[[Mt,Ue.value]])]),t("div",Ci,[a[54]||(a[54]=t("label",{class:"text-sm font-medium text-gray-700"},"Mode Menu",-1)),t("div",Ti,[t("label",Ei,[_e(t("input",{type:"radio","onUpdate:modelValue":a[24]||(a[24]=S=>R.value=S),value:"horizontal",class:"text-indigo-600 focus:ring-indigo-500"},null,512),[[et,R.value]]),a[52]||(a[52]=t("span",{class:"ml-2 text-sm text-gray-700"},"Scroll samping",-1))]),t("label",Ni,[_e(t("input",{type:"radio","onUpdate:modelValue":a[25]||(a[25]=S=>R.value=S),value:"vertical",class:"text-indigo-600 focus:ring-indigo-500"},null,512),[[et,R.value]]),a[53]||(a[53]=t("span",{class:"ml-2 text-sm text-gray-700"},"Menu Ngambang",-1))])])]),R.value==="horizontal"?(o(),l("div",Di,[a[57]||(a[57]=t("label",{class:"text-sm font-medium text-gray-700"},"Posisi Menu",-1)),t("div",Pi,[t("label",Mi,[_e(t("input",{type:"radio","onUpdate:modelValue":a[26]||(a[26]=S=>L.value=S),value:"top",class:"text-indigo-600 focus:ring-indigo-500"},null,512),[[et,L.value]]),a[55]||(a[55]=t("span",{class:"ml-2 text-sm text-gray-700"},"Atas",-1))]),t("label",Ui,[_e(t("input",{type:"radio","onUpdate:modelValue":a[27]||(a[27]=S=>L.value=S),value:"bottom",class:"text-indigo-600 focus:ring-indigo-500"},null,512),[[et,L.value]]),a[56]||(a[56]=t("span",{class:"ml-2 text-sm text-gray-700"},"Bawah",-1))])])])):d("",!0),R.value==="vertical"?(o(),l("div",Li,[a[59]||(a[59]=t("label",{class:"text-sm font-medium text-gray-700"},"Posisi Menu Vertikal",-1)),_e(t("select",{"onUpdate:modelValue":a[28]||(a[28]=S=>L.value=S),class:"w-full text-sm border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"},a[58]||(a[58]=[t("option",{value:"top-right"},"Atas Kanan",-1),t("option",{value:"top-left"},"Atas Kiri",-1),t("option",{value:"bottom-right"},"Bawah Kanan",-1),t("option",{value:"bottom-left"},"Bawah Kiri",-1)]),512),[[Mt,L.value]])])):d("",!0)]),t("div",{class:"flex justify-end p-4 border-t bg-gray-50"},[t("button",{onClick:at,class:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2"}," Tutup ")])])])):d("",!0)],2)])}}},Fi=rt(Ri,[["__scopeId","data-v-4458efc6"]]);export{Fi as default};
