import P from"./RadioOptionModal-CNvT-meP.js";import{r as p,q as U,G as $,c as n,o as i,j as A,b as h,d as l,F as k,m as I,n as V,t as x}from"./vendor-g77w9U1W.js";import"./InputImage-DPGa4Q3u.js";import"./ImageSourceOptionsModal-CoH0kONx.js";import"./WebcamModal-go1W8qo5.js";import"./app-BGZBwQRK.js";import"./PreviewModal-BcD-Z8yo.js";import"./InputTextarea-o3DjKd7m.js";import"./BottomSheetModal-BFt4oOLW.js";import"./InputAccount-CbAzA0fb.js";import"./InputDate-By-igtci.js";import"./InputNumber-BLISdcLF.js";import"./InputText-aPa2T8tF.js";const H={class:"mt-2 space-y-2"},q={key:0,class:"flex flex-wrap gap-3"},E={key:1,class:"p-2"},F={key:0,class:"mt-2"},R={class:"flex gap-2 overflow-x-auto scrollbar-hide"},T=["src"],z={key:0,class:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center text-white text-xs"},G=["name","value","checked"],L={key:1,class:"mt-2"},J={class:"text-sm text-gray-600"},K={key:3,class:"mt-2 text-sm text-red-600"},ne={__name:"InputImageToRadio",props:{modelValue:String,required:Boolean,error:String,point:Object,pointId:[String,Number],pointName:String,subtitle:String,inspectionId:[String,Number],options:{type:Array,default:()=>[]},selectedPoint:Object,notes:{type:String,default:""},images:{type:Array,default:()=>[]}},emits:["update:modelValue","update:notes","update:images","save","hapus"],setup(e,{emit:S}){const s=e,u=S,r=p(s.notes),d=p([...s.images]),g=p(!1),m=p(""),v=p([]),c=p(""),j=p([]),N=U(()=>s.options.find(t=>t.value===s.modelValue)),B=t=>t.preview||(t.image_path?`/${t.image_path}`:t);$(()=>s.notes,t=>{r.value=t});const b=()=>{c.value=s.modelValue||"",m.value=r.value,v.value=[...d.value],j.value=[...d.value],g.value=!0},C=()=>{m.value="",v.value=[],c.value="",g.value=!1},O=t=>{v.value=t,d.value=[...t],u("update:images",[...t]),u("save",{pointId:s.pointId,inspectionId:s.inspectionId,value:s.modelValue,notes:r.value,images:[...t]})},M=()=>{c.value!==s.modelValue&&u("update:modelValue",c.value),r.value=m.value,u("update:notes",m.value),d.value=[...v.value],u("update:images",[...v.value]),u("save",{pointId:s.pointId,inspectionId:s.inspectionId,value:c.value,notes:m.value,images:v.value}),g.value=!1},D=t=>{c.value="",m.value="",v.value=[],r.value="",d.value=[],u("update:modelValue",""),u("update:notes",""),u("update:images",[]),u("hapus",t),g.value=!1};return(t,o)=>{var y,w;return i(),n("div",H,[!e.modelValue&&d.value.length===0&&!r.value?(i(),n("div",q,[l("div",{class:"relative w-28 h-28 border-2 border-dashed rounded-lg flex items-center justify-center cursor-pointer overflow-hidden",onClick:b},o[4]||(o[4]=[l("div",{class:"flex flex-col items-center text-gray-400"},[l("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-8 w-8 mb-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})]),l("span",{class:"text-xs font-medium"},"Tambah")],-1)]))])):(i(),n("div",E,[l("div",{class:"flex justify-between items-start"},[o[5]||(o[5]=l("h4",{class:"text-sm font-medium text-gray-700"},"Detail :",-1)),l("button",{onClick:b,class:"text-sm text-indigo-600 hover:text-indigo-800"}," Edit ")]),d.value.length>0?(i(),n("div",F,[l("div",R,[(i(!0),n(k,null,I(d.value,(a,f)=>(i(),n("div",{key:f,class:"relative flex-shrink-0",style:{width:"130px",height:"130px"}},[l("img",{src:B(a),class:"w-full h-full object-cover rounded"},null,8,T),f===3&&d.value.length>4?(i(),n("span",z," +"+x(d.value.length-4),1)):h("",!0)]))),128))])])):h("",!0),l("div",{class:V(["grid gap-2 w-full mt-2",`grid-cols-${Math.min(e.options.length,3)}`])},[(i(!0),n(k,null,I(e.options,(a,f)=>(i(),n("label",{key:f,class:"cursor-pointer"},[l("input",{type:"radio",name:"radio-"+e.pointId,value:a.value,checked:e.modelValue===a.value,disabled:!0,class:"hidden peer"},null,8,G),l("div",{class:V(["w-full px-4 py-3 border rounded-lg text-center transition-colors whitespace-nowrap text-sm font-medium",{"border-indigo-500 bg-indigo-50 text-indigo-700":e.modelValue===a.value,"border-gray-300 text-gray-700 hover:bg-gray-50":e.modelValue!==a.value}])},x(a.label),3)]))),128))],2),r.value&&((y=N.value.settings)!=null&&y.show_textarea)?(i(),n("div",L,[l("p",J,x(r.value),1)])):h("",!0)])),g.value?(i(),A(P,{key:(w=e.selectedPoint)==null?void 0:w.id,show:g.value,title:e.pointName||"Detail",subtitle:e.subtitle||"",name:"modal-radio-"+e.pointId,options:e.options,"selected-value":c.value,"notes-value":m.value,"images-value":v.value,"point-id":e.pointId,point:e.point,"inspection-id":e.inspectionId,"selected-point":e.selectedPoint,"onUpdate:selectedValue":o[0]||(o[0]=a=>c.value=a),"onUpdate:notesValue":o[1]||(o[1]=a=>m.value=a),"onUpdate:imagesValue":o[2]||(o[2]=a=>O(a)),onClose:C,onSave:M,onHapus:o[3]||(o[3]=a=>D(e.pointId))},null,8,["show","title","subtitle","name","options","selected-value","notes-value","images-value","point-id","point","inspection-id","selected-point"])):h("",!0),e.error?(i(),n("p",K,x(e.error),1)):h("",!0)])}}};export{ne as default};
