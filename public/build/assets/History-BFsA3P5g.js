import{r as w,q as x,j as P,o as a,w as Y,k as L,d as e,u as W,v as J,c as n,b as c,z as h,F as v,m as k,t as r,I as _,n as O,f as y,W as f}from"./vendor-C3sNAm3r.js";import{A as U}from"./AppLayout-ChNIk_qF.js";import"./app-C2BdSkcL.js";const $={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6"},E={class:"mb-6 bg-white shadow rounded-lg p-4"},G={class:"grid grid-cols-3 md:grid-cols-3 gap-4"},H=["value"],K=["disabled"],Q=["value","disabled"],X={key:0,class:"mt-4 flex justify-end"},Z={key:0,class:"mb-4 grid grid-cols-2 md:grid-cols-3 gap-4"},ee={class:"bg-white shadow rounded-lg p-4"},te={class:"flex items-center"},se={class:"ml-4"},oe={class:"text-lg font-semibold text-gray-900"},ae={class:"bg-white shadow rounded-lg p-4"},ne={class:"flex items-center"},re={class:"ml-4"},le={class:"text-lg font-semibold text-gray-900"},ie={class:"bg-white shadow rounded-lg p-4"},de={class:"flex items-center"},ue={class:"ml-4"},pe={class:"text-lg font-semibold text-gray-900"},me={class:"bg-white shadow rounded-lg overflow-hidden"},ge={key:0,class:"text-center py-12 text-gray-500"},ce={key:1,class:"overflow-x-auto"},xe={class:"min-w-full divide-y divide-gray-200"},ve={class:"bg-white divide-y divide-gray-200"},fe={class:"px-6 py-4 whitespace-nowrap"},ye={class:"flex items-center"},be=["onClick"],we={key:0,class:"ml-2"},he={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"},ke={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},_e={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"},De={class:"px-6 py-4 whitespace-nowrap"},Me={class:"text-sm text-gray-900"},Se={key:0,class:"text-xs text-gray-500"},Ce={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},Te={class:"text-xs text-gray-400"},Be={class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},je=["onClick"],Ae={key:1,class:"text-gray-400 text-xs"},Fe={key:0,class:"px-6 py-3 bg-gray-50 border-t border-gray-200"},qe={class:"flex justify-between items-center"},Re={class:"text-sm text-gray-600"},Ie={class:"font-medium"},Ve={key:0},ze={class:"text-sm text-gray-600"},Ne={class:"font-bold text-blue-600"},We={__name:"History",props:{withdrawals:{type:Array,required:!0},filters:{type:Object,default:()=>({})}},setup(C){const m=C,l=w(m.filters.year||""),i=w(m.filters.month||""),d=w(m.filters.status||""),T=["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"],B=x(()=>{const o=new Set;return m.withdrawals.forEach(t=>{const s=new Date(t.requested_at).getFullYear();o.add(s)}),Array.from(o).sort((t,s)=>s-t)}),j=o=>l.value?m.withdrawals.some(t=>{const s=new Date(t.requested_at);return s.getFullYear()===parseInt(l.value)&&s.getMonth()+1===o}):!0,u=x(()=>{let o=[...m.withdrawals];if(l.value){const t=parseInt(l.value);o=o.filter(s=>new Date(s.requested_at).getFullYear()===t)}if(i.value){const t=parseInt(i.value);o=o.filter(s=>new Date(s.requested_at).getMonth()+1===t)}return d.value&&(o=o.filter(t=>t.status===d.value)),o.sort((t,s)=>new Date(s.requested_at)-new Date(t.requested_at))}),D=x(()=>u.value.reduce((o,t)=>o+parseFloat(t.total_amount),0)),A=x(()=>u.value.filter(o=>o.status==="completed").length),M=x(()=>l.value||i.value||d.value),b=()=>{const o={};l.value&&(o.year=l.value),i.value&&(o.month=i.value),d.value&&(o.status=d.value),f.get(route("withdrawals.history"),o,{preserveState:!0,preserveScroll:!0,replace:!0})},S=()=>{l.value="",i.value="",d.value="",f.get(route("withdrawals.history"),{},{preserveState:!0,preserveScroll:!0,replace:!0})},F=o=>({pending:"Pending",approved:"Dikirim",processing:"Diproses",completed:"Selesai",rejected:"Ditolak"})[o]||o,q=o=>({pending:"bg-yellow-100 text-yellow-800",approved:"bg-green-100 text-green-800 border border-green-200",processing:"bg-indigo-100 text-indigo-800",completed:"bg-blue-100 text-blue-800",rejected:"bg-red-100 text-red-800"})[o]||"bg-gray-100 text-gray-800",R=o=>({transfer:"Transfer",cash:"Tunai"})[o]||o,I=o=>{f.visit(route("withdrawal.show",o))},V=o=>{confirm("Apakah Anda yakin telah menerima dana penarikan ini? Dana akan ditandai sebagai selesai dan tidak dapat dikembalikan.")&&f.post(route("withdrawal.complete",o.id),{preserveScroll:!0,onSuccess:()=>f.reload()})},g=o=>new Intl.NumberFormat("id-ID").format(o||0),z=o=>new Date(o).toLocaleDateString("id-ID",{day:"2-digit",month:"2-digit",year:"numeric"}),N=o=>new Date(o).toLocaleTimeString("id-ID",{hour:"2-digit",minute:"2-digit"});return(o,t)=>(a(),P(U,{title:"Riwayat Penarikan"},{default:Y(()=>[L(W(J),{title:"Riwayat Penarikan"}),e("div",$,[t[27]||(t[27]=e("div",{class:"mb-6"},[e("h1",{class:"text-2xl font-bold text-gray-900"},"Riwayat Penarikan Dana"),e("p",{class:"text-gray-600 mt-2"},"Daftar semua pengajuan penarikan Anda")],-1)),e("div",E,[e("div",G,[e("div",null,[t[4]||(t[4]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"}," Tahun ",-1)),h(e("select",{"onUpdate:modelValue":t[0]||(t[0]=s=>l.value=s),onChange:b,class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"},[t[3]||(t[3]=e("option",{value:""},"Semua Tahun",-1)),(a(!0),n(v,null,k(B.value,s=>(a(),n("option",{key:s,value:s},r(s),9,H))),128))],544),[[_,l.value]])]),e("div",null,[t[6]||(t[6]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"}," Bulan ",-1)),h(e("select",{"onUpdate:modelValue":t[1]||(t[1]=s=>i.value=s),onChange:b,disabled:!l.value,class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"},[t[5]||(t[5]=e("option",{value:""},"Semua Bulan",-1)),(a(),n(v,null,k(T,(s,p)=>e("option",{key:p,value:p+1,disabled:!j(p+1)},r(s),9,Q)),64))],40,K),[[_,i.value]])]),e("div",null,[t[8]||(t[8]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"}," Status ",-1)),h(e("select",{"onUpdate:modelValue":t[2]||(t[2]=s=>d.value=s),onChange:b,class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"},t[7]||(t[7]=[e("option",{value:""},"Semua Status",-1),e("option",{value:"pending"},"Pending",-1),e("option",{value:"approved"},"Dikirim",-1),e("option",{value:"processing"},"Diproses",-1),e("option",{value:"completed"},"Selesai",-1),e("option",{value:"rejected"},"Ditolak",-1)]),544),[[_,d.value]])])]),M.value?(a(),n("div",X,[e("button",{onClick:S,class:"px-3 py-1.5 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"}," Reset Filter ")])):c("",!0)]),u.value.length>0?(a(),n("div",Z,[e("div",ee,[e("div",te,[t[10]||(t[10]=e("div",{class:"flex-shrink-0 bg-blue-100 rounded-md p-3"},[e("svg",{class:"h-6 w-6 text-blue-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),e("div",se,[t[9]||(t[9]=e("p",{class:"text-sm font-medium text-gray-600"},"Total Penarikan",-1)),e("p",oe,r(u.value.length),1)])])]),e("div",ae,[e("div",ne,[t[12]||(t[12]=e("div",{class:"flex-shrink-0 bg-green-100 rounded-md p-3"},[e("svg",{class:"h-6 w-6 text-green-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),e("div",re,[t[11]||(t[11]=e("p",{class:"text-sm font-medium text-gray-600"},"Total Dana",-1)),e("p",le,"Rp "+r(g(D.value)),1)])])]),e("div",ie,[e("div",de,[t[14]||(t[14]=e("div",{class:"flex-shrink-0 bg-purple-100 rounded-md p-3"},[e("svg",{class:"h-6 w-6 text-purple-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})])],-1)),e("div",ue,[t[13]||(t[13]=e("p",{class:"text-sm font-medium text-gray-600"},"Berhasil",-1)),e("p",pe,r(A.value)+" dari "+r(u.value.length),1)])])])])):c("",!0),e("div",me,[u.value.length===0?(a(),n("div",ge,[M.value?(a(),n(v,{key:0},[t[15]||(t[15]=e("svg",{class:"h-12 w-12 mx-auto text-gray-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),t[16]||(t[16]=e("h3",{class:"mt-2 text-sm font-medium text-gray-900"},"Tidak ditemukan",-1)),t[17]||(t[17]=e("p",{class:"mt-1 text-sm text-gray-500"}," Tidak ada data penarikan dengan filter yang dipilih ",-1)),e("button",{onClick:S,class:"mt-4 inline-flex items-center px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"}," Tampilkan semua ")],64)):(a(),n(v,{key:1},[t[18]||(t[18]=e("svg",{class:"h-12 w-12 mx-auto text-gray-400",xmlns:"http://www.w3.org2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),t[19]||(t[19]=e("h3",{class:"mt-2 text-sm font-medium text-gray-900"},"Belum ada riwayat penarikan",-1)),t[20]||(t[20]=e("p",{class:"mt-1 text-sm text-gray-500"}," Anda belum melakukan pengajuan penarikan. ",-1))],64))])):(a(),n("div",ce,[e("table",xe,[t[23]||(t[23]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Status "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Total "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Biaya Admin "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Diterima "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Metode "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Tanggal "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Aksi ")])],-1)),e("tbody",ve,[(a(!0),n(v,null,k(u.value,s=>(a(),n("tr",{key:s.id},[e("td",fe,[e("div",ye,[e("button",{onClick:p=>I(s.id),class:O(`${q(s.status)} px-3 py-1 inline-flex text-xs leading-5 font-semibold rounded-full hover:opacity-80 transition-opacity cursor-pointer`)},r(F(s.status)),11,be),s.status==="approved"?(a(),n("div",we,t[21]||(t[21]=[e("span",{class:"animate-ping absolute h-2 w-2 rounded-full bg-green-400 opacity-75"},null,-1),e("span",{class:"relative h-2 w-2 rounded-full bg-green-500"},null,-1)]))):c("",!0)])]),e("td",he," Rp "+r(g(s.total_amount)),1),e("td",ke,r(s.admin_fee>0?"Rp "+g(s.admin_fee):"Gratis"),1),e("td",_e,r(s.final_amount?"Rp "+g(s.final_amount):"Rp "+g(s.total_amount)),1),e("td",De,[e("div",Me,r(R(s.payment_method)),1),s.bank_name?(a(),n("div",Se,r(s.bank_name),1)):c("",!0)]),e("td",Ce,[e("div",null,r(z(s.requested_at)),1),e("div",Te,r(N(s.requested_at)),1)]),e("td",Be,[s.status==="approved"?(a(),n("button",{key:0,onClick:p=>V(s),class:"inline-flex items-center px-3 py-1.5 border border-transparent text-xs font-medium rounded-md text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 transition-colors duration-200"},t[22]||(t[22]=[e("svg",{class:"h-4 w-4 mr-1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"})],-1),y(" Konfirmasi Diterima ")]),8,je)):(a(),n("span",Ae,"-"))])]))),128))])]),u.value.length>0?(a(),n("div",Fe,[e("div",qe,[e("div",Re,[t[24]||(t[24]=y(" Menampilkan ")),e("span",Ie,r(u.value.length),1),t[25]||(t[25]=y(" data ")),l.value||i.value||d.value?(a(),n("span",Ve," (difilter) ")):c("",!0)]),e("div",ze,[t[26]||(t[26]=y(" Total: ")),e("span",Ne,"Rp "+r(g(D.value)),1)])])])):c("",!0)]))])])]),_:1}))}};export{We as default};
