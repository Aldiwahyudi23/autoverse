import{x as oa,r as b,g as st,q as te,H as wt,G as we,c as i,o as n,d as e,b as u,k as Me,z as Le,A as dt,n as re,t as q,F as Ue,m as De,f as Ne,u as ae,e as ya,y as ct,w as Fe,L as qe,D as Pt,M as Lt,j as Pe,a as jt,l as aa,T as gt,N as Dt,p as xa,O as sa,J as at,B as wa,S as ka,I as Bt,W as Nt}from"./vendor-CUNG9NG6.js";import{l as ia}from"./lodash-CeUj5J-L.js";import{_ as Ia}from"./PrimaryButton-h2qnLbgr.js";import{_ as _a}from"./ActionMessage-C19FCsLq.js";import{F as Sa}from"./fuse-Ch1WBRTM.js";import{_ as Ke}from"./app-J6WqAOrG.js";import{_ as la}from"./InputNumber-BM446ncS.js";const Ca={class:"bg-gray-50 shadow-lg rounded-xl overflow-hidden border border-gray-100"},$a={key:0,class:"p-4 space-y-2"},Aa={class:"space-y-2 pb-2 border-b border-gray-100 last:border-0 last:pb-0"},Va={class:"flex items-center space-x-2"},Ta={key:0,class:"text-xs text-red-500 font-normal ml-2"},Ma={key:1,class:"text-xs text-red-500 font-normal ml-2"},Ea={key:2,class:"text-xs text-green-500 font-normal ml-2"},Ua={class:"space-y-2 pb-2 border-b border-gray-100 last:border-0 last:pb-0"},Na={class:"grid grid-cols-1 sm:grid-cols-3 gap-3"},Da={class:"col-span-2 flex space-x-3"},Pa={class:"mt-3 p-3 bg-blue-50 border border-blue-200 rounded-lg"},La={class:"flex items-start"},Ra={class:"text-sm text-blue-700"},ja={class:"mt-1"},Ba={key:0,class:"inline-flex items-center px-2 py-1 rounded bg-blue-100 text-blue-800 text-xs font-medium mr-2"},Fa={key:1,class:"inline-flex items-center px-2 py-1 rounded bg-green-100 text-green-800 text-xs font-medium mr-2"},Oa={key:2,class:"inline-flex items-center px-2 py-1 rounded bg-green-100 text-green-800 text-xs font-medium"},za={key:3,class:"text-blue-600"},qa={class:"space-y-2 pb-2 border-b border-gray-100 last:border-0 last:pb-0"},Ka={class:"relative"},Ha={key:0,class:"absolute right-3 top-3"},Ga={key:1,class:"mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-60 overflow-y-auto"},Wa={key:0},Ya=["onMousedown"],Za={class:"font-medium text-gray-900"},Ja={class:"text-sm text-gray-500"},Xa={key:1,class:"p-4 text-sm text-gray-500 text-center"},Qa={key:0,class:"text-xs text-red-500 font-normal ml-2"},es={key:0,class:"mt-3 p-3 bg-yellow-50 border border-yellow-200 rounded-md"},ts={key:1,class:"mb-6 p-4 bg-gray-50 rounded-lg border border-gray-200"},as={key:0,class:"mb-4"},ss=["innerHTML"],ns={key:1},os={class:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3"},is=["onClick"],ls=["src","alt"],rs={key:0,class:"absolute inset-0 bg-black bg-opacity-50 opacity-0 group-hover:opacity-100 transition-opacity rounded-lg flex items-center justify-center p-2"},us={class:"text-white text-xs text-center"},ds={key:2,class:"text-center py-4 text-gray-500 text-sm"},cs={class:"relative max-w-4xl max-h-full w-full h-full flex items-center justify-center"},gs=["src","alt"],ps={key:2,class:"absolute bottom-4 left-1/2 transform -translate-x-1/2 text-white bg-black bg-opacity-50 px-3 py-1 rounded-full text-sm"},ms={key:3,class:"absolute bottom-4 left-4 text-white bg-black bg-opacity-50 px-3 py-1 rounded text-sm max-w-md"},vs={key:0,class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},fs={__name:"VehicleDetails",props:{inspection:{type:Object,default:null},CarDetail:Array,allInspections:{type:Array,default:()=>[]}},emits:["update-vehicle","update:validation","update:hasUnsavedChanges","update:vehicle-type"],setup(a,{emit:se}){var k,K,Y,fe,ve,ue;const t=a,C=se,d=oa({plate_number:((k=t.inspection)==null?void 0:k.plate_number)||"",car_id:((K=t.inspection)==null?void 0:K.car_id)||null,car_name:((Y=t.inspection)==null?void 0:Y.car_name)||""}),S=b(((fe=t.inspection)==null?void 0:fe.plate_number)||""),f=b(((ve=t.inspection)==null?void 0:ve.car_id)||null),M=b(((ue=t.inspection)==null?void 0:ue.car_name)||""),w=b(""),N=b(""),D=b(""),E=b(null),L=b({rear_door:!1}),ee=b(!1),g=b(""),c=b(""),V=b(d.car_name),z=b(!1),U=b(!1),O=b([]),J=b(null),B=b([]),p=b(!1),X=b(0);st(()=>{var x,m,he,A,ce;if(F((x=t.inspection)==null?void 0:x.plate_number),(m=t.inspection)!=null&&m.car_id&&((he=t.CarDetail)==null?void 0:he.length)>0){const $e=t.CarDetail.find(Ee=>Ee.id===t.inspection.car_id);$e&&me($e)}else!((A=t.inspection)!=null&&A.car_id)&&((ce=t.inspection)!=null&&ce.car_name)&&(V.value=t.inspection.car_name,d.car_id=null);window.addEventListener("keydown",l),ne(),C("update:hasUnsavedChanges",T.value),C("update:validation",P.value)}),wt(()=>{window.removeEventListener("keydown",l)});const ne=()=>{try{const x=localStorage.getItem("vehicle_features");if(x){const m=JSON.parse(x);L.value.rear_door=m.rear_door||!1,m.pick_up?E.value="pick_up":m.box?E.value="box":E.value=null}else L.value.rear_door=!1,E.value=null;I()}catch(x){console.error("Error loading vehicle type from localStorage:",x),L.value.rear_door=!1,E.value=null,I()}},_=()=>{L.value.rear_door=!L.value.rear_door,s()},h=x=>{E.value===x?E.value=null:E.value=x,s()},s=()=>{try{const x={rear_door:L.value.rear_door,pick_up:E.value==="pick_up",box:E.value==="box"};localStorage.setItem("vehicle_features",JSON.stringify(x)),I(),console.log("Vehicle features saved to localStorage:",x)}catch(x){console.error("Error saving vehicle type to localStorage:",x)}},I=()=>{const x={rear_door:L.value.rear_door,pick_up:E.value==="pick_up",box:E.value==="box"};C("update:vehicle-type",x)},F=x=>{if(!x){w.value="",N.value="",D.value="";return}const m=x.toUpperCase().trim(),he=m.match(/^([A-Z]{1,2})?([0-9]{1,4})?([A-Z]{1,3})?$/);if(he)w.value=he[1]||"",N.value=he[2]||"",D.value=he[3]||"";else{let A="area",ce="",$e="",Ee="";for(const Te of m)A==="area"&&/[A-Z]/.test(Te)?ce+=Te:A==="area"&&/[0-9]/.test(Te)?(A="number",$e+=Te):A==="number"&&/[0-9]/.test(Te)?$e+=Te:A==="number"&&/[A-Z]/.test(Te)?(A="suffix",Ee+=Te):A==="suffix"&&/[A-Z]/.test(Te)&&(Ee+=Te);w.value=ce,N.value=$e,D.value=Ee}ge()},ge=()=>{const x=`${w.value}${N.value}${D.value}`;d.plate_number=x,v()},G=x=>{x==="area"?w.value=w.value.toUpperCase().replace(/[^A-Z]/g,""):x==="number"?N.value=N.value.replace(/[^0-9]/g,""):x==="suffix"&&(D.value=D.value.toUpperCase().replace(/[^A-Z]/g,"")),ge()},W=te(()=>{const x=d.plate_number;return/^[A-Z]{1,2}\d{1,4}[A-Z]{0,3}$/.test(x)}),oe=te(()=>!V.value||V.value.trim()===""),de=te(()=>d.plate_number.length>0&&!W.value?"Format plat nomor tidak valid.":null),P=te(()=>{const x=!d.plate_number||d.plate_number.trim()==="",m=!V.value||V.value.trim()==="";return x||m||!W.value||ee.value}),T=te(()=>{const x=d.plate_number!==S.value,m=d.car_id!==f.value||V.value!==M.value;return x||m}),R=te(()=>T.value&&!P.value),H=x=>{var he,A,ce;if(!x)return"";const m=[];return(he=x.brand)!=null&&he.name&&m.push(x.brand.name),(A=x.model)!=null&&A.name&&m.push(x.model.name),(ce=x.type)!=null&&ce.name&&m.push(x.type.name),x.cc&&m.push((x.cc/1e3).toFixed(1)),x.transmission&&m.push(x.transmission),x.year&&m.push(x.year.toString()),x.fuel_type&&m.push(x.fuel_type),x.production_period&&m.push(`(${x.production_period})`),m.join(" ")},Q=ia.debounce(()=>{if(!V.value.trim()){O.value=[],z.value=!1;return}U.value=!0;try{const x=V.value.trim();if(t.CarDetail&&t.CarDetail.length>0){const m=t.CarDetail.map(ce=>({...ce,formattedName:H(ce)})),A=new Sa(m,{keys:["formattedName","brand.name","model.name","type.name"],threshold:.6,findAllMatches:!0,includeScore:!0,shouldSort:!0}).search(x).slice(0,10);O.value=A.map(ce=>ce.item)}else O.value=[];z.value=!0}finally{U.value=!1}},300),ie=()=>{if(d.car_id&&(d.car_id=null,J.value=null,B.value=[]),!V.value.trim()){O.value=[],z.value=!1;return}Q()},be=()=>{setTimeout(()=>{z.value=!1,!d.car_id&&V.value&&(d.car_name=V.value,v())},200)},me=async x=>{J.value=x,V.value=H(x),d.car_id=x.id,d.car_name=H(x),z.value=!1,Q.cancel(),await _e(x.id),v(),C("update:hasUnsavedChanges",T.value),C("update:validation",P.value)},Ae=x=>!x||!x.file_path?"":`/storage/${x.file_path}`,_e=async x=>{try{const m=await fetch(`/api/cars/${x}/images`);if(m.ok){const he=await m.json();B.value=Array.isArray(he)?he:[]}else B.value=[]}catch(m){console.error("Error loading car images:",m),B.value=[]}},ye=x=>{X.value=x,p.value=!0,document.body.style.overflow="hidden"},Se=()=>{p.value=!1,document.body.style.overflow=""},Ve=()=>{X.value=(X.value+1)%B.value.length},Ie=()=>{X.value=(X.value-1+B.value.length)%B.value.length},l=x=>{if(p.value)switch(x.key){case"Escape":Se();break;case"ArrowRight":Ve();break;case"ArrowLeft":Ie();break}},v=()=>{const x={plate_number:d.plate_number,car_id:d.car_id,car_name:d.car_name};C("update-vehicle",x)},y=()=>{t.inspection&&d.post(route("inspections.updateVehicleDetails",{inspection:t.inspection.id}),{preserveScroll:!0,onSuccess:()=>{S.value=d.plate_number,f.value=d.car_id,M.value=d.car_name,C("update:hasUnsavedChanges",!1),console.log("Data berhasil disimpan!")},onError:x=>{console.error("Gagal menyimpan data:",x)}})};return we([()=>d.plate_number,()=>d.car_name],x=>{g.value="",ee.value=!1,c.value="";const m=x[0];if(m&&m.length>=6){const he=t.allInspections.filter(A=>{var ce;return A.plate_number===m&&A.id!==((ce=t.inspection)==null?void 0:ce.id)});if(he.length>0){const A=["draft","in_progress","pending","pending_review","revision"],ce=he.find($e=>A.includes($e.status));if(ce)ee.value=!0,g.value=`Nomor plat ini sedang dalam proses inspeksi dengan status: ${ce.status.replace(/_/g," ").toUpperCase()}.`;else{const $e=he.filter(Ee=>["approved","rejected","completed","cancelled"].includes(Ee.status));if($e.length>0){$e.sort((Te,He)=>new Date(He.created_at)-new Date(Te.created_at));const Ee=$e[0];if(Ee.car_id){const Te=t.CarDetail.find(He=>He.id===Ee.car_id);Te&&me(Te)}else Ee.car_name&&(V.value=Ee.car_name,d.car_name=Ee.car_name,d.car_id=null);c.value=`Nomor plat ini sudah pernah diperiksa ${$e.length} kali sebelumnya.`}}}}C("update:hasUnsavedChanges",T.value),C("update:validation",P.value)},{deep:!0}),we([()=>L.value.rear_door,()=>E.value],()=>{s()}),we(()=>{var x;return(x=t.inspection)==null?void 0:x.car_id},x=>{var m,he;if(x!==d.car_id)if(d.car_id=x,x&&((m=t.CarDetail)==null?void 0:m.length)>0){const A=t.CarDetail.find(ce=>ce.id===x);A&&me(A)}else!x&&((he=t.inspection)!=null&&he.car_name)&&(V.value=t.inspection.car_name,d.car_name=t.inspection.car_name,d.car_id=null)}),we(()=>{var x;return(x=t.inspection)==null?void 0:x.car_name},x=>{x&&x!==V.value&&(V.value=x)}),(x,m)=>{var he;return n(),i("div",Ca,[m[27]||(m[27]=e("div",{class:"bg-indigo-200 px-6 py-2 border-b flex items-center justify-between"},[e("h4",{class:"text-base font-semibold text-indigo-700"}," Detail Kendaraan ")],-1)),a.inspection?(n(),i("div",$a,[e("div",Aa,[m[11]||(m[11]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"}," Nomor Plat Kendaraan ",-1)),e("div",Va,[Le(e("input",{"onUpdate:modelValue":m[0]||(m[0]=A=>w.value=A),type:"text",placeholder:"Contoh: B",class:re(["w-1/4 rounded-lg border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm text-center transition duration-150",{"border-red-500 focus:border-red-500":!W.value||ee.value}]),onInput:m[1]||(m[1]=A=>G("area")),maxlength:"2"},null,34),[[dt,w.value]]),Le(e("input",{"onUpdate:modelValue":m[2]||(m[2]=A=>N.value=A),type:"tel",pattern:"[0-9]*",placeholder:"1234",class:re(["w-2/4 rounded-lg border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm text-center transition duration-150",{"border-red-500 focus:border-red-500":!W.value||ee.value}]),onInput:m[3]||(m[3]=A=>G("number")),maxlength:"4"},null,34),[[dt,N.value]]),Le(e("input",{"onUpdate:modelValue":m[4]||(m[4]=A=>D.value=A),type:"text",placeholder:"ABC",class:re(["w-1/4 rounded-lg border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm text-center transition duration-150",{"border-red-500 focus:border-red-500":!W.value||ee.value}]),onInput:m[5]||(m[5]=A=>G("suffix")),maxlength:"3"},null,34),[[dt,D.value]])]),de.value?(n(),i("span",Ta,q(de.value),1)):u("",!0),g.value?(n(),i("span",Ma,q(g.value),1)):u("",!0),c.value?(n(),i("span",Ea,q(c.value),1)):u("",!0)]),e("div",Ua,[m[15]||(m[15]=e("label",{class:"block text-sm font-medium text-gray-700 mb-3"}," Jenis Kendaraan ",-1)),e("div",Na,[e("div",{class:re(["w-full px-4 py-3 border-2 rounded-lg text-center transition-all duration-200 whitespace-nowrap text-sm font-medium cursor-pointer",{"border-indigo-500 bg-indigo-50 text-indigo-700 shadow-sm":L.value.rear_door,"border-gray-300 text-gray-700 hover:bg-gray-50 hover:border-gray-400":!L.value.rear_door}]),onClick:_},m[12]||(m[12]=[e("span",null,"Pintu Belakang",-1)]),2),e("div",Da,[e("div",{class:re(["flex-1 px-4 py-3 border-2 rounded-lg text-center transition-all duration-200 whitespace-nowrap text-sm font-medium cursor-pointer",{"border-indigo-500 bg-indigo-50 text-indigo-700 shadow-sm":E.value==="pick_up","border-gray-300 text-gray-700 hover:bg-gray-50 hover:border-gray-400":E.value!=="pick_up"}]),onClick:m[6]||(m[6]=A=>h("pick_up"))}," Pick Up ",2),e("div",{class:re(["flex-1 px-4 py-3 border-2 rounded-lg text-center transition-all duration-200 whitespace-nowrap text-sm font-medium cursor-pointer",{"border-indigo-500 bg-indigo-50 text-indigo-700 shadow-sm":E.value==="box","border-gray-300 text-gray-700 hover:bg-gray-50 hover:border-gray-400":E.value!=="box"}]),onClick:m[7]||(m[7]=A=>h("box"))}," Box ",2)])]),e("div",Pa,[e("div",La,[m[14]||(m[14]=e("svg",{class:"w-4 h-4 text-blue-600 mt-0.5 mr-2 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z","clip-rule":"evenodd"})],-1)),e("div",Ra,[m[13]||(m[13]=e("p",{class:"font-medium"},"Status Kendaraan:",-1)),e("p",ja,[L.value.rear_door?(n(),i("span",Ba," ✓ Mobil Pada Umum nya yang memiliki Pintu Belakang ")):u("",!0),E.value==="pick_up"?(n(),i("span",Fa," ✓ Pick Up ")):u("",!0),E.value==="box"?(n(),i("span",Oa," ✓ Box ")):u("",!0),!L.value.rear_door&&!E.value?(n(),i("span",za," Pilih jenis kendaraan agar point bisa menyesuaikan dengan tipe kendaraan anda ")):u("",!0)])])])])]),e("div",qa,[m[18]||(m[18]=e("label",{class:"block text-sm font-medium text-gray-700"}," Nama Mobil ",-1)),e("div",Ka,[Le(e("input",{"onUpdate:modelValue":m[8]||(m[8]=A=>V.value=A),type:"text",placeholder:"Cari atau ketik nama mobil...",class:re(["block w-full rounded-lg border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm transition duration-150",{"border-red-500 focus:border-red-500":oe.value}]),onInput:ie,onFocus:m[9]||(m[9]=A=>z.value=!0),onBlur:be},null,34),[[dt,V.value]]),U.value?(n(),i("div",Ha,m[16]||(m[16]=[e("svg",{class:"animate-spin h-5 w-5 text-gray-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)]))):u("",!0),z.value?(n(),i("div",Ga,[O.value.length>0?(n(),i("div",Wa,[(n(!0),i(Ue,null,De(O.value,A=>(n(),i("div",{key:A.id,class:"px-4 py-3 hover:bg-gray-50 cursor-pointer border-b border-gray-100 last:border-b-0",onMousedown:ce=>me(A)},[e("div",Za,q(H(A)),1),e("div",Ja,q(A.year)+" • "+q(A.cc)+"cc • "+q(A.transmission)+" • "+q(A.fuel_type),1)],40,Ya))),128))])):(n(),i("div",Xa,m[17]||(m[17]=[Ne(" Tidak ada data mobil yang cocok. "),e("br",null,null,-1),Ne(" Silakan input manual dengan format: "),e("br",null,null,-1),e("span",{class:"font-medium text-gray-800"},"Toyota Avanza 1.5 G AT Bensin 2019",-1)])))])):u("",!0)]),oe.value?(n(),i("span",Qa,"Nama mobil tidak boleh kosong.")):u("",!0)]),!ae(d).car_id&&V.value&&!z.value?(n(),i("div",es,m[19]||(m[19]=[ya('<div class="flex items-start" data-v-f5fe3b58><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-yellow-600 mt-0.5 mr-2 flex-shrink-0" fill="none" viewBox="0 0 24 24" stroke="currentColor" data-v-f5fe3b58><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" data-v-f5fe3b58></path></svg><div data-v-f5fe3b58><p class="text-yellow-800 font-medium mb-1" data-v-f5fe3b58>Informasi Penting</p><p class="text-yellow-700 text-sm mb-2" data-v-f5fe3b58> Anda memasukkan nama mobil secara manual. Data detail mobil (spesifikasi, gambar, deskripsi) <span class="font-semibold" data-v-f5fe3b58>tidak akan tersedia</span> dalam laporan inspeksi. </p><p class="text-yellow-700 text-sm mb-2" data-v-f5fe3b58> Untuk laporan yang lengkap dengan semua detail mobil, silakan pilih mobil dari hasil pencarian. </p><p class="text-yellow-700 text-sm" data-v-f5fe3b58> Jika tidak ingin mengubah data mobil dan anda tidak sengaja sudah menghapus atau edit, <span class="font-semibold" data-v-f5fe3b58>jangan klik tombol &quot;Perbarui Detail Kendaraan&quot;</span>. Sebagai gantinya, <span class="font-semibold" data-v-f5fe3b58>refresh halaman</span> untuk kembali ke data awal. </p></div></div>',1)]))):u("",!0),ae(d).car_id&&J.value?(n(),i("div",ts,[J.value.description?(n(),i("div",as,[m[20]||(m[20]=e("h3",{class:"text-sm font-medium text-gray-700 mb-2"},"Deskripsi:",-1)),e("div",{class:"prose prose-sm max-w-none text-gray-600",innerHTML:J.value.description},null,8,ss)])):u("",!0),B.value.length>0?(n(),i("div",ns,[m[21]||(m[21]=e("h3",{class:"text-sm font-medium text-gray-700 mb-3"},"Gambar Mobil:",-1)),e("div",os,[(n(!0),i(Ue,null,De(B.value,(A,ce)=>(n(),i("div",{key:A.id||ce,class:"relative group cursor-pointer",onClick:$e=>ye(ce)},[e("img",{src:Ae(A),alt:A.name||"Car Image",class:"w-full h-24 object-cover rounded-lg border border-gray-200 transition-transform duration-200 group-hover:scale-105"},null,8,ls),A.note?(n(),i("div",rs,[e("p",us,q(A.note),1)])):u("",!0)],8,is))),128))])])):(n(),i("div",ds," Tidak ada gambar tersedia untuk mobil ini "))])):u("",!0),p.value?(n(),i("div",{key:2,class:"fixed inset-0 bg-black bg-opacity-90 z-50 flex items-center justify-center p-4",onClick:Se},[e("div",cs,[e("button",{onClick:Se,class:"absolute top-4 right-4 z-10 text-white bg-black bg-opacity-50 rounded-full p-2 hover:bg-opacity-70 transition-colors"},m[22]||(m[22]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])),B.value.length>1?(n(),i("button",{key:0,onClick:ct(Ie,["stop"]),class:"absolute left-4 z-10 text-white bg-black bg-opacity-50 rounded-full p-3 hover:bg-opacity-70 transition-colors"},m[23]||(m[23]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)]))):u("",!0),B.value.length>1?(n(),i("button",{key:1,onClick:ct(Ve,["stop"]),class:"absolute right-4 z-10 text-white bg-black bg-opacity-50 rounded-full p-3 hover:bg-opacity-70 transition-colors"},m[24]||(m[24]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)]))):u("",!0),e("img",{src:Ae(B.value[X.value]),alt:"Car Image "+(X.value+1),class:"max-w-full max-h-full object-contain",onClick:m[10]||(m[10]=ct(()=>{},["stop"]))},null,8,gs),B.value.length>1?(n(),i("div",ps,q(X.value+1)+" / "+q(B.value.length),1)):u("",!0),(he=B.value[X.value])!=null&&he.note?(n(),i("div",ms,q(B.value[X.value].note),1)):u("",!0)])])):u("",!0),Me(Ia,{type:"button",onClick:y,class:"w-full inline-flex items-center justify-center px-6 py-3 border border-transparent text-base font-medium rounded-md shadow-sm bg-gradient-to-r from-indigo-700 to-sky-600 shadow-lg text-white focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition duration-150 ease-in-out disabled:opacity-50 disabled:cursor-not-allowed",disabled:!R.value},{default:Fe(()=>[ae(d).processing?(n(),i("svg",vs,m[25]||(m[25]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):u("",!0),e("span",null,q(ae(d).processing?"Mengirim...":"Perbarui Detail Kendaraan"),1),Me(_a,{on:ae(d).recentlySuccessful,class:"me-3 text-sm text-green-600 font-medium"},{default:Fe(()=>m[26]||(m[26]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 inline-block mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1),Ne(" Tersimpan. ")])),_:1,__:[26]},8,["on"])]),_:1},8,["disabled"])])):u("",!0)])}}},hs=Ke(fs,[["__scopeId","data-v-f5fe3b58"]]),bs={class:"mt-1"},ys=["value","required","minlength","maxlength","allowSpace","placeholder"],xs={key:0,class:"mt-2 text-sm text-red-600"},ra={__name:"InputText",props:{modelValue:String,required:Boolean,minLength:[String,Number],maxLength:[String,Number],pattern:String,placeholder:String,error:String,pointId:[String,Number],textTransform:{type:String,default:"none"},allowSpace:{type:Boolean,default:!0}},emits:["update:modelValue","save"],setup(a,{emit:se}){const t=a,C=se,d=te(()=>{if(!t.modelValue)return"";let f=t.modelValue;switch(t.allowSpace||(f=f.replace(/\s+/g,"")),t.textTransform){case"uppercase":return f.toUpperCase();case"lowercase":return f.toLowerCase();case"capitalize":return f.replace(/\b\w/g,M=>M.toUpperCase());default:return f}}),S=f=>{let M=f.target.value;switch(t.allowSpace||(M=M.replace(/\s+/g,"")),t.textTransform){case"uppercase":M=M.toUpperCase();break;case"lowercase":M=M.toLowerCase();break;case"capitalize":M=M.replace(/\b\w/g,w=>w.toUpperCase());break}C("update:modelValue",M),C("save",t.pointId)};return(f,M)=>(n(),i("div",bs,[e("input",{value:d.value,onInput:S,type:"text",required:a.required,minlength:a.minLength,maxlength:a.maxLength,allowSpace:a.allowSpace,placeholder:a.placeholder,class:re(["block w-full rounded-lg border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm transition duration-150",{uppercase:a.textTransform==="uppercase",lowercase:a.textTransform==="lowercase",capitalize:a.textTransform==="capitalize"}])},null,42,ys),a.error?(n(),i("p",xs,q(a.error),1)):u("",!0)]))}},ws={class:"mt-1"},ks=["value","required","min","max"],Is={key:0,class:"mt-2 text-sm text-red-600"},ua={__name:"InputDate",props:{modelValue:String,required:Boolean,minDate:String,maxDate:String,error:String,pointId:[String,Number]},emits:["update:modelValue","save"],setup(a,{emit:se}){const t=a,C=se,d=S=>{C("update:modelValue",S.target.value),C("save",t.pointId)};return(S,f)=>(n(),i("div",ws,[e("input",{value:a.modelValue,onChange:d,type:"date",required:a.required,min:a.minDate,max:a.maxDate,class:"block w-full rounded-lg border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm transition duration-150"},null,40,ks),a.error?(n(),i("p",Is,q(a.error),1)):u("",!0)]))}},_s={class:"mt-1"},Ss=["value","required","placeholder"],Cs={key:0,class:"mt-2 text-sm text-red-600"},da={__name:"InputAccount",props:{modelValue:[String,Number],required:Boolean,placeholder:String,error:String,pointId:[String,Number],settings:{type:Object,default:()=>({currency_symbol:"Rp",thousands_separator:",",min_value:0,max_value:1e9})}},emits:["update:modelValue","save"],setup(a,{emit:se}){const t=a,C=se,d=b(""),S=te(()=>{var D,E,L,ee;return{currency_symbol:((D=t.settings)==null?void 0:D.currency_symbol)||"Rp",thousands_separator:((E=t.settings)==null?void 0:E.thousands_separator)||",",min_value:((L=t.settings)==null?void 0:L.min_value)!==void 0?Number(t.settings.min_value):0,max_value:((ee=t.settings)==null?void 0:ee.max_value)!==void 0?Number(t.settings.max_value):1e9}}),f=D=>{if(D==null||D==="")return"";const E=Number(D);if(isNaN(E))return"";let L=E.toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:0});return S.value.thousands_separator!==","&&(L=L.replace(/,/g,S.value.thousands_separator)),L},M=D=>D?D.replace(/[^\d]/g,""):"",w=te(()=>d.value?`${S.value.currency_symbol} ${f(d.value)}`:""),N=D=>{let E=M(D.target.value),L=Number(E);S.value.min_value!==void 0&&L<S.value.min_value&&(E=S.value.min_value.toString()),S.value.max_value!==void 0&&L>S.value.max_value&&(E=S.value.max_value.toString()),d.value=E,C("update:modelValue",E),C("save",t.pointId)};return we(()=>t.modelValue,D=>{D!=null&&(d.value=D.toString())},{immediate:!0}),(D,E)=>(n(),i("div",_s,[e("input",{value:w.value,onInput:N,type:"text",required:a.required,placeholder:a.placeholder,class:re(["block w-full rounded-lg border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm transition duration-150",a.error?"border-red-300":"border-gray-300"])},null,42,Ss),a.error?(n(),i("p",Cs,q(a.error),1)):u("",!0)]))}},$s={class:"mt-1 space-y-3"},As={key:0,class:"space-y-2"},Vs={class:"flex flex-wrap gap-2"},Ts=["onClick"],Ms=["value","required","minlength","maxlength","placeholder"],Es={class:"flex justify-between items-center mt-1"},Us={class:"text-xs text-gray-500"},Ns={key:0,class:"text-xs text-red-600"},ca={__name:"InputTextarea",props:{modelValue:String,required:Boolean,minLength:[String,Number],maxLength:[String,Number],placeholder:String,error:String,pointId:[String,Number],inspectionId:[String,Number],settings:Object},emits:["update:modelValue","save"],setup(a,{emit:se}){const t=a,C=se,d=b([]),S=b(""),f=D=>d.value.some(E=>E.value===D),M=D=>{f(D.value)?d.value=d.value.filter(g=>g.value!==D.value):d.value.push(D);const L=[...d.value.map(g=>g.value)];S.value.trim()&&L.push(S.value.trim());const ee=L.join(", ");C("update:modelValue",ee),C("save",{pointId:t.pointId,inspectionId:t.inspectionId,notes:ee})},w=D=>{const E=D.target.value;C("update:modelValue",E),C("save",{pointId:t.pointId,inspectionId:t.inspectionId,notes:E}),N(E)},N=D=>{var g,c,V,z;if(!D){d.value=[],S.value="";return}const E=D.split(",").map(U=>U.trim()).filter(U=>U),L=((c=(g=t.settings)==null?void 0:g.damage_options)==null?void 0:c.map(U=>U.value))||[];d.value=((z=(V=t.settings)==null?void 0:V.damage_options)==null?void 0:z.filter(U=>E.includes(U.value)))||[];const ee=E.filter(U=>!L.includes(U));S.value=ee.join(", ")};return we(()=>t.modelValue,D=>{D!=null&&N(D)},{immediate:!0}),we(()=>{var D;return(D=t.settings)==null?void 0:D.damage_options},(D,E)=>{if(D!==E){const L=D?D.map(V=>V.value):[];d.value=d.value.filter(V=>L.includes(V.value));const g=[...d.value.map(V=>V.value)];S.value.trim()&&g.push(S.value.trim());const c=g.filter(V=>V).join(", ");C("update:modelValue",c),C("save",{pointId:t.pointId,inspectionId:t.inspectionId,notes:c})}},{deep:!0,immediate:!1}),(D,E)=>{var L,ee,g;return n(),i("div",$s,[(L=a.settings)!=null&&L.enable_damage&&((ee=a.settings)!=null&&ee.damage_options)?(n(),i("div",As,[E[0]||(E[0]=e("h4",{class:"text-sm font-medium text-gray-700"},"Pilih Kerusakan:",-1)),e("div",Vs,[(n(!0),i(Ue,null,De(a.settings.damage_options,(c,V)=>(n(),i("button",{key:V,type:"button",onClick:z=>M(c),class:re(["px-3 py-1.5 rounded-md text-sm font-medium transition-colors border",{"border-indigo-500 bg-indigo-100 text-indigo-700":f(c.value),"border-gray-300 bg-white text-gray-700 hover:bg-gray-50":!f(c.value)}])},q(c.label),11,Ts))),128))])])):u("",!0),e("div",null,[e("textarea",{value:a.modelValue,onInput:w,required:a.required,minlength:a.minLength,maxlength:a.maxLength,placeholder:a.placeholder,class:"block w-full rounded-lg border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm transition duration-150",rows:"4"},null,40,Ms),e("div",Es,[e("span",Us,q(((g=a.modelValue)==null?void 0:g.length)||0)+"/"+q(a.maxLength||400),1),a.error?(n(),i("p",Ns,q(a.error),1)):u("",!0)])])])}}},Ds={class:"mt-1"},Ps=["value","required"],Ls={key:0,class:"mt-2 text-sm text-red-600"},Rs={__name:"InputSelect",props:{modelValue:String,required:Boolean,error:String,pointId:[String,Number]},emits:["update:modelValue","save"],setup(a,{emit:se}){const t=a,C=se,d=S=>{C("update:modelValue",S.target.value),C("save",t.pointId)};return(S,f)=>(n(),i("div",Ds,[e("select",{value:a.modelValue,onChange:d,required:a.required,class:"block w-full rounded-lg border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm transition duration-150"},f[0]||(f[0]=[e("option",{value:"",disabled:""},"Select status",-1),e("option",{value:"good"},"Good",-1),e("option",{value:"bad"},"Bad",-1),e("option",{value:"na"},"N/A",-1)]),40,Ps),a.error?(n(),i("p",Ls,q(a.error),1)):u("",!0)]))}},js=Ke(Rs,[["__scopeId","data-v-1b6c0201"]]),Bs={key:0,class:"fixed inset-0 z-[60] flex items-center justify-center bg-black bg-opacity-50 backdrop-blur-sm"},Fs={class:"bg-white rounded-xl p-8 w-full max-w-sm mx-auto shadow-2xl transform transition-all duration-300 scale-100 opacity-100"},Os={class:"text-xs text-gray-500 mt-2 text-center"},zs={class:"flex flex-row space-x-4 mb-6"},qs={class:"mt-4 text-right"},Ks={__name:"ImageSourceOptionsModal",props:{show:{type:Boolean,default:!1},settings:{type:Object,default:()=>({max_files:1,allowed_types:["jpg","png","jpeg"],camera_aspect_ratio:"3:4",enable_flash:!0,enable_camera_switch:!0,max_size:2048})}},emits:["close","open-webcam","trigger-gallery"],setup(a){return(se,t)=>a.show?(n(),i("div",Bs,[e("div",Fs,[t[7]||(t[7]=e("h3",{class:"text-xl font-bold text-gray-800 mb-2 text-center"},"Pilih Sumber Gambar",-1)),e("p",Os,[t[3]||(t[3]=Ne("Ambil Foto Maksimal: ")),e("b",null,q(a.settings.max_files),1),t[4]||(t[4]=Ne(" Dengan Rasio & Ukuran: ")),e("b",null,q(a.settings.camera_aspect_ratio),1)]),e("div",zs,[e("button",{onClick:t[0]||(t[0]=C=>se.$emit("trigger-camera")),class:"flex-1 flex flex-col items-center justify-center p-4 border border-gray-200 rounded-lg text-gray-700 hover:bg-blue-50 hover:border-blue-400 hover:text-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-all duration-200 ease-in-out transform hover:scale-105"},t[5]||(t[5]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-8 w-8 mb-2 text-gray-500 hover:text-blue-600 transition-colors",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})],-1),e("span",{class:"text-sm font-medium"},"Ambil Foto",-1)])),e("button",{onClick:t[1]||(t[1]=C=>se.$emit("trigger-gallery")),class:"flex-1 flex flex-col items-center justify-center p-4 border border-gray-200 rounded-lg text-gray-700 hover:bg-indigo-50 hover:border-indigo-400 hover:text-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 transition-all duration-200 ease-in-out transform hover:scale-105"},t[6]||(t[6]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-8 w-8 mb-2 text-gray-500 hover:text-indigo-600 transition-colors",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1),e("span",{class:"text-sm font-medium"},"Galeri",-1)]))]),e("div",qs,[e("button",{onClick:t[2]||(t[2]=C=>se.$emit("close")),class:"px-5 py-2 text-sm font-medium text-gray-600 bg-gray-100 rounded-lg hover:bg-gray-200 hover:text-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-300 focus:ring-offset-2 transition-colors duration-200 ease-in-out"}," Batal ")])])])):u("",!0)}},Hs={key:0,class:"fixed inset-0 bg-black bg-opacity-95 z-50 flex flex-col items-center justify-center"},Gs={class:"w-full h-full flex flex-col"},Ws={class:"flex justify-between items-center p-4 bg-black bg-opacity-70 text-white shadow-md"},Ys=["disabled"],Zs={class:"text-lg font-semibold"},Js={class:"flex items-center gap-2"},Xs=["disabled"],Qs={key:0,class:"px-4 py-2 bg-indigo-900 text-white"},en={class:"flex justify-between items-center text-sm"},tn={class:"w-full bg-gray-700 rounded-full h-2 mt-1"},an={class:"flex-1 flex items-center justify-center overflow-hidden relative"},sn=["src"],nn={key:1,class:"absolute bottom-4 left-1/2 transform -translate-x-1/2 flex gap-3"},on=["disabled"],ln=["disabled"],rn={key:2,class:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center"},un={key:3,class:"absolute inset-0 bg-red-500 bg-opacity-80 flex flex-col items-center justify-center text-white"},dn=["disabled"],cn=["disabled"],gn=["disabled"],pn={class:"flex flex-col gap-3 p-4 bg-black bg-opacity-70 shadow-inner"},mn={class:"flex justify-between items-center w-full"},vn=["disabled"],fn={key:1,class:"flex-1"},hn=["disabled"],bn={class:"flex gap-3 w-full"},yn={key:1,class:"flex-1 px-4 py-3 bg-gradient-to-r from-indigo-700 to-sky-600 rounded-lg cursor-not-allowed flex items-center justify-center font-medium opacity-75",disabled:""},xn={class:"flex items-center gap-2"},wn={key:0,class:"text-center"},kn={__name:"PreviewModal",props:{show:Boolean,images:{type:Array,default:()=>[]},initialIndex:{type:Number,default:0},allowMultiple:Boolean,maxFiles:Number,isUploading:Boolean,aspectRatio:Number,point:Object,uploadProgress:{type:Number,default:0},currentUpload:{type:Number,default:0},totalUpload:{type:Number,default:0}},emits:["close","saveImages","removePreviewImage","triggerAddMorePhotos","update:images","retryImage"],setup(a,{emit:se}){const t=a,C=se,d=b(0),S=b([]),f=te(()=>S.value.length>0?S.value[d.value]:null);we(()=>t.images,z=>{S.value=z.map(U=>({...U,rotation:U.isNew&&U.rotation||0})),z.length===0&&t.show&&L()},{deep:!0,immediate:!0}),we(()=>t.show,z=>{z&&t.images.length>0&&(d.value=t.initialIndex)}),we(()=>t.uploadProgress,z=>{z===100&&console.log("Upload completed")});const M=z=>z.preview||(z.image_path?`/${z.image_path}`:""),w=z=>{if(f.value&&f.value.isNew&&!t.isUploading){const U=f.value.rotation||0;let O;z==="left"?O=U-90:O=U+90,O=(O%360+360)%360,S.value[d.value].rotation=O,C("update:images",S.value)}},N=()=>{t.isUploading||(d.value=d.value<S.value.length-1?d.value+1:0)},D=()=>{t.isUploading||(d.value=d.value>0?d.value-1:S.value.length-1)},E=()=>{t.isUploading||C("saveImages",S.value)},L=()=>{t.isUploading||C("close")},ee=()=>{if(f.value&&!t.isUploading){const z=f.value,U=S.value.findIndex(O=>O.isNew&&z.isNew&&O.preview===z.preview||!O.isNew&&!z.isNew&&O.id===z.id);U!==-1&&(C("removePreviewImage",z),S.value.splice(U,1),C("update:images",S.value)),d.value>=S.value.length&&(d.value=Math.max(0,S.value.length-1)),S.value.length===0&&C("close")}},g=()=>{t.isUploading||C("triggerAddMorePhotos")},c=()=>{f.value&&!t.isUploading&&C("retryImage",f.value)},V=z=>{z.key==="Escape"&&!t.isUploading&&L()};return st(()=>{document.addEventListener("keydown",V)}),wt(()=>{document.removeEventListener("keydown",V)}),(z,U)=>{var O;return a.show?(n(),i("div",Hs,[e("div",Gs,[e("div",Ws,[e("button",{onClick:L,class:"p-2 rounded-full hover:bg-white hover:bg-opacity-20 transition-colors",disabled:a.isUploading},U[2]||(U[2]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]),8,Ys),e("div",Zs,q(((O=a.point)==null?void 0:O.name)||"Preview")+" ("+q(d.value+1)+"/"+q(S.value.length)+") ",1),e("div",Js,[f.value&&f.value.isNew?(n(),i("button",{key:0,onClick:ee,class:"p-2 rounded-full hover:bg-white hover:bg-opacity-20 transition-colors","aria-label":"Remove new image",disabled:a.isUploading},U[3]||(U[3]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)]),8,Xs)):u("",!0)])]),a.isUploading?(n(),i("div",Qs,[e("div",en,[e("span",null,"Mengupload: "+q(a.currentUpload)+"/"+q(a.totalUpload),1),e("span",null,q(a.uploadProgress)+"%",1)]),e("div",tn,[e("div",{class:"bg-gradient-to-r from-indigo-500 to-sky-400 h-2 rounded-full progress-bar",style:qe({width:a.uploadProgress+"%"})},null,4)])])):u("",!0),e("div",an,[e("div",{class:"relative w-full max-w-full",style:qe({paddingTop:a.aspectRatio?100/a.aspectRatio+"%":"75%"})},[f.value?(n(),i("img",{key:0,src:M(f.value),class:"absolute inset-0 w-full h-full object-contain transition-transform duration-300 ease-in-out bg-black",style:qe({transform:`rotate(${f.value.rotation}deg)`})},null,12,sn)):u("",!0),f.value&&f.value.isNew&&!f.value.isUploading&&!f.value.isFailed?(n(),i("div",nn,[e("button",{onClick:U[0]||(U[0]=J=>w("left")),class:"p-3 bg-black bg-opacity-60 text-white rounded-full hover:bg-opacity-80 transition-colors",disabled:a.isUploading,title:"Putar ke kiri"},U[4]||(U[4]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 12a9 9 0 1018 0 9 9 0 00-18 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l3-3m0 0l3 3m-3-3v9",transform:"rotate(180 12 12)"})],-1)]),8,on),e("button",{onClick:U[1]||(U[1]=J=>w("right")),class:"p-3 bg-black bg-opacity-60 text-white rounded-full hover:bg-opacity-80 transition-colors",disabled:a.isUploading,title:"Putar ke kanan"},U[5]||(U[5]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 12a9 9 0 1018 0 9 9 0 00-18 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l3-3m0 0l3 3m-3-3v9"})],-1)]),8,ln)])):u("",!0),f.value&&f.value.isUploading?(n(),i("div",rn,U[6]||(U[6]=[e("div",{class:"text-center text-white"},[e("div",{class:"w-12 h-12 border-4 border-white border-t-transparent rounded-full animate-spin mx-auto mb-2"}),e("p",{class:"text-sm"},"Mengupload...")],-1)]))):u("",!0),f.value&&f.value.isFailed?(n(),i("div",un,[U[7]||(U[7]=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-12 w-12 mb-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1)),U[8]||(U[8]=e("p",{class:"text-lg font-medium mb-2"},"Upload Gagal",-1)),e("button",{onClick:c,class:"px-4 py-2 bg-white text-red-600 rounded-lg font-medium hover:bg-gray-100 transition-colors",disabled:a.isUploading}," Coba Lagi ",8,dn)])):u("",!0)],4),S.value.length>1&&!a.isUploading?(n(),i("button",{key:0,onClick:D,class:"absolute left-4 p-3 bg-black bg-opacity-50 text-white rounded-full hover:bg-opacity-70 transition-colors",disabled:a.isUploading},U[9]||(U[9]=[e("svg",{xmlns:"http://www.w3.org2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)]),8,cn)):u("",!0),S.value.length>1&&!a.isUploading?(n(),i("button",{key:1,onClick:N,class:"absolute right-4 p-3 bg-black bg-opacity-50 text-white rounded-full hover:bg-opacity-70 transition-colors",disabled:a.isUploading},U[10]||(U[10]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)]),8,gn)):u("",!0)]),e("div",pn,[e("div",mn,[f.value&&!f.value.isNew?(n(),i("button",{key:0,onClick:ee,class:"px-3 py-2 rounded-lg text-white font-medium flex items-center gap-1 transition-colors hover:text-red-400",disabled:a.isUploading},U[11]||(U[11]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.095 21H7.905a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1),Ne(" Hapus Foto ")]),8,vn)):(n(),i("div",fn)),a.allowMultiple&&S.value.length<a.maxFiles&&!a.isUploading?(n(),i("button",{key:2,onClick:g,class:"px-3 py-2 rounded-lg text-white font-medium flex items-center gap-1 transition-colors hover:text-indigo-400",disabled:a.isUploading},U[12]||(U[12]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),Ne(" Tambah Foto ")]),8,hn)):u("",!0)]),e("div",bn,[a.isUploading?(n(),i("button",yn,[e("div",xn,[U[13]||(U[13]=e("div",{class:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"},null,-1)),e("span",null,"Mengupload... "+q(a.uploadProgress)+"%",1)])])):(n(),i("button",{key:0,onClick:E,class:"flex-1 px-4 py-3 rounded-lg bg-gradient-to-r from-indigo-700 to-sky-600 shadow-lg text-white transition-colors font-medium hover:from-indigo-600 hover:to-sky-500"}," Simpan & Upload "))]),a.isUploading?(n(),i("div",wn,U[14]||(U[14]=[e("p",{class:"text-xs text-blue-300"}," Modal akan tertutup otomatis. Upload terus berjalan di background. ",-1)]))):u("",!0)])])])):u("",!0)}}},In=Ke(kn,[["__scopeId","data-v-0e4bb6d9"]]),_n={key:0,class:"fixed inset-0 z-40 p-0 webcam-modal-container"},Sn={class:"webcam-content-box"},Cn={class:"webcam-header"},$n={class:"inspection-point-name"},An={class:"camera-quality-indicator"},Vn={class:"quality-badge"},Tn={key:1,class:"auto-focus-indicator"},Mn={key:2,class:"error-overlay"},En={class:"error-content"},Un={class:"error-message"},Nn={class:"webcam-footer"},Dn={class:"camera-controls"},Pn=["disabled"],Ln={class:"camera-icon-container"},Rn={key:0,class:"camera-spinner"},jn={key:1,class:"camera-shutter"},Bn=["disabled"],Fn={__name:"WebCamRTC",props:{show:Boolean,aspectRatio:{type:Number,default:4/3},settings:{type:Object,default:()=>({enable_flash:!0,enable_camera_switch:!0,max_size:2048})},point:Object,cameraQuality:{type:String}},emits:["close","photoCaptured"],setup(a,{emit:se}){const t=a,C=se,d=b(null),S=b(null);let f=null,M=null;const w=b("environment"),N=b(null),D=b([]),E=b(!1),L=b(!1),ee=b(!1),g=b(!1),c=b(!1),V=b(null),z=b(null),U=b(!1),O=b(!0),J=b({}),B=te(()=>({aspectRatio:`${t.aspectRatio} / 1`,maxWidth:"100%",maxHeight:"70vh",margin:"0 auto"})),p=async()=>{f&&f.getTracks().forEach(P=>P.stop()),V.value=null,c.value=!0;try{const P=X();console.log("Mencoba inisialisasi kamera dengan:",P),f=await navigator.mediaDevices.getUserMedia({video:P,audio:!1}),M=f.getVideoTracks()[0],d.value.srcObject=f,await new Promise((T,R)=>{d.value.onloadedmetadata=T,d.value.onerror=R,setTimeout(T,1e3)}),await d.value.play(),await s(),ne(),setTimeout(async()=>{try{await _()}catch(T){console.warn("Gagal mendapatkan daftar perangkat:",T)}},500),c.value=!1,console.log("Kamera berhasil diinisialisasi")}catch(P){if(console.error("Error mengakses kamera: ",P),!f)try{console.log("Mencoba fallback berdasarkan kualitas kamera...");let T,R,H,Q;switch(t.cameraQuality){case"SD":T=1280,R=720,H=640,Q=480;break;case"HD":T=1920,R=1080,H=1280,Q=720;break;case"4K":T=3840,R=2160,H=1920,Q=1080;break;default:T=1920,R=1080,H=1280,Q=720}const ie={video:{facingMode:w.value,width:{min:H,ideal:T},height:{min:Q,ideal:R}}};f=await navigator.mediaDevices.getUserMedia(ie),M=f.getVideoTracks()[0],d.value.srcObject=f,await d.value.play(),c.value=!1,console.log("Fallback berhasil dengan kualitas:",t.cameraQuality)}catch(T){console.error("Fallback juga gagal:",T),V.value=h(T),c.value=!1}}},X=()=>{let P,T,R,H,Q,ie;switch(t.cameraQuality){case"SD":P=1280,T=720,R=1280,H=720,Q=640,ie=480;break;case"HD":P=1920,T=1080,R=1920,H=1080,Q=1280,ie=720;break;case"4K":P=3840,T=2160,R=3840,H=2160,Q=1920,ie=1080;break;default:P=1920,T=1080,R=1920,H=1080,Q=1280,ie=720}return{facingMode:{ideal:"environment"},width:{ideal:P,max:R,min:Q},height:{ideal:T,max:H,min:ie},focusMode:{ideal:["continuous","single-shot","manual"]},exposureMode:{ideal:["continuous","manual"]},whiteBalanceMode:{ideal:["continuous","manual"]}}},ne=async()=>{if(M)try{const P=M.getCapabilities();z.value=P;const T=P.focusMode&&(P.focusMode.includes("continuous")||P.focusMode.includes("single-shot")),R=P.exposureMode&&P.exposureMode.includes("continuous");if(T||R){const H={};T&&(H.focusMode="continuous"),R&&(H.exposureMode="continuous",H.exposureCompensation={ideal:0}),Object.keys(H).length>0&&(await M.applyConstraints({advanced:[H]}),console.log("Auto-focus/exposure diaktifkan"))}L.value=!!P.torch||!!P.fillLightMode}catch(P){console.warn("Tidak bisa mengatur auto-focus/exposure:",P)}},_=async()=>{try{(await navigator.mediaDevices.getUserMedia({video:!0})).getTracks().forEach(R=>R.stop());const T=await navigator.mediaDevices.enumerateDevices();if(D.value=T.filter(R=>R.kind==="videoinput"),E.value=D.value.length>1,!N.value&&D.value.length>0){const R=D.value.find(H=>H.label.toLowerCase().includes("back")||H.label.toLowerCase().includes("rear")||H.label.toLowerCase().includes("environment"));N.value=R?R.deviceId:D.value[0].deviceId}}catch(P){console.warn("Error getting camera devices:",P)}},h=P=>{switch(P.name){case"NotAllowedError":return"Izin akses kamera ditolak. Silakan izinkan akses kamera di pengaturan browser.";case"NotFoundError":return"Tidak ada kamera yang ditemukan.";case"NotSupportedError":return"Browser tidak mendukung akses kamera.";case"NotReadableError":return"Kamera sedang digunakan oleh aplikasi lain.";case"OverconstrainedError":return"Perangkat tidak mendukung pengaturan kamera yang diminta.";default:return`Tidak dapat mengakses kamera: ${P.message}`}},s=()=>{var P,T;if(M)try{const R=M.getCapabilities();z.value=R,L.value=!!R.torch||!!R.fillLightMode,console.log("Kamera mendukung:",{maxRes:`${((P=R.width)==null?void 0:P.max)||"N/A"}x${((T=R.height)==null?void 0:T.max)||"N/A"}`,torch:R.torch,focusModes:R.focusMode,exposureModes:R.exposureMode})}catch(R){console.warn("Tidak bisa mendapatkan kemampuan kamera:",R)}},I=async()=>{if(!(!M||!L.value))try{w.value==="environment"?(await M.applyConstraints({advanced:[{torch:!ee.value}]}),ee.value=!ee.value):(console.log("Flash tidak didukung untuk kamera depan"),ee.value=!1)}catch(P){console.error("Gagal mengontrol flash:",P),ee.value=!1}},F=async()=>{if(!E.value||c.value)return;c.value=!0,f&&f.getTracks().forEach(H=>H.stop());const T=(D.value.findIndex(H=>H.deviceId===N.value)+1)%D.value.length;N.value=D.value[T].deviceId;const R=D.value[T];w.value=R.label.toLowerCase().includes("front")?"user":"environment",await p()},ge=async P=>{if(!d.value||!M)return;const T=P.currentTarget.getBoundingClientRect(),R=P.type.includes("mouse")?P.clientX-T.left:P.touches[0].clientX-T.left,H=P.type.includes("mouse")?P.clientY-T.top:P.touches[0].clientY-T.top;U.value=!0,J.value={left:`${R-40}px`,top:`${H-40}px`},setTimeout(()=>{U.value=!1},1e3);try{const Q=M.getCapabilities();if(Q.focusMode&&Q.focusMode.includes("manual")){const ie=R/T.width,be=H/T.height;Q.focusDistance&&Q.pan&&Q.tilt&&await M.applyConstraints({advanced:[{focusMode:"manual",focusDistance:.3,pointsOfInterest:[{x:ie,y:be}]}]})}else Q.focusMode&&Q.focusMode.includes("single-shot")&&await M.applyConstraints({advanced:[{focusMode:"single-shot"}]})}catch(Q){console.warn("Penyesuaian fokus tidak didukung:",Q)}},G=async()=>{var P,T;if(!(g.value||!d.value||!S.value)){g.value=!0;try{const R=d.value,H=S.value;await new Promise(Ie=>setTimeout(Ie,100));const Q=R.videoWidth,ie=R.videoHeight;let be,me,Ae,_e;Q/ie>t.aspectRatio?(me=ie,be=ie*t.aspectRatio,Ae=(Q-be)/2,_e=0):(be=Q,me=Q/t.aspectRatio,Ae=0,_e=(ie-me)/2),H.width=be,H.height=me,H.getContext("2d").drawImage(R,Ae,_e,be,me,0,0,be,me);const Se=Math.min(.95,.7+Q*ie/(3840*2160)*.25),Ve=await new Promise(Ie=>{H.toBlob(Ie,"image/jpeg",Se)});if(Ve)if(Ve.size/1024>t.settings.max_size){const Ie=await W(Ve,t.settings.max_size),l=`inspeksi_${((P=t.point)==null?void 0:P.name)||"foto"}_${Date.now()}.jpg`,v=new File([Ie],l,{type:"image/jpeg",lastModified:Date.now()});C("photoCaptured",v)}else{const Ie=`inspeksi_${((T=t.point)==null?void 0:T.name)||"foto"}_${Date.now()}.jpg`,l=new File([Ve],Ie,{type:"image/jpeg",lastModified:Date.now()});C("photoCaptured",l)}}catch(R){console.error("Error mengambil foto:",R)}finally{g.value=!1}}},W=async(P,T)=>new Promise(R=>{const H=new Image;H.onload=()=>{const Q=document.createElement("canvas");let ie=H.width,be=H.height;const me=1920;(ie>me||be>me)&&(ie>be?(be=be*me/ie,ie=me):(ie=ie*me/be,be=me)),Q.width=ie,Q.height=be,Q.getContext("2d").drawImage(H,0,0,ie,be);let _e=.9;const ye=()=>{Q.toBlob(Se=>{Se.size/1024<=T||_e<=.3?R(Se):(_e-=.1,ye())},"image/jpeg",_e)};ye()},H.src=URL.createObjectURL(P)}),oe=()=>{f&&f.getTracks().forEach(P=>P.stop()),C("close")},de=async()=>{V.value=null,await p()};return we(()=>t.show,async P=>{P?(await Pt(),await p()):f&&f.getTracks().forEach(T=>T.stop())}),wt(()=>{f&&f.getTracks().forEach(P=>P.stop())}),(P,T)=>{var R;return a.show?(n(),i("div",_n,[e("div",Sn,[e("div",Cn,[e("div",$n,q(((R=a.point)==null?void 0:R.name)||"Camera"),1),e("div",An,[e("span",Vn,q(a.cameraQuality),1)]),e("button",{onClick:oe,class:"p-2 rounded-full text-white hover:bg-gray-700 transition-colors"},T[0]||(T[0]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),e("div",{class:"webcam-video-container",style:qe(B.value),onTouchstart:ge,onClick:ge},[e("video",{ref_key:"webcamVideo",ref:d,autoplay:"",playsinline:"",class:"webcam-video"},null,512),e("canvas",{ref_key:"webcamCanvas",ref:S,class:"hidden"},null,512),U.value?(n(),i("div",{key:0,class:"focus-indicator",style:qe(J.value)},T[1]||(T[1]=[e("div",{class:"focus-ring"},null,-1)]),4)):u("",!0),O.value&&!U.value?(n(),i("div",Tn,T[2]||(T[2]=[e("div",{class:"auto-focus-ring"},null,-1)]))):u("",!0),V.value?(n(),i("div",Mn,[e("div",En,[T[3]||(T[3]=e("div",{class:"error-icon"},"⚠️",-1)),T[4]||(T[4]=e("h3",{class:"error-title"},"Gagal Mengakses Kamera",-1)),e("p",Un,q(V.value),1),e("button",{onClick:de,class:"retry-button"}," Coba Lagi ")])])):u("",!0)],36),e("div",Nn,[e("div",Dn,[a.settings.enable_flash&&L.value?(n(),i("button",{key:0,onClick:I,class:re(["control-button flash-button",{active:ee.value}])},T[5]||(T[5]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})],-1)]),2)):u("",!0),e("button",{onClick:G,class:"capture-button",disabled:g.value||c.value},[e("div",Ln,[g.value?(n(),i("div",Rn)):(n(),i("div",jn))])],8,Pn),a.settings.enable_camera_switch&&E.value?(n(),i("button",{key:1,onClick:F,class:"control-button switch-button",disabled:c.value},T[6]||(T[6]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"})],-1)]),8,Bn)):u("",!0)])])])])):u("",!0)}}},On=Ke(Fn,[["__scopeId","data-v-472cc13f"]]),zn={key:0,class:"fixed inset-0 z-40 p-0 webcam-modal-container"},qn={class:"webcam-content-box"},Kn={class:"webcam-header"},Hn={class:"rounded-full text-white hover:bg-gray-700 transition-colors"},Gn={class:"inspection-point-name"},Wn={key:0,class:"screen-flash-overlay"},Yn={key:2,class:"zoom-controls"},Zn=["max"],Jn={class:"webcam-footer"},Xn={class:"camera-controls"},Qn=["disabled"],eo={class:"camera-icon-container"},to={key:0,class:"camera-spinner"},ao={key:1,class:"camera-body"},so={__name:"WebcamModal",props:{show:Boolean,aspectRatio:Number,settings:Object,point:Object},emits:["close","photoCaptured"],setup(a,{emit:se}){const t=a,C=se,d=b(null),S=b(null);let f=null,M=null;const w=b("environment"),N=b(!1),D=b(!1),E=b(!1),L=b(!1),ee=b(!1),g=b({}),c=b(!1),V=b(1),z=b(1),U=b(!1),O=te(()=>{var G;return((G=t.settings)==null?void 0:G.max_size)||2048}),J=te(()=>t.aspectRatio?{aspectRatio:`${t.aspectRatio} / 1`,maxWidth:"100%",maxHeight:"70vh",margin:"0 auto"}:{}),B=te(()=>{if(!t.aspectRatio)return{};const G=t.aspectRatio,W=G>1?80:60,oe=G>1?80/G:60*G;return{width:`${W}%`,height:`${oe}%`}}),p=async()=>{f&&f.getTracks().forEach(G=>G.stop());try{const G={facingMode:w.value,width:{ideal:4096},height:{ideal:2160},aspectRatio:{ideal:t.aspectRatio||1.3333333333333333},frameRate:{ideal:30},advanced:[{focusMode:"continuous"},{exposureMode:"continuous"},{whiteBalanceMode:"continuous"}]};f=await navigator.mediaDevices.getUserMedia({video:G,audio:!1}),M=f.getVideoTracks()[0],d.value.srcObject=f,d.value.onloadedmetadata=async()=>{await ne(),await d.value.play()}}catch(G){console.error("Error accessing camera: ",G),alert("Failed to access camera. Please allow camera permission."),C("close")}},X=()=>{f&&f.getTracks().forEach(G=>G.stop()),C("close")},ne=async()=>{if(M)try{const G=await navigator.mediaDevices.enumerateDevices();N.value=G.filter(oe=>oe.kind==="videoinput").length>1;const W=M.getCapabilities();W.zoom?(U.value=!0,z.value=W.zoom.max,console.log(`Zoom supported. Max zoom: ${z.value}`)):(U.value=!1,console.warn("Zoom is not supported by this camera.")),D.value=W.torch||W.fillLightMode&&W.fillLightMode.includes("torch")}catch(G){console.error("Error checking camera capabilities:",G)}},_=async G=>{if(!M)return;const W=d.value.getBoundingClientRect(),oe=G.clientX-W.left,de=G.clientY-W.top;ee.value=!0,g.value={left:`${oe}px`,top:`${de}px`,transform:"translate(-50%, -50%)"};try{if(M.getCapabilities().pointsOfInterest){const T=oe/W.width,R=de/W.height;await M.applyConstraints({advanced:[{focusMode:"manual",pointsOfInterest:[{x:T,y:R}]}]})}else console.warn("Manual focus with point of interest is not supported.")}catch(P){console.warn("Manual focus failed:",P)}setTimeout(()=>{ee.value=!1,M.getCapabilities().focusMode.includes("continuous")&&M.applyConstraints({advanced:[{focusMode:"continuous"}]})},1e3)},h=async G=>{if(!M||!U.value)return;const W=Math.min(Math.max(G,1),z.value);V.value=W;try{await M.applyConstraints({advanced:[{zoom:W}]})}catch(oe){console.error("Failed to set zoom:",oe)}},s=async()=>{if(!(!M||!D.value))try{w.value==="user"?(E.value=!E.value,L.value=E.value):(await M.applyConstraints({advanced:[{torch:!E.value}]}),E.value=!E.value)}catch(G){console.error("Flash toggle failed:",G)}},I=async()=>{N.value&&(w.value=w.value==="environment"?"user":"environment",f&&f.getTracks().forEach(G=>G.stop()),await p())},F=async G=>new Promise(W=>{const oe=O.value*1024;if(G.size<=oe){W(G);return}const de=new Image,P=new FileReader;P.onload=T=>{de.onload=()=>{const R=document.createElement("canvas"),H=R.getContext("2d"),Q=Math.sqrt(oe/G.size);R.width=de.width*Q,R.height=de.height*Q,H.drawImage(de,0,0,R.width,R.height);let ie=.9;const be=()=>{R.toBlob(me=>{me.size>oe&&ie>.1?(ie-=.1,be()):W(me)},"image/jpeg",ie)};be()},de.src=T.target.result},P.readAsDataURL(G)}),ge=async()=>{if(!(c.value||!d.value||!S.value)){c.value=!0;try{const G=d.value,W=S.value,oe=G.videoWidth,de=G.videoHeight;let P,T,R,H;oe/de>t.aspectRatio?(T=de,P=de*t.aspectRatio,R=(oe-P)/2,H=0):(P=oe,T=oe/t.aspectRatio,R=0,H=(de-T)/2),W.width=P,W.height=T,W.getContext("2d").drawImage(G,R,H,P,T,0,0,P,T);const ie=await new Promise(me=>{W.toBlob(me,"image/jpeg",1)}),be=await F(ie);if(be){const me=new File([be],`capture_${Date.now()}.jpeg`,{type:"image/jpeg",lastModified:Date.now()});C("photoCaptured",me),L.value=!0,setTimeout(()=>{L.value=!1},100)}}catch(G){console.error("Error capturing photo:",G),alert("Failed to capture photo. Please try again.")}finally{c.value=!1}}};return we(()=>t.show,G=>{G?p():X()}),wt(()=>{f&&f.getTracks().forEach(G=>G.stop())}),(G,W)=>{var oe;return a.show?(n(),i("div",zn,[e("div",qn,[e("div",Kn,[e("p",Hn,q(a.settings.camera_aspect_ratio),1),e("div",Gn,q(((oe=a.point)==null?void 0:oe.name)||"Camera"),1),e("button",{onClick:X,class:"p-2 rounded-full text-white hover:bg-gray-700 transition-colors"},W[2]||(W[2]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),e("div",{class:"webcam-video-container",style:qe(J.value),onClick:_,onTouchstart:_},[e("video",{ref_key:"webcamVideo",ref:d,autoplay:"",playsinline:"",class:"webcam-video"},null,512),e("canvas",{ref_key:"webcamCanvas",ref:S,class:"hidden"},null,512),L.value?(n(),i("div",Wn)):u("",!0),e("div",{class:"aspect-ratio-guide",style:qe(B.value)},null,4),ee.value?(n(),i("div",{key:1,class:"focus-indicator",style:qe(g.value)},W[3]||(W[3]=[e("div",{class:"focus-ring"},null,-1)]),4)):u("",!0),W[4]||(W[4]=e("div",{class:"hd-badge"},[e("span",{class:"hd-text"},"HD")],-1)),U.value?(n(),i("div",Yn,[Le(e("input",{type:"range",min:"1",max:z.value,step:"0.1","onUpdate:modelValue":W[0]||(W[0]=de=>V.value=de),onInput:W[1]||(W[1]=de=>h(parseFloat(de.target.value))),class:"zoom-slider"},null,40,Zn),[[dt,V.value]])])):u("",!0)],36),e("div",Jn,[e("div",Xn,[a.settings.enable_flash&&D.value?(n(),i("button",{key:0,onClick:s,class:re(["control-button",{active:E.value,disabled:!D.value}])},W[5]||(W[5]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})],-1)]),2)):u("",!0),e("button",{onClick:ge,class:"capture-button",disabled:c.value},[e("div",eo,[c.value?(n(),i("div",to)):(n(),i("div",ao,W[6]||(W[6]=[e("div",{class:"camera-lens"},null,-1),e("div",{class:"camera-flash"},null,-1)])))])],8,Qn),a.settings.enable_camera_switch&&N.value?(n(),i("button",{key:1,onClick:I,class:"control-button"},W[7]||(W[7]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"})],-1)]))):u("",!0)])])])])):u("",!0)}}},no=Ke(so,[["__scopeId","data-v-d307c818"]]),oo=["accept","multiple","disabled"],io={class:"text-xs text-gray-500 mb-2"},lo=["disabled"],ro={class:"h-full flex flex-col items-center justify-center p-4 text-center"},uo={class:"text-xs text-gray-400 mt-1"},co={key:0,class:"flex items-center gap-4"},go=["src"],po={key:0,class:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center"},mo=["disabled"],vo={key:1,class:"flex space-x-2 overflow-x-auto pb-2 scrollbar-hide"},fo=["disabled"],ho=["onClick"],bo=["src","onError"],yo={key:0,class:"absolute inset-0 bg-black bg-opacity-30 flex items-center justify-center text-white text-xs font-bold"},xo={key:0},wo={key:1,class:"ml-1"},ko={key:1,class:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center"},Io={key:2,class:"absolute inset-0 bg-red-500 bg-opacity-80 flex flex-col items-center justify-center text-white"},_o={key:2,class:"mt-1 text-xs text-red-600"},So={__name:"InputImage",props:{modelValue:{type:Array,default:()=>[]},error:String,inspectionId:{type:[String,Number],required:!0},pointId:{type:[String,Number],required:!0},settings:{type:Object,default:()=>({max_files:1,allowed_types:["jpg","png","jpeg"],camera_aspect_ratio:"3:4",enable_flash:!0,enable_camera_switch:!0,max_size:2048})},point:Object},emits:["update:modelValue","save","removeImage","uploaded","uploadProgress"],setup(a,{emit:se}){const t=a,C=se,d=b(null),S=b(null),f=b(!1),M=b(!1),w=b(!1),N=b([]),D=b(0),E=b(!1),L=b(!1),ee=b(0),g=b(0),c=b(0),V=Lt("imageSourceSetting",b("all")),z=Lt("cameraQualitySetting",b("HD_Std")),U=`inspection-${t.inspectionId}-point-${t.pointId}-backup`,O=te(()=>Number(t.settings.max_files)>1),J=te(()=>t.settings.allowed_types.map(l=>`.${l}`).join(", ")),B=te(()=>{const l=t.settings.camera_aspect_ratio.split(":");if(l.length===2){const v=parseFloat(l[0]),y=parseFloat(l[1]);if(!isNaN(v)&&!isNaN(y)&&y!==0)return v/y}return 3/4}),p=te(()=>{console.log("🔄 allImages computed called");const l=[],v=new Set;for(const y of t.modelValue){if(!y||typeof y!="object"||y.id&&v.has(y.id))continue;y.id&&v.add(y.id),console.log("📥 Database image:",y),console.log("📥 Type of preview:",typeof y.preview),console.log("📥 Type of public_url:",typeof y.public_url);const k=X(y);l.push({...k,rotation:k.rotation||0,isNew:!1,isUploaded:!0,isUploading:!1,isFailed:!1})}for(const y of N.value)y.id&&v.add(y.id),l.push({...y,isUploading:y.isUploading||!1,isFailed:y.isFailed||!1});return console.log("✅ Final allImages:",l),l}),X=l=>{if(!l||typeof l!="object")return{};const v={...l};return["preview","public_url","original_url","optimized_url"].forEach(k=>{v[k]&&(v[k]=ne(v[k]))}),v.image_path&&(v.image_path=v.image_path.replace(/^storage\//,"")),v},ne=l=>{if(!l||typeof l!="string")return l;let v=l.replace(/\/storage\/storage\//g,"/storage/");return v=v.replace(/\/\/storage\/storage\//g,"/storage/"),v.startsWith("storage/")&&(v=`/${v}`),!v.startsWith("/")&&!v.startsWith("http")&&(v=`/storage/${v}`),v},_=l=>{if(!l||typeof l!="object")return console.warn("❌ safeImageSrc: image is not object",l),"";const v=h(l);return typeof v!="string"?(console.error("🚨 CRITICAL: getImageSrc returned non-string:",typeof v,v),""):(v&&console.log("✅ safeImageSrc result:",v),v)},h=l=>{if(!l||typeof l!="object")return"";if(console.log("🔍 getImageSrc called with:",l),console.log("🔍 Available fields:",Object.keys(l)),l.preview&&typeof l.preview=="string"){const v=ne(l.preview);return console.log("✅ Using preview URL:",v),v}if(l.public_url&&typeof l.public_url=="string"){const v=ne(l.public_url);return console.log("✅ Using public_url:",v),v}if(l.original_url&&typeof l.original_url=="string"){const v=ne(l.original_url);return console.log("✅ Using original_url:",v),v}if(l.optimized_url&&typeof l.optimized_url=="string"){const v=ne(l.optimized_url);return console.log("✅ Using optimized_url:",v),v}if(l.image_path&&typeof l.image_path=="string"){const y=`/storage/${l.image_path.replace(/^\/?storage\//,"")}`;return console.log("✅ Generated from image_path:",y),y}if(l.path&&typeof l.path=="string"){const y=`/storage/${l.path.replace(/^\/?storage\//,"")}`;return console.log("✅ Generated from path:",y),y}return console.warn("⚠️ No valid image source found for:",l),""},s=l=>{console.error("❌ Image load error for:",l),console.error("❌ Attempted URL:",_(l)),L.value=!0;const v=I(l);if(v&&v!==_(l)){console.log("🔄 Trying fallback URL:",v);const y=event==null?void 0:event.target;y&&(y.src=v)}},I=l=>{if(!l||typeof l!="object")return"";const v=["original_url","optimized_url","public_url","preview"];for(const y of v)if(l[y]&&typeof l[y]=="string")return ne(l[y]);return""},F=()=>{w.value&&(w.value=!1),V.value==="camera"?G():V.value==="gallery"?ge():f.value=!0},ge=()=>{f.value=!1,d.value.click()},G=()=>{f.value=!1,M.value=!0},W=()=>{f.value=!1,p.value.length>0&&(w.value=!0)},oe=()=>{M.value=!1,p.value.length>0&&(w.value=!0)},de=()=>{w.value=!1,E.value||(N.value.forEach(l=>{l.preview&&l.preview.startsWith("blob:")&&URL.revokeObjectURL(l.preview)}),N.value=[])};we(()=>t.modelValue,l=>{var v;console.log("🔄 modelValue updated:",l),l&&l.length>0&&(console.log("📊 First image structure:",JSON.stringify(l[0],null,2)),console.log("🔍 Type of preview:",typeof((v=l[0])==null?void 0:v.preview)))},{deep:!0});const P=l=>new Promise(v=>{const y=new FileReader;y.onload=k=>{const K=new Image;K.onload=()=>{v({file:l,preview:URL.createObjectURL(l),rotation:0,width:K.naturalWidth,height:K.naturalHeight,isNew:!0})},K.onerror=()=>{console.error("Failed to load image for dimensions:",l.name),v({file:l,preview:URL.createObjectURL(l),rotation:0,width:0,height:0,isNew:!0})},K.src=k.target.result},y.readAsDataURL(l)}),T=l=>{const v=l.name.split(".").pop().toLowerCase();return t.settings.allowed_types.includes(v)},R=async l=>{const y=(t.settings.max_size||2048)*1024;return new Promise(k=>{const K=new Image,Y=new FileReader;Y.onload=fe=>{K.onload=()=>{const ve=document.createElement("canvas"),ue=ve.getContext("2d"),x=Math.max(K.width,K.height);ve.width=x,ve.height=x,ue.fillStyle="white",ue.fillRect(0,0,x,x);const m=(x-K.width)/2,he=(x-K.height)/2;ue.drawImage(K,m,he,K.width,K.height);let A=.9;const ce=()=>{ve.toBlob($e=>{if($e.size>y&&A>.1)A-=.1,ce();else{const Ee=new File([$e],l.name,{type:"image/jpeg",lastModified:Date.now()});k(Ee)}},"image/jpeg",A)};ce()},K.src=fe.target.result},Y.readAsDataURL(l)})},H=async l=>{const v=Array.from(l.target.files);if(!v.length){f.value=!1,p.value.length>0&&(w.value=!0);return}try{const y=v.filter(ue=>!T(ue));if(y.length>0){const ue=y.map(x=>x.name.split(".").pop()).join(", ");alert(`File type not allowed: ${ue}. Allowed types: ${t.settings.allowed_types.join(", ")}`),l.target.value="";return}const k=p.value.length,K=t.settings.max_files-k,Y=await Promise.all(v.slice(0,K).map(async ue=>await R(ue))),fe=await Promise.all(Y.map(P)),ve=O.value?fe:fe.slice(0,1);O.value?N.value.push(...ve):(N.value.forEach(ue=>{ue.preview&&ue.preview.startsWith("blob:")&&URL.revokeObjectURL(ue.preview)}),N.value=ve),f.value=!1,ve.length>0?(D.value=Math.max(0,p.value.length-ve.length),w.value=!0):p.value.length>0&&(w.value=!0),l.target.value=""}catch(y){console.error("Error processing selected images:",y),alert("Failed to process selected images. Please try again."),f.value=!1,p.value.length>0&&(w.value=!0)}},Q=async l=>{const v=p.value.length;if(!O.value||v<t.settings.max_files)try{const y=await R(l),k=new Image;k.onload=()=>{const K={file:y,preview:URL.createObjectURL(y),rotation:0,width:k.naturalWidth,height:k.naturalHeight,isNew:!0};O.value?N.value.push(K):(N.value.forEach(Y=>{Y.preview&&Y.preview.startsWith("blob:")&&URL.revokeObjectURL(Y.preview)}),N.value=[K]),M.value=!1,f.value=!1,D.value=p.value.length-1,w.value=!0},k.src=URL.createObjectURL(y)}catch(y){console.error("Error processing captured image:",y),alert("Failed to process captured image. Please try again.")}else alert(`Maximum ${t.settings.max_files} files allowed.`),M.value=!1,f.value=!1,p.value.length>0&&(w.value=!0)},ie=(l=0)=>{D.value=l,w.value=!0},be=l=>new Promise(v=>{if(l.rotation===0||!S.value){if(!l.isNew&&!l.file){v({file:null,width:l.width,height:l.height,isOriginal:!0});return}v({file:l.file,width:l.width,height:l.height});return}const y=new Image;y.onload=async()=>{try{const k=S.value,K=k.getContext("2d"),Y=y.width,fe=y.height;let ve,ue;l.rotation===90||l.rotation===270?(ve=fe,ue=Y):(ve=Y,ue=fe),k.width=ve,k.height=ue,K.clearRect(0,0,k.width,k.height),K.translate(k.width/2,k.height/2),K.rotate(l.rotation*Math.PI/180),K.drawImage(y,-Y/2,-fe/2,Y,fe),K.setTransform(1,0,0,1,0,0);const x=await new Promise(A=>{k.toBlob(A,"image/jpeg",.9)}),m=new File([x],l.file?l.file.name:`rotated_image_${Date.now()}.jpg`,{type:"image/jpeg"}),he=await R(m);v({file:he,width:ve,height:ue})}catch(k){console.error("Error processing rotated image:",k),v({file:l.file,width:l.width,height:l.height})}},y.onerror=()=>{console.error("Failed to load image for rotation processing:",l.preview),v({file:l.file,width:l.width,height:l.height})},y.src=l.preview}),me=l=>{try{const v={images:l.map(y=>{var k;return{fileName:((k=y.file)==null?void 0:k.name)||`image-${Date.now()}.jpg`,rotation:y.rotation||0,width:y.width||0,height:y.height||0,timestamp:Date.now()}}),inspectionId:t.inspectionId,pointId:t.pointId};localStorage.setItem(U,JSON.stringify(v))}catch(v){console.error("Error saving backup:",v)}},Ae=()=>{localStorage.removeItem(U)},_e=async l=>{E.value=!0;const v=[],y=[];if(!t.pointId){alert("Error: Point ID is missing. Cannot upload image."),E.value=!1;return}try{me(l);for(const k of l){if(!k.isNew&&k.rotation===0&&k.id&&k.image_path){v.push({id:k.id,image_path:k.image_path,width:k.width,height:k.height,rotation:0,preview:k.preview,isUploaded:!0});continue}const{file:K,width:Y,height:fe,isOriginal:ve}=await be(k);if(ve&&!k.isNew){v.push({id:k.id,image_path:k.image_path,width:k.width,height:k.height,rotation:k.rotation||0,preview:k.preview,isUploaded:!0});continue}K&&y.push({file:K,width:Y,height:fe,rotation:k.rotation||0,originalImage:k})}de(),y.length>0?await ye(y,v):(C("update:modelValue",v),C("save",t.pointId))}catch(k){console.error("Error during image processing:",k),alert("Terjadi error saat memproses gambar. Data tersimpan secara lokal.")}finally{E.value=!1}},ye=async(l,v)=>{c.value=l.length,g.value=0,ee.value=0;const y=[...v];let k=0;try{for(let K=0;K<l.length;K++){const Y=l[K],fe=new FormData;fe.append("inspection_id",t.inspectionId),fe.append("point_id",t.pointId),fe.append("images[]",Y.file);const ve=N.value.findIndex(ue=>{var x;return ue.preview===((x=Y.originalImage)==null?void 0:x.preview)});ve!==-1&&(N.value[ve].isUploading=!0,N.value[ve].isFailed=!1);try{const x=(await jt.post(route("inspections.upload-image"),fe,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:m=>{if(m.total){const he=Math.round(m.loaded*100/m.total);ee.value=Math.round((K+m.loaded/m.total)/l.length*100),g.value=K+1}}})).data.images;if(x&&x.length>0){const m=x[0];if(y.push({id:m.image_id,image_path:m.path,width:m.width||Y.width||0,height:m.height||Y.height||0,rotation:Y.rotation||0,preview:m.public_url,isUploaded:!0}),ve!==-1){const he=N.value.splice(ve,1)[0];he.preview&&he.preview.startsWith("blob:")&&URL.revokeObjectURL(he.preview)}k++}}catch(ue){console.error(`Error uploading image ${K+1}:`,ue),ve!==-1&&(N.value[ve].isUploading=!1,N.value[ve].isFailed=!0)}}k>0&&(C("update:modelValue",y),C("save",t.pointId),C("uploaded",{pointId:t.pointId,images:y,newImagesCount:k})),k===l.length&&Ae(),console.log(`✅ Successfully uploaded ${k}/${l.length} images`)}catch(K){console.error("Error in upload process:",K),l.forEach(Y=>{const fe=N.value.findIndex(ve=>{var ue;return ve.preview===((ue=Y.originalImage)==null?void 0:ue.preview)});fe!==-1&&(N.value[fe].isUploading=!1,N.value[fe].isFailed=!0)})}finally{ee.value=0,g.value=0,c.value=0,E.value=!1}},Se=async l=>{if(!l||!l.file){console.error("No file to retry upload");return}E.value=!0;const v=[...t.modelValue];try{const y=new FormData;y.append("inspection_id",t.inspectionId),y.append("point_id",t.pointId),y.append("images[]",l.file);const k=N.value.findIndex(fe=>fe.preview===l.preview);k!==-1&&(N.value[k].isUploading=!0,N.value[k].isFailed=!1);const Y=(await jt.post(route("inspections.upload-image"),y,{headers:{"Content-Type":"multipart/form-data"}})).data.images;if(Y&&Y.length>0){const fe=Y[0];if(v.push({id:fe.image_id,image_path:fe.path,width:fe.width||l.width||0,height:fe.height||l.height||0,rotation:l.rotation||0,preview:fe.public_url,isUploaded:!0}),k!==-1){const ue=N.value.splice(k,1)[0];ue.preview&&ue.preview.startsWith("blob:")&&URL.revokeObjectURL(ue.preview)}C("update:modelValue",v),C("save",t.pointId),C("uploaded",{pointId:t.pointId,images:v,newImagesCount:1}),N.value.some(ue=>ue.isFailed)||Ae(),console.log("✅ Successfully retried upload for 1 image")}}catch(y){console.error("Error retrying upload:",y),previewIndex!==-1&&(N.value[previewIndex].isUploading=!1,N.value[previewIndex].isFailed=!0)}finally{E.value=!1}},Ve=l=>{if(l){if(l.id&&!l.isNew)Ie(l);else{const v=N.value.findIndex(y=>y.preview&&y.preview===l.preview&&y.isNew||y.id&&y.id===l.id);if(v!==-1){const y=N.value.splice(v,1)[0];y.preview&&y.preview.startsWith("blob:")&&URL.revokeObjectURL(y.preview)}C("update:modelValue",t.modelValue.filter(y=>!(y.id&&y.id===l.id)&&!(y.preview&&y.preview===l.preview)))}D.value>=p.value.length&&(D.value=Math.max(0,p.value.length-1)),p.value.length===0&&de()}},Ie=async l=>{var y,k;if(l.id||l.image_path)try{await jt.delete(route("inspections.delete-image"),{data:{image_id:l.id,image_path:l.image_path}})}catch(K){console.error("Error deleting image from server:",K),(k=(y=K.response)==null?void 0:y.data)!=null&&k.message?alert(`Failed to delete image from server: ${K.response.data.message}`):alert(`Failed to delete image from server: ${K.message}`);return}l.preview&&l.preview.startsWith("blob:")&&URL.revokeObjectURL(l.preview);const v=t.modelValue.filter(K=>K.id!==l.id);C("update:modelValue",v),N.value=N.value.filter(K=>K.isNew&&l.isNew?K.preview!==l.preview:K.id!==l.id),C("removeImage",{image:l}),w.value&&p.value.length===0?de():w.value&&D.value>=p.value.length&&(D.value=Math.max(0,p.value.length-1))};return st(()=>{try{localStorage.getItem(U)&&console.log("Found backup images, ready for recovery if needed")}catch(l){console.error("Error loading backup:",l)}}),(l,v)=>(n(),i("div",null,[e("input",{ref_key:"galleryInput",ref:d,type:"file",accept:J.value,class:"hidden",onChange:H,multiple:O.value,disabled:E.value},null,40,oo),e("canvas",{ref_key:"processingCanvas",ref:S,class:"hidden"},null,512),e("p",io,"Foto Maksimal: "+q(a.settings.max_files)+" | Rasio: "+q(a.settings.camera_aspect_ratio),1),p.value.length===0?(n(),i("label",{key:0,onClick:F,class:re(["block w-full border-2 border-dashed rounded-lg cursor-pointer transition-colors duration-200 h-28",{"border-gray-300 hover:border-indigo-400 bg-gray-50":!0}]),disabled:E.value},[e("div",ro,[v[3]||(v[3]=e("svg",{class:"w-8 h-8 text-gray-400 mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)),v[4]||(v[4]=e("p",{class:"text-sm text-gray-600 font-medium"},"Upload Image",-1)),e("p",uo,"Tipe: "+q(J.value),1)])],8,lo)):(n(),i("div",{key:1,class:re(["block w-full rounded-lg transition-colors duration-200 p-2",{"border-2 border-dashed border-indigo-200 bg-indigo-50 h-auto p-2":a.settings.max_files==1,"bg-transparent":a.settings.max_files>1}]),"aria-label":"Image gallery"},[a.settings.max_files===1?(n(),i("div",co,[e("div",{class:"relative flex-shrink-0 w-24 h-24 overflow-hidden rounded-md border border-gray-200 cursor-pointer",onClick:v[1]||(v[1]=y=>ie(0))},[e("img",{src:_(p.value[0]),onError:v[0]||(v[0]=y=>s(p.value[0])),class:"w-full h-full object-cover"},null,40,go),p.value[0].isUploading?(n(),i("div",po,v[5]||(v[5]=[e("div",{class:"w-6 h-6 border-2 border-white border-t-transparent rounded-full animate-spin"},null,-1)]))):u("",!0)]),e("button",{onClick:v[2]||(v[2]=ct(y=>Ie(p.value[0]),["stop"])),type:"button",class:"flex items-center gap-1 text-red-600 font-medium hover:text-red-800 transition-colors",disabled:E.value},v[6]||(v[6]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.095 21H7.905a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1),Ne(" Hapus Foto ")]),8,mo)])):(n(),i("div",vo,[O.value&&p.value.length<a.settings.max_files?(n(),i("div",{key:0,class:"flex-shrink-0 flex flex-col items-center justify-center p-2 border-2 border-dashed border-gray-300 rounded-lg cursor-pointer hover:border-indigo-500 transition-colors w-24 h-24",onClick:F,disabled:E.value},v[7]||(v[7]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-8 w-8 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),e("p",{class:"mt-1 text-xs text-gray-600"},"Tambah",-1)]),8,fo)):u("",!0),(n(!0),i(Ue,null,De(p.value,(y,k)=>(n(),i("div",{key:y.id||y.preview||k,class:"relative flex-shrink-0 w-24 h-24 overflow-hidden rounded-md border border-gray-200 cursor-pointer",onClick:K=>y.isFailed?Se(y):ie(k)},[e("img",{src:_(y),onError:K=>s(y),class:"w-full h-full object-cover"},null,40,bo),y.isNew||y.rotation!==0?(n(),i("div",yo,[y.isNew?(n(),i("span",xo,"BARU")):u("",!0),y.rotation!==0?(n(),i("span",wo,"ROTASI")):u("",!0)])):u("",!0),y.isUploading?(n(),i("div",ko,v[8]||(v[8]=[e("div",{class:"w-6 h-6 border-2 border-white border-t-transparent rounded-full animate-spin"},null,-1)]))):u("",!0),y.isFailed?(n(),i("div",Io,v[9]||(v[9]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 mb-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1),e("span",{class:"text-xs font-medium"},"Retry",-1)]))):u("",!0)],8,ho))),128))]))],2)),a.error?(n(),i("p",_o,q(a.error),1)):u("",!0),Me(Ks,{show:f.value,settings:a.settings,onClose:W,onOpenWebcam:G,onTriggerGallery:ge},null,8,["show","settings"]),ae(z)!=="HD_Std"?(n(),Pe(On,{key:3,show:M.value,"aspect-ratio":B.value,settings:a.settings,point:a.point,"camera-quality":ae(z),onClose:oe,onPhotoCaptured:Q},null,8,["show","aspect-ratio","settings","point","camera-quality"])):u("",!0),ae(z)==="HD_Std"?(n(),Pe(no,{key:4,show:M.value,"aspect-ratio":B.value,settings:a.settings,point:a.point,"camera-quality":ae(z),onClose:oe,onPhotoCaptured:Q},null,8,["show","aspect-ratio","settings","point","camera-quality"])):u("",!0),Me(In,{show:w.value,images:p.value,point:a.point,"initial-index":D.value,"allow-multiple":O.value,"max-files":a.settings.max_files,"is-uploading":E.value,"aspect-ratio":B.value,"upload-progress":ee.value,"current-upload":g.value,"total-upload":c.value,onClose:de,onSaveImages:_e,onRemovePreviewImage:Ve,onTriggerAddMorePhotos:F,onRetryImage:Se},null,8,["show","images","point","initial-index","allow-multiple","max-files","is-uploading","aspect-ratio","upload-progress","current-upload","total-upload"])]))}},Ft=Ke(So,[["__scopeId","data-v-51470c95"]]),Co={key:0,class:"fixed inset-0 z-50 overflow-hidden"},$o={class:"absolute bottom-0 left-0 right-0 bg-white rounded-t-2xl max-h-[85vh] overflow-hidden flex flex-col"},Ao={class:"px-4 pb-2 border-b border-gray-200"},Vo={class:"text-lg font-semibold text-gray-900"},To={key:0,class:"text-sm text-gray-500 mt-1"},Mo={class:"flex-1 overflow-y-auto p-4"},Eo={key:0,class:"border-t border-gray-200 p-4 bg-gray-50"},Uo={__name:"BottomSheetModal",props:{show:Boolean,title:String,subtitle:String},setup(a){return(se,t)=>(n(),Pe(gt,{name:"bottom-sheet"},{default:Fe(()=>[a.show?(n(),i("div",Co,[t[1]||(t[1]=e("div",{class:"absolute inset-0 bg-black bg-opacity-50"},null,-1)),e("div",$o,[t[0]||(t[0]=e("div",{class:"flex justify-center py-3"},[e("div",{class:"w-12 h-1.5 bg-gray-300 rounded-full"})],-1)),e("div",Ao,[e("h3",Vo,q(a.title),1),a.subtitle?(n(),i("p",To,q(a.subtitle),1)):u("",!0)]),e("div",Mo,[aa(se.$slots,"default",{},void 0,!0)]),se.$slots.footer?(n(),i("div",Eo,[aa(se.$slots,"footer",{},void 0,!0)])):u("",!0)])])):u("",!0)]),_:3}))}},ga=Ke(Uo,[["__scopeId","data-v-fd942535"]]),No={class:"space-y-4"},Do={key:0,class:"mt-2"},Po={key:1,class:"mt-2"},Lo={key:2,class:"mt-2"},Ro={key:3,class:"mt-2"},jo={key:4,class:"mt-2"},Bo={class:"text-sm font-medium text-gray-700 mb-2"},Fo={key:0,class:"text-red-500"},Oo={key:0,class:"text-xs text-red-500"},zo=["type","name","value","checked","onChange"],qo={key:6,class:"mt-4"},Ko={class:"text-sm font-medium text-gray-700 mb-2"},Ho={key:0,class:"text-red-500"},Go={key:0,class:"text-xs text-red-500"},Wo={key:7,class:"space-y-2"},Yo={key:0,class:"text-red-500"},Zo={key:1,class:"text-xs text-red-500"},Jo={class:"flex gap-2"},Xo=["disabled"],Ot={__name:"RadioOptionModal",props:{show:Boolean,title:String,subtitle:String,name:String,options:{type:Array,default:()=>[]},selectedValue:[String,Array],notesValue:String,imagesValue:{type:Array,default:()=>[]},pointId:[String,Number],inspectionId:[String,Number],showTextarea:{type:Boolean,default:!0},showImageUpload:{type:Boolean,default:!0},selectedPoint:Object,point:Object},emits:["update:selectedValue","update:notesValue","update:imagesValue","close","save","hapus","saveTextarea","saveImage","saveText","saveNumber","saveAccount","saveDate"],setup(a,{emit:se}){const t=a,C=se,d=g=>C("hapus",g),S=te(()=>Array.isArray(t.selectedValue)?t.options.find(g=>t.selectedValue.includes(g.value)):t.options.find(g=>g.value===t.selectedValue)),f=te(()=>{if(Array.isArray(t.selectedValue))return t.options.filter(g=>t.selectedValue.includes(g.value));if(t.selectedValue){const g=typeof t.selectedValue=="string"?t.selectedValue.split(",").map(c=>c.trim()):[t.selectedValue];return t.options.filter(c=>g.includes(c.value))}return[]}),M=te(()=>{var g;if(Array.isArray(t.selectedValue))return f.value.some(c=>{var V;return c.multi&&((V=c.settings)==null?void 0:V.show_textarea)});{const c=t.options.find(V=>V.value===t.selectedValue);return(g=c==null?void 0:c.settings)==null?void 0:g.show_textarea}}),w=te(()=>{var g;if(Array.isArray(t.selectedValue))return f.value.some(c=>{var V;return c.multi&&((V=c.settings)==null?void 0:V.show_image_upload)});{const c=t.options.find(V=>V.value===t.selectedValue);return(g=c==null?void 0:c.settings)==null?void 0:g.show_image_upload}}),N=te(()=>{var g;if(Array.isArray(t.selectedValue)){const c=f.value.filter(O=>{var J;return O.multi&&((J=O.settings)==null?void 0:J.show_textarea)});if(c.length===0)return null;const V={...c[0].settings},z=[];c.forEach(O=>{var J;(J=O.settings)!=null&&J.damage_options&&z.push(...O.settings.damage_options)});const U=z.filter((O,J,B)=>J===B.findIndex(p=>p.value===O.value));return V.damage_options=U,{...c[0],settings:V}}else{const c=t.options.find(V=>V.value===t.selectedValue);return(g=c==null?void 0:c.settings)!=null&&g.show_textarea?c:null}}),D=te(()=>{var g;if(Array.isArray(t.selectedValue))return f.value.find(c=>{var V;return c.multi&&((V=c.settings)==null?void 0:V.show_image_upload)});{const c=t.options.find(V=>V.value===t.selectedValue);return(g=c==null?void 0:c.settings)!=null&&g.show_image_upload?c:null}});te(()=>f.value.find(g=>{var c;return g.multi&&((c=g.settings)==null?void 0:c.show_textarea)})),te(()=>f.value.find(g=>{var c;return g.multi&&((c=g.settings)==null?void 0:c.show_image_upload)}));const E=g=>Array.isArray(t.selectedValue)?t.selectedValue.includes(g.value):t.selectedValue?(typeof t.selectedValue=="string"?t.selectedValue.split(",").map(V=>V.trim()):[t.selectedValue]).includes(g.value):!1,L=(g,c)=>{let V;if(g.multi){const z=Array.isArray(t.selectedValue)?t.selectedValue:[];c.target.checked?V=[...z,g.value]:V=z.filter(U=>U!==g.value)}else V=g.value;C("update:selectedValue",V)},ee=te(()=>{var c,V,z,U,O,J,B;if(t.point.input_type==="text"&&(!((c=t.notesValue)!=null&&c.trim())||t.point.settings.min_length&&t.notesValue.length<t.point.settings.min_length||t.point.settings.max_length&&t.notesValue.length>t.point.settings.max_length)||t.point.input_type==="number"&&(!((V=t.notesValue)!=null&&V.trim())||t.point.settings.min&&t.notesValue.length<t.point.settings.min||t.point.settings.max&&t.notesValue.length>t.point.settings.max)||t.point.input_type==="account"&&(!((z=t.notesValue)!=null&&z.trim())||t.point.settings.min_value&&t.notesValue.length<t.point.settings.min_value||t.point.settings.max_value&&t.notesValue.length>t.point.settings.max_value)||t.point.input_type==="date"&&(!((U=t.notesValue)!=null&&U.trim())||t.point.settings.min_date&&t.notesValue.length<t.point.settings.min_date||t.point.settings.max_date&&t.notesValue.length>t.point.settings.max_date))return!1;if(t.point.input_type==="imageTOradio"){if(t.imagesValue.length===0)return!1;const p=t.imagesValue.some(ne=>ne.status==="error"),X=t.imagesValue.some(ne=>ne.status==="uploading");if(p||X)return!1}if(t.options.length&&(!t.selectedValue||Array.isArray(t.selectedValue)&&t.selectedValue.length===0))return!1;const g=S.value;if(t.showTextarea&&((O=g==null?void 0:g.settings)!=null&&O.show_textarea)&&(!((J=t.notesValue)!=null&&J.trim())||g.settings.min_length&&t.notesValue.length<g.settings.min_length||g.settings.max_length&&t.notesValue.length>g.settings.max_length))return!1;if(t.showImageUpload&&((B=g==null?void 0:g.settings)!=null&&B.show_image_upload)){if(t.imagesValue.length===0||g.settings.max_files&&t.imagesValue.length>g.settings.max_files)return!1;const p=t.imagesValue.some(ne=>ne.status==="error"),X=t.imagesValue.some(ne=>ne.status==="uploading");if(p||X)return!1}return!0});return(g,c)=>(n(),Pe(ga,{show:a.show,title:a.title,subtitle:a.subtitle,onClose:c[17]||(c[17]=V=>g.$emit("close"))},{footer:Fe(()=>[a.selectedPoint?(n(),i("button",{key:0,onClick:c[14]||(c[14]=V=>d(a.pointId)),class:"flex items-center justify-center text-red-600 hover:text-red-800 mb-3"},c[19]||(c[19]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6M9 7h6m2-3H7m5 0v3"})],-1),Ne(" Hapus Data ")]))):u("",!0),e("div",Jo,[e("button",{type:"button",onClick:c[15]||(c[15]=V=>g.$emit("close")),class:"flex-1 px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50"}," Batal "),e("button",{type:"button",onClick:c[16]||(c[16]=V=>g.$emit("save")),disabled:!ee.value,class:"flex-1 px-4 py-2 bg-indigo-600 border border-transparent rounded-md shadow-sm text-white hover:bg-indigo-700 disabled:bg-gray-300 disabled:cursor-not-allowed"}," Simpan ",8,Xo)])]),default:Fe(()=>{var V,z,U,O,J,B,p,X,ne,_,h,s,I,F,ge,G,W,oe,de,P,T,R,H,Q,ie,be,me,Ae,_e,ye,Se,Ve,Ie,l,v,y;return[e("div",No,[a.point.input_type==="text"?(n(),i("div",Do,[Me(ra,{"model-value":a.notesValue,required:(V=a.point.settings)==null?void 0:V.is_required,"min-length":(z=a.point.settings)==null?void 0:z.min_length,"max-length":(U=a.point.settings)==null?void 0:U.max_length,allowSpace:(O=a.point.settings)==null?void 0:O.allow_space,textTransform:(J=a.point.settings)==null?void 0:J.text_transform,placeholder:((B=a.point.settings)==null?void 0:B.placeholder)||"Masukan text",error:g.error,"onUpdate:modelValue":c[0]||(c[0]=k=>g.$emit("update:notesValue",k)),onSave:c[1]||(c[1]=k=>g.$emit("saveText",k))},null,8,["model-value","required","min-length","max-length","allowSpace","textTransform","placeholder","error"])])):u("",!0),a.point.input_type==="number"?(n(),i("div",Po,[Me(la,{"model-value":a.notesValue,required:(p=a.point.settings)==null?void 0:p.is_required,min:(X=a.point.settings)==null?void 0:X.min,max:(ne=a.point.settings)==null?void 0:ne.max,step:((_=a.point.settings)==null?void 0:_.step)||1,placeholder:((h=a.point.settings)==null?void 0:h.placeholder)||"Masukan number",error:g.error,"onUpdate:modelValue":c[2]||(c[2]=k=>g.$emit("update:notesValue",k)),onSave:c[3]||(c[3]=k=>g.$emit("saveNumber",k))},null,8,["model-value","required","min","max","step","placeholder","error"])])):u("",!0),a.point.input_type==="account"?(n(),i("div",Lo,[Me(da,{"model-value":a.notesValue,required:(s=a.point.settings)==null?void 0:s.is_required,placeholder:((I=a.point.settings)==null?void 0:I.placeholder)||"Masukkan nilai",error:g.error,"point-id":a.pointId,settings:a.point.settings,"onUpdate:modelValue":c[4]||(c[4]=k=>g.$emit("update:notesValue",k)),onSave:c[5]||(c[5]=k=>g.$emit("saveAccount",k))},null,8,["model-value","required","placeholder","error","point-id","settings"])])):u("",!0),a.point.input_type==="date"?(n(),i("div",Ro,[Me(ua,{"model-value":a.notesValue,required:(F=a.point.settings)==null?void 0:F.is_required,"min-date":(ge=a.point.settings)==null?void 0:ge.min_date,"max-date":(G=a.point.settings)==null?void 0:G.max_date,error:g.error,"onUpdate:modelValue":c[6]||(c[6]=k=>g.$emit("update:notesValue",k)),onSave:c[7]||(c[7]=k=>g.$emit("saveDate",k))},null,8,["model-value","required","min-date","max-date","error"])])):u("",!0),a.point.input_type==="imageTOradio"?(n(),i("div",jo,[e("h4",Bo,[(W=a.point.settings)!=null&&W.required?(n(),i("span",Fo,"*")):u("",!0)]),Me(Ft,{"model-value":a.imagesValue,"point-id":a.pointId,point:a.point.inspection_point,"inspection-id":a.inspectionId,settings:a.point.settings,"onUpdate:modelValue":c[8]||(c[8]=k=>g.$emit("update:imagesValue",k)),onSave:c[9]||(c[9]=k=>g.$emit("saveImage",k))},null,8,["model-value","point-id","point","inspection-id","settings"]),(oe=a.point.settings)!=null&&oe.required&&a.imagesValue.length===0?(n(),i("p",Oo," Foto wajib diupload ")):u("",!0)])):u("",!0),a.options.length?(n(),i("div",{key:5,class:re(["grid gap-2 w-full mt-2",`grid-cols-${Math.min(a.options.length,3)}`])},[(n(!0),i(Ue,null,De(a.options,(k,K)=>(n(),i("label",{key:K,class:"cursor-pointer"},[e("input",{type:k.multi?"checkbox":"radio",name:k.multi?`checkbox-${a.name}`:a.name,value:k.value,checked:E(k),onChange:Y=>L(k,Y),class:"hidden peer"},null,40,zo),e("div",{class:re(["w-full px-4 py-3 border rounded-lg text-center transition-colors whitespace-nowrap text-sm font-medium",{"border-indigo-500 bg-indigo-50 text-indigo-700":E(k),"border-gray-300 text-gray-700 hover:bg-gray-50":!E(k)}])},q(k.label),3)]))),128))],2)):u("",!0),w.value?(n(),i("div",qo,[e("h4",Ko,[c[18]||(c[18]=Ne(" Upload Foto ")),(P=(de=D.value)==null?void 0:de.settings)!=null&&P.required?(n(),i("span",Ho,"*")):u("",!0)]),Me(Ft,{"model-value":a.imagesValue,"point-id":a.pointId,point:a.point,"inspection-id":a.inspectionId,settings:(T=D.value)==null?void 0:T.settings,"onUpdate:modelValue":c[10]||(c[10]=k=>g.$emit("update:imagesValue",k)),onSave:c[11]||(c[11]=k=>g.$emit("saveImage",k))},null,8,["model-value","point-id","point","inspection-id","settings"]),(H=(R=D.value)==null?void 0:R.settings)!=null&&H.required&&a.imagesValue.length===0?(n(),i("p",Go," Foto wajib diupload ")):u("",!0)])):u("",!0),M.value?(n(),i("div",Wo,[(ie=(Q=N.value)==null?void 0:Q.settings)!=null&&ie.required?(n(),i("span",Yo,"*")):u("",!0),Me(ca,{"model-value":a.notesValue,"point-id":a.pointId,"inspection-id":a.inspectionId,settings:(be=N.value)==null?void 0:be.settings,required:(Ae=(me=N.value)==null?void 0:me.settings)==null?void 0:Ae.required,"min-length":(ye=(_e=N.value)==null?void 0:_e.settings)==null?void 0:ye.min_length,"max-length":(Ve=(Se=N.value)==null?void 0:Se.settings)==null?void 0:Ve.max_length,placeholder:((l=(Ie=N.value)==null?void 0:Ie.settings)==null?void 0:l.placeholder)||"Tambahkan keterangan...","onUpdate:modelValue":c[12]||(c[12]=k=>g.$emit("update:notesValue",k)),onSave:c[13]||(c[13]=k=>g.$emit("saveTextarea",k))},null,8,["model-value","point-id","inspection-id","settings","required","min-length","max-length","placeholder"]),(y=(v=N.value)==null?void 0:v.settings)!=null&&y.required&&!a.notesValue?(n(),i("p",Zo," Keterangan wajib diisi ")):u("",!0)])):u("",!0)])]}),_:1},8,["show","title","subtitle"]))}},Qo={class:"mt-2 space-y-2"},ei=["type","name","value","checked","onChange","required"],ti={key:0,class:"p-2 rounded-lg bg-gray-50"},ai={key:0,class:"mt-2"},si={class:"flex gap-2 overflow-x-auto",style:{"scrollbar-width":"none"}},ni=["src"],oi={key:0,class:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center text-white text-xs"},ii={key:1,class:"mt-2"},li={class:"text-sm text-gray-600"},ri={key:2,class:"mt-2 text-sm text-red-600"},ui={__name:"InputRadio",props:{modelValue:[String,Array],required:Boolean,error:String,point:Object,pointId:[String,Number],pointName:String,subtitle:String,inspectionId:[String,Number],options:{type:Array,default:()=>[]},selectedPoint:Object,notes:{type:String,default:""},images:{type:Array,default:()=>[]}},emits:["update:modelValue","update:notes","update:images","save","hapus"],setup(a,{emit:se}){const t=a,C=se,d=b(t.notes),S=b([...t.images]),f=b(!1),M=b(""),w=b([]),N=b(""),D=b([]);te(()=>t.options.find(p=>p.value===t.modelValue));const E=te(()=>Array.isArray(t.modelValue)?t.options.filter(p=>t.modelValue.includes(p.value)):t.modelValue?[t.options.find(p=>p.value===t.modelValue)].filter(Boolean):[]),L=p=>Array.isArray(t.modelValue)?t.modelValue.includes(p.value):t.modelValue?(typeof t.modelValue=="string"?t.modelValue.split(",").map(ne=>ne.trim()):[t.modelValue]).includes(p.value):!1,ee=p=>p.settings&&(p.settings.show_textarea||p.settings.show_image_upload);we(()=>t.notes,p=>{d.value=p}),we(()=>t.images,p=>{S.value=[...p]}),we(()=>t.modelValue,p=>{p?N.value=Array.isArray(p)?[...p]:p:N.value=""});const g=(p,X)=>{let ne;if(p.multi){const _=Array.isArray(t.modelValue)?t.modelValue:[];X.target.checked?ne=[..._,p.value]:ne=_.filter(h=>h!==p.value)}else ne=p.value;C("update:modelValue",ne),ee(p)?V():C("save",{pointId:t.pointId,inspectionId:t.inspectionId,value:ne,notes:"",images:[]})},c=p=>p.preview||(p.image_path?`/${p.image_path}`:p),V=()=>{N.value=t.modelValue,M.value=d.value,w.value=[...S.value],D.value=[...S.value],f.value=!0},z=()=>{M.value="",w.value=[],N.value=Array.isArray(t.modelValue)?[...t.modelValue]:t.modelValue,f.value=!1},U=p=>{w.value=p,S.value=[...p],C("update:images",[...p]),C("save",{pointId:t.pointId,inspectionId:t.inspectionId,value:t.modelValue,notes:d.value,images:[...p]})},O=p=>{},J=()=>{N.value!==t.modelValue&&C("update:modelValue",N.value),d.value=M.value,C("update:notes",M.value),S.value=[...w.value],C("update:images",[...w.value]),C("save",{pointId:t.pointId,inspectionId:t.inspectionId,value:N.value,notes:M.value,images:w.value}),f.value=!1},B=p=>{N.value="",M.value="",w.value=[],d.value="",S.value=[],C("update:modelValue",""),C("update:notes",""),C("update:images",[]),C("hapus",p),f.value=!1};return(p,X)=>{var ne;return n(),i("div",Qo,[e("div",{class:re(["grid gap-2 w-full mt-2",`grid-cols-${Math.min(a.options.length,3)}`])},[(n(!0),i(Ue,null,De(a.options,(_,h)=>(n(),i("label",{key:h,class:"cursor-pointer"},[e("input",{type:_.multi?"checkbox":"radio",name:_.multi?`checkbox-${a.pointId}`:"radio-"+a.pointId,value:_.value,checked:L(_),onChange:s=>g(_,s),class:"hidden peer",required:a.required&&!_.multi},null,40,ei),e("div",{class:re(["w-full px-4 py-3 border rounded-lg text-center transition-colors whitespace-nowrap text-sm font-medium",{"border-indigo-500 bg-indigo-50 text-indigo-700":L(_),"border-gray-300 text-gray-700 hover:bg-gray-50":!L(_)}])},q(_.label),3)]))),128))],2),a.modelValue&&E.value.length>0&&E.value.some(_=>ee(_))?(n(),i("div",ti,[e("div",{class:"flex justify-between items-start"},[X[4]||(X[4]=e("h4",{class:"text-sm font-medium text-gray-700"},"Detail : ",-1)),e("button",{onClick:V,class:"text-sm text-indigo-600 hover:text-indigo-800"}," Edit ")]),a.images.length>0&&E.value.some(_=>{var h;return(h=_.settings)==null?void 0:h.show_image_upload})?(n(),i("div",ai,[e("div",si,[(n(!0),i(Ue,null,De(a.images,(_,h)=>(n(),i("div",{key:h,class:"relative flex-shrink-0",style:{width:"130px",height:"130px"}},[e("img",{src:c(_),class:"w-full h-full object-cover rounded"},null,8,ni),h===3&&a.images.length>4?(n(),i("span",oi," +"+q(a.images.length-4),1)):u("",!0)]))),128))])])):u("",!0),a.notes&&E.value.some(_=>{var h;return(h=_.settings)==null?void 0:h.show_textarea})?(n(),i("div",ii,[e("p",li,q(a.notes),1)])):u("",!0)])):u("",!0),f.value?(n(),Pe(Ot,{key:(ne=a.selectedPoint)==null?void 0:ne.id,show:f.value,title:a.pointName||"Detail",subtitle:a.subtitle||"",name:"modal-radio-"+a.pointId,options:a.options,"selected-value":N.value,"notes-value":M.value,"images-value":w.value,"point-id":a.pointId,point:a.point,"inspection-id":a.inspectionId,"selected-point":a.selectedPoint,"onUpdate:selectedValue":X[0]||(X[0]=_=>N.value=_),"onUpdate:notesValue":X[1]||(X[1]=_=>M.value=_),"onUpdate:imagesValue":X[2]||(X[2]=_=>U(_)),onClose:z,onSave:J,onSaveTextarea:p.handleTextareaSave,onSaveImage:O,onHapus:X[3]||(X[3]=_=>B(a.pointId))},null,8,["show","title","subtitle","name","options","selected-value","notes-value","images-value","point-id","point","inspection-id","selected-point","onSaveTextarea"])):u("",!0),a.error?(n(),i("p",ri,q(a.error),1)):u("",!0)])}}},di={class:"mt-2 space-y-2"},ci={key:0,class:"flex flex-wrap gap-3"},gi={key:1,class:"p-2"},pi={key:0,class:"mt-2"},mi={class:"flex gap-2 overflow-x-auto scrollbar-hide"},vi=["src"],fi={key:0,class:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center text-white text-xs"},hi=["type","name","value","checked"],bi={key:1,class:"mt-2"},yi={class:"text-sm text-gray-600"},xi={key:3,class:"mt-2 text-sm text-red-600"},wi={__name:"InputImageToRadio",props:{modelValue:[String,Array],required:Boolean,error:String,point:Object,pointId:[String,Number],pointName:String,subtitle:String,inspectionId:[String,Number],options:{type:Array,default:()=>[]},selectedPoint:Object,notes:{type:String,default:""},images:{type:Array,default:()=>[]}},emits:["update:modelValue","update:notes","update:images","save","hapus"],setup(a,{emit:se}){const t=a,C=se,d=b(t.notes),S=b([...t.images]),f=b(!1),M=b(""),w=b([]),N=b(""),D=b([]),E=te(()=>{if(Array.isArray(t.modelValue))return t.options.find(B=>t.modelValue.includes(B.value));if(t.modelValue){const B=typeof t.modelValue=="string"?t.modelValue.split(",").map(p=>p.trim()):[t.modelValue];return t.options.find(p=>B.includes(p.value))}return null}),L=te(()=>{if(Array.isArray(t.modelValue))return t.options.filter(B=>t.modelValue.includes(B.value));if(t.modelValue){const B=typeof t.modelValue=="string"?t.modelValue.split(",").map(p=>p.trim()):[t.modelValue];return t.options.filter(p=>B.includes(p.value))}return[]}),ee=te(()=>L.value.some(B=>{var p;return B.multi&&((p=B.settings)==null?void 0:p.show_textarea)}));te(()=>L.value.find(B=>{var p;return B.multi&&((p=B.settings)==null?void 0:p.show_textarea)}));const g=B=>Array.isArray(t.modelValue)?t.modelValue.includes(B.value):t.modelValue?(typeof t.modelValue=="string"?t.modelValue.split(",").map(X=>X.trim()):[t.modelValue]).includes(B.value):!1,c=B=>B.preview||(B.image_path?`/${B.image_path}`:B);we(()=>t.notes,B=>{d.value=B});const V=()=>{N.value=t.modelValue||"",M.value=d.value,w.value=[...S.value],D.value=[...S.value],f.value=!0},z=()=>{M.value="",w.value=[],N.value="",f.value=!1},U=B=>{w.value=B,S.value=[...B],C("update:images",[...B]),C("save",{pointId:t.pointId,inspectionId:t.inspectionId,value:t.modelValue,notes:d.value,images:[...B]})},O=()=>{N.value!==t.modelValue&&C("update:modelValue",N.value),d.value=M.value,C("update:notes",M.value),S.value=[...w.value],C("update:images",[...w.value]),C("save",{pointId:t.pointId,inspectionId:t.inspectionId,value:N.value,notes:M.value,images:w.value}),f.value=!1},J=B=>{N.value="",M.value="",w.value=[],d.value="",S.value=[],C("update:modelValue",""),C("update:notes",""),C("update:images",[]),C("hapus",B),f.value=!1};return(B,p)=>{var X,ne,_;return n(),i("div",di,[!a.modelValue&&S.value.length===0&&!d.value?(n(),i("div",ci,[e("div",{class:"relative w-28 h-28 border-2 border-dashed rounded-lg flex items-center justify-center cursor-pointer overflow-hidden",onClick:V},p[4]||(p[4]=[e("div",{class:"flex flex-col items-center text-gray-400"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-8 w-8 mb-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})]),e("span",{class:"text-xs font-medium"},"Tambah")],-1)]))])):(n(),i("div",gi,[e("div",{class:"flex justify-between items-start"},[p[5]||(p[5]=e("h4",{class:"text-sm font-medium text-gray-700"},"Detail :",-1)),e("button",{onClick:V,class:"text-sm text-indigo-600 hover:text-indigo-800"}," Edit ")]),S.value.length>0?(n(),i("div",pi,[e("div",mi,[(n(!0),i(Ue,null,De(S.value,(h,s)=>(n(),i("div",{key:s,class:"relative flex-shrink-0",style:{width:"130px",height:"130px"}},[e("img",{src:c(h),class:"w-full h-full object-cover rounded"},null,8,vi),s===3&&S.value.length>4?(n(),i("span",fi," +"+q(S.value.length-4),1)):u("",!0)]))),128))])])):u("",!0),e("div",{class:re(["grid gap-2 w-full mt-2",`grid-cols-${Math.min(a.options.length,3)}`])},[(n(!0),i(Ue,null,De(a.options,(h,s)=>(n(),i("label",{key:s,class:"cursor-pointer"},[e("input",{type:h.multi?"checkbox":"radio",name:h.multi?`checkbox-${a.pointId}`:`radio-${a.pointId}`,value:h.value,checked:g(h),disabled:!0,class:"hidden peer"},null,8,hi),e("div",{class:re(["w-full px-4 py-3 border rounded-lg text-center transition-colors whitespace-nowrap text-sm font-medium",{"border-indigo-500 bg-indigo-50 text-indigo-700":g(h),"border-gray-300 text-gray-700 hover:bg-gray-50":!g(h)}])},q(h.label),3)]))),128))],2),d.value&&((ne=(X=E.value)==null?void 0:X.settings)!=null&&ne.show_textarea||ee.value)?(n(),i("div",bi,[e("p",yi,q(d.value),1)])):u("",!0)])),f.value?(n(),Pe(Ot,{key:(_=a.selectedPoint)==null?void 0:_.id,show:f.value,title:a.pointName||"Detail",subtitle:a.subtitle||"",name:"modal-radio-"+a.pointId,options:a.options,"selected-value":N.value,"notes-value":M.value,"images-value":w.value,"point-id":a.pointId,point:a.point,"inspection-id":a.inspectionId,"selected-point":a.selectedPoint,"onUpdate:selectedValue":p[0]||(p[0]=h=>N.value=h),"onUpdate:notesValue":p[1]||(p[1]=h=>M.value=h),"onUpdate:imagesValue":p[2]||(p[2]=h=>U(h)),onClose:z,onSave:O,onHapus:p[3]||(p[3]=h=>J(a.pointId))},null,8,["show","title","subtitle","name","options","selected-value","notes-value","images-value","point-id","point","inspection-id","selected-point"])):u("",!0),a.error?(n(),i("p",xi,q(a.error),1)):u("",!0)])}}},ki={class:"text-base font-semibold text-indigo-700"},Ii={key:0,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},_i={key:1,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},Si={class:"text-base font-semibold text-indigo-700"},Ci={class:"p-4 space-y-4"},$i={key:0,class:"flex justify-end py-1"},Ai=["onClick"],Vi={key:1,class:"space-y-2"},Ti={class:"flex items-start justify-between"},Mi={class:"flex-1"},Ei={class:"block text-sm font-medium text-gray-900"},Ui={class:"font-bold"},Ni={key:0,class:"text-red-500"},Di={key:1,class:"italic text-xs text-gray-400 ml-2"},Pi={key:0,class:"mt-1"},Li={key:0,class:"inline-flex items-center px-2 py-1 rounded text-xs font-medium bg-green-100 text-green-800"},Ri={key:0},ji={key:1},Bi={key:2},Fi={key:3},Oi={key:4},zi={key:0,class:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-green-100 text-green-800"},qi={key:9,class:"p-3 bg-gray-100 rounded text-sm text-gray-600"},Ki={class:"text-xs mt-1 list-disc list-inside"},Hi={key:0},Gi={key:1},Wi={key:2},Yi={key:3},Zi={key:4},Ji={key:0,class:"text-center py-8 text-gray-500"},Xi={key:0,class:"text-xs text-gray-400"},Qi={__name:"CategorySection",props:{category:Object,form:Object,head:Object,inspectionId:String,selectedPoint:Object,car:Object},emits:["updateResult","removeImage","hapusPoint"],setup(a,{emit:se}){const t=a,C=se,d=Lt("vehicleFeatures",b(null));d.value=JSON.parse(localStorage.getItem("vehicle_features")||"{}"),Dt("vehicleFeatures",d);const S=b(!1),f=b([]),M=b(!0),w=b(null),N=xa(),D={MT:"Manual Transmission (MT)",AT:"Automatic Transmission (AT)",CVT:"Continuously Variable Transmission (CVT)","e-CVT":"Electronic CVT (e-CVT)",DCT:"Dual Clutch Transmission (DCT)",AMT:"Automated Manual Transmission (AMT)",IVT:"Intelligent Variable Transmission (IVT)",SSG:"Seamless Shift Gearbox (SSG)",AGS:"Auto Gear Shift (AGS)",DHT:"Dedicated Hybrid Transmission (DHT)"};st(()=>{const _=new IntersectionObserver(([h])=>{M.value=h.isIntersecting},{threshold:.1});w.value&&_.observe(w.value),wt(()=>{w.value&&_.unobserve(w.value)})});const E=()=>{S.value=!S.value,S.value||(f.value=[])},L=te(()=>(t.category.points||[]).some(_=>_.is_default===!1)),ee=_=>!_||!Array.isArray(_)?[]:_.map(h=>D[h]||h),g=_=>{var F,ge;const h=_.settings;if(!c(_))return!0;const s=(F=t.car)==null?void 0:F.transmission,I=(ge=t.car)==null?void 0:ge.fuel_type;return!(h.transmission&&Array.isArray(h.transmission)&&h.transmission.length>0&&s&&!h.transmission.includes(s)||h.fuel_type&&h.fuel_type.trim()!==""&&I&&h.fuel_type!==I||h.rear_door&&(!d.value||!d.value.rear_door)||h.pick_up&&(!d.value||!d.value.pick_up)||h.box&&(!d.value||!d.value.box))},c=_=>{const h=_.settings;return!!(h!=null&&h.transmission&&Array.isArray(h.transmission)&&h.transmission.length>0||h!=null&&h.fuel_type&&h.fuel_type.trim()!==""||h!=null&&h.rear_door||h!=null&&h.pick_up||h!=null&&h.box)},V=_=>c(_)&&(S.value||g(_)),z=te(()=>{const _=t.category.points||[],h=[];let s=[];return S.value?t.category.isDamageMenu?_.filter(I=>{var F;return I.is_default||O((F=I.inspection_point)==null?void 0:F.id)||S.value}):_:t.category.isDamageMenu?_.filter(I=>{var ge;const F=(ge=I.inspection_point)==null?void 0:ge.id;return O(F)||I.is_default||f.value.includes(F)}):(_.forEach(I=>{var P;const F=(P=I.inspection_point)==null?void 0:P.id,ge=O(F),G=f.value.includes(F),oe=!c(I)||g(I);(I.is_default||ge||G)&&oe?(s.length>0&&(h.push({is_link:!0,count:s.length,hiddenIds:s.map(T=>T.inspection_point.id)}),s.forEach(T=>{f.value.includes(T.inspection_point.id)&&h.push(T)}),s=[]),h.push(I)):(!c(I)||g(I))&&s.push(I)}),s.length>0&&(h.push({is_link:!0,count:s.length,hiddenIds:s.map(I=>I.inspection_point.id)}),s.forEach(I=>{f.value.includes(I.inspection_point.id)&&h.push(I)})),h.filter(I=>{var F,ge;return I.is_link||I.is_default||O((F=I.inspection_point)==null?void 0:F.id)||f.value.includes((ge=I.inspection_point)==null?void 0:ge.id)}))});te(()=>z.value.filter(_=>!_.is_link));const U=_=>{S.value=!1,_.forEach(h=>{f.value.includes(h)||f.value.push(h)})},O=_=>{if(!_)return!1;const h=N.props.existingResults[_]!==void 0,s=N.props.existingImages[_]&&N.props.existingImages[_].length>0,I=t.form.results[_]&&(t.form.results[_].status||t.form.results[_].note),F=t.form.images[_]&&t.form.images[_].length>0;return h||s||I||F},J=[{value:"good",label:"Good"},{value:"bad",label:"Bad"},{value:"na",label:"N/A"}],B=_=>{var I,F,ge,G,W,oe,de,P,T;const h=t.form.results[(I=_.inspection_point)==null?void 0:I.id],s=t.form.images[(F=_.inspection_point)==null?void 0:F.id];if(!h)return!1;switch(_.input_type){case"text":case"number":case"date":case"account":case"textarea":return!!h.note;case"select":case"radio":if(!h.status)return!1;const R=(G=(ge=_.settings)==null?void 0:ge.radios)==null?void 0:G.find(Q=>Q.value===h.status);return!(R!=null&&R.settings&&(R.settings.show_textarea&&!((W=h.note)!=null&&W.trim())||R.settings.show_image_upload&&(s==null?void 0:s.length)===0));case"imageTOradio":if((s==null?void 0:s.length)===0||!h.status)return!1;const H=(de=(oe=_.settings)==null?void 0:oe.radios)==null?void 0:de.find(Q=>Q.value===h.status);return!(H!=null&&H.settings&&H.settings.show_textarea&&!((P=h.note)!=null&&P.trim()));case"image":return(s==null?void 0:s.length)>0;default:return!!h.status||!!((T=h.note)!=null&&T.trim())}},p=(_,h,s)=>{C("updateResult",{pointId:_,type:s,value:h})},X=_=>{console.log("Save result for point:",_)},ne=_=>{C("hapusPoint",_)};return we(()=>t.form.results,_=>{},{deep:!0}),we(()=>t.form.images,_=>{},{deep:!0}),we(()=>t.car,_=>{console.log("Car data updated:",_)},{deep:!0}),we(d,_=>{console.log("Vehicle features updated:",_)},{deep:!0}),(_,h)=>(n(),i(Ue,null,[t.head==="vertical"?(n(),i("div",{key:0,class:re(["px-6 py-2 border-b flex items-center justify-between bg-indigo-200","fixed top-0 left-0 right-0 z-20"])},[e("h4",ki,q(a.category.name),1),L.value?(n(),i("button",{key:0,onClick:E,class:"text-sm text-indigo-700 hover:underline focus:outline-none"},q(S.value?"Sembunyikan Semua":"Tampilkan Point Lain"),1)):u("",!0)])):u("",!0),e("div",{class:re(["bg-gray-50 shadow-lg rounded-xl overflow-hidden border border-gray-100",t.head==="vertical"?"pt-6":""])},[!M.value&&L.value?(n(),i("button",{key:0,onClick:E,class:"fixed top-3 right-2 z-10 bg-indigo-600 text-white p-2 rounded-full shadow-lg"},[S.value?(n(),i("svg",Ii,h[0]||(h[0]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"},null,-1),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.477 0 8.268 2.943 9.542 7-1.274 4.057-5.065 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"},null,-1)]))):(n(),i("svg",_i,h[1]||(h[1]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.477 0-8.268-2.943-9.542-7a9.956 9.956 0 012.006-3.362M9.88 9.88a3 3 0 104.24 4.24M6.1 6.1l11.8 11.8"},null,-1)])))])):u("",!0),t.head==="horizontal"?(n(),i("div",{key:1,ref_key:"categoryHeader",ref:w,class:"bg-indigo-200 px-6 py-2 border-b flex items-center justify-between"},[e("h4",Si,q(a.category.name),1),L.value?(n(),i("button",{key:0,onClick:E,class:"text-sm text-indigo-700 hover:underline focus:outline-none"},q(S.value?"Sembunyikan":"Tampilkan Point Lain"),1)):u("",!0)],512)):u("",!0),e("div",Ci,[(n(!0),i(Ue,null,De(z.value,(s,I)=>{var F,ge,G,W,oe,de,P,T,R,H,Q,ie,be,me,Ae,_e,ye,Se,Ve,Ie,l,v,y,k,K,Y,fe,ve,ue,x,m,he,A,ce,$e,Ee,Te,He,pt,kt,Ze,mt,vt,ft,It,nt,ht,bt,ot,je,Ge,Oe,it,_t,lt,Je,rt,Xe,Qe,St,Ct,$t,et,At,Vt,Tt,Mt,Et,Ut;return n(),i("div",{key:I,class:re(["space-y-2 last:border-0 last:pb-0",s.is_link?"pb-0":"pb-2 border-b border-gray-100"])},[s.is_link?(n(),i("div",$i,[e("button",{onClick:Z=>U(s.hiddenIds),class:"text-sm font-medium text-indigo-600 hover:text-indigo-800 hover:underline focus:outline-none"}," Tampilkan "+q(s.count)+" Point Tersembunyi ",9,Ai)])):(n(),i("div",Vi,[e("div",Ti,[e("div",Mi,[e("label",Ei,[e("span",Ui,q((F=s.inspection_point)==null?void 0:F.name),1),(ge=s.settings)!=null&&ge.is_required?(n(),i("span",Ni,"*")):u("",!0),!s.is_default&&!O((G=s.inspection_point)==null?void 0:G.id)?(n(),i("span",Di," (opsional) ")):u("",!0)]),V(s)?(n(),i("div",Pi,[c(s)?(n(),i("div",Li,[(W=s.settings)!=null&&W.transmission?(n(),i("div",Ri,q(s.settings.transmission.join(", ")),1)):u("",!0),(oe=s.settings)!=null&&oe.fuel_type?(n(),i("div",ji,q(s.settings.fuel_type),1)):u("",!0),(de=s.settings)!=null&&de.rear_door?(n(),i("div",Bi," Pintu Belakang ")):u("",!0),(P=s.settings)!=null&&P.pick_up?(n(),i("div",Fi," Tipe Pick Up ")):u("",!0),(T=s.settings)!=null&&T.box?(n(),i("div",Oi," Memiliki Box ")):u("",!0)])):u("",!0)])):u("",!0)]),B(s)?(n(),i("span",zi," ✓ ")):u("",!0)]),s.input_type==="text"&&g(s)?(n(),Pe(ra,{key:0,modelValue:a.form.results[(R=s.inspection_point)==null?void 0:R.id].note,"onUpdate:modelValue":[Z=>{var $;return a.form.results[($=s.inspection_point)==null?void 0:$.id].note=Z},Z=>{var $;return p(($=s.inspection_point)==null?void 0:$.id,Z,"note")}],required:(H=s.settings)==null?void 0:H.is_required,"min-length":(Q=s.settings)==null?void 0:Q.min_length,"max-length":(ie=s.settings)==null?void 0:ie.max_length,allowSpace:(be=s.settings)==null?void 0:be.allow_space,textTransform:(me=s.settings)==null?void 0:me.text_transform,placeholder:((Ae=s.settings)==null?void 0:Ae.placeholder)||"Masukan text",error:a.form.errors[`results.${(_e=s.inspection_point)==null?void 0:_e.id}.note`],onSave:Z=>{var $;return X(($=s.inspection_point)==null?void 0:$.id)}},null,8,["modelValue","onUpdate:modelValue","required","min-length","max-length","allowSpace","textTransform","placeholder","error","onSave"])):u("",!0),s.input_type==="number"&&g(s)?(n(),Pe(la,{key:1,modelValue:a.form.results[(ye=s.inspection_point)==null?void 0:ye.id].note,"onUpdate:modelValue":[Z=>{var $;return a.form.results[($=s.inspection_point)==null?void 0:$.id].note=Z},Z=>{var $;return p(($=s.inspection_point)==null?void 0:$.id,Z,"note")}],required:(Se=s.settings)==null?void 0:Se.is_required,min:(Ve=s.settings)==null?void 0:Ve.min,max:(Ie=s.settings)==null?void 0:Ie.max,step:((l=s.settings)==null?void 0:l.step)||1,placeholder:((v=s.settings)==null?void 0:v.placeholder)||"Masukan number",error:a.form.errors[`results.${(y=s.inspection_point)==null?void 0:y.id}.note`],onSave:Z=>{var $;return X(($=s.inspection_point)==null?void 0:$.id)}},null,8,["modelValue","onUpdate:modelValue","required","min","max","step","placeholder","error","onSave"])):u("",!0),s.input_type==="account"&&g(s)?(n(),Pe(da,{key:2,modelValue:a.form.results[(k=s.inspection_point)==null?void 0:k.id].note,"onUpdate:modelValue":[Z=>{var $;return a.form.results[($=s.inspection_point)==null?void 0:$.id].note=Z},Z=>{var $;return p(($=s.inspection_point)==null?void 0:$.id,Z,"note")}],required:(K=s.settings)==null?void 0:K.is_required,placeholder:((Y=s.settings)==null?void 0:Y.placeholder)||"Masukkan nilai",error:a.form.errors[`results.${(fe=s.inspection_point)==null?void 0:fe.id}.note`],"point-id":(ve=s.inspection_point)==null?void 0:ve.id,settings:s.settings,onSave:Z=>{var $;return X(($=s.inspection_point)==null?void 0:$.id)}},null,8,["modelValue","onUpdate:modelValue","required","placeholder","error","point-id","settings","onSave"])):u("",!0),s.input_type==="date"&&g(s)?(n(),Pe(ua,{key:3,modelValue:a.form.results[(ue=s.inspection_point)==null?void 0:ue.id].note,"onUpdate:modelValue":[Z=>{var $;return a.form.results[($=s.inspection_point)==null?void 0:$.id].note=Z},Z=>{var $;return p(($=s.inspection_point)==null?void 0:$.id,Z,"note")}],required:(x=s.settings)==null?void 0:x.is_required,"min-date":(m=s.settings)==null?void 0:m.min_date,"max-date":(he=s.settings)==null?void 0:he.max_date,error:a.form.errors[`results.${(A=s.inspection_point)==null?void 0:A.id}.note`],onSave:Z=>{var $;return X(($=s.inspection_point)==null?void 0:$.id)}},null,8,["modelValue","onUpdate:modelValue","required","min-date","max-date","error","onSave"])):u("",!0),s.input_type==="textarea"&&g(s)?(n(),Pe(ca,{key:4,modelValue:a.form.results[(ce=s.inspection_point)==null?void 0:ce.id].note,"onUpdate:modelValue":[Z=>{var $;return a.form.results[($=s.inspection_point)==null?void 0:$.id].note=Z},Z=>{var $;return p(($=s.inspection_point)==null?void 0:$.id,Z,"note")}],required:($e=s.settings)==null?void 0:$e.is_required,"min-length":(Ee=s.settings)==null?void 0:Ee.min_length,"max-length":(Te=s.settings)==null?void 0:Te.max_length,placeholder:((He=s.settings)==null?void 0:He.placeholder)||"Masukkan teks di sini",settings:s.settings,error:a.form.errors[`results.${(pt=s.inspection_point)==null?void 0:pt.id}.note`],onSave:Z=>{var $;return X(($=s.inspection_point)==null?void 0:$.id)}},null,8,["modelValue","onUpdate:modelValue","required","min-length","max-length","placeholder","settings","error","onSave"])):u("",!0),s.input_type==="radio"&&g(s)?(n(),Pe(ui,{key:5,modelValue:a.form.results[(kt=s.inspection_point)==null?void 0:kt.id].status,"onUpdate:modelValue":[Z=>{var $;return a.form.results[($=s.inspection_point)==null?void 0:$.id].status=Z},Z=>{var $;return p(($=s.inspection_point)==null?void 0:$.id,Z,"status")}],notes:a.form.results[(Ze=s.inspection_point)==null?void 0:Ze.id].note,images:a.form.images[(mt=s.inspection_point)==null?void 0:mt.id],required:(vt=s.settings)==null?void 0:vt.is_required,"point-id":(ft=s.inspection_point)==null?void 0:ft.id,point:s.inspection_point,"inspection-id":a.inspectionId,settings:s.settings,"point-name":(It=s.inspection_point)==null?void 0:It.name,subtitle:(nt=s.inspection_point)==null?void 0:nt.description,"selected-point":s.inspection_point??null,options:((ht=s.settings)==null?void 0:ht.radios)||J,error:a.form.errors[`results.${(bt=s.inspection_point)==null?void 0:bt.id}.status`],"onUpdate:notes":Z=>{var $;return a.form.results[($=s.inspection_point)==null?void 0:$.id].note=Z},"onUpdate:images":Z=>{var $;return a.form.images[($=s.inspection_point)==null?void 0:$.id]=Z},onSave:Z=>{var $;return X(($=s.inspection_point)==null?void 0:$.id)},onHapus:Z=>{var $;return ne(($=s.inspection_point)==null?void 0:$.id)}},null,8,["modelValue","onUpdate:modelValue","notes","images","required","point-id","point","inspection-id","settings","point-name","subtitle","selected-point","options","error","onUpdate:notes","onUpdate:images","onSave","onHapus"])):u("",!0),s.input_type==="imageTOradio"&&g(s)?(n(),Pe(wi,{key:6,modelValue:a.form.results[(ot=s.inspection_point)==null?void 0:ot.id].status,"onUpdate:modelValue":[Z=>{var $;return a.form.results[($=s.inspection_point)==null?void 0:$.id].status=Z},Z=>{var $;return p(($=s.inspection_point)==null?void 0:$.id,Z,"status")}],notes:a.form.results[(je=s.inspection_point)==null?void 0:je.id].note,images:a.form.images[(Ge=s.inspection_point)==null?void 0:Ge.id],required:(Oe=s.settings)==null?void 0:Oe.is_required,"point-id":(it=s.inspection_point)==null?void 0:it.id,"inspection-id":a.inspectionId,settings:s.settings,"point-name":(_t=s.inspection_point)==null?void 0:_t.name,subtitle:(lt=s.inspection_point)==null?void 0:lt.description,point:s,"selected-point":s.inspection_point??null,options:((Je=s.settings)==null?void 0:Je.radios)||J,error:a.form.errors[`results.${(rt=s.inspection_point)==null?void 0:rt.id}.status`],"onUpdate:notes":Z=>{var $;return a.form.results[($=s.inspection_point)==null?void 0:$.id].note=Z},"onUpdate:images":Z=>{var $;return a.form.images[($=s.inspection_point)==null?void 0:$.id]=Z},onSave:Z=>{var $;return X(($=s.inspection_point)==null?void 0:$.id)},onHapus:Z=>{var $;return ne(($=s.inspection_point)==null?void 0:$.id)}},null,8,["modelValue","onUpdate:modelValue","notes","images","required","point-id","inspection-id","settings","point-name","subtitle","point","selected-point","options","error","onUpdate:notes","onUpdate:images","onSave","onHapus"])):u("",!0),s.input_type==="image"&&g(s)?(n(),Pe(Ft,{key:7,modelValue:a.form.images[(Xe=s.inspection_point)==null?void 0:Xe.id],"onUpdate:modelValue":Z=>{var $;return a.form.images[($=s.inspection_point)==null?void 0:$.id]=Z},error:a.form.errors[`images.${(Qe=s.inspection_point)==null?void 0:Qe.id}`],"inspection-id":a.inspectionId,"point-id":(St=s.inspection_point)==null?void 0:St.id,point:s.inspection_point,"point-name":(Ct=s.inspection_point)==null?void 0:Ct.name,settings:s.settings,"onUpdate:notes":Z=>{var $;return a.form.results[($=s.inspection_point)==null?void 0:$.id].note=Z},"onUpdate:status":Z=>{var $;return a.form.results[($=s.inspection_point)==null?void 0:$.id].status=Z}},null,8,["modelValue","onUpdate:modelValue","error","inspection-id","point-id","point","point-name","settings","onUpdate:notes","onUpdate:status"])):u("",!0),s.input_type==="select"&&g(s)?(n(),Pe(js,{key:8,modelValue:a.form.results[($t=s.inspection_point)==null?void 0:$t.id].status,"onUpdate:modelValue":[Z=>{var $;return a.form.results[($=s.inspection_point)==null?void 0:$.id].status=Z},Z=>{var $;return p(($=s.inspection_point)==null?void 0:$.id,Z,"status")}],required:(et=s.settings)==null?void 0:et.is_required,error:a.form.errors[`results.${(At=s.inspection_point)==null?void 0:At.id}.status`],onSave:Z=>{var $;return X(($=s.inspection_point)==null?void 0:$.id)}},null,8,["modelValue","onUpdate:modelValue","required","error","onSave"])):u("",!0),!g(s)&&c(s)?(n(),i("div",qi,[h[2]||(h[2]=e("p",{class:"font-medium"},"Tidak tersedia untuk kendaraan ini",-1)),h[3]||(h[3]=e("p",{class:"text-xs mt-1"},"Point ini hanya tersedia untuk:",-1)),e("ul",Ki,[(Vt=s.settings)!=null&&Vt.transmission?(n(),i("li",Hi," Transmisi: "+q(ee(s.settings.transmission).join(", ")),1)):u("",!0),(Tt=s.settings)!=null&&Tt.fuel_type?(n(),i("li",Gi," Bahan bakar: "+q(s.settings.fuel_type),1)):u("",!0),(Mt=s.settings)!=null&&Mt.rear_door?(n(),i("li",Wi,"Kendaraan dengan pintu belakang")):u("",!0),(Et=s.settings)!=null&&Et.pick_up?(n(),i("li",Yi,"Tipe pick up")):u("",!0),(Ut=s.settings)!=null&&Ut.box?(n(),i("li",Zi,"Kendaraan dengan box")):u("",!0)])])):u("",!0)]))],2)}),128)),z.value.filter(s=>!s.is_link).length===0?(n(),i("div",Ji,[h[4]||(h[4]=e("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9.172 16.172a4 4 0 015.656 0M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)),h[5]||(h[5]=e("p",{class:"mt-2 text-sm"},"Tidak ada data untuk ditampilkan",-1)),a.category.isDamageMenu?(n(),i("p",Xi,' Tambahkan data melalui tombol "+" di pojok kanan bawah ')):u("",!0)])):u("",!0)])],2)],64))}},el=Ke(Qi,[["__scopeId","data-v-704b9892"]]),tl={class:"bg-gray-50 shadow-lg rounded-xl overflow-hidden border border-gray-100"},al={class:"p-4 space-y-4-6"},sl={class:"grid grid-cols-2 sm:grid-cols-2 md:grid-cols-3 gap-2 w-full"},nl=["value"],ol={class:"p-4 space-y-4-6"},il={class:"grid grid-cols-2 sm:grid-cols-2 md:grid-cols-3 gap-2 w-full"},ll=["value"],rl={key:0,class:"p-4 space-y-4 bg-blue-50 rounded-lg border border-blue-200"},ul={class:"grid grid-cols-2 sm:grid-cols-2 md:grid-cols-3 gap-2 w-full"},dl=["value"],cl={class:"p-4 space-y-2"},gl={class:"flex items-center justify-between mb-2"},pl={key:0,class:"mb-4 p-4 bg-white border border-gray-200 rounded-lg shadow-lg"},ml={class:"flex items-center justify-between mb-3"},vl={class:"grid grid-cols-1 md:grid-cols-2 gap-3 max-h-60 overflow-y-auto"},fl=["onClick"],hl={class:"text-sm font-medium text-gray-800 mb-1"},bl={class:"text-xs text-gray-600 line-clamp-2"},yl={class:"flex flex-wrap gap-1 mb-2 p-2 bg-gray-100 rounded-md"},xl={key:0,class:"text-xs text-gray-500 mb-2 bg-gray-50 p-2 rounded border"},wl={key:0,class:"font-bold mx-1 bg-indigo-100 text-indigo-700 px-2 py-1 rounded"},kl={key:1,class:"italic mx-1 bg-indigo-100 text-indigo-700 px-2 py-1 rounded"},Il={key:2,class:"underline mx-1 bg-indigo-100 text-indigo-700 px-2 py-1 rounded"},_l={__name:"ConclusionSection",props:{inspectionId:{type:Number,required:!0},inspection:{type:Object,required:!0},form:{type:Object,required:!0}},emits:["updateConclusion"],setup(a,{emit:se}){const t=a,C=se,d=b(null),S=b(!1),f=b(!1),M=sa({bold:!1,italic:!1,underline:!1}),w=sa({flooded:"",collision:"",collision_severity:"",notes:""}),N=b([{id:1,name:"Kendaraan Normal",description:"Template untuk kendaraan dalam kondisi normal tanpa masalah signifikan (Ringkas)",content:`<p><strong>A. HASIL INSPEKSI:</strong></p>
- Kondisi kendaraan secara umum: <b>BAIK</b><br>
- Tidak ditemukan indikasi kerusakan signifikan<br>
- Semua sistem berfungsi dengan normal<br>`},{id:2,name:"Kendaraan Bekas Tabrakan Ringan",description:"Template untuk kendaraan dengan riwayat tabrakan ringan (Lengkap A, C, B)",content:`<p><strong>A. HASIL INSPEKSI:</strong></p>
- Kendaraan memiliki riwayat tabrakan dengan tingkat kerusakan: <b>RINGAN</b><br>
- Area yang terdampak: PERLU DIISI<br>
- Perbaikan yang dilakukan: PERLU DIISI<br>

<p><strong>C. ESTIMASI PERBAIKAN DAN PERAWATAN:</strong></p>
<p>* PERBAIKAN & PENGGANTIAN PART DALAM WAKTU DEKAT/ SEGERA:</p>
- PERLU DIISI<br>
- Estimasi Biaya: PERLU DIISI
<p>* PERBAIKAN & PENGGANTIAN PART TENGGANG WAKTU MINIMAL 6 BULAN S/D 1 TAHUN KE DEPAN:</p>
- PERLU DIISI<br>
- Estimasi Biaya: PERLU DIISI
<p><em>Note: Estimasi perbaikan bisa lebih murah/lebih mahal. Opsional tergantung lokasi/daerah dan ketersediaan spare part.</em></p>`},{id:3,name:"Kendaraan Bekas Banjir",description:"Template untuk kendaraan dengan riwayat terkena banjir (Lengkap A, C, B)",content:`<p><strong>A. HASIL INSPEKSI:</strong></p>
- Kendaraan memiliki riwayat terkena banjir<br>
- Tingkat paparan air: PERLU DIISI<br>
- Komponen yang terdampak: PERLU DIISI<br>

<p><strong>C. ESTIMASI PERBAIKAN DAN PERAWATAN:</strong></p>
<p>* PERBAIKAN & PENGGANTIAN PART DALAM WAKTU DEKAT/ SEGERA:</p>
- PERLU DIISI<br>
- Estimasi Biaya: PERLU DIISI
<p>* PERBAIKAN & PENGGANTIAN PART TENGGANG WAKTU MINIMAL 6 BULAN S/D 1 TAHUN KE DEPAN:</p>
- PERLU DIISI<br>
- Estimasi Biaya: PERLU DIISI
<p><em>Note: Estimasi perbaikan bisa lebih murah/lebih mahal. Opsional tergantung lokasi/daerah dan ketersediaan spare part.</em></p>`},{id:4,name:"Kendaraan dengan Multiple Issues",description:"Template untuk kendaraan dengan beberapa masalah umum (Lengkap A, C, B)",content:`<p><strong>A. HASIL INSPEKSI:</strong></p>
- Kondisi umum kendaraan: PERLU DIISI<br>
- Masalah utama yang ditemukan: PERLU DIISI<br>
- Komponen yang perlu perhatian: PERLU DIISI<br>
- Status Tabrak/Banjir: PERLU DIISI<br>

<p><strong>C. ESTIMASI PERBAIKAN DAN PERAWATAN:</strong></p>
<p>* PERBAIKAN & PENGGANTIAN PART DALAM WAKTU DEKAT/ SEGERA:</p>
- PERLU DIISI<br>
- Estimasi Biaya: PERLU DIISI
<p>* PERBAIKAN & PENGGANTIAN PART TENGGANG WAKTU MINIMAL 6 BULAN S/D 1 TAHUN KE DEPAN:</p>
- PERLU DIISI<br>
- Estimasi Biaya: PERLU DIISI
<p><em>Note: Estimasi perbaikan bisa lebih murah/lebih mahal. Opsional tergantung lokasi/daerah dan ketersediaan spare part.</em></p>`},{id:5,name:"Template Singkat",description:"Template ringkas untuk kesimpulan cepat (Ringkas)",content:`<p><strong>A. HASIL INSPEKSI:</strong></p>
- Status Keseluruhan Kendaraan: PERLU DIISI<br>
- Catatan Utama: PERLU DIISI<br>
- Status Tabrak/Banjir: PERLU DIISI`},{id:6,name:"Template Teknis Detail",description:"Template detail untuk laporan teknis lengkap (Lengkap A, C, B)",content:`<p><strong>A. LAPORAN HASIL INSPEKSI TEKNIS:</strong></p>
- Tanggal Inspeksi: PERLU DIISI<br>
- Kondisi Mesin: PERLU DIISI<br>
- Kondisi Transmisi: PERLU DIISI<br>
- Kondisi Suspensi: PERLU DIISI<br>
- Kondisi Rem: PERLU DIISI<br>
- Kondisi Body: PERLU DIISI<br>
- Kondisi Interior: PERLU DIISI<br>
- Kesimpulan Akhir: PERLU DIISI

<p><strong>C. ESTIMASI PERBAIKAN DAN PERAWATAN:</strong></p>
<p>* PERBAIKAN & PENGGANTIAN PART DALAM WAKTU DEKAT/ SEGERA:</p>
- PERLU DIISI<br>
- Estimasi Biaya: PERLU DIISI
<p>* PERBAIKAN & PENGGANTIAN PART TENGGANG WAKTU MINIMAL 6 BULAN S/D 1 TAHUN KE DEPAN:</p>
- PERLU DIISI<br>
- Estimasi Biaya: PERLU DIISI
<p><em>Note: Estimasi perbaikan bisa lebih murah/lebih mahal. Opsional tergantung lokasi/daerah dan ketersediaan spare part.</em></p>`}]);b(["{PLATE_NUMBER}","{CAR_NAME}","{INSPECTION_DATE}","{DAMAGED_AREA}","{REPAIR_DETAILS}","{WATER_LEVEL}","{AFFECTED_COMPONENTS}","{OVERALL_CONDITION}","{MAIN_ISSUES}","{ATTENTION_NEEDED}","{REPAIR_COST_ESTIMATE}","{RECOMMENDATION}","{OVERALL_STATUS}","{ADDITIONAL_NOTES}","{ENGINE_CONDITION}","{TRANSMISSION_CONDITION}","{SUSPENSION_CONDITION}","{BRAKE_CONDITION}","{BODY_CONDITION}","{INTERIOR_CONDITION}","{FINAL_CONCLUSION}"]);const D=s=>{if(!s)return{};if(typeof s=="string")try{return JSON.parse(s)||{}}catch(I){return console.error("Error parsing settings JSON:",I),{}}return typeof s=="object"&&s!==null?s:{}};te(()=>D(t.inspection.settings).conclusion||{});const E=[{value:"yes",label:"Ya"},{value:"no",label:"Tidak"}],L=[{value:"yes",label:"Ya"},{value:"no",label:"Tidak"}],ee=[{value:"light",label:"Ringan"},{value:"heavy",label:"Berat"}];st(()=>{c(),Pt(()=>{g(),U()})});const g=()=>{d.value&&w.notes&&(d.value.innerHTML=w.notes)},c=()=>{const I=D(t.inspection.settings).conclusion||{},F=t.form.conclusion||{};w.flooded=F.flooded||I.flooded||"",w.collision=F.collision||I.collision||"",w.collision_severity=F.collision_severity||I.collision_severity||"",w.notes=F.notes||t.inspection.notes||""},V=s=>{if(!d.value)return;let I=s.content;I=I.replace(/{PLATE_NUMBER}/g,t.inspection.plate_number||"[NOMOR_PLAT]").replace(/{CAR_NAME}/g,t.inspection.car_name||"[NAMA_MOBIL]").replace(/{INSPECTION_DATE}/g,new Date().toLocaleDateString("id-ID")).replace(/{FLOOD_STATUS}/g,w.flooded==="yes"?"Pernah terkena banjir":"Tidak pernah terkena banjir").replace(/{COLLISION_STATUS}/g,w.collision==="yes"?"Pernah mengalami tabrakan":"Tidak pernah mengalami tabrakan"),d.value.innerHTML=I,w.notes=I,f.value=!1,Pt(()=>{d.value.focus(),h()})},z=()=>{d.value&&(d.value.innerHTML="",w.notes="",h())},U=()=>{if(!d.value)return;const s=window.getSelection();s.rangeCount===0||s.isCollapsed||(M.bold=document.queryCommandState("bold"),M.italic=document.queryCommandState("italic"),M.underline=document.queryCommandState("underline"))},O=s=>{if(!d.value)return;d.value.focus();const I=M[s];switch(s){case"bold":document.execCommand("bold",!1,!I);break;case"italic":document.execCommand("italic",!1,!I);break;case"underline":document.execCommand("underline",!1,!I);break}setTimeout(()=>{U(),J()},10)},J=ia.debounce(()=>{d.value&&(w.notes=d.value.innerHTML,h())},200),B=s=>{s.preventDefault(),document.execCommand("insertParagraph",!1,null)},p=s=>{s.preventDefault();const I=(s.clipboardData||window.clipboardData).getData("text/plain");document.execCommand("insertText",!1,I)},X=()=>{S.value=!0},ne=()=>{S.value=!1,d.value&&(w.notes=d.value.innerHTML,h())},_=()=>{h()},h=()=>{const s={flooded:w.flooded,collision:w.collision,collision_severity:w.collision==="yes"?w.collision_severity:null,notes:w.notes};C("updateConclusion",s)};return we(()=>t.form.conclusion,s=>{s&&(w.flooded=s.flooded!==void 0?s.flooded:w.flooded,w.collision=s.collision!==void 0?s.collision:w.collision,w.collision_severity=s.collision_severity!==void 0?s.collision_severity:w.collision_severity,w.notes=s.notes!==void 0?s.notes:w.notes,d.value&&s.notes!==void 0&&d.value.innerHTML!==s.notes&&(d.value.innerHTML=s.notes))},{deep:!0,immediate:!0}),we([()=>w.flooded,()=>w.collision,()=>w.collision_severity,()=>w.notes],()=>{h()},{deep:!0}),(s,I)=>(n(),i("div",tl,[I[21]||(I[21]=e("div",{class:"bg-indigo-200 px-6 py-2 border-b flex items-center justify-between"},[e("h4",{class:"text-base font-semibold text-indigo-700"}," Detail Kendaraan ")],-1)),e("div",al,[I[10]||(I[10]=e("label",{class:"block text-sm font-medium text-gray-700 mb-3"},[Ne(" Apakah kendaraan pernah terkena banjir? "),e("span",{class:"text-red-500"},"*")],-1)),e("div",sl,[(n(),i(Ue,null,De(E,F=>e("label",{key:F.value,class:"cursor-pointer"},[Le(e("input",{type:"radio","onUpdate:modelValue":I[0]||(I[0]=ge=>w.flooded=ge),value:F.value,class:"hidden peer",onChange:_},null,40,nl),[[at,w.flooded]]),e("div",{class:re(["w-full px-4 py-3 border rounded-lg text-center transition-all duration-200 ease-in-out whitespace-nowrap text-sm font-medium",{"border-indigo-500 bg-indigo-50 text-indigo-700 shadow-sm scale-[0.98]":w.flooded===F.value,"border-gray-300 text-gray-700 hover:bg-gray-50 hover:border-gray-400":w.flooded!==F.value}])},q(F.label),3)])),64))])]),e("div",ol,[I[12]||(I[12]=e("label",{class:"block text-sm font-medium text-gray-700 mb-3"},[Ne(" Apakah kendaraan pernah mengalami tabrakan? "),e("span",{class:"text-red-500"},"*")],-1)),e("div",il,[(n(),i(Ue,null,De(L,F=>e("label",{key:F.value,class:"cursor-pointer"},[Le(e("input",{type:"radio","onUpdate:modelValue":I[1]||(I[1]=ge=>w.collision=ge),value:F.value,class:"hidden peer",onChange:_},null,40,ll),[[at,w.collision]]),e("div",{class:re(["w-full px-4 py-3 border rounded-lg text-center transition-all duration-200 ease-in-out whitespace-nowrap text-sm font-medium",{"border-indigo-500 bg-indigo-50 text-indigo-700 shadow-sm scale-[0.98]":w.collision===F.value,"border-gray-300 text-gray-700 hover:bg-gray-50 hover:border-gray-400":w.collision!==F.value}])},q(F.label),3)])),64))]),Me(gt,{"enter-active-class":"transition-all duration-300 ease-out","enter-from-class":"opacity-0 transform -translate-y-2","enter-to-class":"opacity-100 transform translate-y-0","leave-active-class":"transition-all duration-200 ease-in","leave-from-class":"opacity-100 transform translate-y-0","leave-to-class":"opacity-0 transform -translate-y-2"},{default:Fe(()=>[w.collision==="yes"?(n(),i("div",rl,[I[11]||(I[11]=e("label",{class:"block text-sm font-medium text-gray-700 mb-3"},[Ne("Tingkat kerusakan: "),e("span",{class:"text-red-500"},"*")],-1)),e("div",ul,[(n(),i(Ue,null,De(ee,F=>e("label",{key:F.value,class:"cursor-pointer"},[Le(e("input",{type:"radio","onUpdate:modelValue":I[2]||(I[2]=ge=>w.collision_severity=ge),value:F.value,class:"hidden peer",onChange:_},null,40,dl),[[at,w.collision_severity]]),e("div",{class:re(["w-full px-4 py-3 border rounded-lg text-center transition-all duration-200 ease-in-out whitespace-nowrap text-sm font-medium",{"border-blue-500 bg-blue-100 text-blue-700 shadow-sm scale-[0.98]":w.collision_severity===F.value,"border-gray-300 text-gray-700 hover:bg-white hover:border-gray-400":w.collision_severity!==F.value}])},q(F.label),3)])),64))])])):u("",!0)]),_:1})]),e("div",cl,[e("div",gl,[I[14]||(I[14]=e("label",{class:"block text-sm font-medium text-gray-700"},"Catatan Kesimpulan",-1)),e("button",{type:"button",onClick:I[3]||(I[3]=F=>f.value=!f.value),class:"flex items-center gap-2 px-3 py-2 text-sm bg-green-100 text-green-700 rounded-lg hover:bg-green-200 transition-all duration-200"},I[13]||(I[13]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})],-1),Ne(" Template ")]))]),Me(gt,{"enter-active-class":"transition-all duration-200 ease-out","enter-from-class":"opacity-0 transform scale-95","enter-to-class":"opacity-100 transform scale-100","leave-active-class":"transition-all duration-150 ease-in","leave-from-class":"opacity-100 transform scale-100","leave-to-class":"opacity-0 transform scale-95"},{default:Fe(()=>[f.value?(n(),i("div",pl,[e("div",ml,[I[16]||(I[16]=e("h5",{class:"text-sm font-semibold text-gray-700"},"Pilih Template Kesimpulan",-1)),e("button",{onClick:I[4]||(I[4]=F=>f.value=!1),class:"text-gray-400 hover:text-gray-600"},I[15]||(I[15]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),e("div",vl,[(n(!0),i(Ue,null,De(N.value,F=>(n(),i("button",{key:F.id,onClick:ge=>V(F),class:"p-3 text-left border border-gray-200 rounded-lg hover:border-indigo-300 hover:bg-indigo-50 transition-all duration-150"},[e("div",hl,q(F.name),1),e("div",bl,q(F.description),1)],8,fl))),128))])])):u("",!0)]),_:1}),e("div",yl,[e("button",{type:"button",onClick:I[5]||(I[5]=F=>O("bold")),class:re(["p-2 rounded transition-all duration-150 ease-in-out font-medium",M.bold?"bg-indigo-500 text-white shadow-sm":"hover:bg-gray-200 hover:shadow-sm"]),title:"Bold"},I[17]||(I[17]=[e("strong",null,"B",-1)]),2),e("button",{type:"button",onClick:I[6]||(I[6]=F=>O("italic")),class:re(["p-2 rounded transition-all duration-150 ease-in-out font-medium",M.italic?"bg-indigo-500 text-white shadow-sm":"hover:bg-gray-200 hover:shadow-sm"]),title:"Italic"},I[18]||(I[18]=[e("em",null,"I",-1)]),2),e("button",{type:"button",onClick:I[7]||(I[7]=F=>O("underline")),class:re(["p-2 rounded transition-all duration-150 ease-in-out font-medium",M.underline?"bg-indigo-500 text-white shadow-sm":"hover:bg-gray-200 hover:shadow-sm"]),title:"Underline"},I[19]||(I[19]=[e("u",null,"U",-1)]),2),e("button",{type:"button",onClick:I[8]||(I[8]=F=>z()),class:"p-2 rounded transition-all duration-150 ease-in-out hover:bg-gray-200 hover:shadow-sm ml-2",title:"Clear Template"}," 🗑️ Clear ")]),Me(gt,{"enter-active-class":"transition-all duration-200 ease-out","enter-from-class":"opacity-0 transform -translate-y-1","enter-to-class":"opacity-100 transform translate-y-0","leave-active-class":"transition-all duration-150 ease-in","leave-from-class":"opacity-100 transform translate-y-0","leave-to-class":"opacity-0 transform -translate-y-1"},{default:Fe(()=>[Object.values(M).some(F=>F)?(n(),i("div",xl,[I[20]||(I[20]=Ne(" Format aktif: ")),M.bold?(n(),i("span",wl,"Bold")):u("",!0),M.italic?(n(),i("span",kl,"Italic")):u("",!0),M.underline?(n(),i("span",Il,"Underline")):u("",!0)])):u("",!0)]),_:1}),e("div",{ref_key:"editorRef",ref:d,contenteditable:"true",class:re(["w-full min-h-[120px] p-3 rounded-md border border-gray-300 shadow-sm transition-all duration-200 ease-in-out prose max-w-none",{"bg-white border-gray-300":!S.value,"bg-blue-50 border-indigo-500 ring-2 ring-indigo-200":S.value}]),onInput:I[9]||(I[9]=(...F)=>ae(J)&&ae(J)(...F)),onBlur:ne,onFocus:X,onKeydown:wa(B,["enter"]),onPaste:p,onMouseup:U,onKeyup:U,placeholder:"Tambahkan catatan kesimpulan inspeksi di sini..."},null,34)])]))}},Sl=Ke(_l,[["__scopeId","data-v-6b429a8f"]]);function na(a,se){const t=b({x:se.x,y:se.y}),C=b(!1),d=b(null),S=b(!1),f=b({x:0,y:0});st(()=>{const L=localStorage.getItem(a);if(L)try{t.value=JSON.parse(L)}catch(ee){console.error("Error parsing saved position:",ee)}});const M=L=>{L.type.includes("touch")?(f.value.x=L.touches[0].clientX,f.value.y=L.touches[0].clientY):(f.value.x=L.clientX,f.value.y=L.clientY),d.value=setTimeout(()=>{S.value=!0,C.value=!0,console.log("Long press activated - drag mode ON")},900)},w=()=>{d.value&&(clearTimeout(d.value),d.value=null),S.value=!1};return{pos:t,dragging:C,startLongPress:M,cancelLongPress:w,onDrag:L=>{if(!C.value||!S.value)return;L.preventDefault();let ee,g;L.type.includes("touch")?(ee=L.touches[0].clientX,g=L.touches[0].clientY):(ee=L.clientX,g=L.clientY),t.value.x=ee-24,t.value.y=g-24},stopDrag:()=>{if(C.value&&S.value){console.log("Drag stopped - saving position"),C.value=!1,S.value=!1;try{localStorage.setItem(a,JSON.stringify(t.value))}catch(L){console.error("Error saving position:",L)}}w()},handleClick:L=>!C.value&&!S.value?(console.log("Regular click detected"),!0):(console.log("Click ignored - part of drag operation"),!1)}}const Cl={class:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100"},$l={key:0,class:"fixed inset-0 bg-black bg-opacity-40 z-30 pointer-events-none transition-opacity duration-200"},Al={key:0,xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",viewBox:"0 0 20 20",fill:"currentColor","stroke-width":"2"},Vl={key:1,xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",viewBox:"0 0 20 20",fill:"currentColor","stroke-width":"2"},Tl={key:0,class:"ml-2 inline-flex items-center justify-center w-5 h-5 text-xs rounded-full bg-green-500 text-white"},Ml=["onClick","data-category"],El={key:0,class:"ml-2 inline-flex items-center justify-center w-5 h-5 text-xs rounded-full bg-green-500 text-white"},Ul={key:0,class:"ml-2 inline-flex items-center justify-center w-5 h-5 text-xs rounded-full bg-green-500 text-white"},Nl={key:3,class:"fixed inset-0 z-30"},Dl={class:"mt-2 space-y-2"},Pl={key:0,class:"ml-2 inline-flex items-center justify-center w-5 h-5 text-xs rounded-full bg-green-500 text-white"},Ll=["onClick"],Rl={key:0,class:"ml-2 inline-flex items-center justify-center w-5 h-5 text-xs rounded-full bg-green-500 text-white"},jl={key:0,class:"ml-2 inline-flex items-center justify-center w-5 h-5 text-xs rounded-full bg-green-500 text-white"},Bl={key:0,class:"fixed top-4 left-1/2 transform -translate-x-1/2 bg-green-400 text-white px-4 py-2 rounded shadow-lg z-50"},Fl={class:"relative overflow-hidden"},Ol={key:"vehicle"},zl={key:"conclusion"},ql={key:1},Kl=["disabled"],Hl={key:0,class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},Gl={class:"space-y-4"},Wl={class:"relative"},Yl={class:"max-h-64 overflow-y-auto"},Zl={key:0,class:"text-center py-4 text-gray-500"},Jl=["onClick"],Xl={class:"font-medium text-gray-900"},Ql={class:"text-sm text-gray-500"},er={class:"text-xs text-gray-400 mt-1"},tr={key:0,class:"text-xs text-green-600 mt-1"},ar={key:3,class:"fixed bottom-20 left-1/2 transform -translate-x-1/2 bg-gray-800 text-white px-6 py-3 rounded-lg shadow-lg z-50 text-center"},sr={class:"p-4 space-y-6"},nr={class:"flex items-center justify-between"},or=["aria-checked"],ir={class:"space-y-2"},lr={class:"space-y-2"},rr={class:"space-y-2"},ur={class:"flex space-x-4"},dr={class:"flex items-center"},cr={class:"flex items-center"},gr={key:0,class:"space-y-2"},pr={class:"flex space-x-4"},mr={class:"flex items-center"},vr={class:"flex items-center"},fr={key:1,class:"space-y-2"},hr={__name:"IndexLocal",props:{inspection:Object,inspectionId:Object,category:Object,car:Object,appMenus:Array,damagePoints:Array,existingResults:Object,existingImages:Object,CarDetail:Array,allInspections:Array},setup(a){var Kt,Ht,Gt,Wt,Yt,Zt,Jt,Xt,Qt,ea;const se=r=>{if(!r)return{};if(typeof r=="string")try{return JSON.parse(r)||{}}catch(o){return console.error("Error parsing settings JSON:",o),{}}return typeof r=="object"&&r!==null?r:{}},t=a,C=te(()=>`inspection_data_${t.inspection.id}`),d=te(()=>`swipe_toggle_${t.inspection.id}`),S=te(()=>`image_source_${t.inspection.id}`),f=te(()=>`active_category_${t.inspection.id}`),M=()=>{try{const r=localStorage.getItem(C.value);return r?JSON.parse(r):{}}catch(r){return console.error("Error reading local storage:",r),{}}},w=r=>{try{localStorage.setItem(C.value,JSON.stringify(r))}catch(o){console.error("Error writing to local storage:",o)}},N=()=>{try{localStorage.removeItem(C.value),localStorage.removeItem(d.value),localStorage.removeItem(S.value),localStorage.removeItem(f.value)}catch(r){console.error("Error clearing local storage:",r)}},D=()=>{try{const r=localStorage.getItem(d.value);return r?JSON.parse(r):!0}catch(r){return console.error("Error reading swipe toggle state:",r),!0}},E=r=>{try{localStorage.setItem(d.value,JSON.stringify(r))}catch(o){console.error("Error writing swipe toggle state:",o)}},L=()=>{try{return localStorage.getItem(S.value)||"all"}catch(r){return console.error("Error reading image source setting:",r),"all"}},ee=r=>{try{localStorage.setItem(S.value,r)}catch(o){console.error("Error writing image source setting:",o)}},g=te(()=>`camera_quality_${t.inspection.id}`),c=()=>{try{return localStorage.getItem(g.value)||"HD_Std"}catch(r){return console.error("Error reading camera quality setting:",r),"HD_Std"}},V=r=>{try{localStorage.setItem(g.value,r)}catch(o){console.error("Error writing camera quality setting:",o)}},z=()=>{try{return localStorage.getItem(f.value)||K.value[0]}catch(r){return console.error("Error reading active category:",r),K.value[0]}},U=r=>{try{localStorage.setItem(f.value,r)}catch(o){console.error("Error writing active category:",o)}},O=b(((Ht=(Kt=t.category)==null?void 0:Kt.settings)==null?void 0:Ht.menu_model)||"horizontal"),J=b(((Wt=(Gt=t.category)==null?void 0:Gt.settings)==null?void 0:Wt.position)||"top"),B=b(!1),p=b(!1),{pos:X,dragging:ne,startLongPress:_,cancelLongPress:h,onDrag:s,stopDrag:I,handleClick:F}=na("toggleMenuButtonPos",{x:window.innerWidth-80,y:20}),ge=r=>{F(r)&&G()},G=()=>{B.value=!B.value},W=()=>{B.value=!1},oe=r=>r?"bg-gradient-to-r from-indigo-700 to-sky-600 text-white":"bg-gray-50 hover:bg-gray-100 text-gray-700",{pos:de,dragging:P,startLongPress:T,cancelLongPress:R,onDrag:H,stopDrag:Q,handleClick:ie}=na("damageButtonPos",{x:window.innerWidth-80,y:window.innerHeight-80}),be=r=>{ie(r)&&(me.value=!0)},me=b(!1),Ae=b(!1),_e=b(""),ye=b(null),Se=b(""),Ve=b(""),Ie=b(""),l=b(!1),v=b(null),y=(r,o)=>{l.value=!0,v.value=o,Nt.visit(r,{onFinish:()=>{l.value=!1,v.value=null}})},k=te(()=>t.appMenus.some(r=>r.input_type==="damage")),K=te(()=>["vehicle",...t.appMenus.map(r=>String(r.id)),"conclusion"]),Y=b(K.value[0]),fe=b(0),ve=te(()=>{if(Y.value==="vehicle"||Y.value==="conclusion")return null;const r=t.appMenus.find(o=>String(o.id)===Y.value);return r?{...r,points:ue(r.menu_point,r.input_type==="damage")}:null}),ue=(r,o)=>o?(r||[]).filter(pe=>{const le=pe.inspection_point_id;return vt(le)}):r||[],x=b({plate_number:t.inspection.plate_number,car_id:t.inspection.car_id,car_name:t.inspection.car_name}),m=b({notes:t.inspection.overall_note||"",flooded:((Zt=(Yt=se(t.inspection.settings))==null?void 0:Yt.conclusion)==null?void 0:Zt.flooded)||null,collision:((Xt=(Jt=se(t.inspection.settings))==null?void 0:Jt.conclusion)==null?void 0:Xt.collision)||null,collision_severity:((ea=(Qt=se(t.inspection.settings))==null?void 0:Qt.conclusion)==null?void 0:ea.collision_severity)||null}),A=oa((()=>{const r=[...t.appMenus.flatMap(We=>We.menu_point||[]),...t.damagePoints||[]],o={},pe={};r.forEach(We=>{const ze=We.inspection_point_id,Be=t.existingResults[ze];o[ze]={status:(Be==null?void 0:Be.status)||"",note:(Be==null?void 0:Be.note)||""},pe[ze]=t.existingImages[ze]||[]});const le=M(),xe={...o,...le.results||{}},ke={...pe,...le.images||{}},Re={...x.value,...le.vehicleDetails||{}},Ce=le.overall_note!==void 0?le.overall_note:t.inspection.overall_note||"";return{inspection_id:t.inspection.id,results:xe,images:ke,overall_note:Ce,plate_number:Re.plate_number,car_id:Re.car_id,car_name:Re.car_name}})());we(A,r=>{w({results:r.results,images:r.images,overall_note:r.overall_note,vehicleDetails:x.value,conclusion:m.value})},{deep:!0}),we(x,r=>{A.plate_number=r.plate_number,A.car_id=r.car_id,A.car_name=r.car_name},{deep:!0}),we(m,r=>{A.overall_note=r.notes},{deep:!0});const ce=Lt("vehicleFeatures",b(null));ce.value=JSON.parse(localStorage.getItem("vehicle_features")||"{}"),Dt("vehicleFeatures",ce);const $e=r=>{var xe,ke;const o=r.settings;if(!Ee(r))return!0;const pe=(xe=t.car)==null?void 0:xe.transmission,le=(ke=t.car)==null?void 0:ke.fuel_type;return!(o.transmission&&Array.isArray(o.transmission)&&o.transmission.length>0&&pe&&!o.transmission.includes(pe)||o.fuel_type&&o.fuel_type.trim()!==""&&le&&o.fuel_type!==le||o.rear_door&&(!ce.value||!ce.value.rear_door)||o.pick_up&&(!ce.value||!ce.value.pick_up)||o.box&&(!ce.value||!ce.value.box))},Ee=r=>{const o=r.settings;return!!(o!=null&&o.transmission&&Array.isArray(o.transmission)&&o.transmission.length>0||o!=null&&o.fuel_type&&o.fuel_type.trim()!==""||o!=null&&o.rear_door||o!=null&&o.pick_up||o!=null&&o.box)},Te=b(!1),He=r=>{Te.value=r},pt=b(!1),kt=r=>{pt.value=r},Ze=te(()=>{var xe;const r=x.value.plate_number&&/^[A-Z]{1,2}\d{1,4}[A-Z]{0,3}$/.test(x.value.plate_number),o=!!((xe=x.value.car_name)!=null&&xe.trim()),pe=!pt.value,le=!Te.value;return r&&o&&pe&&le}),mt=te(()=>{if(!_e.value.trim())return t.damagePoints||[];const r=_e.value.toLowerCase().trim();return(t.damagePoints||[]).filter(o=>{var pe,le,xe,ke,Re;return((le=(pe=o.inspection_point)==null?void 0:pe.name)==null?void 0:le.toLowerCase().includes(r))||((ke=(xe=o.inspection_point)==null?void 0:xe.description)==null?void 0:ke.toLowerCase().includes(r))||((Re=ft(o))==null?void 0:Re.toLowerCase().includes(r))})}),vt=r=>{const o=A.results[r]&&(A.results[r].status||A.results[r].note),pe=A.images[r]&&A.images[r].length>0;return o||pe},ft=r=>{var o;return((o=r.inspection_point.component)==null?void 0:o.name)||"Komponen Tidak Diketahui"},It=r=>A.results[r]||null,nt=()=>{var ke;const r=m.value,o=!!r.flooded,pe=!!r.collision,le=r.collision==="yes"?!!r.collision_severity:!0,xe=!!((ke=r.notes)!=null&&ke.trim());return o&&pe&&le&&xe},ht=te(()=>({flooded:m.value.flooded||null,collision:m.value.collision||null,collision_severity:m.value.collision_severity||null,note:m.value.notes||null,isComplete:nt()})),bt=te(()=>{const r=Ze.value,o=t.appMenus.every(le=>ot(le)),pe=nt();return r&&o&&pe}),ot=r=>r.input_type==="damage"?!0:r.id==="conclusion"?nt():r.id==="vehicle"?Ze.value:(ue(r.menu_point,!1)||[]).filter(le=>le.is_default&&$e(le)).every(le=>{var Ce,We,ze,Be,yt,xt;const xe=A.results[le.inspection_point_id],ke=A.images[le.inspection_point_id];if(!xe)return!1;const Re=se(le.settings);switch(le.input_type){case"text":case"number":case"date":case"account":case"textarea":return!!((Ce=xe.note)!=null&&Ce.trim());case"select":case"radio":if(!xe.status)return!1;const Ye=(We=Re.radios)==null?void 0:We.find(tt=>tt.value===xe.status);return!(Ye!=null&&Ye.settings&&(Ye.settings.show_textarea&&!((ze=xe.note)!=null&&ze.trim())||Ye.settings.show_image_upload&&(ke==null?void 0:ke.length)===0));case"imageTOradio":if((ke==null?void 0:ke.length)===0||!xe.status)return!1;const j=(Be=Re.radios)==null?void 0:Be.find(tt=>tt.value===xe.status);return!(j!=null&&j.settings&&j.settings.show_textarea&&j.settings.required&&!((yt=xe.note)!=null&&yt.trim()));case"image":return(ke==null?void 0:ke.length)>0;default:return!!xe.status||!!((xt=xe.note)!=null&&xt.trim())}}),je=b(!0),Ge=b(L()),Oe=b(c()),it=b(!1),_t=()=>{console.log("Opening settings modal"),it.value=!0},lt=()=>{console.log("Closing settings modal"),it.value=!1},Je=b(null),rt=b([]),Xe=b(0),Qe=b(!1);Dt("imageSourceSetting",Ge),Dt("cameraQualitySetting",Oe);const St=()=>{je.value=!je.value,E(je.value)},Ct=()=>{ee(Ge.value),console.log("Image source setting updated to:",Ge.value)},$t=()=>{V(Oe.value),console.log("Camera quality setting updated to:",Oe.value)},et=()=>{Je.value&&Pt(()=>{const r=Je.value.querySelector(`[data-category="${Y.value}"]`);if(!r)return;const o=Je.value,pe=o.clientWidth,le=r.offsetLeft,xe=r.clientWidth,ke=le-pe/2+xe/2;o.scrollTo({left:ke,behavior:"smooth"})})},At=()=>Xe.value===0?(Xe.value=1,Qe.value=!0,setTimeout(()=>{Xe.value=0,Qe.value=!1},2e3),window.history.pushState(null,null,window.location.href),!1):(Xe.value=0,Qe.value=!1,Nt.visit(route("job.index")),!0),Vt=()=>{window.history.state===null&&window.history.replaceState({isBackButtonControlled:!0},""),window.history.pushState({isBackButtonControlled:!0},""),window.addEventListener("popstate",r=>{r.state&&r.state.isBackButtonControlled&&(r.preventDefault(),At())})},Tt=r=>{ye.value=r;const o=r.inspection_point_id,pe=A.results[o]||{};Se.value=pe.status||"",Ve.value=pe.note||"",me.value=!1,Ae.value=!0},Mt=r=>{ye.value&&(A.images[ye.value.inspection_point_id]=r)},Et=()=>{if(ye.value){const r=ye.value.inspection_point_id;A.results[r]={...A.results[r],status:Se.value,note:Ve.value},Ie.value="Data berhasil disimpan di lokal!",setTimeout(()=>Ie.value="",1e3)}Rt()},Ut=({pointId:r,type:o,value:pe})=>{var le;(le=A.results[r])!=null&&le.hasOwnProperty(o)&&(A.results[r][o]=pe)},Z=async r=>{if(r&&confirm("Apakah kamu yakin ingin menghapus data ini?")){try{await Nt.post(route("inspections.delete-result"),{inspection_id:t.inspection.id,point_id:r},{preserveScroll:!0,preserveState:!0,onSuccess:()=>{A.results[r]&&(A.results[r]={status:"",note:""}),A.images[r]&&(A.images[r]=[]),Ie.value="Data berhasil dihapus!",setTimeout(()=>Ie.value="",1e3)},onError:o=>{console.error("Error menghapus hasil:",o)}})}catch(o){console.error("Error menghapus hasil:",o)}Rt()}},$=r=>{Object.assign(x.value,r),He(!0)},pa=r=>{console.log("Save car details locally:",r)},ma=r=>{console.log("Received conclusion data from child:",r),m.value={...m.value,...r},A.overall_note=r.notes||"",console.log("Conclusion state updated:",m.value)},va=()=>{if(!bt.value){alert("Harap lengkapi semua menu inspeksi termasuk kesimpulan sebelum submit final");return}if(!confirm("Apakah Anda yakin ingin mengirim semua data inspeksi? Data lokal akan dihapus setelah berhasil dikirim."))return;p.value=!0;const r={...A.data(),overall_note:m.value.notes,conclusion:{notes:m.value.notes,flooded:m.value.flooded,collision:m.value.collision,collision_severity:m.value.collision_severity}};Nt.post(route("inspections.final-submit-local",{id:t.inspection.id}),r,{preserveScroll:!0,onSuccess:()=>{N()},onError:o=>{console.error("Kesalahan pengiriman:",o),p.value=!1}})},fa=({pointId:r,imageId:o})=>{A.images[r]&&(A.images[r]=A.images[r].filter(pe=>pe.id!==o))},zt=()=>{me.value=!1,_e.value=""},Rt=()=>{Ae.value=!1,ye.value=null,Se.value="",Ve.value=""},ha=()=>{},ut=r=>{Y.value=r,U(r),et()},qt=r=>{let o=fe.value+r;o>=0&&o<K.value.length&&(Y.value=K.value[o],et())},ba=()=>{let r=0,o=0,pe=null;const le=Ce=>{je.value&&(r=Ce.changedTouches[0].screenX)},xe=Ce=>{je.value&&(o=Ce.changedTouches[0].screenX,ke())},ke=()=>{if(!je.value)return;const Ce=250;o<r-Ce?qt(1):o>r+Ce&&qt(-1)},Re=()=>{const Ce=document.querySelector(".relative.overflow-hidden");return Ce&&(Ce.addEventListener("touchstart",le,{passive:!0}),Ce.addEventListener("touchend",xe,{passive:!0})),()=>{Ce&&(Ce.removeEventListener("touchstart",le),Ce.removeEventListener("touchend",xe))}};return pe=Re(),we(je,Ce=>{pe&&pe(),Ce&&(pe=Re())}),()=>{pe&&pe()}};return we(Y,(r,o)=>{et()}),we(Y,r=>{fe.value=K.value.indexOf(r)}),we(Oe,r=>{$t()}),st(()=>{const r=M();if(je.value=D(),Ge.value=L(),Oe.value=c(),r.vehicleDetails&&(Object.assign(x.value,r.vehicleDetails),A.plate_number=r.vehicleDetails.plate_number,A.car_id=r.vehicleDetails.car_id,A.car_name=r.vehicleDetails.car_name),r.conclusion)console.log("Loading conclusion from localStorage:",r.conclusion),Object.assign(m.value,r.conclusion),A.overall_note=r.conclusion.notes||"";else{const le=se(t.inspection.settings).conclusion||{};m.value={notes:t.inspection.notes||"",flooded:le.flooded||"",collision:le.collision||"",collision_severity:le.collision_severity||""},A.overall_note=t.inspection.notes||""}r.results&&Object.assign(A.results,r.results),r.images&&Object.assign(A.images,r.images);const o=z();K.value.includes(o)?Y.value=o:(Y.value=K.value[0],U(K.value[0])),ba(),Vt(),setTimeout(()=>{et()},100)}),(r,o)=>{var pe,le,xe,ke,Re,Ce,We,ze,Be,yt,xt,Ye;return n(),i("div",Cl,[ae(P)||ae(ne)?(n(),i("div",$l)):u("",!0),O.value==="vertical"?(n(),i("button",{key:1,onMousedown:o[0]||(o[0]=(...j)=>ae(_)&&ae(_)(...j)),onMouseup:o[1]||(o[1]=(...j)=>ae(I)&&ae(I)(...j)),onMouseleave:o[2]||(o[2]=(...j)=>ae(h)&&ae(h)(...j)),onMousemove:o[3]||(o[3]=(...j)=>ae(s)&&ae(s)(...j)),onTouchstart:o[4]||(o[4]=(...j)=>ae(_)&&ae(_)(...j)),onTouchend:o[5]||(o[5]=(...j)=>ae(I)&&ae(I)(...j)),onTouchmove:o[6]||(o[6]=(...j)=>ae(s)&&ae(s)(...j)),onClick:ge,class:"fixed z-40 p-4 bg-gradient-to-r from-indigo-700 to-sky-600 text-white border shadow-lg rounded-full hover:shadow-xl transition",style:qe({left:ae(X).x+"px",top:ae(X).y+"px"}),"aria-label":"Toggle vertical menu"},[B.value?(n(),i("svg",Vl,o[31]||(o[31]=[e("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"},null,-1)]))):(n(),i("svg",Al,o[30]||(o[30]=[e("path",{"fill-rule":"evenodd",d:"M3 5h14v2H3V5zm0 4h10v2H3V9zm0 4h6v2H3v-2z","clip-rule":"evenodd"},null,-1)])))],36)):u("",!0),O.value==="horizontal"?(n(),i("div",{key:2,class:re(["z-10 bg-white shadow-sm",{"sticky top-0 mb-2":J.value==="top","fixed bottom-0 left-0 right-0":J.value==="bottom"}])},[e("div",{ref_key:"menuContainer",ref:Je,class:"flex overflow-x-auto scrollbar-hide py-3 px-4 space-x-2 menu-container",onScroll:ha},[e("button",{onClick:_t,class:"flex-shrink-0 p-2 rounded-full text-gray-600 hover:text-gray-800 hover:bg-gray-100 transition-colors duration-200",title:"Pengaturan"},o[32]||(o[32]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})],-1)])),e("button",{ref_key:"menuItems",ref:rt,onClick:o[7]||(o[7]=j=>ut("vehicle")),class:re(["flex-shrink-0 px-4 py-2 rounded-full text-sm font-medium whitespace-nowrap transition-colors duration-200 menu-item",{"bg-gradient-to-r from-indigo-700 to-sky-600 shadow-lg text-white":Y.value==="vehicle","bg-gray-100 text-gray-700 hover:bg-gray-200":Y.value!=="vehicle"}]),"data-category":"vehicle"},[o[33]||(o[33]=Ne(" Detail Kendaraan ")),Ze.value?(n(),i("span",Tl," ✓ ")):u("",!0)],2),(n(!0),i(Ue,null,De(a.appMenus,j=>(n(),i("button",{key:j.id,ref_for:!0,ref_key:"menuItems",ref:rt,onClick:tt=>ut(String(j.id)),class:re(["flex-shrink-0 px-4 py-2 rounded-full text-sm font-medium whitespace-nowrap transition-colors duration-200 menu-item",{"bg-gradient-to-r from-indigo-700 to-sky-600 shadow-lg text-white":Y.value===String(j.id),"bg-gray-100 text-gray-700 hover:bg-gray-200":Y.value!==String(j.id)}]),"data-category":String(j.id)},[Ne(q(j.name)+" ",1),ot(j)?(n(),i("span",El," ✓ ")):u("",!0)],10,Ml))),128)),e("button",{ref_key:"menuItems",ref:rt,onClick:o[8]||(o[8]=j=>ut("conclusion")),class:re(["flex-shrink-0 px-4 py-2 rounded-full text-sm font-medium whitespace-nowrap transition-colors duration-200 menu-item",{"bg-gradient-to-r from-indigo-700 to-sky-600 shadow-lg text-white":Y.value==="conclusion","bg-gray-100 text-gray-700 hover:bg-gray-200":Y.value!=="conclusion"}]),"data-category":"conclusion"},[o[34]||(o[34]=Ne(" Kesimpulan ")),ht.value.isComplete?(n(),i("span",Ul," ✓ ")):u("",!0)],2)],544)],2)):u("",!0),O.value==="vertical"&&B.value?(n(),i("div",Nl,[e("div",{class:"absolute inset-0 bg-black bg-opacity-30",onClick:W}),e("div",{class:re(["absolute z-40 w-60 bg-white rounded-xl shadow-xl p-2 max-h-[75vh] overflow-y-auto",{"top-16 right-4":J.value==="top-right","top-16 left-4":J.value==="top-left","bottom-16 right-4":J.value==="bottom-right","bottom-16 left-4":J.value==="bottom-left"}])},[e("div",{class:"flex items-center justify-between px-2 py-1 border-b"},[o[35]||(o[35]=e("div",{class:"text-sm font-semibold"},"Pilih Menu",-1)),e("button",{onClick:W,class:"text-xs text-gray-500 hover:text-gray-700"},"Tutup")]),e("div",Dl,[e("button",{onClick:o[9]||(o[9]=j=>{ut("vehicle"),W()}),class:re([oe(Y.value==="vehicle"),"w-full flex items-center justify-between px-3 py-2 rounded-md text-sm"])},[o[36]||(o[36]=e("span",null,"Detail Kendaraan",-1)),Ze.value?(n(),i("span",Pl,"✓")):u("",!0)],2),(n(!0),i(Ue,null,De(a.appMenus,j=>(n(),i("button",{key:`vmenu-${j.id}`,onClick:()=>{ut(String(j.id)),W()},class:re([oe(Y.value===String(j.id)),"w-full flex items-center justify-between px-3 py-2 rounded-md text-sm"])},[e("span",null,q(j.name),1),ot(j)?(n(),i("span",Rl,"✓")):u("",!0)],10,Ll))),128)),e("button",{onClick:o[10]||(o[10]=j=>{ut("conclusion"),W()}),class:re([oe(Y.value==="conclusion"),"w-full flex items-center justify-between px-3 py-2 rounded-md text-sm"])},[o[37]||(o[37]=e("span",null,"Kesimpulan",-1)),ht.value.isComplete?(n(),i("span",jl,"✓")):u("",!0)],2)])],2)])):u("",!0),e("div",{class:re(["max-w-7xl mx-auto px-2 sm:px-4 lg:px-6 py-1",{"pb-4 pt-1":J.value==="top","pb-20 pt-4":J.value==="bottom","pb-4 pt-4":O.value==="vertical"}])},[Me(gt,{name:"fade"},{default:Fe(()=>[Ie.value?(n(),i("div",Bl,q(Ie.value),1)):u("",!0)]),_:1}),e("div",Fl,[Me(gt,{name:"category-slide",mode:"out-in"},{default:Fe(()=>[Y.value==="vehicle"?(n(),i("div",Ol,[Me(hs,{inspection:a.inspection,CarDetail:a.CarDetail,allInspections:t.allInspections,onUpdateVehicle:$,onSaveCarDetails:pa,"onUpdate:validation":kt,"onUpdate:hasUnsavedChanges":He},null,8,["inspection","CarDetail","allInspections"])])):ve.value&&Y.value!=="conclusion"?(n(),i("div",{key:ve.value.id},[Me(el,{category:ve.value,"inspection-id":a.inspection.id,car:t.car,form:ae(A),head:O.value,onUpdateResult:Ut,onHapusPoint:Z,onRemoveImage:fa},null,8,["category","inspection-id","car","form","head"])])):Y.value==="conclusion"?(n(),i("div",zl,[Me(Sl,{form:{conclusion:m.value},"inspection-id":a.inspection.id,inspection:a.inspection,settings:a.inspection.settings||{},onUpdateConclusion:ma},null,8,["form","inspection-id","inspection","settings"])])):u("",!0)]),_:1})]),Y.value==="conclusion"?(n(),i("div",{key:0,class:re(["flex justify-end gap-4 mt-2 p-4 bg-white rounded-xl shadow-md",{"mb-4":J.value==="top","mb-20":J.value==="bottom"}])},[Me(ae(ka),{href:r.route("inspections.pending",a.inspectionId),as:"button",type:"button",disabled:l.value&&v.value==="pending",onClick:o[11]||(o[11]=ct(j=>y(r.route("inspections.pending",a.inspectionId),"pending"),["prevent"])),class:"inline-flex items-center justify-center px-3 py-1.5 text-sm font-medium rounded-md shadow-sm bg-yellow-500 text-white hover:bg-yellow-600 transition disabled:opacity-50 disabled:cursor-not-allowed"},{default:Fe(()=>[l.value&&v.value==="pending"?(n(),i(Ue,{key:0},[o[38]||(o[38]=e("svg",{class:"animate-spin h-4 w-4 text-white mr-2",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)),o[39]||(o[39]=e("span",null,"Memproses...",-1))],64)):(n(),i("span",ql,"Tunda"))]),_:1},8,["href","disabled"]),e("button",{type:"button",onClick:va,disabled:!bt.value||p.value,class:"w-full inline-flex items-center justify-center px-6 py-3 border border-transparent text-base font-medium rounded-md shadow-sm bg-gradient-to-r from-indigo-700 to-sky-600 shadow-lg text-white focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition duration-150 ease-in-out disabled:opacity-50 disabled:cursor-not-allowed"},[p.value?(n(),i("svg",Hl,o[40]||(o[40]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):u("",!0),e("span",null,q(p.value?"Mengirim...":"Final Kirim Inspeksi"),1)],8,Kl)],2)):u("",!0),k.value?(n(),i("button",{key:1,onMousedown:o[12]||(o[12]=(...j)=>ae(T)&&ae(T)(...j)),onMouseup:o[13]||(o[13]=(...j)=>ae(Q)&&ae(Q)(...j)),onMouseleave:o[14]||(o[14]=(...j)=>ae(R)&&ae(R)(...j)),onMousemove:o[15]||(o[15]=(...j)=>ae(H)&&ae(H)(...j)),onTouchstart:o[16]||(o[16]=(...j)=>ae(T)&&ae(T)(...j)),onTouchend:o[17]||(o[17]=(...j)=>ae(Q)&&ae(Q)(...j)),onTouchmove:o[18]||(o[18]=(...j)=>ae(H)&&ae(H)(...j)),onClick:be,class:"fixed z-5 p-4 bg-gradient-to-r from-indigo-700 to-sky-600 text-white rounded-full shadow-lg",style:qe({left:ae(de).x+"px",top:ae(de).y+"px"})},o[41]||(o[41]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 4v16m8-8H4"})],-1)]),36)):u("",!0),Me(ga,{show:me.value,title:"Cari Point Inspeksi",subtitle:"Pilih point inspeksi untuk ditambahkan",onClose:zt},{default:Fe(()=>[e("button",{onClick:zt,class:"absolute top-4 right-4 text-gray-400 hover:text-gray-600 transition-colors z-10"},o[42]||(o[42]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])),e("div",Gl,[e("div",Wl,[Le(e("input",{"onUpdate:modelValue":o[19]||(o[19]=j=>_e.value=j),type:"text",placeholder:"Cari point inspeksi...",class:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"},null,512),[[dt,_e.value]]),o[43]||(o[43]=e("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[e("svg",{class:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})])],-1))]),e("div",Yl,[mt.value.length===0?(n(),i("div",Zl," Tidak ada point yang ditemukan ")):u("",!0),(n(!0),i(Ue,null,De(mt.value,j=>{var tt,ta;return n(),i("button",{key:j.id,onClick:br=>Tt(j),class:"w-full text-left p-3 border-b border-gray-200 hover:bg-gray-50 transition-colors"},[e("div",Xl,q((tt=j.inspection_point)==null?void 0:tt.name),1),e("div",Ql,q((ta=j.inspection_point)==null?void 0:ta.description),1),e("div",er,q(ft(j)),1),vt(j.inspection_point_id)?(n(),i("div",tr," ✓ Sudah ada data ")):u("",!0)],8,Jl)}),128))])])]),_:1},8,["show"]),Ae.value?(n(),Pe(Ot,{key:(pe=ye.value)==null?void 0:pe.id,show:Ae.value,title:((xe=(le=ye.value)==null?void 0:le.inspection_point)==null?void 0:xe.name)||"Detail Point",subtitle:(Re=(ke=ye.value)==null?void 0:ke.inspection_point)==null?void 0:Re.description,name:`point-${(Ce=ye.value)==null?void 0:Ce.id}`,"inspection-id":a.inspection.id,"point-id":(We=ye.value)==null?void 0:We.inspection_point_id,settings:((ze=ye.value)==null?void 0:ze.settings)||{},options:((yt=(Be=ye.value)==null?void 0:Be.settings)==null?void 0:yt.radios)||[],"selected-Point":ye.value,"selected-value":Se.value,"images-value":ae(A).images[(xt=ye.value)==null?void 0:xt.inspection_point_id],"notes-value":Ve.value,point:ye.value,"existing-data":It((Ye=ye.value)==null?void 0:Ye.inspection_point_id),"onUpdate:selectedValue":o[20]||(o[20]=j=>Se.value=j),"onUpdate:notesValue":o[21]||(o[21]=j=>Ve.value=j),"onUpdate:imagesValue":Mt,onSave:Et,onClose:Rt,onHapus:Z},null,8,["show","title","subtitle","name","inspection-id","point-id","settings","options","selected-Point","selected-value","images-value","notes-value","point","existing-data"])):u("",!0),Qe.value?(n(),i("div",ar,o[44]||(o[44]=[e("p",{class:"text-sm"},"Tekan sekali lagi untuk keluar dari inspeksi",-1),e("p",{class:"text-xs text-gray-300 mt-1"},"Data inspeksi telah disimpan secara lokal",-1)]))):u("",!0),it.value?(n(),i("div",{key:4,class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",onClick:lt},[e("div",{class:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4 max-h-[80vh] overflow-y-auto",onClick:o[29]||(o[29]=ct(()=>{},["stop"]))},[e("div",{class:"flex items-center justify-between p-4 border-b"},[o[46]||(o[46]=e("h3",{class:"text-lg font-semibold text-gray-900"},"Pengaturan Inspeksi",-1)),e("button",{onClick:lt,class:"text-gray-400 hover:text-gray-600 transition-colors"},o[45]||(o[45]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),e("div",sr,[e("div",nr,[o[47]||(o[47]=e("div",null,[e("label",{class:"text-sm font-medium text-gray-700"},"Swipe Gesture"),e("p",{class:"text-xs text-gray-500"},"Aktifkan navigasi dengan geser")],-1)),e("button",{onClick:St,type:"button",class:re(["relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",je.value?"bg-indigo-600":"bg-gray-200"]),role:"switch","aria-checked":je.value},[e("span",{"aria-hidden":"true",class:re(["pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out",je.value?"translate-x-5":"translate-x-0"])},null,2)],10,or)]),e("div",ir,[o[49]||(o[49]=e("label",{class:"text-sm font-medium text-gray-700"},"Sumber Gambar",-1)),Le(e("select",{"onUpdate:modelValue":o[22]||(o[22]=j=>Ge.value=j),onChange:Ct,class:"w-full text-sm border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"},o[48]||(o[48]=[e("option",{value:"all"},"Tanya",-1),e("option",{value:"camera"},"Kamera",-1),e("option",{value:"gallery"},"Galeri",-1)]),544),[[Bt,Ge.value]])]),e("div",lr,[o[51]||(o[51]=e("label",{class:"text-sm font-medium text-gray-700"},"Kualitas Kamera",-1)),Le(e("select",{"onUpdate:modelValue":o[23]||(o[23]=j=>Oe.value=j),class:"w-full text-sm border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"},o[50]||(o[50]=[e("option",{value:"HD_Std"},"HD Std",-1),e("option",{value:"4K"},"4K Rtc",-1),e("option",{value:"HD"},"HD Rtc",-1),e("option",{value:"SD"},"SD Rtc",-1)]),512),[[Bt,Oe.value]])]),e("div",rr,[o[54]||(o[54]=e("label",{class:"text-sm font-medium text-gray-700"},"Mode Menu",-1)),e("div",ur,[e("label",dr,[Le(e("input",{type:"radio","onUpdate:modelValue":o[24]||(o[24]=j=>O.value=j),value:"horizontal",class:"text-indigo-600 focus:ring-indigo-500"},null,512),[[at,O.value]]),o[52]||(o[52]=e("span",{class:"ml-2 text-sm text-gray-700"},"Scroll samping",-1))]),e("label",cr,[Le(e("input",{type:"radio","onUpdate:modelValue":o[25]||(o[25]=j=>O.value=j),value:"vertical",class:"text-indigo-600 focus:ring-indigo-500"},null,512),[[at,O.value]]),o[53]||(o[53]=e("span",{class:"ml-2 text-sm text-gray-700"},"Menu Ngambang",-1))])])]),O.value==="horizontal"?(n(),i("div",gr,[o[57]||(o[57]=e("label",{class:"text-sm font-medium text-gray-700"},"Posisi Menu",-1)),e("div",pr,[e("label",mr,[Le(e("input",{type:"radio","onUpdate:modelValue":o[26]||(o[26]=j=>J.value=j),value:"top",class:"text-indigo-600 focus:ring-indigo-500"},null,512),[[at,J.value]]),o[55]||(o[55]=e("span",{class:"ml-2 text-sm text-gray-700"},"Atas",-1))]),e("label",vr,[Le(e("input",{type:"radio","onUpdate:modelValue":o[27]||(o[27]=j=>J.value=j),value:"bottom",class:"text-indigo-600 focus:ring-indigo-500"},null,512),[[at,J.value]]),o[56]||(o[56]=e("span",{class:"ml-2 text-sm text-gray-700"},"Bawah",-1))])])])):u("",!0),O.value==="vertical"?(n(),i("div",fr,[o[59]||(o[59]=e("label",{class:"text-sm font-medium text-gray-700"},"Posisi Menu Vertikal",-1)),Le(e("select",{"onUpdate:modelValue":o[28]||(o[28]=j=>J.value=j),class:"w-full text-sm border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"},o[58]||(o[58]=[e("option",{value:"top-right"},"Atas Kanan",-1),e("option",{value:"top-left"},"Atas Kiri",-1),e("option",{value:"bottom-right"},"Bawah Kanan",-1),e("option",{value:"bottom-left"},"Bawah Kiri",-1)]),512),[[Bt,J.value]])])):u("",!0)]),e("div",{class:"flex justify-end p-4 border-t bg-gray-50"},[e("button",{onClick:lt,class:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2"}," Tutup ")])])])):u("",!0)],2)])}}},Cr=Ke(hr,[["__scopeId","data-v-4458efc6"]]);export{Cr as default};
