import{q as C,r as g,x as Xt,G as B,L as Zt,M as Te,g as eo,c,o as u,b as f,d as o,u as a,N as dt,n as S,f as Pe,F as ge,m as Ie,k as z,j as to,w as ve,t as O,T as gt,y as vt,S as oo,z as V,A as no,I as Ee,J as pe,D as so,W as me}from"./vendor-g77w9U1W.js";import"./lodash-CGXsUT3p.js";import{V as io,C as lo,a as ao,B as ro,_ as uo}from"./ConclusionSection-NTTSSxh3.js";import{u as pt}from"./useDraggableButton-BzEK2Xk5.js";import{_ as co}from"./app-BtmydV17.js";import"./PrimaryButton-CrKKsBb9.js";import"./ActionMessage-C9w22vKV.js";const go={class:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100"},vo={key:0,class:"fixed inset-0 bg-black bg-opacity-40 z-30 pointer-events-none transition-opacity duration-200"},po={key:0,xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",viewBox:"0 0 20 20",fill:"currentColor","stroke-width":"2"},mo={key:1,xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",viewBox:"0 0 20 20",fill:"currentColor","stroke-width":"2"},fo={key:0,class:"ml-2 inline-flex items-center justify-center w-5 h-5 text-xs rounded-full bg-green-500 text-white"},yo=["onClick","data-category"],ho={key:0,class:"ml-2 inline-flex items-center justify-center w-5 h-5 text-xs rounded-full bg-green-500 text-white"},xo={key:0,class:"ml-2 inline-flex items-center justify-center w-5 h-5 text-xs rounded-full bg-green-500 text-white"},bo={key:3,class:"fixed inset-0 z-30"},wo={class:"mt-2 space-y-2"},ko={key:0,class:"ml-2 inline-flex items-center justify-center w-5 h-5 text-xs rounded-full bg-green-500 text-white"},Co=["onClick"],So={key:0,class:"ml-2 inline-flex items-center justify-center w-5 h-5 text-xs rounded-full bg-green-500 text-white"},_o={key:0,class:"ml-2 inline-flex items-center justify-center w-5 h-5 text-xs rounded-full bg-green-500 text-white"},Mo={key:0,class:"fixed top-4 left-1/2 transform -translate-x-1/2 bg-green-400 text-white px-4 py-2 rounded shadow-lg z-50"},Do={class:"relative overflow-hidden"},To={key:"vehicle"},Po={key:"conclusion"},Io={key:1},Eo=["disabled"],Lo={key:0,class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},Vo={class:"space-y-4"},jo={class:"relative"},Ao={class:"max-h-64 overflow-y-auto"},Bo={key:0,class:"text-center py-4 text-gray-500"},zo=["onClick"],Oo={class:"font-medium text-gray-900"},Uo={class:"text-sm text-gray-500"},Ko={class:"text-xs text-gray-400 mt-1"},No={key:0,class:"text-xs text-green-600 mt-1"},$o={key:3,class:"fixed bottom-20 left-1/2 transform -translate-x-1/2 bg-gray-800 text-white px-6 py-3 rounded-lg shadow-lg z-50 text-center"},Ho={class:"p-4 space-y-6"},Ro={class:"flex items-center justify-between"},Fo=["aria-checked"],qo={class:"space-y-2"},Go={class:"space-y-2"},Wo={class:"space-y-2"},Jo={class:"flex space-x-4"},Qo={class:"flex items-center"},Yo={class:"flex items-center"},Xo={key:0,class:"space-y-2"},Zo={class:"flex space-x-4"},en={class:"flex items-center"},tn={class:"flex items-center"},on={key:1,class:"space-y-2"},nn={__name:"IndexLocal",props:{inspection:Object,inspectionId:Object,category:Object,car:Object,appMenus:Array,damagePoints:Array,existingResults:Object,existingImages:Object,CarDetail:Array,allInspections:Array},setup(w){var et,tt,ot,nt,st,it,lt,at,rt,ut;const $=t=>{if(!t)return{};if(typeof t=="string")try{return JSON.parse(t)||{}}catch(e){return console.error("Error parsing settings JSON:",e),{}}return typeof t=="object"&&t!==null?t:{}},r=w,fe=C(()=>`inspection_data_${r.inspection.id}`),ye=C(()=>`swipe_toggle_${r.inspection.id}`),he=C(()=>`image_source_${r.inspection.id}`),xe=C(()=>`active_category_${r.inspection.id}`),Le=()=>{try{const t=localStorage.getItem(fe.value);return t?JSON.parse(t):{}}catch(t){return console.error("Error reading local storage:",t),{}}},mt=t=>{try{localStorage.setItem(fe.value,JSON.stringify(t))}catch(e){console.error("Error writing to local storage:",e)}},ft=()=>{try{localStorage.removeItem(fe.value),localStorage.removeItem(ye.value),localStorage.removeItem(he.value),localStorage.removeItem(xe.value)}catch(t){console.error("Error clearing local storage:",t)}},yt=()=>{try{const t=localStorage.getItem(ye.value);return t?JSON.parse(t):!0}catch(t){return console.error("Error reading swipe toggle state:",t),!0}},ht=t=>{try{localStorage.setItem(ye.value,JSON.stringify(t))}catch(e){console.error("Error writing swipe toggle state:",e)}},Ve=()=>{try{return localStorage.getItem(he.value)||"all"}catch(t){return console.error("Error reading image source setting:",t),"all"}},xt=t=>{try{localStorage.setItem(he.value,t)}catch(e){console.error("Error writing image source setting:",e)}},je=C(()=>`camera_quality_${r.inspection.id}`),Ae=()=>{try{return localStorage.getItem(je.value)||"HD"}catch(t){return console.error("Error reading camera quality setting:",t),"HD"}},bt=t=>{try{localStorage.setItem(je.value,t)}catch(e){console.error("Error writing camera quality setting:",e)}},wt=()=>{try{return localStorage.getItem(xe.value)||T.value[0]}catch(t){return console.error("Error reading active category:",t),T.value[0]}},Be=t=>{try{localStorage.setItem(xe.value,t)}catch(e){console.error("Error writing active category:",e)}},_=g(((tt=(et=r.category)==null?void 0:et.settings)==null?void 0:tt.menu_model)||"horizontal"),x=g(((nt=(ot=r.category)==null?void 0:ot.settings)==null?void 0:nt.position)||"top"),H=g(!1),R=g(!1),{pos:ze,dragging:kt,startLongPress:Y,cancelLongPress:Oe,onDrag:X,stopDrag:Z,handleClick:Ct}=pt("toggleMenuButtonPos",{x:window.innerWidth-80,y:20}),St=t=>{Ct(t)&&_t()},_t=()=>{H.value=!H.value},F=()=>{H.value=!1},be=t=>t?"bg-gradient-to-r from-indigo-700 to-sky-600 text-white":"bg-gray-50 hover:bg-gray-100 text-gray-700",{pos:Ue,dragging:Mt,startLongPress:ee,cancelLongPress:Ke,onDrag:te,stopDrag:oe,handleClick:Dt}=pt("damageButtonPos",{x:window.innerWidth-80,y:window.innerHeight-80}),Tt=t=>{Dt(t)&&(ne.value=!0)},ne=g(!1),se=g(!1),q=g(""),h=g(null),G=g(""),W=g(""),U=g(""),ie=g(!1),le=g(null),Pt=(t,e)=>{ie.value=!0,le.value=e,me.visit(t,{onFinish:()=>{ie.value=!1,le.value=null}})},It=C(()=>r.appMenus.some(t=>t.input_type==="damage")),T=C(()=>["vehicle",...r.appMenus.map(t=>String(t.id)),"conclusion"]),p=g(T.value[0]),Ne=g(0),we=C(()=>{if(p.value==="vehicle"||p.value==="conclusion")return null;const t=r.appMenus.find(e=>String(e.id)===p.value);return t?{...t,points:$e(t.menu_point,t.input_type==="damage")}:null}),$e=(t,e)=>e?(t||[]).filter(i=>{const s=i.inspection_point_id;return Ge(s)}):t||[],I=g({plate_number:r.inspection.plate_number,car_id:r.inspection.car_id,car_name:r.inspection.car_name}),y=g({notes:r.inspection.overall_note||"",flooded:((it=(st=$(r.inspection.settings))==null?void 0:st.conclusion)==null?void 0:it.flooded)||null,collision:((at=(lt=$(r.inspection.settings))==null?void 0:lt.conclusion)==null?void 0:at.collision)||null,collision_severity:((ut=(rt=$(r.inspection.settings))==null?void 0:rt.conclusion)==null?void 0:ut.collision_severity)||null}),l=Xt((()=>{const t=[...r.appMenus.flatMap(P=>P.menu_point||[]),...r.damagePoints||[]],e={},i={};t.forEach(P=>{const D=P.inspection_point_id,k=r.existingResults[D];e[D]={status:(k==null?void 0:k.status)||"",note:(k==null?void 0:k.note)||""},i[D]=r.existingImages[D]||[]});const s=Le(),d={...e,...s.results||{}},v={...i,...s.images||{}},b={...I.value,...s.vehicleDetails||{}},m=s.overall_note!==void 0?s.overall_note:r.inspection.overall_note||"";return{inspection_id:r.inspection.id,results:d,images:v,overall_note:m,plate_number:b.plate_number,car_id:b.car_id,car_name:b.car_name}})());B(l,t=>{mt({results:t.results,images:t.images,overall_note:t.overall_note,vehicleDetails:I.value,conclusion:y.value})},{deep:!0}),B(I,t=>{l.plate_number=t.plate_number,l.car_id=t.car_id,l.car_name=t.car_name},{deep:!0}),B(y,t=>{l.overall_note=t.notes},{deep:!0});const E=Zt("vehicleFeatures",g(null));E.value=JSON.parse(localStorage.getItem("vehicle_features")||"{}"),Te("vehicleFeatures",E);const Et=t=>{var d,v;const e=t.settings;if(!Lt(t))return!0;const i=(d=r.car)==null?void 0:d.transmission,s=(v=r.car)==null?void 0:v.fuel_type;return!(e.transmission&&Array.isArray(e.transmission)&&e.transmission.length>0&&i&&!e.transmission.includes(i)||e.fuel_type&&e.fuel_type.trim()!==""&&s&&e.fuel_type!==s||e.rear_door&&(!E.value||!E.value.rear_door)||e.pick_up&&(!E.value||!E.value.pick_up)||e.box&&(!E.value||!E.value.box))},Lt=t=>{const e=t.settings;return!!(e!=null&&e.transmission&&Array.isArray(e.transmission)&&e.transmission.length>0||e!=null&&e.fuel_type&&e.fuel_type.trim()!==""||e!=null&&e.rear_door||e!=null&&e.pick_up||e!=null&&e.box)},He=g(!1),Re=t=>{He.value=t},Fe=g(!1),Vt=t=>{Fe.value=t},ae=C(()=>{var d;const t=I.value.plate_number&&/^[A-Z]{1,2}\d{1,4}[A-Z]{0,3}$/.test(I.value.plate_number),e=!!((d=I.value.car_name)!=null&&d.trim()),i=!Fe.value,s=!He.value;return t&&e&&i&&s}),qe=C(()=>{if(!q.value.trim())return r.damagePoints||[];const t=q.value.toLowerCase().trim();return(r.damagePoints||[]).filter(e=>{var i,s,d,v,b;return((s=(i=e.inspection_point)==null?void 0:i.name)==null?void 0:s.toLowerCase().includes(t))||((v=(d=e.inspection_point)==null?void 0:d.description)==null?void 0:v.toLowerCase().includes(t))||((b=We(e))==null?void 0:b.toLowerCase().includes(t))})}),Ge=t=>{const e=l.results[t]&&(l.results[t].status||l.results[t].note),i=l.images[t]&&l.images[t].length>0;return e||i},We=t=>{var e;return((e=t.inspection_point.component)==null?void 0:e.name)||"Komponen Tidak Diketahui"},jt=t=>l.results[t]||null,ke=()=>{var v;const t=y.value,e=!!t.flooded,i=!!t.collision,s=t.collision==="yes"?!!t.collision_severity:!0,d=!!((v=t.notes)!=null&&v.trim());return e&&i&&s&&d},Je=C(()=>({flooded:y.value.flooded||null,collision:y.value.collision||null,collision_severity:y.value.collision_severity||null,note:y.value.notes||null,isComplete:ke()})),Qe=C(()=>{const t=ae.value,e=r.appMenus.every(s=>Ce(s)),i=ke();return t&&e&&i}),Ce=t=>t.input_type==="damage"?!0:t.id==="conclusion"?ke():t.id==="vehicle"?ae.value:($e(t.menu_point,!1)||[]).filter(s=>s.is_default&&Et(s)).every(s=>{var m,P,D,k,J,Q;const d=l.results[s.inspection_point_id],v=l.images[s.inspection_point_id];if(!d)return!1;const b=$(s.settings);switch(s.input_type){case"text":case"number":case"date":case"account":case"textarea":return!!((m=d.note)!=null&&m.trim());case"select":case"radio":if(!d.status)return!1;const L=(P=b.radios)==null?void 0:P.find(A=>A.value===d.status);return!(L!=null&&L.settings&&(L.settings.show_textarea&&!((D=d.note)!=null&&D.trim())||L.settings.show_image_upload&&(v==null?void 0:v.length)===0));case"imageTOradio":if((v==null?void 0:v.length)===0||!d.status)return!1;const n=(k=b.radios)==null?void 0:k.find(A=>A.value===d.status);return!(n!=null&&n.settings&&n.settings.show_textarea&&n.settings.required&&!((J=d.note)!=null&&J.trim()));case"image":return(v==null?void 0:v.length)>0;default:return!!d.status||!!((Q=d.note)!=null&&Q.trim())}}),M=g(!0),K=g(Ve()),j=g(Ae()),Se=g(!1),At=()=>{console.log("Opening settings modal"),Se.value=!0},_e=()=>{console.log("Closing settings modal"),Se.value=!1},re=g(null),Me=g([]),ue=g(0),ce=g(!1);Te("imageSourceSetting",K),Te("cameraQualitySetting",j);const Bt=()=>{M.value=!M.value,ht(M.value)},zt=()=>{xt(K.value),console.log("Image source setting updated to:",K.value)},Ot=()=>{bt(j.value),console.log("Camera quality setting updated to:",j.value)},de=()=>{re.value&&so(()=>{const t=re.value.querySelector(`[data-category="${p.value}"]`);if(!t)return;const e=re.value,i=e.clientWidth,s=t.offsetLeft,d=t.clientWidth,v=s-i/2+d/2;e.scrollTo({left:v,behavior:"smooth"})})},Ut=()=>ue.value===0?(ue.value=1,ce.value=!0,setTimeout(()=>{ue.value=0,ce.value=!1},2e3),window.history.pushState(null,null,window.location.href),!1):(ue.value=0,ce.value=!1,me.visit(route("job.index")),!0),Kt=()=>{window.history.state===null&&window.history.replaceState({isBackButtonControlled:!0},""),window.history.pushState({isBackButtonControlled:!0},""),window.addEventListener("popstate",t=>{t.state&&t.state.isBackButtonControlled&&(t.preventDefault(),Ut())})},Nt=t=>{h.value=t;const e=t.inspection_point_id,i=l.results[e]||{};G.value=i.status||"",W.value=i.note||"",ne.value=!1,se.value=!0},$t=t=>{h.value&&(l.images[h.value.inspection_point_id]=t)},Ht=()=>{if(h.value){const t=h.value.inspection_point_id;l.results[t]={...l.results[t],status:G.value,note:W.value},U.value="Data berhasil disimpan di lokal!",setTimeout(()=>U.value="",1e3)}De()},Rt=({pointId:t,type:e,value:i})=>{var s;(s=l.results[t])!=null&&s.hasOwnProperty(e)&&(l.results[t][e]=i)},Ye=async t=>{if(t&&confirm("Apakah kamu yakin ingin menghapus data ini?")){try{await me.post(route("inspections.delete-result"),{inspection_id:r.inspection.id,point_id:t},{preserveScroll:!0,preserveState:!0,onSuccess:()=>{l.results[t]&&(l.results[t]={status:"",note:""}),l.images[t]&&(l.images[t]=[]),U.value="Data berhasil dihapus!",setTimeout(()=>U.value="",1e3)},onError:e=>{console.error("Error menghapus hasil:",e)}})}catch(e){console.error("Error menghapus hasil:",e)}De()}},Ft=t=>{Object.assign(I.value,t),Re(!0)},qt=t=>{console.log("Save car details locally:",t)},Gt=t=>{console.log("Received conclusion data from child:",t),y.value={...y.value,...t},l.overall_note=t.notes||"",console.log("Conclusion state updated:",y.value)},Wt=()=>{if(!Qe.value){alert("Harap lengkapi semua menu inspeksi termasuk kesimpulan sebelum submit final");return}if(!confirm("Apakah Anda yakin ingin mengirim semua data inspeksi? Data lokal akan dihapus setelah berhasil dikirim."))return;R.value=!0;const t={...l.data(),overall_note:y.value.notes,conclusion:{notes:y.value.notes,flooded:y.value.flooded,collision:y.value.collision,collision_severity:y.value.collision_severity}};me.post(route("inspections.final-submit-local",{id:r.inspection.id}),t,{preserveScroll:!0,onSuccess:()=>{ft()},onError:e=>{console.error("Kesalahan pengiriman:",e),R.value=!1}})},Jt=({pointId:t,imageId:e})=>{l.images[t]&&(l.images[t]=l.images[t].filter(i=>i.id!==e))},Xe=()=>{ne.value=!1,q.value=""},De=()=>{se.value=!1,h.value=null,G.value="",W.value=""},Qt=()=>{},N=t=>{p.value=t,Be(t),de()},Ze=t=>{let e=Ne.value+t;e>=0&&e<T.value.length&&(p.value=T.value[e],de())},Yt=()=>{let t=0,e=0,i=null;const s=m=>{M.value&&(t=m.changedTouches[0].screenX)},d=m=>{M.value&&(e=m.changedTouches[0].screenX,v())},v=()=>{if(!M.value)return;const m=250;e<t-m?Ze(1):e>t+m&&Ze(-1)},b=()=>{const m=document.querySelector(".relative.overflow-hidden");return m&&(m.addEventListener("touchstart",s,{passive:!0}),m.addEventListener("touchend",d,{passive:!0})),()=>{m&&(m.removeEventListener("touchstart",s),m.removeEventListener("touchend",d))}};return i=b(),B(M,m=>{i&&i(),m&&(i=b())}),()=>{i&&i()}};return B(p,(t,e)=>{de()}),B(p,t=>{Ne.value=T.value.indexOf(t)}),B(j,t=>{Ot()}),eo(()=>{const t=Le();if(M.value=yt(),K.value=Ve(),j.value=Ae(),t.vehicleDetails&&(Object.assign(I.value,t.vehicleDetails),l.plate_number=t.vehicleDetails.plate_number,l.car_id=t.vehicleDetails.car_id,l.car_name=t.vehicleDetails.car_name),t.conclusion)console.log("Loading conclusion from localStorage:",t.conclusion),Object.assign(y.value,t.conclusion),l.overall_note=t.conclusion.notes||"";else{const s=$(r.inspection.settings).conclusion||{};y.value={notes:r.inspection.notes||"",flooded:s.flooded||"",collision:s.collision||"",collision_severity:s.collision_severity||""},l.overall_note=r.inspection.notes||""}t.results&&Object.assign(l.results,t.results),t.images&&Object.assign(l.images,t.images);const e=wt();T.value.includes(e)?p.value=e:(p.value=T.value[0],Be(T.value[0])),Yt(),Kt(),setTimeout(()=>{de()},100)}),(t,e)=>{var i,s,d,v,b,m,P,D,k,J,Q,L;return u(),c("div",go,[a(Mt)||a(kt)?(u(),c("div",vo)):f("",!0),_.value==="vertical"?(u(),c("button",{key:1,onMousedown:e[0]||(e[0]=(...n)=>a(Y)&&a(Y)(...n)),onMouseup:e[1]||(e[1]=(...n)=>a(Z)&&a(Z)(...n)),onMouseleave:e[2]||(e[2]=(...n)=>a(Oe)&&a(Oe)(...n)),onMousemove:e[3]||(e[3]=(...n)=>a(X)&&a(X)(...n)),onTouchstart:e[4]||(e[4]=(...n)=>a(Y)&&a(Y)(...n)),onTouchend:e[5]||(e[5]=(...n)=>a(Z)&&a(Z)(...n)),onTouchmove:e[6]||(e[6]=(...n)=>a(X)&&a(X)(...n)),onClick:St,class:"fixed z-40 p-4 bg-gradient-to-r from-indigo-700 to-sky-600 text-white border shadow-lg rounded-full hover:shadow-xl transition",style:dt({left:a(ze).x+"px",top:a(ze).y+"px"}),"aria-label":"Toggle vertical menu"},[H.value?(u(),c("svg",mo,e[31]||(e[31]=[o("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"},null,-1)]))):(u(),c("svg",po,e[30]||(e[30]=[o("path",{"fill-rule":"evenodd",d:"M3 5h14v2H3V5zm0 4h10v2H3V9zm0 4h6v2H3v-2z","clip-rule":"evenodd"},null,-1)])))],36)):f("",!0),_.value==="horizontal"?(u(),c("div",{key:2,class:S(["z-10 bg-white shadow-sm",{"sticky top-0 mb-2":x.value==="top","fixed bottom-0 left-0 right-0":x.value==="bottom"}])},[o("div",{ref_key:"menuContainer",ref:re,class:"flex overflow-x-auto scrollbar-hide py-3 px-4 space-x-2 menu-container",onScroll:Qt},[o("button",{onClick:At,class:"flex-shrink-0 p-2 rounded-full text-gray-600 hover:text-gray-800 hover:bg-gray-100 transition-colors duration-200",title:"Pengaturan"},e[32]||(e[32]=[o("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),o("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})],-1)])),o("button",{ref_key:"menuItems",ref:Me,onClick:e[7]||(e[7]=n=>N("vehicle")),class:S(["flex-shrink-0 px-4 py-2 rounded-full text-sm font-medium whitespace-nowrap transition-colors duration-200 menu-item",{"bg-gradient-to-r from-indigo-700 to-sky-600 shadow-lg text-white":p.value==="vehicle","bg-gray-100 text-gray-700 hover:bg-gray-200":p.value!=="vehicle"}]),"data-category":"vehicle"},[e[33]||(e[33]=Pe(" Detail Kendaraan ")),ae.value?(u(),c("span",fo," ✓ ")):f("",!0)],2),(u(!0),c(ge,null,Ie(w.appMenus,n=>(u(),c("button",{key:n.id,ref_for:!0,ref_key:"menuItems",ref:Me,onClick:A=>N(String(n.id)),class:S(["flex-shrink-0 px-4 py-2 rounded-full text-sm font-medium whitespace-nowrap transition-colors duration-200 menu-item",{"bg-gradient-to-r from-indigo-700 to-sky-600 shadow-lg text-white":p.value===String(n.id),"bg-gray-100 text-gray-700 hover:bg-gray-200":p.value!==String(n.id)}]),"data-category":String(n.id)},[Pe(O(n.name)+" ",1),Ce(n)?(u(),c("span",ho," ✓ ")):f("",!0)],10,yo))),128)),o("button",{ref_key:"menuItems",ref:Me,onClick:e[8]||(e[8]=n=>N("conclusion")),class:S(["flex-shrink-0 px-4 py-2 rounded-full text-sm font-medium whitespace-nowrap transition-colors duration-200 menu-item",{"bg-gradient-to-r from-indigo-700 to-sky-600 shadow-lg text-white":p.value==="conclusion","bg-gray-100 text-gray-700 hover:bg-gray-200":p.value!=="conclusion"}]),"data-category":"conclusion"},[e[34]||(e[34]=Pe(" Kesimpulan ")),Je.value.isComplete?(u(),c("span",xo," ✓ ")):f("",!0)],2)],544)],2)):f("",!0),_.value==="vertical"&&H.value?(u(),c("div",bo,[o("div",{class:"absolute inset-0 bg-black bg-opacity-30",onClick:F}),o("div",{class:S(["absolute z-40 w-60 bg-white rounded-xl shadow-xl p-2 max-h-[75vh] overflow-y-auto",{"top-16 right-4":x.value==="top-right","top-16 left-4":x.value==="top-left","bottom-16 right-4":x.value==="bottom-right","bottom-16 left-4":x.value==="bottom-left"}])},[o("div",{class:"flex items-center justify-between px-2 py-1 border-b"},[e[35]||(e[35]=o("div",{class:"text-sm font-semibold"},"Pilih Menu",-1)),o("button",{onClick:F,class:"text-xs text-gray-500 hover:text-gray-700"},"Tutup")]),o("div",wo,[o("button",{onClick:e[9]||(e[9]=n=>{N("vehicle"),F()}),class:S([be(p.value==="vehicle"),"w-full flex items-center justify-between px-3 py-2 rounded-md text-sm"])},[e[36]||(e[36]=o("span",null,"Detail Kendaraan",-1)),ae.value?(u(),c("span",ko,"✓")):f("",!0)],2),(u(!0),c(ge,null,Ie(w.appMenus,n=>(u(),c("button",{key:`vmenu-${n.id}`,onClick:()=>{N(String(n.id)),F()},class:S([be(p.value===String(n.id)),"w-full flex items-center justify-between px-3 py-2 rounded-md text-sm"])},[o("span",null,O(n.name),1),Ce(n)?(u(),c("span",So,"✓")):f("",!0)],10,Co))),128)),o("button",{onClick:e[10]||(e[10]=n=>{N("conclusion"),F()}),class:S([be(p.value==="conclusion"),"w-full flex items-center justify-between px-3 py-2 rounded-md text-sm"])},[e[37]||(e[37]=o("span",null,"Kesimpulan",-1)),Je.value.isComplete?(u(),c("span",_o,"✓")):f("",!0)],2)])],2)])):f("",!0),o("div",{class:S(["max-w-7xl mx-auto px-2 sm:px-4 lg:px-6 py-1",{"pb-4 pt-1":x.value==="top","pb-20 pt-4":x.value==="bottom","pb-4 pt-4":_.value==="vertical"}])},[z(gt,{name:"fade"},{default:ve(()=>[U.value?(u(),c("div",Mo,O(U.value),1)):f("",!0)]),_:1}),o("div",Do,[z(gt,{name:"category-slide",mode:"out-in"},{default:ve(()=>[p.value==="vehicle"?(u(),c("div",To,[z(io,{inspection:w.inspection,CarDetail:w.CarDetail,allInspections:r.allInspections,onUpdateVehicle:Ft,onSaveCarDetails:qt,"onUpdate:validation":Vt,"onUpdate:hasUnsavedChanges":Re},null,8,["inspection","CarDetail","allInspections"])])):we.value&&p.value!=="conclusion"?(u(),c("div",{key:we.value.id},[z(lo,{category:we.value,"inspection-id":w.inspection.id,car:r.car,form:a(l),head:_.value,onUpdateResult:Rt,onHapusPoint:Ye,onRemoveImage:Jt},null,8,["category","inspection-id","car","form","head"])])):p.value==="conclusion"?(u(),c("div",Po,[z(ao,{form:{conclusion:y.value},"inspection-id":w.inspection.id,inspection:w.inspection,settings:w.inspection.settings||{},onUpdateConclusion:Gt},null,8,["form","inspection-id","inspection","settings"])])):f("",!0)]),_:1})]),p.value==="conclusion"?(u(),c("div",{key:0,class:S(["flex justify-end gap-4 mt-2 p-4 bg-white rounded-xl shadow-md",{"mb-4":x.value==="top","mb-20":x.value==="bottom"}])},[z(a(oo),{href:t.route("inspections.pending",w.inspectionId),as:"button",type:"button",disabled:ie.value&&le.value==="pending",onClick:e[11]||(e[11]=vt(n=>Pt(t.route("inspections.pending",w.inspectionId),"pending"),["prevent"])),class:"inline-flex items-center justify-center px-3 py-1.5 text-sm font-medium rounded-md shadow-sm bg-yellow-500 text-white hover:bg-yellow-600 transition disabled:opacity-50 disabled:cursor-not-allowed"},{default:ve(()=>[ie.value&&le.value==="pending"?(u(),c(ge,{key:0},[e[38]||(e[38]=o("svg",{class:"animate-spin h-4 w-4 text-white mr-2",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[o("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),o("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)),e[39]||(e[39]=o("span",null,"Memproses...",-1))],64)):(u(),c("span",Io,"Tunda"))]),_:1},8,["href","disabled"]),o("button",{type:"button",onClick:Wt,disabled:!Qe.value||R.value,class:"w-full inline-flex items-center justify-center px-6 py-3 border border-transparent text-base font-medium rounded-md shadow-sm bg-gradient-to-r from-indigo-700 to-sky-600 shadow-lg text-white focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition duration-150 ease-in-out disabled:opacity-50 disabled:cursor-not-allowed"},[R.value?(u(),c("svg",Lo,e[40]||(e[40]=[o("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),o("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):f("",!0),o("span",null,O(R.value?"Mengirim...":"Final Kirim Inspeksi"),1)],8,Eo)],2)):f("",!0),It.value?(u(),c("button",{key:1,onMousedown:e[12]||(e[12]=(...n)=>a(ee)&&a(ee)(...n)),onMouseup:e[13]||(e[13]=(...n)=>a(oe)&&a(oe)(...n)),onMouseleave:e[14]||(e[14]=(...n)=>a(Ke)&&a(Ke)(...n)),onMousemove:e[15]||(e[15]=(...n)=>a(te)&&a(te)(...n)),onTouchstart:e[16]||(e[16]=(...n)=>a(ee)&&a(ee)(...n)),onTouchend:e[17]||(e[17]=(...n)=>a(oe)&&a(oe)(...n)),onTouchmove:e[18]||(e[18]=(...n)=>a(te)&&a(te)(...n)),onClick:Tt,class:"fixed z-5 p-4 bg-gradient-to-r from-indigo-700 to-sky-600 text-white rounded-full shadow-lg",style:dt({left:a(Ue).x+"px",top:a(Ue).y+"px"})},e[41]||(e[41]=[o("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 4v16m8-8H4"})],-1)]),36)):f("",!0),z(ro,{show:ne.value,title:"Cari Point Inspeksi",subtitle:"Pilih point inspeksi untuk ditambahkan",onClose:Xe},{default:ve(()=>[o("button",{onClick:Xe,class:"absolute top-4 right-4 text-gray-400 hover:text-gray-600 transition-colors z-10"},e[42]||(e[42]=[o("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])),o("div",Vo,[o("div",jo,[V(o("input",{"onUpdate:modelValue":e[19]||(e[19]=n=>q.value=n),type:"text",placeholder:"Cari point inspeksi...",class:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"},null,512),[[no,q.value]]),e[43]||(e[43]=o("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[o("svg",{class:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})])],-1))]),o("div",Ao,[qe.value.length===0?(u(),c("div",Bo," Tidak ada point yang ditemukan ")):f("",!0),(u(!0),c(ge,null,Ie(qe.value,n=>{var A,ct;return u(),c("button",{key:n.id,onClick:ln=>Nt(n),class:"w-full text-left p-3 border-b border-gray-200 hover:bg-gray-50 transition-colors"},[o("div",Oo,O((A=n.inspection_point)==null?void 0:A.name),1),o("div",Uo,O((ct=n.inspection_point)==null?void 0:ct.description),1),o("div",Ko,O(We(n)),1),Ge(n.inspection_point_id)?(u(),c("div",No," ✓ Sudah ada data ")):f("",!0)],8,zo)}),128))])])]),_:1},8,["show"]),se.value?(u(),to(uo,{key:(i=h.value)==null?void 0:i.id,show:se.value,title:((d=(s=h.value)==null?void 0:s.inspection_point)==null?void 0:d.name)||"Detail Point",subtitle:(b=(v=h.value)==null?void 0:v.inspection_point)==null?void 0:b.description,name:`point-${(m=h.value)==null?void 0:m.id}`,"inspection-id":w.inspection.id,"point-id":(P=h.value)==null?void 0:P.inspection_point_id,settings:((D=h.value)==null?void 0:D.settings)||{},options:((J=(k=h.value)==null?void 0:k.settings)==null?void 0:J.radios)||[],"selected-Point":h.value,"selected-value":G.value,"images-value":a(l).images[(Q=h.value)==null?void 0:Q.inspection_point_id],"notes-value":W.value,point:h.value,"existing-data":jt((L=h.value)==null?void 0:L.inspection_point_id),"onUpdate:selectedValue":e[20]||(e[20]=n=>G.value=n),"onUpdate:notesValue":e[21]||(e[21]=n=>W.value=n),"onUpdate:imagesValue":$t,onSave:Ht,onClose:De,onHapus:Ye},null,8,["show","title","subtitle","name","inspection-id","point-id","settings","options","selected-Point","selected-value","images-value","notes-value","point","existing-data"])):f("",!0),ce.value?(u(),c("div",$o,e[44]||(e[44]=[o("p",{class:"text-sm"},"Tekan sekali lagi untuk keluar dari inspeksi",-1),o("p",{class:"text-xs text-gray-300 mt-1"},"Data inspeksi telah disimpan secara lokal",-1)]))):f("",!0),Se.value?(u(),c("div",{key:4,class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",onClick:_e},[o("div",{class:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4 max-h-[80vh] overflow-y-auto",onClick:e[29]||(e[29]=vt(()=>{},["stop"]))},[o("div",{class:"flex items-center justify-between p-4 border-b"},[e[46]||(e[46]=o("h3",{class:"text-lg font-semibold text-gray-900"},"Pengaturan Inspeksi",-1)),o("button",{onClick:_e,class:"text-gray-400 hover:text-gray-600 transition-colors"},e[45]||(e[45]=[o("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),o("div",Ho,[o("div",Ro,[e[47]||(e[47]=o("div",null,[o("label",{class:"text-sm font-medium text-gray-700"},"Swipe Gesture"),o("p",{class:"text-xs text-gray-500"},"Aktifkan navigasi dengan geser")],-1)),o("button",{onClick:Bt,type:"button",class:S(["relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",M.value?"bg-indigo-600":"bg-gray-200"]),role:"switch","aria-checked":M.value},[o("span",{"aria-hidden":"true",class:S(["pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out",M.value?"translate-x-5":"translate-x-0"])},null,2)],10,Fo)]),o("div",qo,[e[49]||(e[49]=o("label",{class:"text-sm font-medium text-gray-700"},"Sumber Gambar",-1)),V(o("select",{"onUpdate:modelValue":e[22]||(e[22]=n=>K.value=n),onChange:zt,class:"w-full text-sm border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"},e[48]||(e[48]=[o("option",{value:"all"},"Tanya",-1),o("option",{value:"camera"},"Kamera",-1),o("option",{value:"gallery"},"Galeri",-1)]),544),[[Ee,K.value]])]),o("div",Go,[e[51]||(e[51]=o("label",{class:"text-sm font-medium text-gray-700"},"Kualitas Kamera",-1)),V(o("select",{"onUpdate:modelValue":e[23]||(e[23]=n=>j.value=n),class:"w-full text-sm border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"},e[50]||(e[50]=[o("option",{value:"4K"},"4K",-1),o("option",{value:"HD"},"HD",-1),o("option",{value:"SD"},"SD",-1)]),512),[[Ee,j.value]])]),o("div",Wo,[e[54]||(e[54]=o("label",{class:"text-sm font-medium text-gray-700"},"Mode Menu",-1)),o("div",Jo,[o("label",Qo,[V(o("input",{type:"radio","onUpdate:modelValue":e[24]||(e[24]=n=>_.value=n),value:"horizontal",class:"text-indigo-600 focus:ring-indigo-500"},null,512),[[pe,_.value]]),e[52]||(e[52]=o("span",{class:"ml-2 text-sm text-gray-700"},"Horizontal",-1))]),o("label",Yo,[V(o("input",{type:"radio","onUpdate:modelValue":e[25]||(e[25]=n=>_.value=n),value:"vertical",class:"text-indigo-600 focus:ring-indigo-500"},null,512),[[pe,_.value]]),e[53]||(e[53]=o("span",{class:"ml-2 text-sm text-gray-700"},"Vertikal",-1))])])]),_.value==="horizontal"?(u(),c("div",Xo,[e[57]||(e[57]=o("label",{class:"text-sm font-medium text-gray-700"},"Posisi Menu",-1)),o("div",Zo,[o("label",en,[V(o("input",{type:"radio","onUpdate:modelValue":e[26]||(e[26]=n=>x.value=n),value:"top",class:"text-indigo-600 focus:ring-indigo-500"},null,512),[[pe,x.value]]),e[55]||(e[55]=o("span",{class:"ml-2 text-sm text-gray-700"},"Atas",-1))]),o("label",tn,[V(o("input",{type:"radio","onUpdate:modelValue":e[27]||(e[27]=n=>x.value=n),value:"bottom",class:"text-indigo-600 focus:ring-indigo-500"},null,512),[[pe,x.value]]),e[56]||(e[56]=o("span",{class:"ml-2 text-sm text-gray-700"},"Bawah",-1))])])])):f("",!0),_.value==="vertical"?(u(),c("div",on,[e[59]||(e[59]=o("label",{class:"text-sm font-medium text-gray-700"},"Posisi Menu Vertikal",-1)),V(o("select",{"onUpdate:modelValue":e[28]||(e[28]=n=>x.value=n),class:"w-full text-sm border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"},e[58]||(e[58]=[o("option",{value:"top-right"},"Atas Kanan",-1),o("option",{value:"top-left"},"Atas Kiri",-1),o("option",{value:"bottom-right"},"Bawah Kanan",-1),o("option",{value:"bottom-left"},"Bawah Kiri",-1)]),512),[[Ee,x.value]])])):f("",!0)]),o("div",{class:"flex justify-end p-4 border-t bg-gray-50"},[o("button",{onClick:_e,class:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2"}," Tutup ")])])])):f("",!0)],2)])}}},pn=co(nn,[["__scopeId","data-v-782a55b3"]]);export{pn as default};
