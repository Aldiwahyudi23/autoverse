import{p as ne,q as p,r as D,x as oe,G as ae,j as S,o,w as b,k as w,d as t,c as i,b as v,u as d,v as ie,t as m,S as M,f as y,n as x,F as $,y as le,z as h,A as j,I as re,W as U}from"./vendor-g77w9U1W.js";import{A as de}from"./AppLayout-5FWUuRHK.js";import{_ as ue}from"./app-BVNQeIN5.js";import{r as me,C as ce}from"./car-CSEwuOSb.js";import{r as pe}from"./ClipboardDocumentListIcon-lqbg6Ce-.js";const ve={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6"},ye={class:"bg-white rounded-xl shadow-md overflow-hidden border border-gray-200"},xe={class:"p-4 flex justify-between items-start"},ge={class:"flex items-center mb-1"},fe={class:"text-sm font-semibold text-blue-700 ml-7 -mt-1"},be={class:"px-4 py-3 bg-gray-50 border-t border-gray-100"},we={class:"flex items-center"},he={class:"text-sm font-medium text-gray-800"},ke={key:0},Ce={class:"text-gray-600"},Ie={key:1},De={class:"flex items-center justify-between mt-2"},Me={class:"flex items-center"},je={class:"text-sm font-bold text-gray-900"},Ae={class:"px-4 py-3 bg-white border-t border-gray-100"},Ve={class:"flex justify-between items-center mb-3"},Be={class:"flex items-center justify-between"},Te={class:"text-sm font-semibold text-green-800"},Se={class:"text-xs text-green-700"},$e={key:0,class:"text-xs text-green-700"},ze=["href"],Le={key:1,class:"mb-3 p-2 bg-yellow-50 border border-yellow-200 rounded"},Ne={class:"grid grid-cols-2 gap-1 text-sm"},Pe={key:0},Fe={key:3,class:"p-2 bg-yellow-50 border border-yellow-200 rounded"},He={key:0,class:"px-4 py-2 bg-white border-t border-gray-100"},Re={class:"text-sm text-gray-800"},Ue={class:"px-4 py-3 bg-gray-50 border-t border-gray-100"},Ee={class:"flex items-center mb-1"},qe={class:"text-sm font-semibold text-gray-800 ml-7 -mt-1"},Ke={key:0,class:"mt-3 mb-3"},Oe={class:"text-sm font-semibold text-gray-800 ml-7 -mt-1 flex items-center"},Ge={class:"bg-blue-100 text-blue-800 px-2 py-1 rounded-md font-mono"},We={class:"mt-3"},Je={class:"text-sm text-gray-800"},Qe=["innerHTML"],Ye={class:"p-4 flex gap-2"},Xe={key:0},Ze={key:1},_e=["disabled"],et={key:0},tt={key:1},st=["href","disabled"],nt={key:0},ot={key:1},at={key:1,class:"flex-1 flex items-center justify-center px-3 py-2 bg-gray-200 text-gray-600 font-medium rounded-md text-sm"},it=["disabled"],lt=["href","disabled"],rt={key:0},dt={key:1},ut={key:0},mt={key:1},ct={key:0,class:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50 p-4"},pt={class:"bg-white p-6 rounded-lg shadow-xl w-full max-w-md max-h-[90vh] overflow-y-auto"},vt={class:"text-lg font-bold mb-4"},yt={class:"space-y-3"},xt={class:"space-y-3"},gt={class:"flex justify-end space-x-3 pt-4"},ft=["disabled"],bt={key:1,class:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50"},wt={class:"bg-white p-6 rounded-lg shadow-xl w-96"},ht={class:"flex justify-end space-x-4"},kt=["disabled"],Ct={key:0,class:"flex items-center"},It={key:1},Dt={key:2,class:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50"},Mt={class:"bg-white p-6 rounded-lg shadow-xl w-96"},jt={class:"flex justify-end space-x-4 mt-6"},At=["disabled"],Vt={__name:"Review",props:{inspection:{type:Object,required:!0},encryptedIds:Object,transaction:Object},setup(n){var R;const u=n,V=((R=ne().props.global)==null?void 0:R.roles)||[],P=p(()=>V.includes("Admin")||V.includes("coordinator"));p(()=>V.includes("coordinator")),p(()=>V.includes("Admin"));const z=D(!1),L=D(!1),B=D(!1),F=D(""),r=D(!1),c=D(null),l=oe({customer_name:"",customer_phone:"",customer_email:"",customer_address:"",amount:"",payment_method:"",status:"paid"}),f=p(()=>u.inspection.customer_id!==null),k=p(()=>u.transaction!==null),g=p(()=>{var s;return((s=u.transaction)==null?void 0:s.status)==="paid"}),C=p(()=>{var s;return((s=u.transaction)==null?void 0:s.status)==="pending"}),E=p(()=>{var s;return((s=u.inspection)==null?void 0:s.status)==="rejected"});p(()=>{var s;return((s=u.inspection)==null?void 0:s.status)==="completed"});const q=p(()=>{var s;return((s=u.inspection)==null?void 0:s.status)==="cancelled"}),K=p(()=>{var s;return((s=u.inspection)==null?void 0:s.status)==="pending"}),O=p(()=>E.value||q.value||K.value),G=p(()=>{var s;return((s=u.transaction)==null?void 0:s.amount)>0}),I=p(()=>k.value&&g.value&&G.value);p(()=>f.value&&k.value&&g.value);const W=s=>{switch(s){case"draft":return"Dibuat";case"in_progress":return"Dalam Proses";case"pending":return"Menunggu";case"pending_review":return"Menunggu Review";case"approved":return"Disetujui";case"rejected":return"Ditolak";case"revision":return"Revisi";case"completed":return"Selesai";case"cancelled":return"Dibatalkan";default:return s}},J={pending:"Menunggu Pembayaran",paid:"Sudah di bayar",failed:"Gagal",refunded:"Dikembalikan",expired:"Kadaluarsa"},Q=p(()=>l.processing?"Menyimpan...":!f.value&&!k.value?"Tambah Data":f.value&&!k.value?"Tambah Pembayaran":!f.value&&k.value?"Tambahkan Data Customer":"Perbaharui Data"),Y=s=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(s),A=D(""),N=s=>{if(!s)return"";const e=String(s).replace(/\D/g,""),a=parseInt(e,10);return isNaN(a)?"":new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(a)},X=s=>{const e=s.target.value.replace(/\D/g,"");l.amount=e,A.value=N(e)};ae(()=>l.amount,s=>{if(s||s===0){const e=String(s).replace(/\D/g,"");A.value=N(e)}else A.value=""},{immediate:!0});const Z=()=>{u.inspection.customer&&(l.customer_name=u.inspection.customer.name,l.customer_phone=u.inspection.customer.phone,l.customer_email=u.inspection.customer.email,l.customer_address=u.inspection.customer.address),u.transaction&&(l.amount=Number(u.transaction.amount),A.value=N(l.amount),l.payment_method=u.transaction.payment_method,l.status=u.transaction.status),B.value=!0},_=()=>{const s=parseInt(l.amount,10);if(isNaN(s)){alert("Nominal pembayaran tidak valid.");return}l.status="paid",l.amount=s,l.post(route("inspections.updateUnified",u.encryptedIds),{preserveScroll:!0,onSuccess:()=>{B.value=!1,U.reload()}})},T=(s,e)=>{r.value=!0,c.value=e,U.visit(s,{onFinish:()=>{r.value=!1,c.value=null}})},H=s=>{r.value=!0,c.value="download",setTimeout(()=>{r.value=!1,c.value=null},1500)},ee=async s=>{try{await navigator.clipboard.writeText(s),console.log("Teks berhasil disalin: ",s),alert(`ID Inspeksi "${s}" berhasil disalin!`)}catch(e){console.error("Gagal menyalin teks: ",e),te(s)}},te=s=>{const e=document.createElement("textarea");e.value=s,e.style.position="fixed",e.style.left="-999999px",e.style.top="-999999px",document.body.appendChild(e),e.focus(),e.select();try{const a=document.execCommand("copy");console.log("Fallback menyalin teks "+(a?"berhasil":"gagal")),alert(a?`ID Inspeksi "${s}" berhasil disalin!`:"Gagal menyalin ID Inspeksi.")}catch(a){console.error("Fallback pun gagal: ",a),alert("Browser tidak mendukung aksi salin.")}finally{document.body.removeChild(e)}};return(s,e)=>(o(),S(de,null,{default:b(()=>[w(d(ie),{title:"Review Inspeksi"}),t("div",ve,[e[49]||(e[49]=t("h3",{class:"text-xl md:text-3xl font-bold text-gray-900 mb-6 text-center"}," Inspeksi yang Harus Diselesaikan ",-1)),t("div",ye,[t("div",xe,[t("div",null,[t("div",ge,[w(d(me),{class:"h-5 w-5 text-blue-500 mr-2"}),e[21]||(e[21]=t("span",{class:"text-sm font-medium text-gray-600"},"Jadwal",-1))]),t("p",fe,m(new Date(n.inspection.inspection_date).toLocaleDateString("id-ID",{weekday:"short",year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})),1)]),w(d(M),{href:s.route("inspection.log",n.encryptedIds),class:"text-xs font-semibold text-indigo-600 hover:underline"},{default:b(()=>e[22]||(e[22]=[y(" Lihat Log ")])),_:1,__:[22]},8,["href"])]),t("div",be,[t("div",we,[w(d(ce),{class:"h-5 w-5 text-gray-500 mr-2"}),t("div",he,[n.inspection.car?(o(),i("div",ke,[y(m(`${n.inspection.car.brand.name} ${n.inspection.car.model.name} ${n.inspection.car.type.name} ${(n.inspection.car.cc/1e3).toFixed(1)} ${n.inspection.car.transmission} ${n.inspection.car.year}`)+" ",1),t("span",Ce,"("+m(n.inspection.car.fuel_type)+")",1)])):(o(),i("div",Ie,m(n.inspection.car_name),1))])]),t("div",De,[t("div",Me,[e[23]||(e[23]=t("span",{class:"text-xs font-semibold uppercase tracking-wide text-gray-500 mr-2"},"NO POLISI:",-1)),t("span",je,m(n.inspection.plate_number),1)]),n.inspection.status==="draft"&&P.value?(o(),S(d(M),{key:0,href:s.route("coordinator.inspections.show",n.encryptedIds),class:"text-xs font-semibold text-indigo-600 hover:underline"},{default:b(()=>e[24]||(e[24]=[y(" Alihkan Tugas ")])),_:1,__:[24]},8,["href"])):v("",!0)])]),t("div",Ae,[t("div",Ve,[e[25]||(e[25]=t("h4",{class:"text-sm font-medium text-gray-700"},"Informasi Customer & Pembayaran",-1)),!f.value&&!k.value&&!O.value?(o(),i("button",{key:0,onClick:Z,class:"text-xs bg-blue-100 text-blue-700 px-2 py-1 rounded hover:bg-blue-200"},m(Q.value),1)):v("",!0)]),f.value?(o(),i("div",{key:0,class:x(["mb-3 p-2 rounded",{"bg-green-50 border border-green-200":f.value,"bg-yellow-50 border border-yellow-200":!f.value}])},[e[27]||(e[27]=t("p",{class:"text-xs font-medium text-gray-500"},"Customer",-1)),t("div",Be,[t("div",null,[t("p",Te,m(n.inspection.customer.name),1),t("p",Se,m(n.inspection.customer.phone),1),n.inspection.customer.email?(o(),i("p",$e,m(n.inspection.customer.email),1)):v("",!0)]),n.inspection.customer.phone?(o(),i("a",{key:0,href:`https://wa.me/62${n.inspection.customer.phone.replace(/^0/,"")}`,target:"_blank",class:"text-green-600 hover:text-green-800 ml-2",title:"Hubungi via WhatsApp"},e[26]||(e[26]=[t("svg",{class:"w-6 h-6",fill:"currentColor",viewBox:"0 0 24 24"},[t("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893A11.821 11.821 0 0020.864 3.488"})],-1)]),8,ze)):v("",!0)])],2)):(o(),i("div",Le,e[28]||(e[28]=[t("p",{class:"text-xs text-yellow-700"},"Data customer belum tersedia",-1)]))),k.value?(o(),i("div",{key:2,class:x(["p-2 rounded",{"bg-green-50 border border-green-200":g.value,"bg-red-50 border border-red-200":!g.value,"bg-yellow-50 border border-yellow-200":C.value}])},[e[31]||(e[31]=t("p",{class:"text-xs font-medium text-gray-500"},"Pembayaran",-1)),t("div",Ne,[e[29]||(e[29]=t("span",null,"Status:",-1)),t("span",{class:x({"text-green-600 font-semibold":g.value,"text-yellow-600 font-semibold":C.value,"text-red-600 font-semibold":!g.value&&!C.value})},m(J[n.transaction.status]),3),e[30]||(e[30]=t("span",null,"Nominal:",-1)),t("span",{class:x({"text-green-700":g.value,"text-yellow-700":C.value,"text-red-700":!g.value&&!C.value})},m(Y(n.transaction.amount)),3),n.transaction.payment_method?(o(),i("span",Pe,"Metode:")):v("",!0),n.transaction.payment_method?(o(),i("span",{key:1,class:x({"text-green-700":g.value,"text-yellow-700":C.value,"text-red-700":!g.value&&!C.value})},m(n.transaction.payment_method),3)):v("",!0)])],2)):(o(),i("div",Fe,e[32]||(e[32]=[t("p",{class:"text-xs text-yellow-700"},"Data transaksi belum tersedia",-1)])))]),n.inspection.category?(o(),i("div",He,[e[33]||(e[33]=t("p",{class:"text-xs font-medium text-gray-500 tracking-wide"}," Kategori Inspeksi ",-1)),t("p",Re,m(n.inspection.category.name),1)])):v("",!0),t("div",Ue,[t("div",Ee,[w(d(pe),{class:"h-5 w-5 text-green-500 mr-2"}),e[34]||(e[34]=t("span",{class:"text-sm font-medium text-gray-600"},"Status",-1))]),t("p",qe,m(W(n.inspection.status)),1),(n.inspection.status==="approved"||n.inspection.status==="completed")&&n.inspection.file&&I.value?(o(),i("div",Ke,[e[36]||(e[36]=t("div",{class:"flex items-center mb-1"},[t("svg",{class:"h-5 w-5 text-blue-500 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})]),t("span",{class:"text-sm font-medium text-gray-600"},"ID Inspeksi (Untuk Buka File)")],-1)),t("p",Oe,[t("span",Ge,m(n.inspection.code),1),t("button",{onClick:e[0]||(e[0]=a=>ee(n.inspection.code)),class:"ml-2 text-blue-500 hover:text-blue-700"},e[35]||(e[35]=[t("svg",{class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3"})],-1)]))])])):v("",!0),t("div",We,[e[37]||(e[37]=t("p",{class:"text-xs font-medium text-gray-500 uppercase tracking-wide"}," Catatan ",-1)),t("p",Je,[t("div",{innerHTML:n.inspection.notes||"-"},null,8,Qe)])])]),t("div",Ye,[n.inspection.status==="in_progress"?(o(),S(d(M),{key:0,href:s.route("inspections.review.pdf",n.encryptedIds),disabled:r.value,onClick:e[1]||(e[1]=a=>T(s.route("inspections.review.pdf",n.encryptedIds),"lihat_laporan")),class:x(["flex-1 inline-flex items-center justify-center px-3 py-2 bg-gradient-to-r from-indigo-700 to-sky-600 shadow-lg text-white font-medium rounded-md text-sm transition-colors hover:from-indigo-800 hover:to-sky-700",{"opacity-50 cursor-not-allowed":r.value&&c.value==="lihat_laporan"}])},{default:b(()=>[r.value&&c.value==="lihat_laporan"?(o(),i("span",Xe,e[38]||(e[38]=[t("svg",{class:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),y(" Memuat Halaman... ")]))):(o(),i("span",Ze,"Lihat Proses Inspeksi "))]),_:1},8,["href","disabled","class"])):v("",!0),n.inspection.status==="pending_review"?(o(),i($,{key:1},[t("button",{onClick:e[2]||(e[2]=a=>z.value=!0),class:"flex-2 px-3 py-2 bg-yellow-500 text-white font-medium rounded-md text-sm transition-colors hover:bg-yellow-600",disabled:r.value}," Revisi ",8,_e),w(d(M),{href:s.route("inspections.review.pdf",n.encryptedIds),disabled:r.value,onClick:e[3]||(e[3]=a=>T(s.route("inspections.review.pdf",n.encryptedIds),"lihat_laporan")),class:x(["flex-1 inline-flex items-center justify-center px-3 py-2 bg-gradient-to-r from-indigo-700 to-sky-600 shadow-lg text-white font-medium rounded-md text-sm transition-colors hover:from-indigo-800 hover:to-sky-700",{"opacity-50 cursor-not-allowed":r.value&&c.value==="lihat_laporan"}])},{default:b(()=>[r.value&&c.value==="lihat_laporan"?(o(),i("span",et,e[39]||(e[39]=[t("svg",{class:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),y(" Memuat Laporan... ")]))):(o(),i("span",tt,"Lihat Laporan PDF"))]),_:1},8,["href","disabled","class"])],64)):n.inspection.status==="approved"&&n.inspection.file?(o(),i($,{key:2},[I.value?(o(),i("a",{key:0,href:s.route("inspections.download.approved.pdf",n.encryptedIds),onClick:e[4]||(e[4]=a=>H(s.route("inspections.download.approved.pdf",n.encryptedIds))),class:x(["flex-1 inline-flex items-center justify-center px-3 py-2 bg-blue-600 text-white font-medium rounded-md text-sm transition-colors hover:bg-blue-700",{"opacity-50 cursor-not-allowed":r.value&&c.value==="download"}]),disabled:r.value,download:""},[r.value&&c.value==="download"?(o(),i("span",nt,e[40]||(e[40]=[t("svg",{class:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),y(" Sedang di download... ")]))):(o(),i("span",ot,e[41]||(e[41]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 inline-block mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),y(" PDF ")])))],10,st)):(o(),i("div",at,e[42]||(e[42]=[t("span",{class:"text-xs"},"Transaksi belum selesai",-1)]))),w(d(M),{href:s.route("inspections.whatsapp",n.encryptedIds),class:"flex-1 inline-flex items-center justify-center px-3 py-2 bg-green-600 text-white font-medium rounded-md text-sm transition-colors hover:bg-green-700"},{default:b(()=>e[43]||(e[43]=[t("svg",{class:"w-5 h-5 mr-2",fill:"currentColor",viewBox:"0 0 24 24"},[t("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893A11.821 11.821 0 0020.864 3.488"})],-1),y(" WhatsApp ")])),_:1,__:[43]},8,["href"]),t("button",{onClick:e[5]||(e[5]=a=>L.value=!0),class:"flex-1 inline-flex items-center justify-center px-3 py-2 bg-teal-500 text-white font-medium rounded-md text-sm transition-colors hover:bg-teal-600",disabled:r.value},e[44]||(e[44]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-4 h-4 mr-2"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M21.75 6.75v10.5a2.25 2.25 0 0 1-2.25 2.25h-15a2.25 2.25 0 0 1-2.25-2.25V6.75m19.5 0A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25m19.5 0v.243a2.25 2.25 0 0 1-1.07 1.916l-7.5 4.615a2.25 2.25 0 0 1-2.36 0L3.32 8.91a2.25 2.25 0 0 1-1.07-1.916V6.75"})],-1),y(" Email ")]),8,it)],64)):v("",!0),n.inspection.status==="completed"&&n.inspection.file&&P.value?(o(),i("a",{key:3,href:I.value?s.route("inspections.download.approved.pdf",n.encryptedIds):null,onClick:e[6]||(e[6]=a=>I.value&&H(s.route("inspections.download.approved.pdf",n.encryptedIds))),class:x(["flex-1 inline-flex items-center justify-center px-3 py-2 font-medium rounded-md text-sm transition-colors",[I.value?"bg-blue-600 text-white hover:bg-blue-700":"bg-gray-300 text-gray-500 cursor-not-allowed"]]),disabled:!I.value||r.value&&c.value==="download"},[r.value&&c.value==="download"?(o(),i("span",rt,e[45]||(e[45]=[t("svg",{class:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),y(" Sedang diunduh... ")]))):(o(),i("span",dt,[I.value?(o(),i($,{key:0},[e[46]||(e[46]=t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 inline-block mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)),e[47]||(e[47]=y(" Download PDF "))],64)):(o(),i($,{key:1},[y(" PDF tersedia â€” selesaikan transaksi untuk mengunduh ")],64))]))],10,lt)):v("",!0)]),n.inspection.status==="approved"&&n.inspection.file?(o(),S(d(M),{key:1,href:s.route("inspections.review.pdf",n.encryptedIds),disabled:r.value,onClick:e[7]||(e[7]=a=>T(s.route("inspections.review.pdf",n.encryptedIds),"lihat_laporan")),class:x(["inline-flex items-center justify-center w-full px-3 py-2 bg-gradient-to-r from-indigo-700 to-sky-600 shadow-lg text-white font-medium rounded-md text-sm transition-colors hover:from-indigo-800 hover:to-sky-700",{"opacity-50 cursor-not-allowed":r.value&&c.value==="lihat_laporan"}])},{default:b(()=>[r.value&&c.value==="lihat_laporan"?(o(),i("span",ut,e[48]||(e[48]=[t("svg",{class:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),y(" Memuat Laporan... ")]))):(o(),i("span",mt,"Lihat Laporan"))]),_:1},8,["href","disabled","class"])):v("",!0)])]),B.value?(o(),i("div",ct,[t("div",pt,[t("h3",vt,m(f.value?"Edit Data Customer & Transaksi":"Tambah Data Customer & Transaksi"),1),t("form",{onSubmit:le(_,["prevent"]),class:"space-y-4"},[t("div",null,[e[55]||(e[55]=t("h4",{class:"text-sm font-medium text-gray-700 mb-2"},"Data Customer",-1)),t("div",yt,[t("div",null,[e[50]||(e[50]=t("label",{class:"block text-xs font-medium text-gray-600 mb-1"},"Nama Customer *",-1)),h(t("input",{"onUpdate:modelValue":e[8]||(e[8]=a=>d(l).customer_name=a),type:"text",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm"},null,512),[[j,d(l).customer_name]])]),t("div",null,[e[51]||(e[51]=t("label",{class:"block text-xs font-medium text-gray-600 mb-1"},"Nomor WhatsApp *",-1)),h(t("input",{"onUpdate:modelValue":e[9]||(e[9]=a=>d(l).customer_phone=a),type:"tel",required:"",placeholder:"Contoh: 628123456789",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm"},null,512),[[j,d(l).customer_phone]]),e[52]||(e[52]=t("p",{class:"text-xs text-gray-500 mt-1"},"Gunakan format internasional (62 bukan 0)",-1))]),t("div",null,[e[53]||(e[53]=t("label",{class:"block text-xs font-medium text-gray-600 mb-1"},"Email",-1)),h(t("input",{"onUpdate:modelValue":e[10]||(e[10]=a=>d(l).customer_email=a),type:"email",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm"},null,512),[[j,d(l).customer_email]])]),t("div",null,[e[54]||(e[54]=t("label",{class:"block text-xs font-medium text-gray-600 mb-1"},"Alamat",-1)),h(t("textarea",{"onUpdate:modelValue":e[11]||(e[11]=a=>d(l).customer_address=a),rows:"2",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm"},null,512),[[j,d(l).customer_address]])])])]),t("div",null,[e[59]||(e[59]=t("h4",{class:"text-sm font-medium text-gray-700 mb-2"},"Data Transaksi",-1)),t("div",xt,[t("div",null,[e[56]||(e[56]=t("label",{class:"block text-xs font-medium text-gray-600 mb-1"},"Nominal Pembayaran *",-1)),h(t("input",{"onUpdate:modelValue":e[12]||(e[12]=a=>A.value=a),onInput:X,type:"text",required:"",min:"0",placeholder:"Contoh: 250000",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm"},null,544),[[j,A.value]])]),t("div",null,[e[58]||(e[58]=t("label",{class:"block text-xs font-medium text-gray-600 mb-1"},"Metode Pembayaran *",-1)),h(t("select",{"onUpdate:modelValue":e[13]||(e[13]=a=>d(l).payment_method=a),required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm"},e[57]||(e[57]=[t("option",{value:""},"Pilih Metode",-1),t("option",{value:"cash"},"Cash",-1),t("option",{value:"transfer"},"Transfer",-1),t("option",{value:"debit_card"},"Kartu Debit",-1),t("option",{value:"credit_card"},"Kartu Kredit",-1),t("option",{value:"qris"},"QRIS",-1)]),512),[[re,d(l).payment_method]])]),h(t("input",{type:"hidden","onUpdate:modelValue":e[14]||(e[14]=a=>d(l).status=a)},null,512),[[j,d(l).status]])])]),t("div",gt,[t("button",{type:"button",onClick:e[15]||(e[15]=a=>B.value=!1),class:"px-4 py-2 bg-gray-300 text-gray-700 rounded-md text-sm hover:bg-gray-400"}," Batal "),t("button",{type:"submit",disabled:d(l).processing,class:"px-4 py-2 bg-blue-600 text-white rounded-md text-sm hover:bg-blue-700 disabled:opacity-50"},m(d(l).processing?"Menyimpan...":"Simpan"),9,ft)])],32)])])):v("",!0),z.value?(o(),i("div",bt,[t("div",wt,[e[61]||(e[61]=t("h3",{class:"text-lg font-bold mb-4"},"Konfirmasi Revisi",-1)),e[62]||(e[62]=t("p",{class:"text-gray-700 mb-2"}," Apakah Anda yakin ingin revisi pada laporan ini? ",-1)),e[63]||(e[63]=t("p",{class:"text-gray-700 mb-4"},"Setelah ini akan masuk ke halaman Inspeksi.",-1)),t("div",ht,[t("button",{onClick:e[16]||(e[16]=a=>z.value=!1),disabled:r.value,class:"bg-gray-300 text-gray-800 px-4 py-2 rounded-md hover:bg-gray-400"}," Batal ",8,kt),w(d(M),{href:s.route("inspections.revisi",n.encryptedIds),disabled:r.value,onClick:e[17]||(e[17]=a=>T(s.route("inspections.revisi",n.encryptedIds),"revisi")),class:x(["bg-yellow-500 text-white px-4 py-2 rounded-md hover:bg-yellow-600",{"opacity-50 cursor-not-allowed":r.value&&c.value==="revisi"}])},{default:b(()=>[r.value&&c.value==="revisi"?(o(),i("span",Ct,e[60]||(e[60]=[t("svg",{class:"animate-spin h-5 w-5 text-white mr-2",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),y(" Memproses... ")]))):(o(),i("span",It,"Ya, Revisi"))]),_:1},8,["href","disabled","class"])])])])):v("",!0),L.value?(o(),i("div",Dt,[t("div",Mt,[e[64]||(e[64]=t("h3",{class:"text-lg font-bold mb-4"},"Kirim Laporan Via Email",-1)),e[65]||(e[65]=t("p",{class:"text-gray-700 mb-2"}," Masukkan alamat email tujuan: ",-1)),h(t("input",{type:"email","onUpdate:modelValue":e[18]||(e[18]=a=>F.value=a),class:"w-full px-3 py-2 border rounded-md focus:ring-indigo-500 focus:border-indigo-500",placeholder:"contoh@email.com"},null,512),[[j,F.value]]),t("div",jt,[t("button",{onClick:e[19]||(e[19]=a=>L.value=!1),disabled:r.value,class:"bg-gray-300 text-gray-800 px-4 py-2 rounded-md hover:bg-gray-400"}," Batal ",8,At),t("button",{onClick:e[20]||(e[20]=(...a)=>s.sendEmail&&s.sendEmail(...a)),disabled:"",class:"bg-teal-500 text-white px-4 py-2 rounded-md hover:bg-teal-600"}," Masih dalam pengembangan ")])])])):v("",!0)]),_:1}))}},Nt=ue(Vt,[["__scopeId","data-v-f53f066a"]]);export{Nt as default};
