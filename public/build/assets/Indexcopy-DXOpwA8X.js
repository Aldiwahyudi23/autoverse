import{r as g,x as J,q as x,G as We,g as Ue,j as U,o as r,w as S,k as c,d as e,b as u,c as a,u as l,v as qe,f as v,t as i,z as C,A as Q,F as X,m as Y,n as R,S as q,y as xe,R as ze,I as ye,W as $}from"./vendor-BAtEjGXf.js";import{A as He}from"./AppLayout-B54wWW5k.js";import{_ as Ne}from"./CardCustomer-D9TsCNQO.js";import{_ as Oe}from"./app-CwY0jgaG.js";import{r as Z,a as Ee}from"./XMarkIcon-d2CgnwY8.js";import{r as Ke,a as be,b as Ge,c as Je}from"./PlusIcon-B9cpSxob.js";import{a as Qe,r as Xe,C as z}from"./car-DI6xen22.js";const Ye={class:"w-full px-4 sm:px-6 lg:px-6 py-6"},Ze={class:"flex flex-col sm:flex-row sm:items-center justify-between mb-6 gap-4"},et={class:"text-xl md:text-3xl font-bold text-gray-900 text-center sm:text-left"},tt={key:0,class:"text-lg text-gray-600 block sm:inline sm:ml-2"},st={key:1,class:"text-lg text-gray-600 block sm:inline sm:ml-2"},nt={key:2,class:"text-lg text-gray-600 block sm:inline sm:ml-2"},rt={key:0,class:"flex items-center gap-2"},at={key:0,class:"relative flex-1"},ot={key:0,class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4"},it={class:"px-4 py-2 border-b flex justify-between items-center"},lt={class:"flex items-center gap-2"},dt=["onClick"],ut={key:0,class:"px-4 py-3 bg-gray-50 border-b"},ct={class:"flex items-center justify-between"},mt={class:"flex items-center"},pt={class:"text-sm text-gray-600"},gt=["href"],vt={class:"p-4 flex justify-between items-start"},ft={class:"flex items-center mb-1"},xt={class:"text-sm font-semibold text-blue-700 ml-7 -mt-1"},yt=["onClick"],bt={class:"flex items-center justify-between"},_t={class:"flex items-center flex-1"},ht={class:"text-sm font-medium text-gray-800"},wt={key:0},kt={class:"text-gray-600"},It={key:1},Ct={class:"flex items-center mt-2"},Rt={class:"text-sm font-bold text-gray-900"},$t={class:"transition-all duration-300 ease-in-out"},jt={class:"px-4 py-3 bg-white border-t border-gray-100"},Mt={class:"grid grid-cols-2 gap-1 text-sm"},Tt={key:1,class:"p-2 bg-yellow-50 border border-yellow-200 rounded"},At={class:"p-4 flex space-x-2"},Lt=["onClick"],St=["onClick","disabled"],Bt={key:1,class:"text-center py-8"},Dt={class:"text-gray-500"},Pt={class:"text-center mt-6"},Ft={key:1,class:"fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center p-4 z-50"},Vt={class:"bg-white rounded-lg shadow-xl max-w-md w-full"},Wt={class:"p-6"},Ut={class:"flex items-start mb-4"},qt={key:0},zt={class:"font-medium text-gray-800"},Ht={class:"text-sm text-gray-600"},Nt={class:"text-gray-500"},Ot={key:1,class:"text-sm font-medium text-gray-800"},Et={class:"flex items-center mt-2"},Kt={class:"text-base font-bold text-gray-900"},Gt={class:"text-gray-600 mb-6"},Jt={key:0,class:"font-semibold text-gray-800"},Qt={class:"flex justify-end space-x-3"},Xt=["disabled"],Yt={key:0},Zt={key:1},es={key:2,class:"fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center p-4 z-50"},ts={class:"bg-white rounded-lg shadow-xl max-w-md w-full"},ss={class:"p-6"},ns={class:"flex items-center justify-between mb-4"},rs={class:"mb-6 p-4 bg-gray-50 rounded-lg"},as={class:"flex items-start"},os={class:"font-medium text-gray-800"},is={class:"text-sm text-gray-600"},ls={class:"text-sm text-gray-500 mt-1"},ds={class:"font-medium"},us={class:"space-y-4"},cs=["disabled"],ms=["value","disabled"],ps={key:0,class:"text-xs text-gray-500"},gs={key:0,class:"text-xs text-gray-500 mt-1"},vs=["value"],fs={key:0,class:"text-red-500 text-sm mt-1"},xs={class:"flex justify-end space-x-3 mt-6"},ys=["disabled"],bs={key:0},_s={key:1},hs={key:3,class:"fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center p-4 z-50"},ws={class:"bg-white rounded-lg shadow-xl max-w-md w-full"},ks={class:"p-6"},Is={class:"flex items-center justify-between mb-4"},Cs={class:"flex items-start mb-4"},Rs={key:0},$s={class:"font-medium text-gray-800"},js={class:"text-sm text-gray-600"},Ms={class:"text-gray-500"},Ts={key:1,class:"text-sm font-medium text-gray-800"},As={class:"flex items-center mt-2"},Ls={class:"text-base font-bold text-gray-900"},Ss={class:"mb-6"},Bs={key:0,class:"text-red-500 text-sm mt-1"},Ds={class:"flex justify-end space-x-3"},Ps=["disabled"],Fs={key:0},Vs={key:1},Ws={__name:"Indexcopy",props:{tasks:Array,encryptedIds:Object,userRole:String,userId:Number,team:Array,filters:Object},setup(j){const d=j,M=g(!1),H=g(!1),N=g(!1),B=g(!1),o=g(null),h=g(""),w=g(""),k=g(""),T=g(d.filters.search),D=g(""),O=g([]),P=g(!1),F=g(new Set),E=J({}),I=J({reason:""}),_=J({new_inspector_id:"",transfer_reason:""});let ee=null;const _e=()=>{clearTimeout(ee),ee=setTimeout(()=>{$.get(route("job.index"),{search:T.value},{preserveState:!0,replace:!0})},300)},te=()=>{B.value&&(T.value="",$.get(route("job.index"),{search:""},{preserveState:!0,replace:!0})),B.value=!B.value},he=t=>{if(o.value=t,m.value){$.get(route("inspections.review",{id:d.encryptedIds[t.id]}));return}if(f.value){if(t.status==="pending_review"){$.get(route("inspections.review",{id:d.encryptedIds[t.id]}));return}M.value=!0;return}if(b.value)if(t.user_id===d.userId){if(t.status==="pending_review"){$.get(route("inspections.review",{id:d.encryptedIds[t.id]}));return}M.value=!0;return}else{$.get(route("inspections.review",{id:d.encryptedIds[t.id]}));return}M.value=!0},we=t=>{o.value=t,H.value=!0},ke=t=>{o.value=t,N.value=!0},y=()=>{M.value=!1,H.value=!1,N.value=!1,h.value="",w.value="",k.value=""},Ie=()=>{o.value&&(I.reason=h.value,I.post(route("inspections.cancel",{inspection:d.encryptedIds[o.value.id]}),{onSuccess:()=>{y(),h.value=""}}))},Ce=()=>{o.value&&E.get(route("inspections.start",{inspection:d.encryptedIds[o.value.id]}),{onFinish:()=>{y()}})},Re=()=>{o.value&&(_.new_inspector_id=k.value,_.transfer_reason=w.value,_.post(route("inspections.transfer",{inspection:d.encryptedIds[o.value.id]}),{onSuccess:()=>{y(),w.value="",k.value=""}}))},m=x(()=>d.userRole==="admin_plann"),V=x(()=>d.userRole==="inspector"),f=x(()=>d.userRole==="quality_control"),b=x(()=>d.userRole==="coordinator"),se=x(()=>d.userRole==="Admin"),A=x(()=>d.userRole==="Admin"),$e=x(()=>["Admin","coordinator","admin_plann","admin_region"].includes(d.userRole)),K=t=>A.value||m.value||f.value||b.value?!1:V.value?d.tasks.some(p=>(p.status==="in_progress"||p.status==="revision")&&p.id!==t.id)&&!(t.status==="in_progress"||t.status==="revision"):!1,G=t=>m.value?"Lihat Detail":b.value?t.user_id===d.userId?t.status==="draft"?"Mulai Inspeksi":t.status==="in_progress"?"Lanjutkan Inspeksi":t.status==="pending_review"?"Periksa Laporan":t.status==="revision"?"Lanjutkan Revisi":t.status==="pending"?"Lanjutkan Inspeksi":"Detail":"Lihat Detail":(f.value||A.value,t.status==="draft"?"Mulai Inspeksi":t.status==="in_progress"?"Lanjutkan Inspeksi":t.status==="pending_review"?"Periksa Laporan":t.status==="revision"?"Lanjutkan Revisi":t.status==="pending"?"Lanjutkan Inspeksi":"Detail"),je=t=>m.value||f.value?"Memuat...":t.status==="draft"?"Memuat Halaman Inspeksi...":t.status==="in_progress"?"Membuka Halaman Inspeksi...":t.status==="pending_review"?"Memuat Halaman Review...":t.status==="revision"?"Memuat Halaman Revisi...":t.status==="pending"?"Memuat Halaman Inspeksi...":"Memuat...",Me=t=>{if(!t)return"";const p=new Date(t.inspection_date).toLocaleDateString("id-ID",{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),W=t.car?`${t.car.brand.name} ${t.car.model.name} ${t.car.type.name} ${(t.car.cc/1e3).toFixed(1)}L ${t.car.transmission} ${t.car.year}`:t.car_name;return`Halo, ada jadwal inspeksi baru:

ðŸ“… *${p}*
ðŸš— *${W}*
ðŸ“ *${t.plate_number}*

Tolong di bantu untuk melakukan inspeksi sesuai jadwal. Terima kasih!`},Te=t=>{if(!t)return"";let s=t.replace(/\D/g,"");return s.startsWith("0")&&(s="62"+s.substring(1)),s.startsWith("62")||(s="62"+s),s},Ae=["draft","pending"],Le=t=>m.value&&Ae.includes(t.status),Se=t=>["inspector","coordinator","Admin","admin_plann","quality_control"].includes(d.userRole)&&["draft","in_progress","pending","revision"].includes(t.status),Be=t=>{switch(t){case"draft":return"bg-gray-100 text-gray-800";case"in_progress":return"bg-blue-100 text-blue-800";case"pending":return"bg-yellow-100 text-yellow-800";case"pending_review":return"bg-purple-100 text-purple-800";case"revision":return"bg-orange-100 text-orange-800";default:return"bg-gray-100 text-gray-800"}};x(()=>!m.value),x(()=>{var t,s;return((s=(t=d.tasks.customer)==null?void 0:t.sellers)==null?void 0:s.find(p=>p.inspection_id===d.tasks.id))||null});const De=t=>{F.value.has(t)?F.value.delete(t):F.value.add(t)},ne=t=>F.value.has(t);We(T,()=>{_e()});const Pe=async()=>{try{P.value=!0;const t=await fetch("/api/regions/active-with-teams");if(t.ok){const s=await t.json();O.value=s.regions||[]}else console.error("Failed to fetch regions")}catch(t){console.error("Error fetching regions:",t)}finally{P.value=!1}};Ue(()=>{Pe()});const Fe=t=>{const s=!t.customer,p=!t.transaction;return s&&p?"Belum ada data cust dan transaksi":s?"Belum ada data cust":p?"Belum ada transaksi":""},Ve=x(()=>{if(!D.value)return d.team;const t=O.value.find(s=>s.id===D.value);return t?d.team.filter(s=>s.region_name===t.name):[]});return(t,s)=>(r(),U(He,null,{default:S(()=>{var p,W,re,ae,oe,ie,le,de,ue,ce,me;return[c(l(qe),{title:"Tugas"}),e("div",Ye,[e("div",Ze,[e("h3",et,[v(i(m.value?"Monitoring Tugas Inspeksi":f.value?"Review & Revisi Inspeksi":"Tugas Inspeksi")+" ",1),V.value?(r(),a("span",tt,"- Saya")):u("",!0),b.value?(r(),a("span",st,"- Coordinator")):u("",!0),A.value?(r(),a("span",nt,"- Admin")):u("",!0)]),m.value||f.value||se.value||b.value?(r(),a("div",rt,[B.value?(r(),a("div",at,[C(e("input",{"onUpdate:modelValue":s[0]||(s[0]=n=>T.value=n),type:"text",placeholder:"Cari plat/nama mobil/inspector...",class:"w-full px-4 py-2 pr-10 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm",autofocus:""},null,512),[[Q,T.value]]),e("button",{onClick:te,class:"absolute right-2 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600"},[c(l(Z),{class:"h-5 w-5"})])])):u("",!0),e("button",{onClick:te,class:"p-2 text-gray-400 hover:text-gray-600 transition-colors"},[c(l(Ee),{class:"h-5 w-5"})])])):u("",!0)]),j.tasks.length>0?(r(),a("div",ot,[(r(!0),a(X,null,Y(j.tasks,n=>{var pe,ge,ve,fe;return r(),a("div",{key:n.id,class:"bg-white rounded-xl shadow-md overflow-hidden border border-gray-200 hover:shadow-lg transition"},[e("div",it,[e("div",lt,[e("span",{class:R(["px-2 py-1 text-xs font-medium rounded-full",Be(n.status)])},i(n.status.replace("_"," ").toUpperCase()),3),$e.value&&(!n.customer||!n.transaction)?(r(),U(l(q),{key:0,href:t.route("inspections.review",{id:j.encryptedIds[n.id]}),class:"cursor-pointer"},{default:S(()=>[c(l(Ke),{class:"h-5 w-5 text-yellow-500",title:Fe(n)},null,8,["title"])]),_:2},1032,["href"])):u("",!0)]),Le(n)?(r(),a("button",{key:0,onClick:xe(L=>ke(n),["stop"]),class:"text-xs text-blue-600 hover:text-blue-800 font-medium",title:"Alihkan ke inspector lain"},[c(l(be),{class:"h-4 w-4 inline"}),s[5]||(s[5]=v(" Alihkan "))],8,dt)):u("",!0)]),(m.value||f.value||b.value||se.value)&&n.user?(r(),a("div",ut,[e("div",ct,[e("div",mt,[c(l(Qe),{class:"h-4 w-4 text-gray-500 mr-2"}),e("div",null,[s[6]||(s[6]=e("p",{class:"text-sm font-medium text-gray-700"},"Inspector",-1)),e("p",pt,i(n.user.name),1)])]),m.value&&n.user.numberPhone?(r(),a("a",{key:0,href:`https://wa.me/${Te(n.user.numberPhone)}?text=${encodeURIComponent(Me(n))}`,target:"_blank",class:"text-green-600 hover:text-green-800 transition",title:"Kirim pesan WhatsApp ke inspector"},s[7]||(s[7]=[e("svg",{class:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24"},[e("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893A11.821 11.821 0 0020.465 3.488"})],-1)]),8,gt)):u("",!0)])])):u("",!0),e("div",vt,[e("div",null,[e("div",ft,[c(l(Xe),{class:"h-5 w-5 text-blue-500 mr-2"}),s[8]||(s[8]=e("span",{class:"text-sm font-medium text-gray-600"},"Jadwal",-1))]),e("p",xt,i(new Date(n.inspection_date).toLocaleDateString("id-ID",{weekday:"short",year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})),1)]),c(l(q),{href:t.route("inspection.log",{inspection:j.encryptedIds[n.id]}),class:"text-xs font-semibold text-indigo-600 hover:underline"},{default:S(()=>s[9]||(s[9]=[v(" Lihat Log ")])),_:2,__:[9]},1032,["href"])]),e("div",{onClick:L=>De(n.id),class:"px-4 py-3 bg-gray-50 border-t border-gray-100 cursor-pointer hover:bg-gray-100 transition-colors"},[e("div",bt,[e("div",_t,[c(l(z),{class:"h-5 w-5 text-gray-500 mr-2"}),e("div",ht,[n.car?(r(),a("div",wt,[v(i(`${n.car.brand.name} ${n.car.model.name} ${n.car.type.name} ${(n.car.cc/1e3).toFixed(1)} ${n.car.transmission} ${n.car.year}`)+" ",1),e("span",kt,"("+i(n.car.fuel_type)+")",1)])):(r(),a("div",It,i(n.car_name),1))])]),(r(),a("svg",{class:R(["h-5 w-5 text-gray-400 transition-transform",ne(n.id)?"rotate-180":""]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},s[10]||(s[10]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)]),2))]),e("div",Ct,[s[11]||(s[11]=e("span",{class:"text-xs font-semibold uppercase tracking-wide text-gray-500 mr-2"},"NO POLISI: ",-1)),e("span",Rt,i(n.plate_number),1)])],8,yt),C(e("div",$t,[e("div",jt,[c(Ne,{customer:n.customer,seller:((ge=(pe=n.customer)==null?void 0:pe.sellers)==null?void 0:ge.find(L=>L.inspection_id===n.id))||null,inspection:n,userRole:d.userRole},null,8,["customer","seller","inspection","userRole"]),n.transaction?(r(),a("div",{key:0,class:R(["p-2 rounded",{"bg-green-50 border border-green-200":(n==null?void 0:n.transaction.status)==="paid","bg-yellow-50 border border-yellow-200":((ve=n==null?void 0:n.transaction)==null?void 0:ve.status)==="pending"}])},[s[13]||(s[13]=e("p",{class:"text-xs font-medium text-gray-500"},"Pembayaran",-1)),e("div",Mt,[s[12]||(s[12]=e("span",null,"Status:",-1)),e("span",{class:R({"text-green-600 font-semibold":(n==null?void 0:n.transaction.status)==="paid","text-yellow-600 font-semibold":((fe=n==null?void 0:n.transaction)==null?void 0:fe.status)==="pending"})},i((n==null?void 0:n.transaction.status)==="paid"?"Lunas":"Menunggu"),3)])],2)):(r(),a("div",Tt,s[14]||(s[14]=[e("p",{class:"text-xs text-yellow-700"},"Data transaksi belum tersedia",-1)])))]),e("div",At,[Se(n)?(r(),a("button",{key:0,onClick:xe(L=>we(n),["stop"]),type:"button",class:"px-3 py-2 bg-gray-200 text-gray-700 font-medium rounded-md text-sm hover:bg-gray-300 transition-colors"}," Batal ",8,Lt)):u("",!0),e("button",{onClick:L=>he(n),disabled:K(n),class:R(["flex-1 inline-flex items-center justify-center px-3 py-2 font-medium rounded-md text-sm transition-colors",m.value?"bg-gradient-to-r from-blue-600 to-indigo-600 text-white hover:from-blue-700 hover:to-indigo-700":f.value?"bg-gradient-to-r from-purple-600 to-pink-600 text-white hover:from-purple-700 hover:to-pink-700":K(n)?"bg-gray-300 text-gray-600 cursor-not-allowed":"bg-gradient-to-r from-indigo-700 to-sky-600 text-white hover:from-indigo-800 hover:to-sky-700"])},[v(i(G(n))+" ",1),!m.value&&!f.value&&!K(n)?(r(),U(l(Ge),{key:0,class:"ml-2 h-4 w-4"})):u("",!0)],10,St)])],512),[[ze,ne(n.id)]])])}),128))])):(r(),a("div",Bt,[e("p",Dt,i(m.value?"Tidak ada tugas inspeksi yang perlu dimonitor.":f.value?"Tidak ada laporan yang perlu direview.":"Tidak ada tugas inspeksi yang tersedia."),1)])),e("div",Pt,[c(l(q),{href:t.route("inspections.history"),class:"inline-block px-4 py-2 text-sm font-medium text-indigo-600 border border-indigo-600 rounded-md hover:bg-blue-50"},{default:S(()=>s[15]||(s[15]=[v(" Lihat Riwayat Inspeksi ")])),_:1,__:[15]},8,["href"])])]),m.value?(r(),U(l(q),{key:0,href:t.route("inspections.create.new"),class:"fixed bottom-24 right-6 z-40 p-4 bg-gradient-to-r from-indigo-700 to-sky-600 shadow-lg text-white rounded-full transition-colors duration-200 animate-bounce",title:"Buat Inspeksi Baru"},{default:S(()=>[c(l(Je),{class:"h-6 w-6"})]),_:1},8,["href"])):u("",!0),M.value&&(V.value||b.value||A.value||f.value)?(r(),a("div",Ft,[e("div",Vt,[e("div",Wt,[s[18]||(s[18]=e("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Konfirmasi",-1)),e("div",Ut,[c(l(z),{class:"h-8 w-8 text-blue-500 mr-3 mt-1"}),e("div",null,[(p=o.value)!=null&&p.car?(r(),a("div",qt,[e("p",zt,i(`${o.value.car.brand.name} ${o.value.car.model.name} ${o.value.car.type.name}`),1),e("p",Ht,[v(i(o.value.car.cc)+" â€¢ "+i(o.value.car.transmission)+" â€¢ "+i(o.value.car.year)+" ",1),e("span",Nt,"("+i(o.value.car.fuel_type)+")",1)])])):(r(),a("div",Ot,i((W=o.value)==null?void 0:W.car_name),1)),e("div",Et,[s[16]||(s[16]=e("span",{class:"text-sm font-semibold uppercase tracking-wide text-gray-500 mr-2"},"no polisi:",-1)),e("span",Kt,i((re=o.value)==null?void 0:re.plate_number),1)])])]),e("p",Gt,[v(" Anda yakin ingin "+i(G(o.value).toLowerCase())+" inspeksi ini ",1),(ae=o.value)!=null&&ae.category?(r(),a("span",Jt," berdasarkan Type Inspek: "+i(o.value.category.name),1)):u("",!0),s[17]||(s[17]=v("? "))]),e("div",Qt,[e("button",{onClick:y,type:"button",class:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50"}," Batal "),e("button",{onClick:Ce,type:"button",disabled:l(E).processing,class:"flex-1 inline-flex items-center justify-center px-4 py-2 bg-gradient-to-r from-indigo-700 to-sky-600 shadow-lg text-white border border-transparent rounded-md text-sm font-medium hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed"},[l(E).processing?(r(),a("span",Yt,i(je(o.value)),1)):(r(),a("span",Zt,i(G(o.value)),1))],8,Xt)])])])])):u("",!0),N.value&&m.value?(r(),a("div",es,[e("div",ts,[e("div",ss,[e("div",ns,[s[19]||(s[19]=e("h3",{class:"text-lg font-medium text-gray-900"},"Alihkan Tugas Inspeksi",-1)),e("button",{onClick:y,class:"text-gray-400 hover:text-gray-600"},[c(l(Z),{class:"h-6 w-6"})])]),e("div",rs,[e("div",as,[c(l(z),{class:"h-6 w-6 text-gray-500 mr-3 mt-0.5"}),e("div",null,[e("p",os,i((oe=o.value)==null?void 0:oe.plate_number),1),e("p",is,i((ie=o.value)==null?void 0:ie.car_name),1),e("p",ls,[s[20]||(s[20]=v(" Inspector saat ini: ")),e("span",ds,i(((de=(le=o.value)==null?void 0:le.user)==null?void 0:de.name)||"Belum ditugaskan"),1)])])])]),e("div",us,[e("div",null,[s[22]||(s[22]=e("label",{for:"region",class:"block text-sm font-medium text-gray-700 mb-1"}," Pilih Region ",-1)),C(e("select",{id:"region","onUpdate:modelValue":s[1]||(s[1]=n=>D.value=n),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500 text-sm",disabled:P.value},[s[21]||(s[21]=e("option",{value:""},"-- Semua Region --",-1)),(r(!0),a(X,null,Y(O.value,n=>(r(),a("option",{key:n.id,value:n.id,disabled:!n.has_active_team,class:R({"text-gray-400":!n.has_active_team})},[v(i(n.name)+" ",1),n.has_active_team?u("",!0):(r(),a("span",ps,"(Tidak tersedia)"))],10,ms))),128))],8,cs),[[ye,D.value]]),P.value?(r(),a("p",gs,"Memuat data area...")):u("",!0)]),e("div",null,[s[24]||(s[24]=e("label",{for:"inspector",class:"block text-sm font-medium text-gray-700 mb-1"}," Pilih Inspector Baru * ",-1)),C(e("select",{id:"inspector","onUpdate:modelValue":s[2]||(s[2]=n=>k.value=n),required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500 text-sm"},[s[23]||(s[23]=e("option",{value:""},"-- Pilih Inspector --",-1)),(r(!0),a(X,null,Y(Ve.value,n=>(r(),a("option",{key:n.id,value:n.id},i(n.name)+" ("+i(n.email)+") ",9,vs))),128))],512),[[ye,k.value]])]),e("div",null,[s[25]||(s[25]=e("label",{for:"transferReason",class:"block text-sm font-medium text-gray-700 mb-1"}," Alasan Pengalihan * ",-1)),C(e("textarea",{id:"transferReason","onUpdate:modelValue":s[3]||(s[3]=n=>w.value=n),rows:"3",required:"",placeholder:"Masukkan alasan mengapa tugas ini dialihkan...",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500 text-sm"},null,512),[[Q,w.value]]),l(_).errors.transfer_reason?(r(),a("p",fs,i(l(_).errors.transfer_reason),1)):u("",!0)])]),e("div",xs,[e("button",{onClick:y,type:"button",class:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50"}," Batal "),e("button",{onClick:Re,disabled:!k.value||!w.value.trim()||l(_).processing,class:"px-4 py-2 bg-gradient-to-r from-green-600 to-emerald-600 text-white border border-transparent rounded-md text-sm font-medium hover:from-green-700 hover:to-emerald-700 disabled:opacity-50 disabled:cursor-not-allowed"},[l(_).processing?(r(),a("span",bs,[c(l(be),{class:"h-4 w-4 animate-spin inline mr-2"}),s[26]||(s[26]=v(" Mengalihkan... "))])):(r(),a("span",_s,"Alihkan Tugas"))],8,ys)])])])])):u("",!0),H.value&&(V.value||b.value||A.value||m.value||f.value)?(r(),a("div",hs,[e("div",ws,[e("div",ks,[e("div",Is,[s[27]||(s[27]=e("h3",{class:"text-lg font-medium text-gray-900"},"Batalkan Inspeksi",-1)),e("button",{onClick:y,class:"text-gray-400 hover:text-gray-600"},[c(l(Z),{class:"h-6 w-6"})])]),e("div",Cs,[c(l(z),{class:"h-8 w-8 text-red-500 mr-3 mt-1"}),e("div",null,[(ue=o.value)!=null&&ue.car?(r(),a("div",Rs,[e("p",$s,i(`${o.value.car.brand.name} ${o.value.car.model.name} ${o.value.car.type.name}`),1),e("p",js,[v(i(o.value.car.cc)+" â€¢ "+i(o.value.car.transmission)+" â€¢ "+i(o.value.car.year)+" ",1),e("span",Ms,"("+i(o.value.car.fuel_type)+")",1)])])):(r(),a("div",Ts,i((ce=o.value)==null?void 0:ce.car_name),1)),e("div",As,[s[28]||(s[28]=e("span",{class:"text-sm font-semibold uppercase tracking-wide text-gray-500 mr-2"},"no polisi:",-1)),e("span",Ls,i((me=o.value)==null?void 0:me.plate_number),1)])])]),e("div",Ss,[s[29]||(s[29]=e("label",{for:"cancelReason",class:"block text-sm font-medium text-gray-700 mb-2"}," Alasan Pembatalan * ",-1)),C(e("textarea",{id:"cancelReason","onUpdate:modelValue":s[4]||(s[4]=n=>h.value=n),rows:"4",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Masukkan alasan pembatalan inspeksi...",required:""},null,512),[[Q,h.value]]),l(I).errors.reason?(r(),a("p",Bs,i(l(I).errors.reason),1)):u("",!0)]),e("div",Ds,[e("button",{onClick:y,type:"button",class:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50"}," Tutup "),e("button",{onClick:Ie,disabled:!h.value.trim()||l(I).processing,class:"px-4 py-2 bg-red-600 text-white border border-transparent rounded-md text-sm font-medium hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed"},[l(I).processing?(r(),a("span",Fs,"Memproses...")):(r(),a("span",Vs,"Batalkan Inspeksi"))],8,Ps)])])])])):u("",!0)]}),_:1}))}},Ks=Oe(Ws,[["__scopeId","data-v-5beb3b16"]]);export{Ks as default};
