import{q as $,c as r,o as l,d as e,f as I,b as f,n as D,t as b,r as k,g as z,E as q,J as ne,z as S,A as M,u as x,F,m as Q,G as H,e as G,x as ae,y as oe,k as A,p as le,j as N,w as L,v as ie,S as O,W as J}from"./vendor-BJzInWMf.js";import{A as re}from"./AppLayout-C0h6LEJv.js";import{_ as de}from"./CardCustomer-DWwUAmCj.js";import{d as ue}from"./debounce-BJFGEz3o.js";import{_ as me}from"./app-DvQ2AiQL.js";import{r as ce,C as pe}from"./car-Dii5PdOG.js";import{r as ve}from"./ClipboardDocumentListIcon-Dxd2S-d9.js";import"./UserIcon-vx4KdVK0.js";const xe={key:0,class:"space-y-2"},ge={class:"flex justify-between items-center"},fe={class:"flex justify-between items-center"},be={key:0,class:"flex justify-between items-center"},ye={key:1,class:"flex justify-between items-center"},he={class:"text-xs text-gray-700 font-mono"},_e={key:2,class:"flex justify-between items-center"},we={class:"text-xs text-gray-700"},ke={key:3,class:"flex justify-between items-center"},Ce={class:"text-xs text-gray-700"},$e={key:1},je={__name:"CardTransaction",props:{transaction:{type:Object,default:null},showEditButton:{type:Boolean,default:!0}},emits:["edit"],setup(o){const w=o,y={pending:"Menunggu Pembayaran",paid:"Sudah Dibayar",failed:"Gagal",refunded:"Dikembalikan",expired:"Kadaluarsa"},c={cash:"Cash",transfer:"Transfer",debit_card:"Kartu Debit",credit_card:"Kartu Kredit",qris:"QRIS"},h=$(()=>{var t;return((t=w.transaction)==null?void 0:t.status)==="paid"}),p=$(()=>{var t;return((t=w.transaction)==null?void 0:t.status)==="pending"}),u=$(()=>{var t;return((t=w.transaction)==null?void 0:t.status)==="failed"}),v=$(()=>!h.value&&!p.value&&!u.value),g=t=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(t);return(t,i)=>(l(),r("div",{class:D(["p-3 rounded border",{"bg-green-50 border-green-200":h.value,"bg-red-50 border-red-200":u.value,"bg-yellow-50 border-yellow-200":p.value}])},[i[7]||(i[7]=e("div",{class:"flex justify-between items-center mb-2"},[e("h4",{class:"text-sm font-medium text-gray-700 flex items-center"},[e("svg",{class:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z"})]),I(" Pembayaran ")])],-1)),o.transaction?(l(),r("div",xe,[e("div",ge,[i[0]||(i[0]=e("span",{class:"text-xs font-medium text-gray-600"},"Status:",-1)),e("span",{class:D([{"text-green-600 font-semibold":h.value,"text-yellow-600 font-semibold":p.value,"text-red-600 font-semibold":u.value,"text-gray-600 font-semibold":v.value},"text-xs"])},b(y[o.transaction.status]),3)]),e("div",fe,[i[1]||(i[1]=e("span",{class:"text-xs font-medium text-gray-600"},"Nominal:",-1)),e("span",{class:D([{"text-green-700 font-semibold":h.value,"text-yellow-700 font-semibold":p.value,"text-red-700 font-semibold":u.value},"text-xs"])},b(g(o.transaction.amount)),3)]),o.transaction.payment_method?(l(),r("div",be,[i[2]||(i[2]=e("span",{class:"text-xs font-medium text-gray-600"},"Metode:",-1)),e("span",{class:D([{"text-green-700":h.value,"text-yellow-700":p.value,"text-red-700":u.value},"text-xs"])},b(c[o.transaction.payment_method]||o.transaction.payment_method),3)])):f("",!0),o.transaction.invoice_number?(l(),r("div",ye,[i[3]||(i[3]=e("span",{class:"text-xs font-medium text-gray-600"},"Invoice:",-1)),e("span",he,b(o.transaction.invoice_number),1)])):f("",!0),o.transaction.payment_date?(l(),r("div",_e,[i[4]||(i[4]=e("span",{class:"text-xs font-medium text-gray-600"},"Tanggal:",-1)),e("span",we,b(new Date(o.transaction.payment_date).toLocaleDateString("id-ID")),1)])):f("",!0),o.transaction.payer&&o.transaction.payer.name?(l(),r("div",ke,[i[5]||(i[5]=e("span",{class:"text-xs font-medium text-gray-600"},"Dibayar oleh:",-1)),e("span",Ce,b(o.transaction.payer.name),1)])):f("",!0)])):(l(),r("div",$e,i[6]||(i[6]=[e("p",{class:"text-xs text-yellow-700"},"Data transaksi belum tersedia",-1)])))],2))}},Ie={class:"space-y-4"},Se={class:"relative"},De={key:0,class:"absolute z-10 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg max-h-60 overflow-y-auto"},Ae=["onClick"],Me={class:"font-medium text-sm"},Te={class:"text-xs text-gray-500"},Ve={key:0},Be={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Pe={key:0,class:"text-xs text-red-600 mt-1"},Le={class:"relative"},Oe={key:0,class:"text-xs text-red-600 mt-1"},Fe={class:"md:col-span-2"},Ne={key:1,class:"p-3 bg-blue-50 border border-blue-200 rounded-md"},ze={class:"flex justify-between items-start"},Ue={class:"text-sm text-gray-700"},qe={class:"text-xs text-gray-600"},Ee={class:"text-xs text-gray-600"},He={__name:"CustomerForm",props:{formData:{type:Object,required:!0},existingCustomer:{type:Object,default:null},existingSeller:{type:Object,default:null}},emits:["update:form","customer-selected","update:errors"],setup(o,{emit:w}){const y=w,c=o,h=k(""),p=k([]),u=k(!1),v=k(null),g=k({customer_name:"",customer_phone:""}),t=k({customer_id:"",customer_name:"",customer_phone:"",customer_email:"",customer_address:""});z(()=>{var n;c.existingCustomer?(t.value={customer_id:c.existingCustomer.id,customer_name:c.existingCustomer.name,customer_phone:((n=c.existingCustomer.phone)==null?void 0:n.replace("62",""))||"",customer_email:c.existingCustomer.email||"",customer_address:c.existingCustomer.address||""},v.value=c.existingCustomer):t.value={...c.formData}}),q(t,n=>{y("update:form",n)},{deep:!0});const i=ue(async()=>{if(!h.value.trim()){p.value=[];return}try{const n=await fetch(`/customers/search?search=${encodeURIComponent(h.value)}`);n.ok&&(p.value=await n.json())}catch(n){console.error("Error searching customers:",n),p.value=[]}},300),C=n=>{var a;v.value=n,t.value={customer_id:n.id,customer_name:n.name,customer_phone:((a=n.phone)==null?void 0:a.replace("62",""))||"",customer_email:n.email||"",customer_address:n.address||""},n.sellers&&n.sellers.length>0&&y("customer-selected",{customer:n,sellers:n.sellers}),u.value=!1,h.value=""},B=()=>{v.value=null,t.value={customer_id:"",customer_name:"",customer_phone:"",customer_email:"",customer_address:""}},T=n=>{n.target.closest(".relative")||(u.value=!1)};z(()=>{document.addEventListener("click",T)}),ne(()=>{document.removeEventListener("click",T)});const P=()=>{t.value.customer_name.trim()?t.value.customer_name.trim().length<3?g.value.customer_name="Nama customer minimal 3 karakter":g.value.customer_name="":g.value.customer_name="Nama customer wajib diisi"},_=()=>{const n=t.value.customer_phone.trim();n?/^\d{9,14}$/.test(n)?g.value.customer_phone="":g.value.customer_phone="Nomor WhatsApp harus 9-14 digit angka":g.value.customer_phone="Nomor WhatsApp wajib diisi"};return(n,a)=>(l(),r("div",Ie,[e("div",null,[a[7]||(a[7]=e("label",{class:"block text-xs font-medium text-gray-600 mb-1"}," Pilih Customer yang sudah ada (opsional) ",-1)),e("div",Se,[S(e("input",{"onUpdate:modelValue":a[0]||(a[0]=d=>h.value=d),onInput:a[1]||(a[1]=(...d)=>x(i)&&x(i)(...d)),onFocus:a[2]||(a[2]=d=>u.value=!0),type:"text",placeholder:"Cari customer...",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm"},null,544),[[M,h.value]]),u.value&&p.value.length>0?(l(),r("div",De,[(l(!0),r(F,null,Q(p.value,d=>(l(),r("div",{key:d.id,onClick:V=>C(d),class:"px-3 py-2 hover:bg-blue-50 cursor-pointer border-b border-gray-100 last:border-b-0"},[e("div",Me,b(d.name),1),e("div",Te,b(d.phone)+" • "+b(d.email),1)],8,Ae))),128))])):f("",!0)]),a[8]||(a[8]=e("p",{class:"text-xs text-gray-500 mt-1"}," Kosongkan jika ingin membuat customer baru ",-1))]),v.value?f("",!0):(l(),r("div",Ve,[a[14]||(a[14]=e("h4",{class:"text-sm font-medium text-gray-700 mb-3 border-b pb-2"}," Data Customer Baru ",-1)),e("div",Be,[e("div",null,[a[9]||(a[9]=e("label",{class:"block text-xs font-medium text-gray-600 mb-1"}," Nama Customer * ",-1)),S(e("input",{"onUpdate:modelValue":a[3]||(a[3]=d=>t.value.customer_name=d),onBlur:P,type:"text",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm",placeholder:"Nama lengkap customer"},null,544),[[M,t.value.customer_name]]),g.value.customer_name?(l(),r("p",Pe,b(g.value.customer_name),1)):f("",!0)]),e("div",null,[a[11]||(a[11]=e("label",{class:"block text-xs font-medium text-gray-600 mb-1"}," Nomor WhatsApp * ",-1)),e("div",Le,[a[10]||(a[10]=e("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[e("span",{class:"text-gray-500 text-sm"},"+62")],-1)),S(e("input",{"onUpdate:modelValue":a[4]||(a[4]=d=>t.value.customer_phone=d),onBlur:_,type:"tel",required:"",class:"w-full pl-10 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm",placeholder:"8123456789"},null,544),[[M,t.value.customer_phone]])]),g.value.customer_phone?(l(),r("p",Oe,b(g.value.customer_phone),1)):f("",!0)]),e("div",null,[a[12]||(a[12]=e("label",{class:"block text-xs font-medium text-gray-600 mb-1"}," Email ",-1)),S(e("input",{"onUpdate:modelValue":a[5]||(a[5]=d=>t.value.customer_email=d),type:"email",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm",placeholder:"customer@email.com"},null,512),[[M,t.value.customer_email]])]),e("div",Fe,[a[13]||(a[13]=e("label",{class:"block text-xs font-medium text-gray-600 mb-1"}," Alamat ",-1)),S(e("textarea",{"onUpdate:modelValue":a[6]||(a[6]=d=>t.value.customer_address=d),rows:"3",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm",placeholder:"Alamat lengkap customer"},null,512),[[M,t.value.customer_address]])])])])),v.value?(l(),r("div",Ne,[e("div",ze,[e("div",null,[a[15]||(a[15]=e("h5",{class:"text-sm font-semibold text-blue-800"},"Customer terpilih:",-1)),e("p",Ue,b(v.value.name),1),e("p",qe,b(v.value.phone),1),e("p",Ee,b(v.value.email),1)]),e("button",{onClick:B,type:"button",class:"text-xs text-red-600 hover:text-red-800"}," Ubah ")])])):f("",!0)]))}},Re={key:0,class:"space-y-4"},Ke={class:"space-y-4"},We=["disabled"],Ge=["value","disabled"],Je={key:0,class:"text-xs text-gray-500"},Qe={key:0,class:"text-xs text-gray-500 mt-1"},Ye={key:0,class:"text-xs text-red-600 mt-1"},Xe={class:"flex"},Ze=["disabled"],et={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},tt={key:0,class:"text-xs text-red-600 mt-1"},st={class:"relative"},nt={key:0,class:"text-xs text-red-600 mt-1"},at={__name:"SellerForm",props:{formData:{type:Object,required:!0},showForm:{type:Boolean,default:!1},existingSeller:{type:Object,default:null}},emits:["update:form","update:errors"],setup(o,{emit:w}){const y=w,c=o,h=k([]),p=k(!1),u=k({seller_inspection_area:"",seller_inspection_address:"",seller_link_maps:"",seller_unit_holder_name:"",seller_unit_holder_phone:"",seller_settings:{}}),v=k({seller_inspection_address:"",seller_link_maps:"",seller_unit_holder_name:"",seller_unit_holder_phone:""}),g=async()=>{try{p.value=!0;const _=await fetch("/api/regions/active-with-teams");if(_.ok){const n=await _.json();h.value=n.regions||[]}else console.error("Failed to fetch regions")}catch(_){console.error("Error fetching regions:",_)}finally{p.value=!1}};z(()=>{var _;g(),c.existingSeller?u.value={seller_inspection_area:c.existingSeller.inspection_area||"",seller_inspection_address:c.existingSeller.inspection_address||"",seller_link_maps:c.existingSeller.link_maps||"",seller_unit_holder_name:c.existingSeller.unit_holder_name||"",seller_unit_holder_phone:((_=c.existingSeller.unit_holder_phone)==null?void 0:_.replace("62",""))||"",seller_settings:c.existingSeller.settings||{}}:u.value={...c.formData}}),q(u,_=>{y("update:form",_)},{deep:!0});const t=()=>{navigator.geolocation?navigator.geolocation.getCurrentPosition(_=>{const{latitude:n,longitude:a}=_.coords,d=`https://www.google.com/maps?q=${n},${a}`;u.value.seller_link_maps=d,i(n,a)},_=>{alert("Gagal mendapatkan lokasi: "+_.message)}):alert("Browser tidak mendukung geolocation")},i=async(_,n)=>{try{const d=await(await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${_}&lon=${n}`)).json();if(d.address&&(u.value.seller_inspection_area||(u.value.seller_inspection_area=d.address.city||d.address.town||d.address.village||""),!u.value.seller_inspection_address)){const V=[];d.address.road&&V.push(d.address.road),d.address.suburb&&V.push(d.address.suburb),d.address.city_district&&V.push(d.address.city_district),d.address.city&&V.push(d.address.city),d.address.state&&V.push(d.address.state),u.value.seller_inspection_address=V.join(", ")}}catch(a){console.error("Error reverse geocoding:",a)}},C=()=>{if(u.value.seller_link_maps&&u.value.seller_link_maps.includes("google.com/maps"))window.open(u.value.seller_link_maps,"_blank","noopener,noreferrer");else if(u.value.seller_inspection_address){const _=encodeURIComponent(u.value.seller_inspection_address);window.open(`https://www.google.com/maps/search/?api=1&query=${_}`,"_blank","noopener,noreferrer")}},B=()=>{u.value.seller_inspection_address.trim()?u.value.seller_inspection_address.trim().length<5?v.value.seller_inspection_address="Alamat inspeksi minimal 5 karakter":v.value.seller_inspection_address="":v.value.seller_inspection_address="Alamat inspeksi wajib diisi"},T=()=>{u.value.seller_unit_holder_name.trim()?u.value.seller_unit_holder_name.trim().length<3?v.value.seller_unit_holder_name="Nama penanggung jawab minimal 3 karakter":v.value.seller_unit_holder_name="":v.value.seller_unit_holder_name="Nama penanggung jawab wajib diisi"},P=()=>{const _=u.value.seller_unit_holder_phone.trim();_?/^\d{9,14}$/.test(_)?v.value.seller_unit_holder_phone="":v.value.seller_unit_holder_phone="Nomor WhatsApp harus 9-14 digit angka":v.value.seller_unit_holder_phone="Nomor WhatsApp wajib diisi"};return(_,n)=>o.showForm?(l(),r("div",Re,[n[14]||(n[14]=e("h4",{class:"text-sm font-medium text-gray-700 mb-3 border-b pb-2"}," Data Lokasi Inspeksi & Penanggung Jawab ",-1)),e("div",Ke,[e("div",null,[n[6]||(n[6]=e("label",{class:"block text-xs font-medium text-gray-600 mb-1"}," Area Inspeksi * ",-1)),S(e("select",{"onUpdate:modelValue":n[0]||(n[0]=a=>u.value.seller_inspection_area=a),required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm",disabled:p.value},[n[5]||(n[5]=e("option",{value:"",disabled:""},"Pilih Area Inspeksi",-1)),(l(!0),r(F,null,Q(h.value,a=>(l(),r("option",{key:a.id,value:a.name,disabled:!a.has_active_team,class:D({"text-gray-400":!a.has_active_team})},[I(b(a.name)+" ",1),a.has_active_team?f("",!0):(l(),r("span",Je,"(Tidak tersedia)"))],10,Ge))),128))],8,We),[[H,u.value.seller_inspection_area]]),p.value?(l(),r("p",Qe,"Memuat data area...")):f("",!0)]),e("div",null,[n[7]||(n[7]=e("label",{class:"block text-xs font-medium text-gray-600 mb-1"}," Alamat Lengkap Inspeksi * ",-1)),S(e("textarea",{"onUpdate:modelValue":n[1]||(n[1]=a=>u.value.seller_inspection_address=a),onBlur:B,rows:"3",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm",placeholder:"Alamat lengkap lokasi inspeksi"},null,544),[[M,u.value.seller_inspection_address]]),v.value.seller_inspection_address?(l(),r("p",Ye,b(v.value.seller_inspection_address),1)):f("",!0)]),e("div",null,[e("div",{class:"flex justify-between items-center mb-1"},[n[9]||(n[9]=e("label",{class:"block text-xs font-medium text-gray-600"}," Link Google Maps ",-1)),e("button",{type:"button",onClick:t,class:"text-xs text-blue-600 hover:text-blue-800 flex items-center",title:"Ambil lokasi saat ini"},n[8]||(n[8]=[e("svg",{class:"h-3 w-3 mr-1",fill:"currentColor",viewBox:"0 0 24 24"},[e("path",{d:"M12 8c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4zm8.94 3A8.994 8.994 0 0013 3.06V1h-2v2.06A8.994 8.994 0 003.06 11H1v2h2.06A8.994 8.994 0 0011 20.94V23h2v-2.06A8.994 8.994 0 0020.94 13H23v-2h-2.06zM12 19c-3.87 0-7-3.13-7-7s3.13-7 7-7 7 3.13 7 7-3.13 7-7 7z"})],-1),I(" Lokasi Saat Ini ")]))]),e("div",Xe,[S(e("input",{"onUpdate:modelValue":n[2]||(n[2]=a=>u.value.seller_link_maps=a),type:"text",placeholder:"https://maps.google.com/?q=...",class:"flex-1 px-3 py-2 border border-gray-300 rounded-l-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm"},null,512),[[M,u.value.seller_link_maps]]),e("button",{type:"button",onClick:C,class:"px-3 py-2 bg-blue-500 text-white rounded-r-md hover:bg-blue-600 text-sm",disabled:!u.value.seller_link_maps,title:"Cari di Maps"},n[10]||(n[10]=[e("svg",{class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})],-1)]),8,Ze)])]),e("div",et,[e("div",null,[n[11]||(n[11]=e("label",{class:"block text-xs font-medium text-gray-600 mb-1"}," Nama Penanggung Jawab * ",-1)),S(e("input",{"onUpdate:modelValue":n[3]||(n[3]=a=>u.value.seller_unit_holder_name=a),onBlur:T,type:"text",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm",placeholder:"Nama orang yang memegang unit"},null,544),[[M,u.value.seller_unit_holder_name]]),v.value.seller_unit_holder_name?(l(),r("p",tt,b(v.value.seller_unit_holder_name),1)):f("",!0)]),e("div",null,[n[13]||(n[13]=e("label",{class:"block text-xs font-medium text-gray-600 mb-1"}," Nomor WhatsApp Penanggung Jawab * ",-1)),e("div",st,[n[12]||(n[12]=e("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[e("span",{class:"text-gray-500 text-sm"},"+62")],-1)),S(e("input",{"onUpdate:modelValue":n[4]||(n[4]=a=>u.value.seller_unit_holder_phone=a),onBlur:P,type:"tel",required:"",class:"w-full pl-10 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm",placeholder:"8123456789"},null,544),[[M,u.value.seller_unit_holder_phone]])]),v.value.seller_unit_holder_phone?(l(),r("p",nt,b(v.value.seller_unit_holder_phone),1)):f("",!0)])])])])):f("",!0)}},ot={class:"space-y-4"},lt={class:"space-y-4"},it={key:0},rt={__name:"TransactionForm",props:{formData:{type:Object,required:!0},existingTransaction:{type:Object,default:null}},emits:["update:form"],setup(o,{emit:w}){const y=w,c=o,h=k(""),p=k({transaction_amount:"",transaction_payment_method:"",transaction_status:"pending",transaction_payment_date:new Date().toISOString().split("T")[0],transaction_notes:""});z(()=>{if(c.existingTransaction){const g=parseFloat(c.existingTransaction.amount)||0;p.value={transaction_amount:g,transaction_payment_method:c.existingTransaction.payment_method||"",transaction_status:c.existingTransaction.status||"pending",transaction_payment_date:c.existingTransaction.payment_date?new Date(c.existingTransaction.payment_date).toISOString().split("T")[0]:new Date().toISOString().split("T")[0],transaction_notes:c.existingTransaction.notes||""},h.value=u(g)}else p.value={...c.formData}});const u=g=>{if(!g)return"";const t=String(g).replace(/\D/g,""),i=parseInt(t,10);return isNaN(i)?"":new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(i)},v=g=>{const t=g.target.value.replace(/\D/g,"");p.value.transaction_amount=t,h.value=u(t)};return q(p,g=>{y("update:form",g)},{deep:!0}),(g,t)=>(l(),r("div",ot,[t[12]||(t[12]=e("h4",{class:"text-sm font-medium text-gray-700 mb-3 border-b pb-2"}," Data Pembayaran ",-1)),e("div",lt,[e("div",null,[t[5]||(t[5]=e("label",{class:"block text-xs font-medium text-gray-600 mb-1"}," Nominal Pembayaran * ",-1)),S(e("input",{"onUpdate:modelValue":t[0]||(t[0]=i=>h.value=i),onInput:v,type:"text",required:"",placeholder:"Contoh: 250000",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm"},null,544),[[M,h.value]])]),e("div",null,[t[7]||(t[7]=e("label",{class:"block text-xs font-medium text-gray-600 mb-1"}," Metode Pembayaran * ",-1)),S(e("select",{"onUpdate:modelValue":t[1]||(t[1]=i=>p.value.transaction_payment_method=i),required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm"},t[6]||(t[6]=[G('<option value="">Pilih Metode</option><option value="cash">Cash</option><option value="transfer">Transfer</option><option value="debit_card">Kartu Debit</option><option value="credit_card">Kartu Kredit</option><option value="qris">QRIS</option>',6)]),512),[[H,p.value.transaction_payment_method]])]),e("div",null,[t[9]||(t[9]=e("label",{class:"block text-xs font-medium text-gray-600 mb-1"}," Status * ",-1)),S(e("select",{"onUpdate:modelValue":t[2]||(t[2]=i=>p.value.transaction_status=i),required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm"},t[8]||(t[8]=[G('<option value="pending">Menunggu Pembayaran</option><option value="paid">Sudah Dibayar</option><option value="failed">Gagal</option><option value="refunded">Dikembalikan</option><option value="expired">Kadaluarsa</option>',5)]),512),[[H,p.value.transaction_status]])]),p.value.transaction_status==="paid"?(l(),r("div",it,[t[10]||(t[10]=e("label",{class:"block text-xs font-medium text-gray-600 mb-1"}," Tanggal Pembayaran ",-1)),S(e("input",{"onUpdate:modelValue":t[3]||(t[3]=i=>p.value.transaction_payment_date=i),type:"date",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm"},null,512),[[M,p.value.transaction_payment_date]])])):f("",!0),e("div",null,[t[11]||(t[11]=e("label",{class:"block text-xs font-medium text-gray-600 mb-1"}," Catatan ",-1)),S(e("textarea",{"onUpdate:modelValue":t[4]||(t[4]=i=>p.value.transaction_notes=i),rows:"2",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm",placeholder:"Catatan tambahan..."},null,512),[[M,p.value.transaction_notes]])])])]))}},dt={key:0,class:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50 p-4"},ut={class:"bg-white p-6 rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] overflow-y-auto"},mt={class:"flex justify-between items-center mb-6 pb-4 border-b"},ct={class:"text-lg font-bold"},pt={class:"flex items-center mb-4"},vt={key:0},xt={class:"flex items-center mb-4"},gt={class:"flex items-center mb-4"},ft={key:1,class:"p-3 bg-red-50 border border-red-200 rounded-md"},bt={key:0,class:"text-sm text-red-600"},yt={key:1,class:"text-sm text-red-600"},ht={class:"flex justify-end space-x-3 pt-6 border-t"},_t=["disabled"],wt=["disabled"],kt={__name:"AllDataModal",props:{show:{type:Boolean,required:!0},inspectionId:{type:String,required:!0},existingCustomer:{type:Object,default:null},existingSeller:{type:Object,default:null},existingTransaction:{type:Object,default:null}},emits:["close","saved"],setup(o,{emit:w}){const y=o,c=w;k(!1);const h=k(""),p=k(1),u=k(!1),v=k({}),g=k({}),t=ae({customer_id:"",customer_name:"",customer_phone:"",customer_email:"",customer_address:"",seller_inspection_area:"",seller_inspection_address:"",seller_link_maps:"",seller_unit_holder_name:"",seller_unit_holder_phone:"",seller_settings:{},transaction_amount:"",transaction_payment_method:"",transaction_status:"pending",transaction_payment_date:new Date().toISOString().split("T")[0],transaction_notes:""}),i=$(()=>!(!t.customer_name||!t.customer_phone||Object.values(v.value).some(n=>n)||u.value&&(!t.seller_inspection_area||!t.seller_inspection_address||!t.seller_unit_holder_name||!t.seller_unit_holder_phone||Object.values(g.value).some(n=>n))||!t.transaction_amount||!t.transaction_payment_method||!t.transaction_status));z(()=>{var n,a;y.existingCustomer&&(t.customer_id=y.existingCustomer.id,t.customer_name=y.existingCustomer.name,t.customer_phone=((n=y.existingCustomer.phone)==null?void 0:n.replace("62",""))||"",t.customer_email=y.existingCustomer.email||"",t.customer_address=y.existingCustomer.address||"",u.value=!0,p.value=3),y.existingSeller&&(t.seller_inspection_area=y.existingSeller.inspection_area||"",t.seller_inspection_address=y.existingSeller.inspection_address||"",t.seller_link_maps=y.existingSeller.link_maps||"",t.seller_unit_holder_name=y.existingSeller.unit_holder_name||"",t.seller_unit_holder_phone=((a=y.existingSeller.unit_holder_phone)==null?void 0:a.replace("62",""))||"",t.seller_settings=y.existingSeller.settings||{}),y.existingTransaction&&(t.transaction_amount=y.existingTransaction.amount||"",t.transaction_payment_method=y.existingTransaction.payment_method||"",t.transaction_status=y.existingTransaction.status||"pending",t.transaction_payment_date=y.existingTransaction.payment_date?new Date(y.existingTransaction.payment_date).toISOString().split("T")[0]:new Date().toISOString().split("T")[0],t.transaction_notes=y.existingTransaction.notes||"")}),q([()=>t.customer_name,()=>t.customer_phone],([n,a])=>{n&&a?(u.value=!0,p.value=2):(u.value=!1,p.value=1)});const C=n=>{var a;if(n.sellers&&n.sellers.length>0){const d=n.sellers[0];t.seller_inspection_area=d.inspection_area||"",t.seller_inspection_address=d.inspection_address||"",t.seller_link_maps=d.link_maps||"",t.seller_unit_holder_name=d.unit_holder_name||"",t.seller_unit_holder_phone=((a=d.unit_holder_phone)==null?void 0:a.replace("62",""))||"",t.seller_settings=d.settings||{}}u.value=!0,p.value=2},B=n=>{Object.assign(t,n)},T=n=>{Object.assign(t,n)},P=n=>{Object.assign(t,n)},_=()=>{if(!i.value){h.value="Harap lengkapi semua field yang wajib diisi";return}const n={...t.data(),customer_phone:t.customer_phone.startsWith("62")?t.customer_phone:"62"+t.customer_phone.replace(/^0/,""),seller_unit_holder_phone:t.seller_unit_holder_phone.startsWith("62")?t.seller_unit_holder_phone:"62"+t.seller_unit_holder_phone.replace(/^0/,""),transaction_amount:parseInt(t.transaction_amount,10)};t.post(`/inspections-data/${y.inspectionId}/store-all-data`,n,{preserveScroll:!0,onSuccess:()=>{c("close"),c("saved")},onError:a=>{h.value=Object.values(a)[0]||"Gagal menyimpan data"}})};return(n,a)=>o.show?(l(),r("div",dt,[e("div",ut,[e("div",mt,[e("h3",ct,b(o.existingCustomer?"Edit Data Inspeksi":"Tambah Data Inspeksi"),1),e("button",{onClick:a[0]||(a[0]=d=>n.$emit("close")),class:"text-gray-500 hover:text-gray-700"},a[4]||(a[4]=[e("svg",{class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),e("form",{onSubmit:oe(_,["prevent"]),class:"space-y-8"},[e("div",null,[e("div",pt,[e("div",{class:D(["w-6 h-6 rounded-full flex items-center justify-center text-xs font-medium",p.value>=1?"bg-blue-600 text-white":"bg-gray-200 text-gray-600"])}," 1 ",2),a[5]||(a[5]=e("h4",{class:"ml-3 text-sm font-medium text-gray-700"},"Data Customer",-1))]),A(He,{"form-data":{customer_id:x(t).customer_id,customer_name:x(t).customer_name,customer_phone:x(t).customer_phone,customer_email:x(t).customer_email,customer_address:x(t).customer_address},"existing-customer":o.existingCustomer,"existing-seller":o.existingSeller,"onUpdate:form":B,onCustomerSelected:C,"onUpdate:errors":a[1]||(a[1]=d=>v.value=d)},null,8,["form-data","existing-customer","existing-seller"])]),u.value?(l(),r("div",vt,[e("div",xt,[e("div",{class:D(["w-6 h-6 rounded-full flex items-center justify-center text-xs font-medium",p.value>=2?"bg-blue-600 text-white":"bg-gray-200 text-gray-600"])}," 2 ",2),a[6]||(a[6]=e("h4",{class:"ml-3 text-sm font-medium text-gray-700"},"Lokasi & Penanggung Jawab",-1))]),A(at,{"form-data":{seller_inspection_area:x(t).seller_inspection_area,seller_inspection_address:x(t).seller_inspection_address,seller_link_maps:x(t).seller_link_maps,seller_unit_holder_name:x(t).seller_unit_holder_name,seller_unit_holder_phone:x(t).seller_unit_holder_phone,seller_settings:x(t).seller_settings},"show-form":u.value,"existing-seller":o.existingSeller,"onUpdate:form":T,"onUpdate:errors":a[2]||(a[2]=d=>g.value=d)},null,8,["form-data","show-form","existing-seller"])])):f("",!0),e("div",null,[e("div",gt,[e("div",{class:D(["w-6 h-6 rounded-full flex items-center justify-center text-xs font-medium",p.value>=3?"bg-blue-600 text-white":"bg-gray-200 text-gray-600"])}," 3 ",2),a[7]||(a[7]=e("h4",{class:"ml-3 text-sm font-medium text-gray-700"},"Pembayaran",-1))]),A(rt,{"form-data":{transaction_amount:x(t).transaction_amount,transaction_payment_method:x(t).transaction_payment_method,transaction_status:x(t).transaction_status,transaction_payment_date:x(t).transaction_payment_date,transaction_notes:x(t).transaction_notes},"existing-transaction":o.existingTransaction,"onUpdate:form":P},null,8,["form-data","existing-transaction"])]),x(t).hasErrors||h.value?(l(),r("div",ft,[h.value?(l(),r("p",bt,b(h.value),1)):x(t).errors?(l(),r("p",yt,b(Object.values(x(t).errors)[0]),1)):f("",!0)])):f("",!0),e("div",ht,[e("button",{type:"button",onClick:a[3]||(a[3]=d=>n.$emit("close")),disabled:x(t).processing,class:"px-4 py-2 bg-gray-300 text-gray-700 rounded-md text-sm hover:bg-gray-400 disabled:opacity-50"}," Batal ",8,_t),e("button",{type:"submit",disabled:x(t).processing||!i.value,class:"px-4 py-2 bg-blue-600 text-white rounded-md text-sm hover:bg-blue-700 disabled:opacity-50"},b(x(t).processing?"Menyimpan...":"Simpan Semua Data"),9,wt)])],32)])])):f("",!0)}},Ct={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6"},$t={class:"bg-white rounded-xl shadow-md overflow-hidden border border-gray-200"},jt={class:"p-4 flex justify-between items-start"},It={class:"flex items-center mb-1"},St={class:"text-sm font-semibold text-blue-700 ml-7 -mt-1"},Dt={class:"px-4 py-3 bg-gray-50 border-t border-gray-100"},At={class:"flex items-center"},Mt={class:"text-sm font-medium text-gray-800"},Tt={key:0},Vt={class:"text-gray-600"},Bt={key:1},Pt={class:"flex items-center justify-between mt-2"},Lt={class:"flex items-center"},Ot={class:"text-sm font-bold text-gray-900"},Ft={class:"px-4 py-3 bg-white border-t border-gray-100"},Nt={class:"flex justify-between items-center mb-3"},zt={class:"px-4 py-3 bg-white border-t border-gray-100"},Ut={key:0,class:"p-2 bg-blue-50 border border-blue-200 rounded"},qt={class:"flex items-center justify-between"},Et={class:"text-sm font-semibold text-blue-800"},Ht={key:0,class:"text-xs text-blue-700"},Rt=["href"],Kt={key:1,class:"p-2 bg-yellow-50 border border-yellow-200 rounded"},Wt={key:0,class:"px-4 py-2 bg-white border-t border-gray-100"},Gt={class:"text-sm text-gray-800"},Jt={class:"px-4 py-3 bg-gray-50 border-t border-gray-100"},Qt={class:"flex items-center mb-1"},Yt={class:"text-sm font-semibold text-gray-800 ml-7 -mt-1"},Xt={key:0,class:"mt-3 mb-3"},Zt={class:"text-sm font-semibold text-gray-800 ml-7 -mt-1 flex items-center"},es={class:"bg-blue-100 text-blue-800 px-2 py-1 rounded-md font-mono"},ts={class:"mt-3"},ss={class:"text-sm text-gray-800"},ns=["innerHTML"],as={class:"p-4 flex gap-2"},os={key:0},ls={key:1},is=["disabled"],rs={key:0},ds={key:1},us=["href","disabled"],ms={key:0},cs={key:1},ps={key:1,class:"flex-1 flex items-center justify-center px-3 py-2 bg-gray-200 text-gray-600 font-medium rounded-md text-sm"},vs=["disabled"],xs=["href","disabled"],gs={key:0},fs={key:1},bs={key:0},ys={key:1},hs={key:1,class:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50"},_s={class:"bg-white p-6 rounded-lg shadow-xl w-96"},ws={class:"flex justify-end space-x-4"},ks=["disabled"],Cs={key:0,class:"flex items-center"},$s={key:1},js={key:2,class:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50"},Is={class:"bg-white p-6 rounded-lg shadow-xl w-96"},Ss={class:"flex justify-end space-x-4 mt-6"},Ds=["disabled"],As={__name:"Review",props:{inspection:{type:Object,required:!0},encryptedIds:Object,transaction:Object},setup(o){var W;const w=o,c=((W=le().props.global)==null?void 0:W.roles)||[],h=$(()=>c.includes("Admin")||c.includes("coordinator"));$(()=>c.includes("coordinator")),$(()=>c.includes("Admin"));const p=$(()=>c.includes("admin_plann")?"Admin AutoInspeksi":c.includes("coordinator")?"Koordinator AutoInspeksi":c.includes("inspector")?"Inspektor AutoInspeksi":c.includes("quality_control")?"QC AutoInspeksi":"Staff AutoInspeksi"),u=k(!1),v=k(!1),g=k(!1),t=k(""),i=k(!1),C=k(null),B=$(()=>w.inspection.customer_id!==null),T=$(()=>w.transaction!==null),P=$(()=>{var m;return((m=w.transaction)==null?void 0:m.status)==="paid"});$(()=>{var m;return((m=w.transaction)==null?void 0:m.status)==="pending"});const _=$(()=>{var m;return((m=w.inspection)==null?void 0:m.status)==="rejected"});$(()=>{var m;return((m=w.inspection)==null?void 0:m.status)==="completed"});const n=$(()=>{var m;return((m=w.inspection)==null?void 0:m.status)==="cancelled"});$(()=>{var m;return((m=w.inspection)==null?void 0:m.status)==="pending"});const a=$(()=>_.value||n.value),d=$(()=>{var m;return T.value&&P.value&&((m=w.transaction)==null?void 0:m.amount)>0}),V=$(()=>B.value&&T.value&&P.value),Y=$(()=>!B.value&&!T.value?"Tambah Data":B.value&&!T.value?"Tambah Pembayaran":!B.value&&T.value?"Tambahkan Data Customer":"Perbaharui Data"),X=m=>{switch(m){case"draft":return"Dibuat";case"in_progress":return"Dalam Proses";case"pending":return"Menunggu";case"pending_review":return"Menunggu Review";case"approved":return"Disetujui";case"rejected":return"Ditolak";case"revision":return"Revisi";case"completed":return"Selesai";case"cancelled":return"Dibatalkan";default:return m}},E=()=>{g.value=!0},U=(m,s)=>{i.value=!0,C.value=s,J.visit(m,{onFinish:()=>{i.value=!1,C.value=null}})},R=m=>{i.value=!0,C.value="download",setTimeout(()=>{i.value=!1,C.value=null},1500)},Z=async m=>{try{await navigator.clipboard.writeText(m),alert(`ID Inspeksi "${m}" berhasil disalin!`)}catch(s){console.error("Gagal menyalin teks: ",s),ee(m)}},ee=m=>{const s=document.createElement("textarea");s.value=m,s.style.position="fixed",s.style.left="-999999px",s.style.top="-999999px",document.body.appendChild(s),s.focus(),s.select();try{const j=document.execCommand("copy");alert(j?`ID Inspeksi "${m}" berhasil disalin!`:"Gagal menyalin ID Inspeksi.")}catch(j){console.error("Fallback pun gagal: ",j),alert("Browser tidak mendukung aksi salin.")}finally{document.body.removeChild(s)}},te=()=>{J.reload()},se=()=>{alert("Fitur pengiriman email masih dalam pengembangan"),v.value=!1},K=$(()=>w.inspection.customer&&w.inspection.customer.sellers&&(w.inspection.customer.sellers.find(m=>m.inspection_id===w.inspection.id)||w.inspection.customer.sellers[0])||null);return(m,s)=>(l(),N(re,null,{default:L(()=>[A(x(ie),{title:"Review Inspeksi"}),e("div",Ct,[s[38]||(s[38]=e("h3",{class:"text-xl md:text-3xl font-bold text-gray-900 mb-6 text-center"}," Inspeksi yang Harus Diselesaikan ",-1)),e("div",$t,[e("div",jt,[e("div",null,[e("div",It,[A(x(ce),{class:"h-5 w-5 text-blue-500 mr-2"}),s[14]||(s[14]=e("span",{class:"text-sm font-medium text-gray-600"},"Jadwal",-1))]),e("p",St,b(new Date(o.inspection.inspection_date).toLocaleDateString("id-ID",{weekday:"short",year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})),1)]),A(x(O),{href:m.route("inspection.log",o.encryptedIds),class:"text-xs font-semibold text-indigo-600 hover:underline"},{default:L(()=>s[15]||(s[15]=[I(" Lihat Log ")])),_:1,__:[15]},8,["href"])]),e("div",Dt,[e("div",At,[A(x(pe),{class:"h-5 w-5 text-gray-500 mr-2"}),e("div",Mt,[o.inspection.car?(l(),r("div",Tt,[I(b(`${o.inspection.car.brand.name} ${o.inspection.car.model.name} ${o.inspection.car.type.name} ${(o.inspection.car.cc/1e3).toFixed(1)} ${o.inspection.car.transmission} ${o.inspection.car.year}`)+" ",1),e("span",Vt,"("+b(o.inspection.car.fuel_type)+")",1)])):(l(),r("div",Bt,b(o.inspection.car_name),1))])]),e("div",Pt,[e("div",Lt,[s[16]||(s[16]=e("span",{class:"text-xs font-semibold uppercase tracking-wide text-gray-500 mr-2"},"NO POLISI:",-1)),e("span",Ot,b(o.inspection.plate_number),1)]),o.inspection.status==="draft"&&h.value?(l(),N(x(O),{key:0,href:m.route("coordinator.inspections.show",o.encryptedIds),class:"text-xs font-semibold text-indigo-600 hover:underline"},{default:L(()=>s[17]||(s[17]=[I(" Alihkan Tugas ")])),_:1,__:[17]},8,["href"])):f("",!0)])]),e("div",Ft,[e("div",Nt,[s[18]||(s[18]=e("h4",{class:"text-sm font-medium text-gray-700"},"Informasi Customer & Pembayaran ",-1)),!V.value&&!a.value?(l(),r("button",{key:0,onClick:E,class:"text-xs bg-blue-100 text-blue-700 px-2 py-1 rounded hover:bg-blue-200"},b(Y.value),1)):f("",!0)]),A(de,{customer:o.inspection.customer,seller:K.value,"show-edit-button":!a.value&&!V.value,inspection:o.inspection,"user-role":p.value,onEdit:E},null,8,["customer","seller","show-edit-button","inspection","user-role"]),A(je,{transaction:o.transaction,"show-edit-button":!a.value&&!V.value,onEdit:E},null,8,["transaction","show-edit-button"])]),e("div",zt,[s[21]||(s[21]=e("div",{class:"flex justify-between items-center mb-3"},[e("h4",{class:"text-sm font-medium text-gray-700"},"Informasi Inspektor")],-1)),o.inspection.user?(l(),r("div",Ut,[e("div",qt,[e("div",null,[e("p",Et,b(o.inspection.user.name),1),o.inspection.user.numberPhone?(l(),r("p",Ht,b(o.inspection.user.numberPhone),1)):f("",!0)]),o.inspection.user.numberPhone?(l(),r("a",{key:0,href:`https://wa.me/62${o.inspection.user.numberPhone.replace(/^0/,"")}`,target:"_blank",class:"text-blue-600 hover:text-blue-800 ml-2",title:"Hubungi via WhatsApp"},s[19]||(s[19]=[e("svg",{class:"w-6 h-6",fill:"currentColor",viewBox:"0 0 24 24"},[e("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c 0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893A11.821 11.821 0 0020.864 3.488"})],-1)]),8,Rt)):f("",!0)])])):(l(),r("div",Kt,s[20]||(s[20]=[e("p",{class:"text-xs text-yellow-700"},"Inspektor belum ditugaskan",-1)])))]),o.inspection.category?(l(),r("div",Wt,[s[22]||(s[22]=e("p",{class:"text-xs font-medium text-gray-500 tracking-wide"}," Kategori Inspeksi ",-1)),e("p",Gt,b(o.inspection.category.name),1)])):f("",!0),e("div",Jt,[e("div",Qt,[A(x(ve),{class:"h-5 w-5 text-green-500 mr-2"}),s[23]||(s[23]=e("span",{class:"text-sm font-medium text-gray-600"},"Status",-1))]),e("p",Yt,b(X(o.inspection.status)),1),(o.inspection.status==="approved"||o.inspection.status==="completed")&&o.inspection.file&&d.value?(l(),r("div",Xt,[s[25]||(s[25]=e("div",{class:"flex items-center mb-1"},[e("svg",{class:"h-5 w-5 text-blue-500 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})]),e("span",{class:"text-sm font-medium text-gray-600"},"ID Inspeksi (Untuk Buka File)")],-1)),e("p",Zt,[e("span",es,b(o.inspection.code),1),e("button",{onClick:s[0]||(s[0]=j=>Z(o.inspection.code)),class:"ml-2 text-blue-500 hover:text-blue-700",title:"Salin ID"},s[24]||(s[24]=[e("svg",{class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3"})],-1)]))])])):f("",!0),e("div",ts,[s[26]||(s[26]=e("p",{class:"text-xs font-medium text-gray-500 uppercase tracking-wide"}," Catatan ",-1)),e("p",ss,[e("div",{innerHTML:o.inspection.notes||"-"},null,8,ns)])])]),e("div",as,[o.inspection.status==="in_progress"?(l(),N(x(O),{key:0,href:m.route("inspections.review.pdf",o.encryptedIds),disabled:i.value,onClick:s[1]||(s[1]=j=>U(m.route("inspections.review.pdf",o.encryptedIds),"lihat_laporan")),class:D(["flex-1 inline-flex items-center justify-center px-3 py-2 bg-gradient-to-r from-indigo-700 to-sky-600 shadow-lg text-white font-medium rounded-md text-sm transition-colors hover:from-indigo-800 hover:to-sky-700",{"opacity-50 cursor-not-allowed":i.value&&C.value==="lihat_laporan"}])},{default:L(()=>[i.value&&C.value==="lihat_laporan"?(l(),r("span",os,s[27]||(s[27]=[e("svg",{class:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),I(" Memuat Halaman... ")]))):(l(),r("span",ls,"Lihat Proses Inspeksi"))]),_:1},8,["href","disabled","class"])):f("",!0),o.inspection.status==="pending_review"?(l(),r(F,{key:1},[e("button",{onClick:s[2]||(s[2]=j=>u.value=!0),class:"flex-2 px-3 py-2 bg-yellow-500 text-white font-medium rounded-md text-sm transition-colors hover:bg-yellow-600",disabled:i.value}," Revisi ",8,is),A(x(O),{href:m.route("inspections.review.pdf",o.encryptedIds),disabled:i.value,onClick:s[3]||(s[3]=j=>U(m.route("inspections.review.pdf",o.encryptedIds),"lihat_laporan")),class:D(["flex-1 inline-flex items-center justify-center px-3 py-2 bg-gradient-to-r from-indigo-700 to-sky-600 shadow-lg text-white font-medium rounded-md text-sm transition-colors hover:from-indigo-800 hover:to-sky-700",{"opacity-50 cursor-not-allowed":i.value&&C.value==="lihat_laporan"}])},{default:L(()=>[i.value&&C.value==="lihat_laporan"?(l(),r("span",rs,s[28]||(s[28]=[e("svg",{class:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),I(" Memuat Laporan... ")]))):(l(),r("span",ds,"Lihat Laporan PDF"))]),_:1},8,["href","disabled","class"])],64)):o.inspection.status==="approved"&&o.inspection.file?(l(),r(F,{key:2},[d.value?(l(),r("a",{key:0,href:m.route("inspections.download.approved.pdf",o.encryptedIds),onClick:s[4]||(s[4]=j=>R(m.route("inspections.download.approved.pdf",o.encryptedIds))),class:D(["flex-1 inline-flex items-center justify-center px-3 py-2 bg-blue-600 text-white font-medium rounded-md text-sm transition-colors hover:bg-blue-700",{"opacity-50 cursor-not-allowed":i.value&&C.value==="download"}]),disabled:i.value,download:""},[i.value&&C.value==="download"?(l(),r("span",ms,s[29]||(s[29]=[e("svg",{class:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),I(" Sedang di download... ")]))):(l(),r("span",cs,s[30]||(s[30]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 inline-block mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),I(" PDF ")])))],10,us)):(l(),r("div",ps,s[31]||(s[31]=[e("span",{class:"text-xs"},"Transaksi belum selesai",-1)]))),A(x(O),{href:m.route("inspections.whatsapp",o.encryptedIds),class:"flex-1 inline-flex items-center justify-center px-3 py-2 bg-green-600 text-white font-medium rounded-md text-sm transition-colors hover:bg-green-700"},{default:L(()=>s[32]||(s[32]=[e("svg",{class:"w-5 h-5 mr-2",fill:"currentColor",viewBox:"0 0 24 24"},[e("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893A11.821 11.821 0 0020.864 3.488"})],-1),I(" WhatsApp ")])),_:1,__:[32]},8,["href"]),e("button",{onClick:s[5]||(s[5]=j=>v.value=!0),class:"flex-1 inline-flex items-center justify-center px-3 py-2 bg-teal-500 text-white font-medium rounded-md text-sm transition-colors hover:bg-teal-600",disabled:i.value},s[33]||(s[33]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-4 h-4 mr-2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M21.75 6.75v10.5a2.25 2.25 0 0 1-2.25 2.25h-15a2.25 2.25 0 0 1-2.25 2.25V6.75m19.5 0A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25m19.5 0v.243a2.25 2.25 0 0 1-1.07 1.916l-7.5 4.615a2.25 2.25 0 0 1-2.36 0L3.32 8.91a2.25 2.25 0 0 1-1.07-1.916V6.75"})],-1),I(" Email ")]),8,vs)],64)):f("",!0),o.inspection.status==="completed"&&o.inspection.file&&h.value?(l(),r("a",{key:3,href:d.value?m.route("inspections.download.approved.pdf",o.encryptedIds):null,onClick:s[6]||(s[6]=j=>d.value&&R(m.route("inspections.download.approved.pdf",o.encryptedIds))),class:D(["flex-1 inline-flex items-center justify-center px-3 py-2 font-medium rounded-md text-sm transition-colors",[d.value?"bg-blue-600 text-white hover:bg-blue-700":"bg-gray-300 text-gray-500 cursor-not-allowed"]]),disabled:!d.value||i.value&&C.value==="download"},[i.value&&C.value==="download"?(l(),r("span",gs,s[34]||(s[34]=[e("svg",{class:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),I(" Sedang diunduh... ")]))):(l(),r("span",fs,[d.value?(l(),r(F,{key:0},[s[35]||(s[35]=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 inline-block mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)),s[36]||(s[36]=I(" Download PDF "))],64)):(l(),r(F,{key:1},[I(" PDF tersedia — selesaikan transaksi untuk mengunduh ")],64))]))],10,xs)):f("",!0)]),o.inspection.status==="approved"&&o.inspection.file?(l(),N(x(O),{key:1,href:m.route("inspections.review.pdf",o.encryptedIds),disabled:i.value,onClick:s[7]||(s[7]=j=>U(m.route("inspections.review.pdf",o.encryptedIds),"lihat_laporan")),class:D(["inline-flex items-center justify-center w-full px-3 py-2 bg-gradient-to-r from-indigo-700 to-sky-600 shadow-lg text-white font-medium rounded-md text-sm transition-colors hover:from-indigo-800 hover:to-sky-700",{"opacity-50 cursor-not-allowed":i.value&&C.value==="lihat_laporan"}])},{default:L(()=>[i.value&&C.value==="lihat_laporan"?(l(),r("span",bs,s[37]||(s[37]=[e("svg",{class:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),I(" Memuat Laporan... ")]))):(l(),r("span",ys,"Lihat Laporan"))]),_:1},8,["href","disabled","class"])):f("",!0)])]),g.value?(l(),N(kt,{key:0,show:g.value,"inspection-id":o.encryptedIds,"existing-customer":o.inspection.customer,"existing-seller":K.value,"existing-transaction":o.transaction,onClose:s[8]||(s[8]=j=>g.value=!1),onReopen:s[9]||(s[9]=j=>g.value=!0),onSaved:te},null,8,["show","inspection-id","existing-customer","existing-seller","existing-transaction"])):f("",!0),u.value?(l(),r("div",hs,[e("div",_s,[s[40]||(s[40]=e("h3",{class:"text-lg font-bold mb-4"},"Konfirmasi Revisi",-1)),s[41]||(s[41]=e("p",{class:"text-gray-700 mb-2"}," Apakah Anda yakin ingin revisi pada laporan ini? ",-1)),s[42]||(s[42]=e("p",{class:"text-gray-700 mb-4"},"Setelah ini akan masuk ke halaman Inspeksi.",-1)),e("div",ws,[e("button",{onClick:s[10]||(s[10]=j=>u.value=!1),disabled:i.value,class:"bg-gray-300 text-gray-800 px-4 py-2 rounded-md hover:bg-gray-400"}," Batal ",8,ks),A(x(O),{href:m.route("inspections.revisi",o.encryptedIds),disabled:i.value,onClick:s[11]||(s[11]=j=>U(m.route("inspections.revisi",o.encryptedIds),"revisi")),class:D(["bg-yellow-500 text-white px-4 py-2 rounded-md hover:bg-yellow-600",{"opacity-50 cursor-not-allowed":i.value&&C.value==="revisi"}])},{default:L(()=>[i.value&&C.value==="revisi"?(l(),r("span",Cs,s[39]||(s[39]=[e("svg",{class:"animate-spin h-5 w-5 text-white mr-2",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),I(" Memproses... ")]))):(l(),r("span",$s,"Ya, Revisi"))]),_:1},8,["href","disabled","class"])])])])):f("",!0),v.value?(l(),r("div",js,[e("div",Is,[s[43]||(s[43]=e("h3",{class:"text-lg font-bold mb-4"},"Kirim Laporan Via Email",-1)),s[44]||(s[44]=e("p",{class:"text-gray-700 mb-2"}," Masukkan alamat email tujuan: ",-1)),S(e("input",{type:"email","onUpdate:modelValue":s[12]||(s[12]=j=>t.value=j),class:"w-full px-3 py-2 border rounded-md focus:ring-indigo-500 focus:border-indigo-500",placeholder:"contoh@email.com"},null,512),[[M,t.value]]),e("div",Ss,[e("button",{onClick:s[13]||(s[13]=j=>v.value=!1),disabled:i.value,class:"bg-gray-300 text-gray-800 px-4 py-2 rounded-md hover:bg-gray-400"}," Batal ",8,Ds),e("button",{onClick:se,disabled:!0,class:"bg-teal-500 text-white px-4 py-2 rounded-md hover:bg-teal-600 opacity-50 cursor-not-allowed"}," Masih dalam pengembangan ")])])])):f("",!0)]),_:1}))}},Ns=me(As,[["__scopeId","data-v-0ce6da8a"]]);export{Ns as default};
